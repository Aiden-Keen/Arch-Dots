import{D as Bs,I as Ks,Ia as Hs,Ja as Gs,ba as Vs,f as ho,h as yo,n as un,o as go,t as bo,x as Ct}from"./chunk-OQCZPFI2.js";import{E as Is,F as Ls,Qb as Os,Sb as Us,j as Xe,ub as Ve}from"./chunk-KLKDJF5S.js";import{$ as ur,$b as wa,$d as br,A as Wd,Ab as Qt,Ac as fn,Ad as La,B as ln,Bb as da,C as _s,Cb as mr,Cc as Ma,Cd as Oa,Dc as So,Dd as Ua,Ed as Ba,F as To,Fb as fa,Fc as Na,G as ea,Gc as Da,Gd as I,Ge as hn,Hd as Je,He as $a,Ib as ma,Ic as ka,Id as yr,N as ta,O as na,Pb as pa,Pc as Ra,Pd as Ka,Qb as qt,Qd as Va,R as ra,Rc as Fa,Rd as Ha,Sd as gr,T as dn,U as oa,Uc as jt,V as vo,Vb as zd,W as ia,Wb as ha,X as sa,Xb as ya,Yb as ga,Yc as Ia,Yd as pn,Z as Ht,Zb as ba,_ as cr,_d as xo,aa as Gt,bc as Ea,bd as mn,ca as lr,cc as Ta,d as sr,da as dr,ea as aa,f as q,fa as ca,fc as va,g as Vt,ha as fr,ic as Aa,ie as Ga,j as me,je as Te,ka as Ao,ke as Qa,l as Qs,lc as Sa,le as qa,m as qs,md as hr,n as ar,o as js,oc as pr,p as $s,q as wo,qc as xa,qd as $t,r as Eo,re as wr,tc as Ca,te as Co,u as Ws,uc as Pa,v as zs,ve as ja,w as Ys,wb as ua,x as Xs,xb as Pt,y as Js,yb as la,z as Zs}from"./chunk-BQE2SXP7.js";import{$ as qe,$c as nr,Bc as te,Cc as K,Fc as B,Ib as ps,Kb as hs,Lb as x,Ld as mo,M as Fe,Md as Rs,Nb as le,Ob as ys,Pb as gs,Qb as bs,Qc as Ps,Rb as ze,Sa as Kd,Sb as oe,Sc as xt,Td as or,Ub as uo,Uc as ke,Ud as Fs,Vb as St,Yc as tr,Z as ms,_d as P,a as Od,aa as We,ad as Ms,b as Kt,ba as Zn,bd as Ns,c as Bd,cd as Ds,dc as ws,dd as Z,ec as Es,ed as ks,fc as _n,fd as Ye,he as Ke,id as F,jc as Ts,jd as rr,kc as vs,lc as mt,nc as As,pc as he,qa as At,qc as er,rc as lo,tc as fo,uc as Ss,v as fs,w as fe,xc as xs,yc as Cs}from"./chunk-L3JU23Z5.js";import{b as co,d as Ld,t as ls,u as ds}from"./chunk-5HNKNX3S.js";import{A as Qd,B as qd,Z as po,_ as ir,a as Q,b as Ud,d as V,e as Y,gb as $d,l as ne,q as Be,v as Vd,w as Hd,xa as jd,z as Gd}from"./chunk-R3MCCTIW.js";import{b as Yn,e as cn,f as Xn,h as re,k as Ue,l as Jn}from"./chunk-VL3IRAUM.js";import{A as zn,a as ft,g,n as $n,y as Wn}from"./chunk-FA7LVEFF.js";import{a as i,d as De,g as R,i as l,j as y,m as Buffer,n as d}from"./chunk-WKJYWAXG.js";var Wa=De((No,Do)=>{l();d();(function(e,t){typeof No=="object"&&typeof Do<"u"?Do.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_isToday=t()})(No,function(){"use strict";return function(e,t,n){t.prototype.isToday=function(){var r="YYYY-MM-DD",o=n();return this.format(r)===o.format(r)}}})});var za=De((ko,Ro)=>{l();d();(function(e,t){typeof ko=="object"&&typeof Ro<"u"?Ro.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_isYesterday=t()})(ko,function(){"use strict";return function(e,t,n){t.prototype.isYesterday=function(){var r="YYYY-MM-DD",o=n().subtract(1,"day");return this.format(r)===o.format(r)}}})});var Hc=De((uS,Vc)=>{l();d();var im=Vd(),sm=Hd(),am=jd(),cm=Qd(),um=Gd(),lm=qd(),dm=Object.prototype,fm=dm.hasOwnProperty,mm=am(function(e,t){if(um(t)||cm(t)){sm(t,lm(t),e);return}for(var n in t)fm.call(t,n)&&im(e,n,t[n])});Vc.exports=mm});var Fr=De(_=>{"use strict";l();d();Object.defineProperty(_,"__esModule",{value:!0});_.MULTIPLE_ACCOUNT_INFO_MAX=_.NAME_HOUSE_PREFIX=_.TLD_HOUSE_PREFIX=_.NFT_RECORD_PREFIX=_.TOKEN_METADATA_PROGRAM_ID=_.SPL_TOKEN_PROGRAM_ID=_.NAME_HOUSE_PROGRAM_ID=_.TLD_HOUSE_PROGRAM_ID=_.ANS_PROGRAM_ID=_.ORIGIN_TLD=_.MAIN_DOMAIN_PREFIX=void 0;var kn=Kt();_.MAIN_DOMAIN_PREFIX="main_domain";_.ORIGIN_TLD="ANS";_.ANS_PROGRAM_ID=new kn.PublicKey("ALTNSZ46uaAUU7XUV6awvdorLGqAsPwa9shm7h4uP2FK");_.TLD_HOUSE_PROGRAM_ID=new kn.PublicKey("TLDHkysf5pCnKsVA4gXpNvmy7psXLPEu4LAdDJthT9S");_.NAME_HOUSE_PROGRAM_ID=new kn.PublicKey("NH3uX6FtVE2fNREAioP7hm5RaozotZxeL6khU1EHx51");_.SPL_TOKEN_PROGRAM_ID=new kn.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");_.TOKEN_METADATA_PROGRAM_ID=new kn.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");_.NFT_RECORD_PREFIX="nft_record";_.TLD_HOUSE_PREFIX="tld_house";_.NAME_HOUSE_PREFIX="name_house";_.MULTIPLE_ACCOUNT_INFO_MAX=100});var Eu=De(z=>{"use strict";l();d();var jm=z&&z.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:i(function(){return t[n]},"get")})}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),$m=z&&z.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),_e=z&&z.__decorate||function(e,t,n,r){var o=arguments.length,s=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(s=(o<3?a(s):o>3?a(t,n,s):a(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Wm=z&&z.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&jm(t,e,n);return $m(t,e),t},yu=z&&z.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(z,"__esModule",{value:!0});z.deserializeUnchecked=z.deserialize=z.serialize=z.BinaryReader=z.BinaryWriter=z.BorshError=z.baseDecode=z.baseEncode=void 0;var yt=yu(co()),gu=yu(Ld()),zm=Wm(Od()),Ym=typeof self.TextDecoder!="function"?zm.TextDecoder:self.TextDecoder,Xm=new Ym("utf-8",{fatal:!0});function Jm(e){return typeof e=="string"&&(e=Buffer.from(e,"utf8")),gu.default.encode(Buffer.from(e))}i(Jm,"baseEncode");z.baseEncode=Jm;function Zm(e){return Buffer.from(gu.default.decode(e))}i(Zm,"baseDecode");z.baseDecode=Zm;var ai=1024,ye=class extends Error{static{i(this,"BorshError")}constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};z.BorshError=ye;var Ir=class{static{i(this,"BinaryWriter")}constructor(){this.buf=Buffer.alloc(ai),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(ai)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new yt.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new yt.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new yt.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new yt.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(ai)]),this.length+=t.length}writeString(t){this.maybeResize();let n=Buffer.from(t,"utf8");this.writeU32(n.length),this.writeBuffer(n)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,n){this.maybeResize(),this.writeU32(t.length);for(let r of t)this.maybeResize(),n(r)}toArray(){return this.buf.subarray(0,this.length)}};z.BinaryWriter=Ir;function et(e,t,n){let r=n.value;n.value=function(...o){try{return r.apply(this,o)}catch(s){if(s instanceof RangeError){let a=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(a)>=0)throw new ye("Reached the end of buffer when deserializing")}throw s}}}i(et,"handlingRangeError");var Pe=class{static{i(this,"BinaryReader")}constructor(t){this.buf=t,this.offset=0}readU8(){let t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){let t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){let t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){let t=this.readBuffer(8);return new yt.default(t,"le")}readU128(){let t=this.readBuffer(16);return new yt.default(t,"le")}readU256(){let t=this.readBuffer(32);return new yt.default(t,"le")}readU512(){let t=this.readBuffer(64);return new yt.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new ye(`Expected buffer length ${t} isn't within bounds`);let n=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,n}readString(){let t=this.readU32(),n=this.readBuffer(t);try{return Xm.decode(n)}catch(r){throw new ye(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){let n=this.readU32(),r=Array();for(let o=0;o<n;++o)r.push(t());return r}};_e([et],Pe.prototype,"readU8",null);_e([et],Pe.prototype,"readU16",null);_e([et],Pe.prototype,"readU32",null);_e([et],Pe.prototype,"readU64",null);_e([et],Pe.prototype,"readU128",null);_e([et],Pe.prototype,"readU256",null);_e([et],Pe.prototype,"readU512",null);_e([et],Pe.prototype,"readString",null);_e([et],Pe.prototype,"readFixedArray",null);_e([et],Pe.prototype,"readArray",null);z.BinaryReader=Pe;function bu(e){return e.charAt(0).toUpperCase()+e.slice(1)}i(bu,"capitalizeFirstLetter");function Rn(e,t,n,r,o){try{if(typeof r=="string")o[`write${bu(r)}`](n);else if(r instanceof Array)if(typeof r[0]=="number"){if(n.length!==r[0])throw new ye(`Expecting byte array of length ${r[0]}, but got ${n.length} bytes`);o.writeFixedArray(n)}else if(r.length===2&&typeof r[1]=="number"){if(n.length!==r[1])throw new ye(`Expecting byte array of length ${r[1]}, but got ${n.length} bytes`);for(let s=0;s<r[1];s++)Rn(e,null,n[s],r[0],o)}else o.writeArray(n,s=>{Rn(e,t,s,r[0],o)});else if(r.kind!==void 0)switch(r.kind){case"option":{n==null?o.writeU8(0):(o.writeU8(1),Rn(e,t,n,r.type,o));break}default:throw new ye(`FieldType ${r} unrecognized`)}else wu(e,n,o)}catch(s){throw s instanceof ye&&s.addToFieldPath(t),s}}i(Rn,"serializeField");function wu(e,t,n){if(typeof t.borshSerialize=="function"){t.borshSerialize(n);return}let r=e.get(t.constructor);if(!r)throw new ye(`Class ${t.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([o,s])=>{Rn(e,o,t[o],s,n)});else if(r.kind==="enum"){let o=t[r.field];for(let s=0;s<r.values.length;++s){let[a,c]=r.values[s];if(a===o){n.writeU8(s),Rn(e,a,t[a],c,n);break}}}else throw new ye(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}i(wu,"serializeStruct");function _m(e,t,n=Ir){let r=new n;return wu(e,t,r),r.toArray()}i(_m,"serialize");z.serialize=_m;function Fn(e,t,n,r){try{if(typeof n=="string")return r[`read${bu(n)}`]();if(n instanceof Array){if(typeof n[0]=="number")return r.readFixedArray(n[0]);if(typeof n[1]=="number"){let o=[];for(let s=0;s<n[1];s++)o.push(Fn(e,null,n[0],r));return o}else return r.readArray(()=>Fn(e,t,n[0],r))}return n.kind==="option"?r.readU8()?Fn(e,t,n.type,r):void 0:ci(e,n,r)}catch(o){throw o instanceof ye&&o.addToFieldPath(t),o}}i(Fn,"deserializeField");function ci(e,t,n){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(n);let r=e.get(t);if(!r)throw new ye(`Class ${t.name} is missing in schema`);if(r.kind==="struct"){let o={};for(let[s,a]of e.get(t).fields)o[s]=Fn(e,s,a,n);return new t(o)}if(r.kind==="enum"){let o=n.readU8();if(o>=r.values.length)throw new ye(`Enum index: ${o} is out of range`);let[s,a]=r.values[o],c=Fn(e,s,a,n);return new t({[s]:c})}throw new ye(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}i(ci,"deserializeStruct");function ep(e,t,n,r=Pe){let o=new r(n),s=ci(e,t,o);if(o.offset<n.length)throw new ye(`Unexpected ${n.length-o.offset} bytes after deserialized data`);return s}i(ep,"deserialize");z.deserialize=ep;function tp(e,t,n,r=Pe){let o=new r(n);return ci(e,t,o)}i(tp,"deserializeUnchecked");z.deserializeUnchecked=tp});var Lr=De(Jt=>{"use strict";l();d();var Tu=Jt&&Jt.__awaiter||function(e,t,n,r){function o(s){return s instanceof n?s:new n(function(a){a(s)})}return i(o,"adopt"),new(n||(n=Promise))(function(s,a){function c(m){try{u(r.next(m))}catch(p){a(p)}}i(c,"fulfilled");function f(m){try{u(r.throw(m))}catch(p){a(p)}}i(f,"rejected");function u(m){m.done?s(m.value):o(m.value).then(c,f)}i(u,"step"),u((r=r.apply(e,t||[])).next())})};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.NameRecordHeader=void 0;var ui=Kt(),In=Eu(),It=class e{static{i(this,"NameRecordHeader")}constructor(t){this.parentName=new ui.PublicKey(t.parentName),this.nclass=new ui.PublicKey(t.nclass),this.expiresAt=new Date(new In.BinaryReader(Buffer.from(t.expiresAt)).readU64().toNumber()*1e3),this.createdAt=new Date(new In.BinaryReader(Buffer.from(t.createdAt)).readU64().toNumber()*1e3),this.nonTransferable=t.nonTransferable[0]!==0;let n=45*24*60*60*1e3;this.isValid=new In.BinaryReader(Buffer.from(t.expiresAt)).readU64().toNumber()===0?!0:this.expiresAt.getTime()+n>new Date(Date.now()).getTime(),this.owner=this.isValid?new ui.PublicKey(t.owner):void 0}static get byteSize(){return 200}static fromAccountAddress(t,n){var r;return Tu(this,void 0,void 0,function*(){let o=yield t.getAccountInfo(n,"confirmed");if(!o)return;let s=(0,In.deserializeUnchecked)(this.schema,e,o.data);return s.data=(r=o.data)===null||r===void 0?void 0:r.subarray(this.byteSize),s})}static fromMultipileAccountAddresses(t,n){return Tu(this,void 0,void 0,function*(){let r=yield t.getMultipleAccountsInfo(n),o=[];return r.forEach(s=>{if(!s){o.push(void 0);return}let a=this.fromAccountInfo(s);if(!a){o.push(void 0);return}o.push(a)}),o})}static fromAccountInfo(t){var n;let r=(0,In.deserializeUnchecked)(this.schema,e,t.data);return r.data=(n=t.data)===null||n===void 0?void 0:n.subarray(this.byteSize),r}pretty(){var t;let n=this.data.indexOf(0);return{parentName:this.parentName.toBase58(),owner:(t=this.owner)===null||t===void 0?void 0:t.toBase58(),nclass:this.nclass.toBase58(),expiresAt:this.expiresAt,createdAt:this.createdAt,nonTransferable:this.nonTransferable,isValid:this.isValid,data:this.isValid?this.data.subarray(0,n).toString():void 0}}};Jt.NameRecordHeader=It;It.DISCRIMINATOR=[68,72,88,44,15,167,103,243];It.HASH_PREFIX="ALT Name Service";It.schema=new Map([[It,{kind:"struct",fields:[["discriminator",[8]],["parentName",[32]],["owner",[32]],["nclass",[32]],["expiresAt",[8]],["createdAt",[8]],["nonTransferable",[1]],["padding",[79]]]}]])});var li=De(Ie=>{"use strict";l();d();var np=Ie&&Ie.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:i(function(){return t[n]},"get")}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),rp=Ie&&Ie.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),op=Ie&&Ie.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&np(t,e,n);return rp(t,e),t};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.tagBeet=Ie.Tag=void 0;var ip=op(To()),vu;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.ActiveRecord=1]="ActiveRecord",e[e.InactiveRecord=2]="InactiveRecord"})(vu=Ie.Tag||(Ie.Tag={}));Ie.tagBeet=ip.fixedScalarEnum(vu)});var di=De(ue=>{"use strict";l();d();var sp=ue&&ue.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:i(function(){return t[n]},"get")}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),ap=ue&&ue.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Su=ue&&ue.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&sp(t,e,n);return ap(t,e),t},Au=ue&&ue.__awaiter||function(e,t,n,r){function o(s){return s instanceof n?s:new n(function(a){a(s)})}return i(o,"adopt"),new(n||(n=Promise))(function(s,a){function c(m){try{u(r.next(m))}catch(p){a(p)}}i(c,"fulfilled");function f(m){try{u(r.throw(m))}catch(p){a(p)}}i(f,"rejected");function u(m){m.done?s(m.value):o(m.value).then(c,f)}i(u,"step"),u((r=r.apply(e,t||[])).next())})};Object.defineProperty(ue,"__esModule",{value:!0});ue.nftRecordBeet=ue.NftRecord=ue.nftRecordDiscriminator=void 0;var Or=Su(To()),Ur=Su(ea()),xu=li();ue.nftRecordDiscriminator=[174,190,114,100,177,14,90,254];var Br=class e{static{i(this,"NftRecord")}constructor(t,n,r,o,s,a){this.tag=t,this.bump=n,this.nameAccount=r,this.owner=o,this.nftMintAccount=s,this.tldHouse=a}static fromArgs(t){return new e(t.tag,t.bump,t.nameAccount,t.owner,t.nftMintAccount,t.tldHouse)}static fromAccountInfo(t,n=0){return e.deserialize(t.data,n)}static fromAccountAddress(t,n){return Au(this,void 0,void 0,function*(){let r=yield t.getAccountInfo(n);if(r==null)throw new Error(`Unable to find NftRecord account at ${n}`);return e.fromAccountInfo(r,0)[0]})}static deserialize(t,n=0){return ue.nftRecordBeet.deserialize(t,n)}serialize(){return ue.nftRecordBeet.serialize(Object.assign({accountDiscriminator:ue.nftRecordDiscriminator},this))}static get byteSize(){return ue.nftRecordBeet.byteSize}static getMinimumBalanceForRentExemption(t,n){return Au(this,void 0,void 0,function*(){return yield t.getMinimumBalanceForRentExemption(e.byteSize,n)})}static hasCorrectByteSize(t,n=0){return t.byteLength-n===e.byteSize}pretty(){return{tag:"Tag."+xu.Tag[this.tag],bump:this.bump,nameAccount:this.nameAccount.toBase58(),owner:this.owner.toBase58(),nftMintAccount:this.nftMintAccount.toBase58(),tldHouse:this.tldHouse.toBase58()}}};ue.NftRecord=Br;ue.nftRecordBeet=new Or.BeetStruct([["accountDiscriminator",Or.uniformFixedSizeArray(Or.u8,8)],["tag",xu.tagBeet],["bump",Or.u8],["nameAccount",Ur.publicKey],["owner",Ur.publicKey],["nftMintAccount",Ur.publicKey],["tldHouse",Ur.publicKey]],Br.fromArgs,"NftRecord")});var Kr=De(U=>{"use strict";l();d();var je=U&&U.__awaiter||function(e,t,n,r){function o(s){return s instanceof n?s:new n(function(a){a(s)})}return i(o,"adopt"),new(n||(n=Promise))(function(s,a){function c(m){try{u(r.next(m))}catch(p){a(p)}}i(c,"fulfilled");function f(m){try{u(r.throw(m))}catch(p){a(p)}}i(f,"rejected");function u(m){m.done?s(m.value):o(m.value).then(c,f)}i(u,"step"),u((r=r.apply(e,t||[])).next())})};Object.defineProperty(U,"__esModule",{value:!0});U.splitDomainTld=U.getParsedAllDomainsNftAccountsByOwner=U.delay=U.performReverseLookupBatched=U.findMetadataAddress=U.findNameHouse=U.findTldHouse=U.findNftRecord=U.getMintOwner=U.findAllDomainsForTld=U.getParentAccountFromTldHouseAccountInfo=U.getTldFromTldHouseAccountInfo=U.getAllTld=U.findMainDomain=U.findOwnedNameAccountsForUser=U.getOriginNameAccountKey=U.getHashedName=U.getNameOwner=U.getNameAccountKeyWithBump=void 0;var Qe=Kt(),cp=co(),up=Kd(),xe=Fr(),fi=Lr(),lp=li(),dp=di();function mi(e,t,n){let r=[e,t?t.toBuffer():Buffer.alloc(32),n?n.toBuffer():Buffer.alloc(32)];return Qe.PublicKey.findProgramAddressSync(r,xe.ANS_PROGRAM_ID)}i(mi,"getNameAccountKeyWithBump");U.getNameAccountKeyWithBump=mi;function fp(e,t,n){return je(this,void 0,void 0,function*(){let r=yield fi.NameRecordHeader.fromAccountAddress(e,t),o=r.owner;if(!r.isValid)return;if(!n)return o;let[s]=Du(n),[a]=Nu(t,s);return o?.toBase58()!==a.toBase58()?o:yield Mu(e,a)})}i(fp,"getNameOwner");U.getNameOwner=fp;function pi(e){return je(this,void 0,void 0,function*(){let t=fi.NameRecordHeader.HASH_PREFIX+e,n=(0,up.sha256)(Buffer.from(t,"utf8")).slice(2);return Buffer.from(n,"hex")})}i(pi,"getHashedName");U.getHashedName=pi;function mp(e=xe.ORIGIN_TLD){return je(this,void 0,void 0,function*(){let t=yield pi(e),[n]=mi(t,void 0,void 0);return n})}i(mp,"getOriginNameAccountKey");U.getOriginNameAccountKey=mp;function pp(e,t,n){return je(this,void 0,void 0,function*(){let r=[{memcmp:{offset:40,bytes:t.toBase58(),encoding:"base58"}}];return n&&r.push({memcmp:{offset:8,bytes:n.toBase58(),encoding:"base58"}}),(yield e.getProgramAccounts(xe.ANS_PROGRAM_ID,{filters:r})).map(s=>s.pubkey)})}i(pp,"findOwnedNameAccountsForUser");U.findOwnedNameAccountsForUser=pp;function hp(e){return Qe.PublicKey.findProgramAddressSync([Buffer.from(xe.MAIN_DOMAIN_PREFIX),e.toBuffer()],xe.TLD_HOUSE_PROGRAM_ID)}i(hp,"findMainDomain");U.findMainDomain=hp;function yp(e){return je(this,void 0,void 0,function*(){let n=[{memcmp:{offset:0,bytes:[247,144,135,1,238,173,19,249],encoding:"binary"}}],r=yield e.getProgramAccounts(xe.TLD_HOUSE_PROGRAM_ID,{filters:n}),o=[];return r.map(({account:s})=>{let a=Pu(s),c=Cu(s);o.push({tld:c,parentAccount:a})}),o})}i(yp,"getAllTld");U.getAllTld=yp;function Cu(e){var t;let r=(t=e?.data)===null||t===void 0?void 0:t.subarray(104),o=new cp.BN(r?.subarray(0,4),"le").toNumber();return r.subarray(4,4+o).toString().replace(/\0.*$/g,"")}i(Cu,"getTldFromTldHouseAccountInfo");U.getTldFromTldHouseAccountInfo=Cu;function Pu(e){var t;let r=(t=e?.data)===null||t===void 0?void 0:t.subarray(72,104);return new Qe.PublicKey(r)}i(Pu,"getParentAccountFromTldHouseAccountInfo");U.getParentAccountFromTldHouseAccountInfo=Pu;function gp(e,t){return je(this,void 0,void 0,function*(){let n=[{memcmp:{offset:8,bytes:t.toBase58(),encoding:"base58"}}];return(yield e.getProgramAccounts(xe.ANS_PROGRAM_ID,{filters:n})).map(o=>o.pubkey)})}i(gp,"findAllDomainsForTld");U.findAllDomainsForTld=gp;function Mu(e,t){return je(this,void 0,void 0,function*(){try{let n=yield dp.NftRecord.fromAccountAddress(e,t);if(n.tag!==lp.Tag.ActiveRecord)return;let r=yield e.getTokenLargestAccounts(n.nftMintAccount),o=yield e.getParsedAccountInfo(r.value[0].address);return o.value.data?new Qe.PublicKey(o.value.data.parsed.info.owner):void 0}catch{return}})}i(Mu,"getMintOwner");U.getMintOwner=Mu;function Nu(e,t){return Qe.PublicKey.findProgramAddressSync([Buffer.from(xe.NFT_RECORD_PREFIX),t.toBuffer(),e.toBuffer()],xe.NAME_HOUSE_PROGRAM_ID)}i(Nu,"findNftRecord");U.findNftRecord=Nu;function bp(e){return e=e.toLowerCase(),Qe.PublicKey.findProgramAddressSync([Buffer.from(xe.TLD_HOUSE_PREFIX),Buffer.from(e)],xe.TLD_HOUSE_PROGRAM_ID)}i(bp,"findTldHouse");U.findTldHouse=bp;function Du(e){return Qe.PublicKey.findProgramAddressSync([Buffer.from(xe.NAME_HOUSE_PREFIX),e.toBuffer()],xe.NAME_HOUSE_PROGRAM_ID)}i(Du,"findNameHouse");U.findNameHouse=Du;var wp=i(e=>Qe.PublicKey.findProgramAddressSync([Buffer.from("metadata"),xe.TOKEN_METADATA_PROGRAM_ID.toBuffer(),e.toBuffer()],xe.TOKEN_METADATA_PROGRAM_ID)[0],"findMetadataAddress");U.findMetadataAddress=wp;function Ep(e,t,n){return je(this,void 0,void 0,function*(){let r=t.map(a=>je(this,void 0,void 0,function*(){let c=yield pi(a.toBase58()),[f]=mi(c,n,void 0);return f})),o=yield Promise.all(r);return(yield e.getMultipleAccountsInfo(o)).map(a=>a?.data.subarray(fi.NameRecordHeader.byteSize,a?.data.length).toString())})}i(Ep,"performReverseLookupBatched");U.performReverseLookupBatched=Ep;function Tp(e){return new Promise(t=>setTimeout(t,e))}i(Tp,"delay");U.delay=Tp;var vp=i((e,t,n)=>je(void 0,void 0,void 0,function*(){let{value:r}=yield t.getParsedTokenAccountsByOwner(e,{programId:xe.SPL_TOKEN_PROGRAM_ID}),o=r.filter(a=>{var c,f,u,m,p,h,b,w,E,v;let k=(p=(m=(u=(f=(c=a.account)===null||c===void 0?void 0:c.data)===null||f===void 0?void 0:f.parsed)===null||u===void 0?void 0:u.info)===null||m===void 0?void 0:m.tokenAmount)===null||p===void 0?void 0:p.uiAmount;return((v=(E=(w=(b=(h=a.account)===null||h===void 0?void 0:h.data)===null||b===void 0?void 0:b.parsed)===null||w===void 0?void 0:w.info)===null||E===void 0?void 0:E.tokenAmount)===null||v===void 0?void 0:v.decimals)===0&&k===1}).map(a=>{var c,f,u,m;return(m=(u=(f=(c=a.account)===null||c===void 0?void 0:c.data)===null||f===void 0?void 0:f.parsed)===null||u===void 0?void 0:u.info)===null||m===void 0?void 0:m.mint});return yield Ap(o,t,n)}),"getParsedAllDomainsNftAccountsByOwner");U.getParsedAllDomainsNftAccountsByOwner=vp;var Ap=i((e,t,n)=>je(void 0,void 0,void 0,function*(){let r=[];if(e.length>100)for(;e.length>0;){let a=e.splice(0,100).map(f=>(0,U.findMetadataAddress)(new Qe.PublicKey(f))),c=yield t.getMultipleAccountsInfo(a);for(let f of c)if(f){let u=new Qe.PublicKey(f.data.subarray(326,358));if(!!f.data.subarray(326,327)&&u.toString()===n.toString()){let p=f.data.subarray(66,101).toString().replace(/\u0000/g,"");r.push(p)}}}else{let a=e.map(f=>(0,U.findMetadataAddress)(new Qe.PublicKey(f))),c=yield t.getMultipleAccountsInfo(a);for(let f of c)if(f){let u=new Qe.PublicKey(f.data.subarray(326,358));if(!!f.data.subarray(326,327)&&u.toString()===n.toString()){let p=f.data.subarray(66,101).toString().replace(/\u0000/g,"");r.push(p)}}}return r}),"getOwnedDomains");function Sp(e){let t=e.split("."),n="",r="",o="";return t.length===1?r=t[0]:(n="."+t[t.length-1],r=t[t.length-2],o=t.slice(0,t.length-2).join(".")),[n,r,o]}i(Sp,"splitDomainTld");U.splitDomainTld=Sp});var yi=De(ie=>{"use strict";l();d();var xp=ie&&ie.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:i(function(){return t[n]},"get")}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Cp=ie&&ie.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),hi=ie&&ie.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&xp(t,e,n);return Cp(t,e),t},ku=ie&&ie.__awaiter||function(e,t,n,r){function o(s){return s instanceof n?s:new n(function(a){a(s)})}return i(o,"adopt"),new(n||(n=Promise))(function(s,a){function c(m){try{u(r.next(m))}catch(p){a(p)}}i(c,"fulfilled");function f(m){try{u(r.throw(m))}catch(p){a(p)}}i(f,"rejected");function u(m){m.done?s(m.value):o(m.value).then(c,f)}i(u,"step"),u((r=r.apply(e,t||[])).next())})};Object.defineProperty(ie,"__esModule",{value:!0});ie.mainDomainBeet=ie.MainDomain=ie.mainDomainDiscriminator=void 0;var Pp=hi(Kt()),Ru=hi(ea()),Ln=hi(To());ie.mainDomainDiscriminator=[109,239,227,199,98,226,66,175];var Vr=class e{static{i(this,"MainDomain")}constructor(t,n,r){this.nameAccount=t,this.tld=n,this.domain=r}static fromArgs(t){return new e(t.nameAccount,t.tld,t.domain)}static fromAccountInfo(t,n=0){return e.deserialize(t.data,n)}static fromAccountAddress(t,n,r){return ku(this,void 0,void 0,function*(){let o=yield t.getAccountInfo(n,r);if(o==null)throw new Error(`Unable to find MainDomain account at ${n}`);return e.fromAccountInfo(o,0)[0]})}static gpaBuilder(t=new Pp.PublicKey("TLDHkysf5pCnKsVA4gXpNvmy7psXLPEu4LAdDJthT9S")){return Ru.GpaBuilder.fromStruct(t,ie.mainDomainBeet)}static deserialize(t,n=0){return ie.mainDomainBeet.deserialize(t,n)}serialize(){return ie.mainDomainBeet.serialize(Object.assign({accountDiscriminator:ie.mainDomainDiscriminator},this))}static byteSize(t){let n=e.fromArgs(t);return ie.mainDomainBeet.toFixedFromValue(Object.assign({accountDiscriminator:ie.mainDomainDiscriminator},n)).byteSize}static getMinimumBalanceForRentExemption(t,n,r){return ku(this,void 0,void 0,function*(){return yield n.getMinimumBalanceForRentExemption(e.byteSize(t),r)})}pretty(){return{nameAccount:this.nameAccount.toBase58(),tld:this.tld,domain:this.domain}}};ie.MainDomain=Vr;ie.mainDomainBeet=new Ln.FixableBeetStruct([["accountDiscriminator",Ln.uniformFixedSizeArray(Ln.u8,8)],["nameAccount",Ru.publicKey],["tld",Ln.utf8String],["domain",Ln.utf8String]],Vr.fromArgs,"MainDomain")});var bi=De(Zt=>{"use strict";l();d();var Fu=Zt&&Zt.__awaiter||function(e,t,n,r){function o(s){return s instanceof n?s:new n(function(a){a(s)})}return i(o,"adopt"),new(n||(n=Promise))(function(s,a){function c(m){try{u(r.next(m))}catch(p){a(p)}}i(c,"fulfilled");function f(m){try{u(r.throw(m))}catch(p){a(p)}}i(f,"rejected");function u(m){m.done?s(m.value):o(m.value).then(c,f)}i(u,"step"),u((r=r.apply(e,t||[])).next())})};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.getDomainKey=void 0;var gi=Kr(),Mp=i((e,t=!1)=>Fu(void 0,void 0,void 0,function*(){let n=e.split(".");if(n.length===3){let c="."+n[2],f=n[1],u=n[0],{pubkey:m}=yield lt(c),{pubkey:p}=yield lt(f,m),b=Buffer.from([t?1:0]).toString().concat(u),w=yield lt(b,p);return Object.assign(Object.assign({},w),{isSub:!0,parent:p})}else if(n.length===4&&t){let c="."+n[3],f=n[2],u=n[1],m=n[0],{pubkey:p}=yield lt(c),{pubkey:h}=yield lt(f,p),{pubkey:b}=yield lt("\0".concat(u),h),w=Buffer.from([1]).toString(),E=yield lt(w.concat(m),b);return Object.assign(Object.assign({},E),{isSub:!0,parent:h,isSubRecord:!0})}else if(n.length>4)throw new Error("Invalid derivation input");let r="."+n[1],{pubkey:o}=yield lt(r),s=n[0],a=yield lt(s,o);return Object.assign(Object.assign({},a),{isSub:!1,parent:void 0})}),"getDomainKey");Zt.getDomainKey=Mp;var lt=i((e,t)=>Fu(void 0,void 0,void 0,function*(){t||(t=yield(0,gi.getOriginNameAccountKey)());let n=yield(0,gi.getHashedName)(e),[r]=yield(0,gi.getNameAccountKeyWithBump)(n,void 0,t);return{pubkey:r,hashed:n}}),"_getNameAccount")});var Lu=De(_t=>{"use strict";l();d();var Le=_t&&_t.__awaiter||function(e,t,n,r){function o(s){return s instanceof n?s:new n(function(a){a(s)})}return i(o,"adopt"),new(n||(n=Promise))(function(s,a){function c(m){try{u(r.next(m))}catch(p){a(p)}}i(c,"fulfilled");function f(m){try{u(r.throw(m))}catch(p){a(p)}}i(f,"rejected");function u(m){m.done?s(m.value):o(m.value).then(c,f)}i(u,"step"),u((r=r.apply(e,t||[])).next())})};Object.defineProperty(_t,"__esModule",{value:!0});_t.TldParser=void 0;var tt=Kt(),Np=co(),Dp=yi(),wi=Lr(),L=Kr(),gt=Fr(),Iu=bi(),Ei=class{static{i(this,"TldParser")}constructor(t){this.connection=t}getAllUserDomains(t){return Le(this,void 0,void 0,function*(){return typeof t=="string"&&(t=new tt.PublicKey(t)),yield(0,L.findOwnedNameAccountsForUser)(this.connection,t,void 0)})}getAllUserDomainsFromTld(t,n){return Le(this,void 0,void 0,function*(){let r="."+n,o=yield(0,L.getOriginNameAccountKey)(),s=yield(0,L.getHashedName)(r),[a]=(0,L.getNameAccountKeyWithBump)(s,void 0,o);return typeof t=="string"&&(t=new tt.PublicKey(t)),yield(0,L.findOwnedNameAccountsForUser)(this.connection,t,a)})}getOwnerFromDomainTld(t){return Le(this,void 0,void 0,function*(){let n=t.split("."),r=n[0],o="."+n[1],s=yield(0,L.getOriginNameAccountKey)(),a=yield(0,L.getHashedName)(o),[c]=(0,L.getNameAccountKeyWithBump)(a,void 0,s),f=yield(0,L.getHashedName)(r),[u]=(0,L.getNameAccountKeyWithBump)(f,void 0,c),[m]=(0,L.findTldHouse)(o);return yield(0,L.getNameOwner)(this.connection,u,m)})}getNameRecordFromDomainTld(t){return Le(this,void 0,void 0,function*(){let n=t.split("."),r=n[0],o="."+n[1],s=yield(0,L.getOriginNameAccountKey)(),a=yield(0,L.getHashedName)(o),[c]=(0,L.getNameAccountKeyWithBump)(a,void 0,s),f=yield(0,L.getHashedName)(r),[u]=(0,L.getNameAccountKeyWithBump)(f,void 0,c);return yield wi.NameRecordHeader.fromAccountAddress(this.connection,u)})}getTldFromParentAccount(t){var n;return Le(this,void 0,void 0,function*(){typeof t=="string"&&(t=new tt.PublicKey(t));let r=yield wi.NameRecordHeader.fromAccountAddress(this.connection,t),o=yield this.connection.getAccountInfo(r?.owner),a=(n=o?.data)===null||n===void 0?void 0:n.subarray(104),c=new Np.BN(a?.subarray(0,4),"le").toNumber();return a.subarray(4,4+c).toString().replace(/\0.*$/g,"")})}reverseLookupNameAccount(t,n){var r;return Le(this,void 0,void 0,function*(){typeof t=="string"&&(t=new tt.PublicKey(t)),typeof n=="string"&&(n=new tt.PublicKey(n));let o=yield(0,L.getHashedName)(t.toString()),[s]=(0,L.getNameAccountKeyWithBump)(o,n,void 0),a=yield wi.NameRecordHeader.fromAccountAddress(this.connection,s);return(r=a?.data)===null||r===void 0?void 0:r.toString()})}getMainDomain(t){return Le(this,void 0,void 0,function*(){typeof t=="string"&&(t=new tt.PublicKey(t));let[n]=(0,L.findMainDomain)(t);return yield Dp.MainDomain.fromAccountAddress(this.connection,n)})}getParsedAllUserDomainsFromTldUnwrapped(t,n){return Le(this,void 0,void 0,function*(){let r="."+n,o=yield(0,L.getOriginNameAccountKey)(),s=yield(0,L.getHashedName)(r),[a]=(0,L.findTldHouse)(r),[c]=(0,L.getNameAccountKeyWithBump)(s,void 0,o);typeof t=="string"&&(t=new tt.PublicKey(t));let f=yield(0,L.findOwnedNameAccountsForUser)(this.connection,t,c),u=[];for(let m=0;m<f.length;m+=gt.MULTIPLE_ACCOUNT_INFO_MAX){yield(0,L.delay)(100);let p=Math.min(m+gt.MULTIPLE_ACCOUNT_INFO_MAX,f.length),h=f.slice(m,p),w=(yield(0,L.performReverseLookupBatched)(this.connection,h,a)).map((E,v)=>({nameAccount:h[v],domain:E+r}));w.length>0&&w.sort((E,v)=>E.domain.localeCompare(v.domain,void 0,{numeric:!0,sensitivity:"base"})),u.push(...w)}return u})}getParsedAllUserDomainsFromTld(t,n){return Le(this,void 0,void 0,function*(){let r="."+n,o=yield(0,L.getOriginNameAccountKey)(),s=yield(0,L.getHashedName)(r),[a]=(0,L.findTldHouse)(r),[c]=(0,L.getNameAccountKeyWithBump)(s,void 0,o);typeof t=="string"&&(t=new tt.PublicKey(t));let f=yield(0,L.findOwnedNameAccountsForUser)(this.connection,t,c),u=[],p=(yield(0,L.getParsedAllDomainsNftAccountsByOwner)(t,this.connection,(0,L.findNameHouse)(a)[0])).map(b=>b+r),h=yield Promise.all(p.map(b=>Le(this,void 0,void 0,function*(){return{nameAccount:(yield(0,Iu.getDomainKey)(b)).pubkey,domain:b}})));u.push(...h);for(let b=0;b<f.length;b+=gt.MULTIPLE_ACCOUNT_INFO_MAX){yield(0,L.delay)(100);let w=Math.min(b+gt.MULTIPLE_ACCOUNT_INFO_MAX,f.length),E=f.slice(b,w),k=(yield(0,L.performReverseLookupBatched)(this.connection,E,a)).map((G,W)=>({nameAccount:E[W],domain:G+r}));u.push(...k)}return u.length>0&&u.sort((b,w)=>b.domain.localeCompare(w.domain,void 0,{numeric:!0,sensitivity:"base"})),u})}getParsedAllUserDomainsUnwrapped(t){return Le(this,void 0,void 0,function*(){let n=yield(0,L.getAllTld)(this.connection),r=[];typeof t=="string"&&(t=new tt.PublicKey(t));for(let{parentAccount:o,tld:s}of n){let a=s.toString(),[c]=(0,L.findTldHouse)(a),f=yield(0,L.findOwnedNameAccountsForUser)(this.connection,t,o);for(let u=0;u<f.length;u+=gt.MULTIPLE_ACCOUNT_INFO_MAX){yield(0,L.delay)(100);let m=Math.min(u+gt.MULTIPLE_ACCOUNT_INFO_MAX,f.length),p=f.slice(u,m),b=(yield(0,L.performReverseLookupBatched)(this.connection,p,c)).map((w,E)=>({nameAccount:p[E],domain:w+a}));r.push(...b)}}return r.length>0&&r.sort((o,s)=>o.domain.localeCompare(s.domain,void 0,{numeric:!0,sensitivity:"base"})),r})}getParsedAllUserDomains(t){return Le(this,void 0,void 0,function*(){let n=yield(0,L.getAllTld)(this.connection),r=[];typeof t=="string"&&(t=new tt.PublicKey(t));for(let{parentAccount:o,tld:s}of n){let a=s.toString(),[c]=(0,L.findTldHouse)(a),f=yield(0,L.findOwnedNameAccountsForUser)(this.connection,t,o),m=(yield(0,L.getParsedAllDomainsNftAccountsByOwner)(t,this.connection,(0,L.findNameHouse)(c)[0])).map(h=>h+a),p=yield Promise.all(m.map(h=>Le(this,void 0,void 0,function*(){return{nameAccount:(yield(0,Iu.getDomainKey)(h)).pubkey,domain:h}})));r.push(...p);for(let h=0;h<f.length;h+=gt.MULTIPLE_ACCOUNT_INFO_MAX){yield(0,L.delay)(100);let b=Math.min(h+gt.MULTIPLE_ACCOUNT_INFO_MAX,f.length),w=f.slice(h,b),v=(yield(0,L.performReverseLookupBatched)(this.connection,w,c)).map((k,G)=>({nameAccount:w[G],domain:k+a}));r.push(...v)}}return r.length>0&&r.sort((o,s)=>o.domain.localeCompare(s.domain,void 0,{numeric:!0,sensitivity:"base"})),r})}};_t.TldParser=Ei});var Ou=De(On=>{"use strict";l();d();Object.defineProperty(On,"__esModule",{value:!0});On.Record=void 0;var kp;(function(e){e.IPFS="IPFS",e.ARWV="ARWV",e.SOL="SOL",e.ETH="ETH",e.BTC="BTC",e.LTC="LTC",e.DOGE="DOGE",e.Email="email",e.Url="url",e.Discord="discord",e.Github="github",e.Reddit="reddit",e.Twitter="twitter",e.Telegram="telegram",e.Pic="pic",e.SHDW="SHDW",e.POINT="POINT"})(kp=On.Record||(On.Record={}))});var Uu=De(Re=>{"use strict";l();d();var Rp=Re&&Re.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:i(function(){return t[n]},"get")}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),bt=Re&&Re.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Rp(t,e,n)};Object.defineProperty(Re,"__esModule",{value:!0});bt(Kr(),Re);bt(Fr(),Re);bt(Lu(),Re);bt(Lr(),Re);bt(yi(),Re);bt(di(),Re);bt(bi(),Re);bt(Ou(),Re)});l();d();var Po=R(sr(),1);var Mo=i(e=>{let t=new Intl.DateTimeFormat(void 0,{hour:"numeric"}).format(0).includes(" ")?"h:mm a":"HH:mm",n=(0,Po.default)(),r=(0,Po.default)(e),o=r.format(t),s=n.startOf("day"),c=r.startOf("day").diff(s,"day");return c===0?o:c===1?`${o} ${ne.t("tomorrow")}`:c>=2&&c<=7?`${new Intl.DateTimeFormat(void 0,{weekday:"long"}).format(r.toDate())} ${o}`:`${r.format("MMM D, YYYY")} ${o}`},"formatUntil");l();d();l();d();l();d();l();d();var yn=R(sr(),1),Ya=R(Wa(),1),Xa=R(za(),1);yn.default.extend(Ya.default);yn.default.extend(Xa.default);var Ja=i(e=>{let t={Today:[],Yesterday:[],"Last Week":[],Earlier:[]};for(let n of e){let r=n.timestamp??0,o=yn.default.unix(r/1e3),s="Earlier";o.isToday()?s="Today":o.isYesterday()?s="Yesterday":o.isAfter((0,yn.default)().subtract(1,"week"))&&(s="Last Week"),t[s].push(n)}return Object.keys(t).reduce((n,r)=>({...n,[r]:t[r].sort((o,s)=>(o.timestamp==null&&(o.timestamp=0),s.timestamp==null&&(s.timestamp=0),o.timestamp<s.timestamp?1:o.timestamp>s.timestamp?-1:0)).map(o=>o.data)}),{})},"bucketByTime");var Za=i(e=>{let{accountIdentifier:t,autoConfirmEnabled:n=!1,trustedAppsByAccount:r}=e;if(!t||!r)return;let o=Object.values(r),s=[],a=[];n?(o.forEach(f=>{f.autoConfirm&&Bs(f.autoConfirm)?s.push(f):a.push(f)}),s.sort((f,u)=>(u.autoConfirm?.sessionStartTime??0)-(f.autoConfirm?.sessionStartTime??0))):a=o;let c=Ja(a.map(f=>{let u=f.lastConnectedTimestamp??0;return{timestamp:u,data:{...f,lastConnectedTimestamp:u}}}));return{autoConfirmEnabledApps:s,timeBucketedApps:c}},"prepareTrustedAppsSections");function _a(e){return e.map(t=>({lastConnectedTimestamp:t.createdAtMs,expiryTimestamp:t.expiresAtMs,dappMeta:{appUrl:t.origin,imageUrl:t.imageUrl,title:t.title,appId:t.appId}}))}i(_a,"mapAppPermissionsToTrustedApps");l();d();var ec=i((e,t)=>{if(!t||e.autoConfirm?.sessionStartTime===void 0||e.autoConfirm?.maxSessionDuration===void 0)return;if(e.expiryTimestamp)return e.expiryTimestamp?Mo(new Date(e.expiryTimestamp)):void 0;let n=new Date(e.autoConfirm?.sessionStartTime+e.autoConfirm?.maxSessionDuration*1e3);return Mo(n)},"getTrustedAppRowUntilValue");l();d();var Yd={...xt(un.EmojiSkinTone,[...Ct.emojiSkinTone()]),...xt(un.IsAnalyticsOptedOut,[...Ct.isAnalyticsOptedOut()]),...xt(rr.UserExplorerPreferenceV2,[...Ct.preferredExplorers()]),...xt(un.SelectedCurrency,[...Ct.selectedCurrency()]),...xt(rr.UserRecentAddresses,[...Ct.recentAddresses()],Ks()),...xt(rr.UserSavedAddresses,[...Ct.savedAddresses()])};l();d();var Xd=0;function D(e,t){let n=`atom${++Xd}`,r={toString(){return(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?r.read=e:(r.init=e,r.read=Jd,r.write=Zd),t&&(r.write=t),r}i(D,"atom");function Jd(e){return e(this)}i(Jd,"defaultRead");function Zd(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}i(Zd,"defaultWrite");var tc=i((e,t)=>e.unstable_is?e.unstable_is(t):t===e,"isSelfAtom"),Io=i(e=>"init"in e,"hasInitialValue"),Fo=i(e=>!!e.write,"isActuallyWritableAtom"),Tr=new WeakMap,Lo=i(e=>{var t;return Oo(e)&&!((t=Tr.get(e))!=null&&t[1])},"isPendingPromise"),_d=i((e,t)=>{let n=Tr.get(e);if(n)n[1]=!0,n[0].forEach(r=>r(t));else if((import.meta.env?import.meta.env.MODE:void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},"cancelPromise"),ef=i(e=>{if(Tr.has(e))return;let t=[new Set,!1];Tr.set(e,t);let n=i(()=>{t[1]=!0},"settle");e.then(n,n),e.onCancel=r=>{t[0].add(r)}},"patchPromiseForCancelability"),Oo=i(e=>typeof e?.then=="function","isPromiseLike"),nc=i(e=>"v"in e||"e"in e,"isAtomStateInitialized"),Er=i(e=>{if("e"in e)throw e.e;if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},"returnAtomValue"),rc=i((e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},"addPendingPromiseToDependency"),tf=i((e,t,n,r)=>{var o;if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&n===e)throw new Error("[Bug] atom cannot depend on itself");t.d.set(n,r.n),Lo(t.v)&&rc(e,t.v,r),(o=r.m)==null||o.t.add(e)},"addDependency"),nf=Symbol.for("JOTAI.EXPERIMENTAL.FLUSHSTOREHOOK"),oc=i((...e)=>{let[t,n,r,o,s,a]=e,c=i(A=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!A)throw new Error("Atom is undefined or null");let T=t(A);return T||(T={d:new Map,p:new Set,n:0},n(A,T),s?.(A,Ne)),T},"ensureAtomState"),f=new WeakMap,u=new Map,m=new Set,p=new Set,h=i(()=>{var A;let T=[],C=i(S=>{try{S()}catch(N){T.push(N)}},"call");do{(A=Ne[nf])==null||A.call(Ne);let S=new Set,N=S.add.bind(S);u.forEach(M=>{var H;return(H=M.m)==null?void 0:H.l.forEach(N)}),u.clear(),m.forEach(N),m.clear(),p.forEach(N),p.clear(),S.forEach(C),u.size&&G()}while(u.size||m.size||p.size);if(T.length)throw T[0]},"flushCallbacks"),b=i((A,T,C)=>{let S="v"in T,N=T.v,M=Lo(T.v)?T.v:null;if(Oo(C)){ef(C);for(let H of T.d.keys())rc(A,C,c(H));T.v=C}else T.v=C;delete T.e,(!S||!Object.is(N,T.v))&&(++T.n,M&&_d(M,C))},"setAtomStateValueOrPromise"),w=i(A=>{var T;let C=c(A);if(nc(C)&&(C.m&&f.get(A)!==C.n||Array.from(C.d).every(([X,J])=>w(X).n===J)))return C;C.d.clear();let S=!0,N=i(()=>{C.m&&(ee(A,C),G(),h())},"mountDependenciesIfAsync"),M=i(X=>{if(tc(A,X)){let Ee=c(X);if(!nc(Ee))if(Io(X))b(X,Ee,X.init);else throw new Error("no atom init");return Er(Ee)}let J=w(X);try{return Er(J)}finally{tf(A,C,X,J),S||N()}},"getter"),H,$,ce={get signal(){return H||(H=new AbortController),H.signal},get setSelf(){return(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!Fo(A)&&console.warn("setSelf function cannot be used with read-only atom"),!$&&Fo(A)&&($=i((...X)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&S&&console.warn("setSelf function cannot be called in sync"),!S)return ge(A,...X)},"setSelf")),$}};try{let X=r(A,M,ce);return b(A,C,X),Oo(X)&&((T=X.onCancel)==null||T.call(X,()=>H?.abort()),X.then(N,N)),C}catch(X){return delete C.v,C.e=X,++C.n,C}finally{S=!1}},"readAtomState"),E=i(A=>Er(w(A)),"readAtom"),v=i(A=>{var T;let C=new Map;for(let S of((T=A.m)==null?void 0:T.t)||[]){let N=c(S);N.m&&C.set(S,N)}for(let S of A.p)C.set(S,c(S));return C},"getMountedOrPendingDependents"),k=i(A=>{let T=[A];for(;T.length;){let C=T.pop();for(let[S,N]of v(C))f.has(S)||(f.set(S,N.n),T.push(N))}},"invalidateDependents"),G=i(()=>{var A;let T=[],C=new WeakSet,S=new WeakSet,N=Array.from(u);for(;N.length;){let[M,H]=N[N.length-1];if(S.has(M)){N.pop();continue}if(C.has(M)){f.get(M)===H.n?T.push([M,H,H.n]):(f.delete(M),u.set(M,H)),S.add(M),N.pop();continue}C.add(M);for(let[$,ce]of v(H))C.has($)||N.push([$,ce])}for(let M=T.length-1;M>=0;--M){let[H,$,ce]=T[M],X=!1;for(let J of $.d.keys())if(J!==H&&u.has(J)){X=!0;break}X&&(w(H),ee(H,$),ce!==$.n&&(u.set(H,$),(A=$.u)==null||A.call($))),f.delete(H)}},"recomputeInvalidatedAtoms"),W=i((A,...T)=>{let C=!0,S=i(M=>Er(w(M)),"getter"),N=i((M,...H)=>{var $;let ce=c(M);try{if(tc(A,M)){if(!Io(M))throw new Error("atom not writable");let X=ce.n,J=H[0];b(M,ce,J),ee(M,ce),X!==ce.n&&(u.set(M,ce),($=ce.u)==null||$.call(ce),k(ce));return}else return W(M,...H)}finally{C||(G(),h())}},"setter");try{return o(A,S,N,...T)}finally{C=!1}},"writeAtomState"),ge=i((A,...T)=>{try{return W(A,...T)}finally{G(),h()}},"writeAtom"),ee=i((A,T)=>{var C;if(T.m&&!Lo(T.v)){for(let[S,N]of T.d)if(!T.m.d.has(S)){let M=c(S);be(S,M).t.add(A),T.m.d.add(S),N!==M.n&&(u.set(S,M),(C=M.u)==null||C.call(M),k(M))}for(let S of T.m.d||[])if(!T.d.has(S)){T.m.d.delete(S);let N=ae(S,c(S));N?.t.delete(A)}}},"mountDependencies"),be=i((A,T)=>{var C;if(!T.m){w(A);for(let S of T.d.keys())be(S,c(S)).t.add(A);if(T.m={l:new Set,d:new Set(T.d.keys()),t:new Set},(C=T.h)==null||C.call(T),Fo(A)){let S=T.m,N=i(()=>{let M=!0,H=i((...$)=>{try{return W(A,...$)}finally{M||(G(),h())}},"setAtom");try{let $=a(A,H);$&&(S.u=()=>{M=!0;try{$()}finally{M=!1}})}finally{M=!1}},"processOnMount");p.add(N)}}return T.m},"mountAtom"),ae=i((A,T)=>{var C;if(T.m&&!T.m.l.size&&!Array.from(T.m.t).some(S=>{var N;return(N=c(S).m)==null?void 0:N.d.has(A)})){let S=T.m.u;S&&m.add(S),delete T.m,(C=T.h)==null||C.call(T);for(let N of T.d.keys()){let M=ae(N,c(N));M?.t.delete(A)}return}return T.m},"unmountAtom"),Ne={get:E,set:ge,sub:i((A,T)=>{let C=c(A),N=be(A,C).l;return N.add(T),h(),()=>{N.delete(T),ae(A,C),h()}},"subscribeAtom"),unstable_derive:i(A=>oc(...A(...e)),"unstable_derive")};return Ne},"buildStore"),rf=i(e=>{let t=new Set,n,r=0,o=e.unstable_derive((...c)=>{let[f,u,,m]=c;return n=f,c[1]=i(function(h,b){u(h,b);let w=b.h;b.h=()=>{w?.(),b.m?t.add(h):t.delete(h)}},"devSetAtomState"),c[3]=i(function(h,b,w,...E){return r?w(h,...E):m(h,b,w,...E)},"devAtomWrite"),c}),s=o.set;return Object.assign(o,{dev4_get_internal_weak_map:i(()=>({get:i(c=>{let f=n(c);if(!(!f||f.n===0))return f},"get")}),"dev4_get_internal_weak_map"),dev4_get_mounted_atoms:i(()=>t,"dev4_get_mounted_atoms"),dev4_restore_atoms:i(c=>{s({read:i(()=>null,"read"),write:i((u,m)=>{++r;try{for(let[p,h]of c)Io(p)&&m(p,h)}finally{--r}},"write")})},"dev4_restore_atoms")})},"deriveDevStoreRev4"),Uo=i(()=>{let e=new WeakMap,t=oc(n=>e.get(n),(n,r)=>e.set(n,r).get(n),(n,...r)=>n.read(...r),(n,...r)=>n.write(...r),(n,...r)=>{var o;return(o=n.unstable_onInit)==null?void 0:o.call(n,...r)},(n,...r)=>{var o;return(o=n.onMount)==null?void 0:o.call(n,...r)});return(import.meta.env?import.meta.env.MODE:void 0)!=="production"?rf(t):t},"createStore"),gn,ic=i(()=>(gn||(gn=Uo(),(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=gn),globalThis.__JOTAI_DEFAULT_STORE__!==gn&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),gn),"getDefaultStore");l();d();var pe=R(Q(),1);var ac=(0,pe.createContext)(void 0),cc=i(e=>{let t=(0,pe.useContext)(ac);return e?.store||t||ic()},"useStore"),lw=i(({children:e,store:t})=>{let n=(0,pe.useRef)(void 0);return!t&&!n.current&&(n.current=Uo()),(0,pe.createElement)(ac.Provider,{value:t||n.current},e)},"Provider"),Ko=i(e=>typeof e?.then=="function","isPromiseLike"),uc=i(e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},"attachPromiseMeta"),of=pe.default.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(uc(e),e)}),Bo=new WeakMap,sc=i(e=>{let t=Bo.get(e);return t||(t=new Promise((n,r)=>{let o=e,s=i(f=>u=>{o===f&&n(u)},"onFulfilled"),a=i(f=>u=>{o===f&&r(u)},"onRejected"),c=i(f=>{"onCancel"in f&&typeof f.onCancel=="function"&&f.onCancel(u=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&u===f)throw new Error("[Bug] p is not updated even after cancelation");Ko(u)?(Bo.set(u,t),o=u,u.then(s(u),a(u)),c(u)):n(u)})},"registerCancelHandler");e.then(s(e),a(e)),c(e)}),Bo.set(e,t)),t},"createContinuablePromise");function ve(e,t){let n=cc(t),[[r,o,s],a]=(0,pe.useReducer)(u=>{let m=n.get(e);return Object.is(u[0],m)&&u[1]===n&&u[2]===e?u:[m,n,e]},void 0,()=>[n.get(e),n,e]),c=r;(o!==n||s!==e)&&(a(),c=n.get(e));let f=t?.delay;if((0,pe.useEffect)(()=>{let u=n.sub(e,()=>{if(typeof f=="number"){let m=n.get(e);Ko(m)&&uc(sc(m)),setTimeout(a,f);return}a()});return a(),u},[n,e,f]),(0,pe.useDebugValue)(c),Ko(c)){let u=sc(c);return of(u)}return c}i(ve,"useAtomValue");function bn(e,t){let n=cc(t);return(0,pe.useCallback)((...o)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...o)},[n,e])}i(bn,"useSetAtom");function dw(e,t){return[ve(e,t),bn(e,t)]}i(dw,"useAtom");l();d();var sf=g.object({data:g.string(),from:g.string(),to:g.string()}),af=g.object({transaction:sf});async function cf({caip19:e,amount:t,owner:n}){let r=await re.api().post("/tokens/v1/unwrap",{owner:n,caip19:e,amount:t.toNumber()}),o=af.safeParse(r.data);if(!o.success){let{error:s}=o;throw B.captureError(s,K.Fungibles),new pn(`Failed to get unwrap transaction: ${s.message}`)}return o.data.transaction}i(cf,"getUnwrapTransaction");var uf=i(({caip19:e,amount:t,owner:n})=>F({gcTime:Ua.Medium,staleTime:Ba.Never,enabled:n!==""&&t.isGreaterThan(0),queryKey:Te.unwrapTransaction({caip19:e,amount:t,owner:n}),async queryFn(){return await cf({caip19:e,amount:t,owner:n})}}),"useGetUnwrapTransaction");l();d();l();d();l();d();l();d();l();d();var lc;(function(e){e[e.Every1Second=1e3]="Every1Second",e[e.Every5Seconds=5e3]="Every5Seconds",e[e.Every10Seconds=1e4]="Every10Seconds",e[e.Every30Seconds=3e4]="Every30Seconds",e[e.Every1Minute=6e4]="Every1Minute",e[e.Every5Minutes=3e5]="Every5Minutes"})(lc||(lc={}));var Mt;(function(e){e.Always="always",e.Online="online",e.OfflineFirst="offlineFirst"})(Mt||(Mt={}));var He=Symbol("array"),Ge=Symbol("record");function wn(e){if(e instanceof Set)return Array.from(e).map(r=>typeof r=="string"?`"${r}"`:String(r)).join(" | ");if(typeof e=="string")return`"${e}"`;if(typeof e=="boolean")return String(e);if(typeof e=="number"){let n=[];return e&1&&n.push("undefined"),e&2&&n.push("null"),e&4&&n.push("number"),e&8&&n.push("string"),e&16&&n.push("boolean"),e&32&&n.push("object"),e&64&&n.push("array"),n.length===0?"unknown":n.length===1?n[0]:n.join(" | ")}let t=e.mask;if(t&512){let n=e,r=[];if(n.values!==void 0&&n.values.size>0)for(let o of n.values){let s=typeof o=="string"?`"${o}"`:String(o);r.push(s)}if(n.shape!==void 0){n.shape[He]!==void 0&&r.push(`Array<${wn(n.shape[He])}>`),n.shape[Ge]!==void 0&&r.push(`Record<string, ${wn(n.shape[Ge])}>`);for(let[o,s]of Object.entries(n.shape))o!==He&&o!==Ge&&r.push(o)}return t=n.mask,t&1&&r.push("undefined"),t&2&&r.push("null"),t&4&&r.push("number"),t&8&&r.push("string"),t&16&&r.push("boolean"),r.length===0?"union":r.join(" | ")}if(t&1024)return`Entity<${e.typenameValue}>`;if(t&64){let n=e.shape;return`Array<${wn(n)}>`}if(t&256){let n=e.shape;return`Record<string, ${wn(n)}>`}if(t&32){let n=e.typenameValue;return n?`Object<${n}>`:"object"}return"unknown"}i(wn,"typeToString");function En(e,t,n){return new TypeError(`Validation error at ${e}: expected ${wn(t)}, got ${typeof n=="object"?n===null?"null":Array.isArray(n)?"array":"object":typeof n}`)}i(En,"typeError");l();d();var lf=Object.entries,df=Array.isArray,Ce=class e{static{i(this,"ValidatorDef")}kind;mask;_optional;_nullable;_nullish;_shapeKey=void 0;_shape;subEntityPaths=void 0;typenameField=void 0;typenameValue=void 0;idField=void 0;values=void 0;constructor(t,n,r,o=void 0){this.kind=t,this.mask=n,this._shape=r,this.values=o}static cloneWith(t,n,r=void 0){let o=new e(t.kind,n|t.mask,t._shape,r);return o.subEntityPaths=t.subEntityPaths,o.values=t.values,o.typenameField=t.typenameField,o.typenameValue=t.typenameValue,o.idField=t.idField,o}reifyShape(){if(this._shapeKey===void 0)switch(this.kind){case 5:{let t=this._shape();this._shape=dc(this,t);break}case 0:this._shape=dc(this,this._shape);break;case 1:this._shape=bf(this,this._shape);break;case 3:case 4:{let t=this._shape;this._shapeKey=he([this.mask,this.values,t.shapeKey]),t.mask&3072&&(this.mask|=2048);break}}}get shape(){return this.reifyShape(),this._shape}get shapeKey(){return this.reifyShape(),this._shapeKey}set shapeKey(t){this._shapeKey=t>>>0}get optional(){return this._optional===void 0&&(this._optional=e.cloneWith(this,1)),this._optional}get nullable(){return this._nullable===void 0&&(this._nullable=e.cloneWith(this,2)),this._nullable}get nullish(){return this._nullish===void 0&&(this._nullish=e.cloneWith(this,3)),this._nullish}};function ff(e){return new Ce(3,64,e)}i(ff,"defineArray");function mf(e){return new Ce(4,288,e)}i(mf,"defineRecord");function pf(e){return new Ce(0,32,e)}i(pf,"defineObject");function vr(...e){let t=0,n,r,o;for(let s of e){if(typeof s=="number"){t|=s;continue}if(s instanceof Set){if(o===void 0)o=new Set(s);else for(let a of s)o.add(a);continue}if(n===void 0){n=s;continue}r===void 0&&(r=[n]),r.push(s)}return n===void 0?o===void 0?t:t===0?o:new Ce(2,t|512,void 0,o):r===void 0?Ce.cloneWith(n,t|512,o):new Ce(1,t|512,r,o)}i(vr,"defineUnion");function hf(e){return typeof e=="number"?e|1|2:e instanceof Set?vr(e,1,2):e.nullish}i(hf,"defineNullish");function yf(e){return typeof e=="number"?e|1:e instanceof Set?vr(e,1):e.optional}i(yf,"defineOptional");function gf(e){return typeof e=="number"?e|2:e instanceof Set?vr(e,2):e.nullable}i(gf,"defineNullable");function dc(e,t){let n=he([e.mask,e.values]);for(let[r,o]of lf(t))switch(typeof o){case"number":if(o&128){if(e.idField!==void 0)throw new Error(`Duplicate id field: ${r}`);e.idField=r}n+=he(r)^o;break;case"string":if(e.typenameField!==void 0&&e.typenameField!==r)throw new Error(`Duplicate typename field: ${r}`);e.typenameField=r,e.typenameValue=o,n+=he(r)^he(o);break;case"object":if(o instanceof Set){n^=he(r)^he(o);break}n+=he(r)^o.shapeKey,o.mask&3072&&(e.mask|=2048,e.subEntityPaths===void 0?e.subEntityPaths=r:df(e.subEntityPaths)?e.subEntityPaths.push(r):e.subEntityPaths=[e.subEntityPaths,r]);break}return e.shapeKey=n>>>0,t}i(dc,"reifyObjectShape");function bf(e,t){let n=e.mask,r=Object.create(null),o,s=he([n,e.values]);for(let a of t){let c=a.mask;if(n|=c,s+=a.shapeKey,c&512){let f=a;if(f.typenameField!==void 0){if(o!==void 0&&o!==f.typenameField)throw new Error(`Union typename field conflict: Cannot merge unions with different typename fields ('${o}' vs '${f.typenameField}')`);o=f.typenameField}let u=f.shape;if(u!==void 0)for(let m of[...Object.keys(u),He,Ge]){let p=u[m];if(r[m]!==void 0&&r[m]!==p)throw new Error(`Union merge conflict: Duplicate typename value '${String(m)}' found when merging nested unions (${String(r[m])} vs ${String(p)})`);r[m]=p}}else if(c&64){if(r[He]!==void 0)throw new Error("Array shape already defined");r[He]=a.shape}else if(c&256){if(r[Ge]!==void 0)throw new Error("Record shape already defined");r[Ge]=a.shape}else{let f=a.typenameField,u=a.typenameValue;if(u===void 0)throw new Error("Object definitions must have a typename to be in a union with other objects, records, or arrays");if(o!==void 0&&f!==o)throw new Error("Object definitions must have the same typename field to be in the same union");o=f,r[u]=a}}return e.typenameField=o,e.shapeKey=s>>>0,e.mask=n,r}i(bf,"reifyUnionShape");function wf(e){return e}i(wf,"defineTypename");function Ef(e){return new Set([e])}i(Ef,"defineConst");function Tf(...e){return new Set(e)}i(Tf,"defineEnum");var vf=16;var Af=[];var Sf=new Map;function xf(e){let t=Sf.get(e);if(t===void 0)throw new Error(`Format ${e} not registered`);return t}i(xf,"defineFormatted");function Tn(e){let t=e>>vf;return Af[t]}i(Tn,"getFormat");function Vo(e){return new Ce(5,1056,e)}i(Vo,"entity");var j={format:xf,typename:wf,const:Ef,enum:Tf,id:140,string:8,number:4,boolean:16,null:2,undefined:1,array:ff,object:pf,record:mf,union:vr,nullish:hf,optional:yf,nullable:gf};l();d();var Cf=Array.isArray;function vn(e){if(e===null)return 2;switch(typeof e){case"number":return 4;case"string":return 8;case"boolean":return 16;case"undefined":return 1;case"object":return Cf(e)?64:32;default:throw new Error(`Invalid type: ${typeof e}`)}}i(vn,"typeMaskOf");var Ho=Object.entries,Pf=Array.isArray,Go=new WeakSet;function Mf(e,t,n,r){if(e===64){let o=n.shape[He];return o===void 0||typeof o=="number"?t:fc(t,o,r)}else{let o=n.typenameField,s=o?t[o]:void 0;if(s===void 0||typeof s!="string"){let c=n.shape[Ge];return c===void 0||typeof c=="number"?t:Nf(t,c,r)}let a=n.shape[s];return a===void 0||typeof a=="number"?t:mc(t,a,r)}}i(Mf,"parseUnionValue");function fc(e,t,n){for(let r=0;r<e.length;r++)e[r]=Nt(e[r],t,`${n}[${r}]`);return e}i(fc,"parseArrayValue");function Nf(e,t,n){for(let[r,o]of Ho(e))e[r]=Nt(o,t,`${n}["${r}"]`);return e}i(Nf,"parseRecordValue");function mc(e,t,n){if(Go.has(e))return e;let r=t.shape;for(let[o,s]of Ho(r))e[o]=Nt(e[o],s,`${n}.${o}`);return e}i(mc,"parseObjectValue");function Nt(e,t,n){if(t instanceof Set){if(!t.has(e))throw En(n,t,e);return e}switch(typeof t){case"string":if(e!==t)throw En(n,t,e);return e;case"number":{let r=vn(e);if(!(t&r))throw En(n,t,e);return t&4096&&r===4?Tn(t)(e):t&8192&&r===8?Tn(t)(e):e}default:{let r=vn(e),o=t.mask;if(!(o&r)&&!t.values?.has(e))throw En(n,o,e);return r<32?o&4096&&r===4?Tn(o)(e):o&8192&&r===8?Tn(o)(e):e:r&512?Mf(r,e,t,n):r===64?fc(e,t.shape,n):mc(e,t,n)}}}i(Nt,"parseValue");function Qo(e,t){for(let[n,r]of Ho(t))typeof r=="object"&&r!==null&&!Pf(r)&&!Go.has(r)?Qo(e[n],r):e[n]=r;return e}i(Qo,"mergeValues");var Df=Symbol.for("nodejs.util.inspect.custom");function qo(e,t,n,r){let o=n.shape,s=i(()=>({__entityRef:e}),"toJSON"),a={get(f,u){if(u==="toJSON")return s;let{signal:m,cache:p}=t,h=m.value;if(p.has(u))return p.get(u);let b=h[u],w=o[u];if(!Object.hasOwnProperty.call(o,u))return b;let E=Nt(b,w,`[[${r}]].${u}`);return p.set(u,E),E},has(f,u){return u in o},ownKeys(f){let u=Object.keys(o),m=n.typenameField;return m&&!u.includes(m)&&u.push(m),u},getOwnPropertyDescriptor(f,u){let m=n.typenameField;if(u in o||u===m)return{enumerable:!0,configurable:!0}}},c=new Proxy({[Df]:()=>Object.keys(o).reduce((f,u)=>(f[u]=c[u],f),{})},a);return Go.add(c),c}i(qo,"createEntityProxy");var Ar=class{static{i(this,"EntityStore")}map=new Map;hasEntity(t){return this.map.has(t)}getEntity(t){return this.map.get(t)}hydratePreloadedEntity(t,n){let r=this.getEntity(t);if(r===void 0)throw new Error(`Entity ${t} not found`);return r.proxy=qo(t,r,n),r}setPreloadedEntity(t,n){let r={key:t,signal:mt(n,{equals:!1}),cache:new Map,proxy:void 0};return this.map.set(t,r),r}setEntity(t,n,r){let o=this.map.get(t);return o===void 0?(o=this.setPreloadedEntity(t,n),o.proxy=qo(t,o,r)):(o.signal.update(s=>Qo(s,n)),o.cache.clear()),o}};l();d();var Wt=class{static{i(this,"NetworkManager")}onlineSignal;manualOverride=void 0;eventListenersAttached=!1;constructor(t){let n=t??this.detectOnlineStatus();this.onlineSignal=mt(n),this.canAttachListeners()&&this.attachEventListeners()}get isOnline(){return this.manualOverride!==void 0?this.manualOverride:this.onlineSignal.value}setNetworkStatus(t){this.manualOverride=t,this.onlineSignal.value=t}clearManualOverride(){this.manualOverride=void 0,this.onlineSignal.value=this.detectOnlineStatus()}getOnlineSignal(){return this.onlineSignal}detectOnlineStatus(){return typeof navigator<"u"&&"onLine"in navigator?navigator.onLine:!0}canAttachListeners(){return typeof self<"u"&&typeof self.addEventListener=="function"}attachEventListeners(){if(this.eventListenersAttached)return;let t=i(()=>{this.manualOverride===void 0&&(this.onlineSignal.value=!0)},"handleOnline"),n=i(()=>{this.manualOverride===void 0&&(this.onlineSignal.value=!1)},"handleOffline");self.addEventListener("online",t),self.addEventListener("offline",n),this.eventListenersAttached=!0}},jo=class e{static{i(this,"NoOpNetworkManager")}static onlineSignal=mt(!0);get isOnline(){return!0}setNetworkStatus(t){}clearManualOverride(){}getOnlineSignal(){return e.onlineSignal}destroy(){}},pc=new Wt,kf=er(pc);l();d();l();d();var Rf=Object.entries;function Ff(e,t,n,r,o){if(e===64){let s=n.shape[He];return s===void 0||typeof s=="number"?t:hc(t,{mask:64,shape:s,values:void 0},r,o)}else{let s=n.typenameField,a=s?t[s]:void 0;if(a===void 0||typeof a!="string"){let f=n.shape[Ge];return f===void 0||typeof f=="number"?t:yc(t,f,r,o)}let c=n.shape[a];return c===void 0||typeof c=="number"?t:gc(t,c,r,o)}}i(Ff,"parseUnionEntities");function hc(e,t,n,r){for(let o=0;o<e.length;o++)e[o]=pt(e[o],t,n,r);return e}i(hc,"parseArrayEntities");function yc(e,t,n,r){if(typeof t=="number")return e;for(let[o,s]of Rf(e))e[o]=pt(s,t,n,r);return e}i(yc,"parseRecordEntities");function gc(e,t,n,r){let o=e.__entityRef;if(typeof o=="number")return n.hydrateEntity(o,t).proxy;let{mask:s}=t,a=s&1024?new Set:r,c=t.shape,f=t.subEntityPaths;if(f!==void 0)if(typeof f=="string"){let u=c[f];e[f]=pt(e[f],u,n,a)}else for(let u of f){let m=c[u];e[u]=pt(e[u],m,n,a)}if(s&1024){let u=t,m=u.typenameValue,p=e[u.idField];if(p===void 0)throw new Error(`Entity id is required: ${m}`);let h=`${m}:${p}`,b=he(h);return r!==void 0&&r.add(b),n.saveEntity(b,e,u,a).proxy}return e}i(gc,"parseObjectEntities");function pt(e,t,n,r){let o=vn(e),s=t.mask;return o<32||!(s&o)?e:s&512?Ff(o,e,t,n,r):o===64?hc(e,t.shape,n,r):s&256?yc(e,t.shape,n,r):gc(e,t,n,r)}i(pt,"parseEntities");var Sr=class{static{i(this,"QueryResultImpl")}def;queryKey;queryClient;initialized=!1;isRefetchingSignal=mt(!1);isFetchingMoreSignal=mt(!1);updatedAt=void 0;params=void 0;refIds=void 0;refetchPromise=void 0;fetchMorePromise=void 0;attemptCount=0;unsubscribe=void 0;relay;_relayState=void 0;wasOffline=!1;get relayState(){let t=this._relayState;if(!t)throw new Error("Relay state not initialized");return t}_nextPageParams=void 0;get nextPageParams(){if(this.def.type==="stream")return null;let t=this._nextPageParams,n=this.relayState.value;if(t===void 0&&n!==void 0){if(!Array.isArray(n))throw new Error("Query result is not an array, this is a bug");let o=this.def.pagination?.getNextPageParams?.(n[n.length-1]);if(o===void 0)t=null;else{let s=!1,a={...this.params};for(let[c,f]of Object.entries(o))f!=null&&(a[c]=f,s=!0);this._nextPageParams=t=s?a:null}}return t??null}constructor(t,n,r,o){As(this),this.def=t,this.queryClient=n,this.queryKey=r,this.params=o,this.relay=Ss(s=>{this._relayState=s,this.queryClient.activateQuery(this);let a=this.queryClient.networkManager,c=a.getOnlineSignal().value;return this.wasOffline=!c,this.initialized?(this.def.type==="stream"?this.setupSubscription():!this.wasOffline&&c?((this.def.cache?.refreshStaleOnReconnect??!0)&&this.isStale&&this.refetch(),this.attemptCount=0):this.isStale&&!this.isPaused&&this.refetch(),this.wasOffline=!c):this.initialize(),{update:i(()=>{if(this.def.type==="stream"){this.setupSubscription();return}let f=a.getOnlineSignal().value;this.wasOffline&&f&&((this.def.cache?.refreshStaleOnReconnect??!0)&&this.isStale&&s.setPromise(this.runQuery(this.params,!0)),this.attemptCount=0),this.wasOffline=!f},"update"),deactivate:i(()=>{this.def.type==="stream"?this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0):this.def.cache?.refetchInterval&&this.queryClient.refetchManager.removeQuery(this),this.queryClient.memoryEvictionManager.scheduleEviction(this.queryKey)},"deactivate")}})}get value(){return this.relay.value}get error(){return this.relay.error}get isPending(){return this.relay.isPending}get isRejected(){return this.relay.isRejected}get isResolved(){return this.relay.isResolved}get isSettled(){return this.relay.isSettled}get isReady(){return this.relay.isReady}get _version(){return this.relay._version}get _signal(){return this.relay._signal}get _flags(){return this.relay._flags}then(t,n){return this.relay.then(t,n)}catch(t){return this.relay.catch(t)}finally(t){return this.relay.finally(t)}get[Symbol.toStringTag](){return"QueryResult"}async initialize(){let t=this.relayState;try{this.initialized=!0;let n=await this.queryClient.loadCachedQuery(this.def,this.queryKey);if(n!==void 0){let r=this.def.shape;t.value=r instanceof Ce?pt(n.value,r,this.queryClient,new Set):Nt(n.value,r,this.def.id),this.updatedAt=n.updatedAt,this.refIds=n.refIds}this.def.type==="stream"?this.setupSubscription():n!==void 0?this.isStale&&this.refetch():t.setPromise(this.runQuery(this.params,!0))}catch(n){t.setError(n)}}setupSubscription(){this.unsubscribe?.();let t=this.def;this.unsubscribe=t.subscribeFn(this.queryClient.getContext(),this.params,n=>{let r=this.def.shape,o=this.refIds??new Set,s=pt(n,r,this.queryClient,o);this.relayState.value=s,this.updatedAt=Date.now(),this.refIds=o,this.queryClient.saveQueryData(this.def,this.queryKey,s,this.updatedAt,o)})}async runQuery(t,n=!1){if(this.isPaused)throw new Error("Query is paused due to network status");let{retries:r,retryDelay:o}=this.getRetryConfig(),s;for(let a=0;a<=r;a++)try{let f=await this.def.fetchFn(this.queryClient.getContext(),t);this.attemptCount=0;let u,m=this.def.type==="infiniteQuery";m&&!n&&this.refIds!==void 0?u=this.refIds:u=new Set;let p=this.def.shape,h=p instanceof Ce?pt(f,p,this.queryClient,u):Nt(f,p,this.def.id),b;if(m){let E=this.relayState.value;b=n||E===void 0?[h]:[...E,h]}else b=h;let w;return n?w=this.updatedAt=Date.now():w=this.updatedAt??=Date.now(),this._nextPageParams=void 0,this.queryClient.saveQueryData(this.def,this.queryKey,b,w,u),this.updatedAt=Date.now(),b}catch(c){if(s=c,this.attemptCount=a+1,a>=r)throw c;let f=o(a);if(await new Promise(u=>setTimeout(u,f)),this.isPaused)throw new Error("Query is paused due to network status")}throw s}refetch=i(()=>{if(this.def.type==="stream")throw new Error("Cannot refetch a stream query");if(this.fetchMorePromise)throw new Error("Query is fetching more, cannot refetch");if(this.refetchPromise)return this.refetchPromise;this._nextPageParams=void 0,this.isRefetchingSignal.value=!0,this._version.update(n=>n+1);let t=this.runQuery(this.params,!0).then(n=>(this.relayState.value=n,n)).catch(n=>(this.relayState.setError(n),Promise.reject(n))).finally(()=>{this._version.update(n=>n+1),this.isRefetchingSignal.value=!1,this.refetchPromise=void 0});return this.refetchPromise=t,t},"refetch");fetchNextPage=i(()=>{if(this.def.type==="stream")throw new Error("Cannot fetch next page on a stream query");if(this.refetchPromise)return Promise.reject(new Error("Query is refetching, cannot fetch next page"));if(this.fetchMorePromise)return this.fetchMorePromise;let t=this.nextPageParams;if(!t)return Promise.reject(new Error("No next page params"));this.isFetchingMoreSignal.value=!0,this._version.update(r=>r+1);let n=this.runQuery(t,!1).then(r=>(this.relayState.value=r,r)).catch(r=>(this.relayState.setError(r),Promise.reject(r))).finally(()=>{this._version.update(r=>r+1),this.isFetchingMoreSignal.value=!1,this.fetchMorePromise=void 0});return this.fetchMorePromise=n,n},"fetchNextPage");get isRefetching(){return this.isRefetchingSignal.value}get isFetchingMore(){return this.isFetchingMoreSignal.value}get isFetching(){return this.relay.isPending||this.isRefetching||this.isFetchingMore}get hasNextPage(){return this.nextPageParams!==null}get isStale(){if(this.def.type==="stream")return!1;if(this.updatedAt===void 0)return!0;let t=this.def.cache?.staleTime??0;return Date.now()-this.updatedAt>=t}get isPaused(){if(this.def.type==="stream")return!1;let t=this.def.cache?.networkMode??Mt.Online,r=this.queryClient.networkManager.getOnlineSignal().value;switch(t){case Mt.Always:return!1;case Mt.Online:return!r;case Mt.OfflineFirst:return!r&&this.updatedAt===void 0;default:return!1}}getRetryConfig(){if(this.def.type==="stream")return{retries:0,retryDelay:i(()=>0,"retryDelay")};let t=this.def.cache?.retry,n=this.queryClient.isServer,r,o;return t===!1?r=0:t===void 0?r=n?0:3:typeof t=="number"?r=t:r=t.retries,typeof t=="object"&&t.retryDelay?o=t.retryDelay:o=i(s=>1e3*Math.pow(2,s),"retryDelay"),{retries:r,retryDelay:o}}};l();d();var An=class{static{i(this,"RefetchManager")}multiplier;intervalId;clock=0;buckets=new Map;constructor(t=1){this.multiplier=t;let n=1e3*this.multiplier;this.intervalId=setTimeout(()=>this.tick(),n)}addQuery(t){if(t.def.type==="stream")return;let n=t.def.cache?.refetchInterval;if(!n)return;let r=n*this.multiplier,o=this.buckets.get(r);o||(o=new Set,this.buckets.set(r,o)),o.add(t)}removeQuery(t){if(t.def.type==="stream")return;let n=t.def.cache?.refetchInterval;if(!n)return;let r=n*this.multiplier,o=this.buckets.get(r);o&&(o.delete(t),o.size===0&&this.buckets.delete(r))}tick(){this.clock+=1e3*this.multiplier;for(let[n,r]of this.buckets.entries())if(this.clock%n===0)for(let o of r)o&&!o.isFetching&&o.refetch();let t=1e3*this.multiplier;this.intervalId=setTimeout(()=>this.tick(),t)}destroy(){clearTimeout(this.intervalId)}};l();d();var Sn=class{static{i(this,"MemoryEvictionManager")}queryClient;multiplier;intervalId;currentFlush=new Set;nextFlush=new Set;constructor(t,n=1){this.queryClient=t,this.multiplier=n,this.intervalId=setInterval(this.tick,6e4*this.multiplier)}scheduleEviction(t){this.nextFlush.add(t)}cancelEviction(t){this.currentFlush.delete(t),this.nextFlush.delete(t)}tick=i(()=>{if(this.queryClient){for(let t of this.currentFlush)this.queryClient.queryInstances.delete(t);this.currentFlush=this.nextFlush,this.nextFlush=new Set}},"tick");destroy(){clearInterval(this.intervalId)}};var bc=i((e,t)=>he([e.id,e.shapeKey,t]),"queryKeyFor"),$o=class{static{i(this,"QueryClient")}store;context;entityMap=new Ar;queryInstances=new Map;memoryEvictionManager;refetchManager;networkManager;isServer;constructor(t,n={fetch},r,o,s){this.store=t,this.context=n,this.memoryEvictionManager=o??new Sn(this,this.context.evictionMultiplier),this.refetchManager=s??new An(this.context.refetchMultiplier),this.networkManager=r??new Wt,this.isServer=typeof self>"u"}getContext(){return this.context}saveQueryData(t,n,r,o,s){this.store.saveQuery(t,n,r,o,s)}activateQuery(t){let{def:n,queryKey:r}=t;this.store.activateQuery(n,r),n.type!=="stream"&&n.cache?.refetchInterval&&this.refetchManager.addQuery(t),this.memoryEvictionManager.cancelEviction(r)}loadCachedQuery(t,n){return this.store.loadQuery(t,n,this.entityMap)}getQuery(t,n){let r=bc(t,n),o=this.queryInstances.get(r);return o===void 0&&(o=new Sr(t,this,r,n),this.queryInstances.set(r,o)),o}hydrateEntity(t,n){return this.entityMap.hydratePreloadedEntity(t,n)}saveEntity(t,n,r,o){let s=this.entityMap.setEntity(t,n,r);return this.store.saveEntity(t,n,o),s}destroy(){this.refetchManager.destroy(),this.memoryEvictionManager.destroy()}},xr=er(void 0);l();d();l();d();l();d();function wc(e){let t=[],n=[],r=new Set,o=0,s=/\[([^\]]+)\]/g,a;for(;(a=s.exec(e))!==null;)t.push(e.slice(o,a.index)),n.push(a[1]),r.add(a[1]),o=s.lastIndex;return t.push(e.slice(o)),c=>{let f=t[0];for(let m=0;m<n.length;m++)f+=encodeURIComponent(String(c[n[m]]))+t[m+1];let u=null;for(let m in c)!r.has(m)&&c[m]!==void 0&&(u===null&&(u=new URLSearchParams),u.append(m,String(c[m])));return u!==null&&(f+="?"+u.toString()),f}}i(wc,"createPathInterpolator");var Ec=new Map;function If(e){let t,n=i(()=>{if(t===void 0){let{path:o,method:s="GET",response:a,cache:c,pagination:f}=e(),u=`${s}:${o}`,m,p;typeof a=="object"?a instanceof Ce?(m=a,p=a.shapeKey):a instanceof Set?(m=a,p=he(a)):(m=j.object(a),p=m.shapeKey):(m=a,p=he(m));let h=wc(o);t={type:f?"infiniteQuery":"query",id:u,shape:m,shapeKey:p,fetchFn:i(async(w,E)=>{let v=h(E);return(await w.fetch(v,{method:s})).json()},"fetchFn"),pagination:f,cache:c}}return t},"getQueryDefinition"),r=fo(o=>{let s=lo(xr);if(s===void 0)throw new Error("QueryClient not found");return s.getQuery(n(),o)});return Ec.set(r,n),r}i(If,"buildQueryFn");function Lf(e){return If(e)}i(Lf,"query");function Wo(e){let t,n=i(()=>{if(t===void 0){let{id:o,response:s,subscribe:a,cache:c}=e();if(!(s instanceof Ce)||!(s.mask&1024))throw new Error("Stream query response must be an EntityDef");t={type:"stream",id:o,shape:s,shapeKey:s.shapeKey,subscribeFn:i((f,u,m)=>a(u,m),"subscribeFn"),cache:c}}return t},"getStreamDefinition"),r=fo(o=>{let s=lo(xr);if(s===void 0)throw new Error("QueryClient not found");return s.getQuery(n(),o)});return Ec.set(r,n),r}i(Wo,"streamQuery");l();d();var Nr=R(Q());l();d();var Of=new vs({[qe.Solana]:{},[qe.Ethereum]:{},[qe.Polygon]:{},[qe.Base]:{},[qe.Arbitrum]:{},[qe.Monad]:{},[qe.Bitcoin]:{},[qe.Sui]:{},[qe.Hypercore]:{},[qe.Hyperevm]:{}}),ut=Ts(Of);l();d();l();d();l();d();var Uf=["UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"],zo=class{static{i(this,"EventSource")}ERROR=-1;CONNECTING=0;OPEN=1;CLOSED=2;CRLF=`\r
`;LF=`
`;CR="\r";lastEventId=null;status=this.CONNECTING;eventHandlers={open:[],message:[],error:[],close:[]};method;timeout;timeoutBeforeConnection;withCredentials;headers;body;debug;interval;lineEndingCharacter;_xhr=null;_pollTimer=null;_lastIndexProcessed=0;url;constructor(t,n={}){if(!t||typeof t!="string"&&typeof t.toString!="function")throw new SyntaxError("[EventSource] Invalid URL argument.");this.url=typeof t.toString=="function"?t.toString():t,this.method=n.method||"GET",this.timeout=n.timeout??0,this.timeoutBeforeConnection=n.timeoutBeforeConnection??0,this.withCredentials=n.withCredentials||!1,this.headers=n.headers||{},this.body=n.body||void 0,this.debug=n.debug||!1,this.interval=n.pollingInterval??5e3,this.lineEndingCharacter=n.lineEndingCharacter||null,this._pollAgain(this.timeoutBeforeConnection,!0)}_pollAgain(t,n){(t>0||n)&&(this._logDebug(`[EventSource] Will open new connection in ${t} ms.`),this._pollTimer=setTimeout(()=>{this.open()},t))}open(){try{this.status=this.CONNECTING,this._lastIndexProcessed=0,this._xhr=new XMLHttpRequest,this._xhr.open(this.method,this.url,!0),this.withCredentials&&(this._xhr.withCredentials=!0),this._xhr.setRequestHeader("Accept","text/event-stream"),this._xhr.setRequestHeader("Cache-Control","no-cache"),this._xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");for(let[t,n]of Object.entries(this.headers))this._xhr.setRequestHeader(t,n);this.lastEventId!==null&&this._xhr.setRequestHeader("Last-Event-ID",this.lastEventId),this._xhr.timeout=this.timeout,this._xhr.onreadystatechange=()=>{if(this.status===this.CLOSED)return;let t=this._xhr;this._logDebug(`[EventSource][onreadystatechange] ReadyState: ${Uf[t.readyState]||"Unknown"}(${t.readyState}), status: ${t.status}`),[XMLHttpRequest.DONE,XMLHttpRequest.LOADING].includes(t.readyState)&&(t.status>=200&&t.status<400?(this.status===this.CONNECTING&&(this.status=this.OPEN,this.dispatch("open",{type:"open"}),this._logDebug("[EventSource][onreadystatechange][OPEN] Connection opened.")),this._handleEvent(t.responseText||""),t.readyState===XMLHttpRequest.DONE&&(this._logDebug("[EventSource][onreadystatechange][DONE] Operation done."),this._pollAgain(this.interval,!1))):t.status!==0&&(this.status=this.ERROR,this.dispatch("error",{type:"error",message:t.responseText,xhrStatus:t.status,xhrState:t.readyState}),t.readyState===XMLHttpRequest.DONE&&(this._logDebug("[EventSource][onreadystatechange][ERROR] Response status error."),this._pollAgain(this.interval,!1))))},this._xhr.onerror=()=>{this.status!==this.CLOSED&&(this.status=this.ERROR,this.dispatch("error",{type:"error",message:this._xhr.responseText,xhrStatus:this._xhr.status,xhrState:this._xhr.readyState}))},this.body?this._xhr.send(this.body):this._xhr.send(),this.timeout>0&&setTimeout(()=>{this._xhr.readyState===XMLHttpRequest.LOADING&&(this.dispatch("error",{type:"timeout"}),this.close())},this.timeout)}catch(t){this.status=this.ERROR,this.dispatch("error",{type:"exception",message:t.message,error:t})}}_logDebug(...t){this.debug&&console.debug(...t)}_handleEvent(t){if(this.lineEndingCharacter===null){let u=this._detectNewlineChar(t);if(u!==null)this._logDebug(`[EventSource] Automatically detected lineEndingCharacter: ${JSON.stringify(u).slice(1,-1)}`),this.lineEndingCharacter=u;else{console.warn("[EventSource] Unable to identify the line ending character. Ensure your server delivers a standard line ending character: \\r\\n, \\n, \\r, or specify your custom character using the 'lineEndingCharacter' option.");return}}let n=this._getLastDoubleNewlineIndex(t);if(n<=this._lastIndexProcessed)return;let r=t.substring(this._lastIndexProcessed,n).split(this.lineEndingCharacter);this._lastIndexProcessed=n;let o,s=null,a=[],c=0,f="";for(let u=0;u<r.length;u++)if(f=r[u].trim(),f.startsWith("event"))o=f.replace(/event:?\s*/,"");else if(f.startsWith("retry"))c=parseInt(f.replace(/retry:?\s*/,""),10),isNaN(c)||(this.interval=c);else if(f.startsWith("data"))a.push(f.replace(/data:?\s*/,""));else if(f.startsWith("id"))s=f.replace(/id:?\s*/,""),s!==""?this.lastEventId=s:this.lastEventId=null;else if(f===""&&a.length>0){let m=o||"message",p={type:m,data:a.join(`
`),url:this.url,lastEventId:this.lastEventId};this.dispatch(m,p),a=[],o=void 0}}_detectNewlineChar(t){let n=[this.CRLF,this.LF,this.CR];for(let r of n)if(t.includes(r))return r;return null}_getLastDoubleNewlineIndex(t){let n=this.lineEndingCharacter+this.lineEndingCharacter,r=t.lastIndexOf(n);return r===-1?-1:r+n.length}addEventListener(t,n){this.eventHandlers[t]===void 0&&(this.eventHandlers[t]=[]),this.eventHandlers[t].push(n)}removeEventListener(t,n){this.eventHandlers[t]!==void 0&&(this.eventHandlers[t]=this.eventHandlers[t].filter(r=>r!==n))}removeAllEventListeners(t){let n=Object.keys(this.eventHandlers);if(t===void 0)for(let r of n)this.eventHandlers[r]=[];else{if(!n.includes(t))throw Error(`[EventSource] '${t}' type is not supported event type.`);this.eventHandlers[t]=[]}}dispatch(t,n){if(Object.keys(this.eventHandlers).includes(t))for(let o of Object.values(this.eventHandlers[t]))o(n)}close(){this.status!==this.CLOSED&&(this.status=this.CLOSED,this.dispatch("close",{type:"close"})),clearTimeout(this._pollTimer),this._xhr&&this._xhr.abort()}},Yo=zo;l();d();var Xo=class{static{i(this,"AbstractStreamEventProducer")}getDefaultHeaders(){let t={"X-Phantom-Version":Wn,"X-Phantom-Platform":zn},n=Yn();return n&&(t["X-Phantom-AnonymousId"]=n),t}getOptions(t={}){return{...t,headers:Object.fromEntries(cn(this.getDefaultHeaders(),t.headers).entries())}}getOptionsWithAuth(t,n={}){let r=this.getOptions(n);if(r.withClientAuth!==!1){let o=Xn(t,r.headers);return{...r,headers:Object.fromEntries(cn(r.headers,o).entries())}}return r}getApiEnvironment(){return $n()}safeJsonParse(t){try{return t?{success:!0,data:JSON.parse(t)}:{success:!1,error:new Error("No data provided")}}catch(n){return{success:!1,error:n instanceof Error?n:new Error("Failed to parse JSON")}}}createErrorEvent(t,n="error"){return{type:n,error:typeof t=="string"?new Error(t):t}}};l();d();function Jo({url:e,signal:t,customEvent:n}){return{[Symbol.asyncIterator](){let r=[],o=null,s=!1,a={"X-Phantom-Version":Wn,"X-Phantom-Platform":zn},c=Yn();c&&(a["X-Phantom-AnonymousId"]=c);let f=Xn(e,a),u={headers:Object.fromEntries(cn(a,f).entries()),lineEndingCharacter:`
`},m=new Yo(e,u),p=i(v=>{try{r.push(JSON.parse(v.data??""))}catch{r.push(v.data??"")}if(o){let k=o;o=null,k({value:r.shift(),done:!1})}},"onMessage"),h=i(()=>{s||(s=!0,w(),b())},"onError"),b=i(()=>{if(o){let v=o;o=null,v({value:void 0,done:!0})}},"finish"),w=i(()=>{n&&m.removeEventListener(n,p),m.removeEventListener("message",p),m.removeEventListener("error",h),m.close()},"cleanup");n&&m.addEventListener(n,p),m.addEventListener("message",p),m.addEventListener("error",h);let E=i(()=>{s||(s=!0,w(),b())},"onAbort");return t?.addEventListener("abort",E,{once:!0}),{next(){return s?Promise.resolve({value:void 0,done:!0}):r.length?Promise.resolve({value:r.shift(),done:!1}):new Promise(v=>{o=v})},return(){return s||(s=!0,t?.removeEventListener("abort",E),w()),Promise.resolve({value:void 0,done:!0})},throw(v){return s||(s=!0,t?.removeEventListener("abort",E),w()),Promise.reject(v)}}}}}i(Jo,"sseIterable");l();d();function Tc(e){return{usd:e.price??void 0,usd_24h_change:e.priceChange24h??void 0,price:e.price??void 0,priceChange24h:e.priceChange24h??void 0,lastUpdatedAt:e.lastUpdatedAt}}i(Tc,"priceUpdateDataToPriceData");var Bf=P({minutes:5}),Kf=100,vc=5,Vf=P({seconds:1}),Hf=P({seconds:30}),Zo=class{static{i(this,"PriceStreamManager")}subscriptions=new Map;activeConnection=null;currentTokenIds=new Set;subscriptionOrder=[];connectionState="disconnected";reconnectAttempts=0;reconnectTimeoutId=null;subscribe(t,n,r){!this.subscriptions.has(t)&&this.subscriptions.size>=Kf&&this.evictOldestToken();let o={priceCallback:n,evictedCallback:r?.onEvicted};return this.subscriptions.has(t)?(this.removeFromSubscriptionOrder(t),this.subscriptionOrder.push(t)):(this.subscriptions.set(t,new Set),this.subscriptionOrder.push(t)),this.subscriptions.get(t).add(o),this.updateConnection(),()=>{let s=this.subscriptions.get(t);if(s){for(let a of s)if(a.priceCallback===n){s.delete(a);break}s.size===0&&(this.subscriptions.delete(t),this.removeFromSubscriptionOrder(t),this.updateConnection())}}}updateConnection(){let t=new Set(this.subscriptions.keys());if(t.size===0){this.disconnect();return}this.setsEqual(this.currentTokenIds,t)&&this.activeConnection&&this.connectionState==="connected"||this.connectionState==="reconnecting"&&this.setsEqual(this.currentTokenIds,t)||(this.disconnect(),this.connect(t))}connect(t){let n=new AbortController;this.activeConnection=n,this.currentTokenIds=new Set(t),this.connectionState="connecting";let r=Array.from(t).map(s=>encodeURIComponent(s)).join(","),o=`${$n()}/price-stream?throttleMs=5000&tokenIds=${r}`;this.consumeStream(o,n.signal)}async consumeStream(t,n){try{let r=Jo({url:t,signal:n,customEvent:"price-update"});this.connectionState="connected",this.reconnectAttempts=0;for await(let o of r){if(n.aborted)break;this.handlePriceUpdate(o)}}catch{n.aborted||(this.connectionState="disconnected",this.scheduleReconnect())}}handlePriceUpdate(t){let n=t.caip19,r=this.subscriptions.get(n);if(!r)return;if(!t.price){let s=new Date(t.lastUpdatedAt).getTime();if(Date.now()-s<Bf)return}let o=Tc(t);r.forEach(s=>{try{s.priceCallback(n,o)}catch{}})}disconnect(){this.cancelReconnection(),this.activeConnection&&(this.activeConnection.abort(),this.activeConnection=null),this.currentTokenIds.clear(),this.connectionState!=="disconnected"&&(this.connectionState="disconnected")}setsEqual(t,n){if(t.size!==n.size)return!1;for(let r of t)if(!n.has(r))return!1;return!0}evictOldestToken(){if(this.subscriptionOrder.length===0)return;let t=this.subscriptionOrder[0],n=this.subscriptions.get(t);n&&(n.forEach(r=>{if(r.evictedCallback)try{r.evictedCallback(t)}catch{}}),n.clear()),this.subscriptions.delete(t),this.removeFromSubscriptionOrder(t),this.updateConnection()}removeFromSubscriptionOrder(t){let n=this.subscriptionOrder.indexOf(t);n>-1&&this.subscriptionOrder.splice(n,1)}scheduleReconnect(){if(this.reconnectAttempts>=vc){this.connectionState="disconnected";return}if(this.subscriptions.size===0)return;this.connectionState="reconnecting",this.reconnectAttempts++;let t=Math.min(Vf*Math.pow(2,this.reconnectAttempts-1),Hf);this.reconnectTimeoutId=setTimeout(()=>{if(this.reconnectTimeoutId=null,this.subscriptions.size===0){this.connectionState="disconnected";return}this.connect(new Set(this.subscriptions.keys()))},t)}cancelReconnection(){this.reconnectTimeoutId&&(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=null)}getConnectionState(){return this.connectionState}getStats(){return{connectionState:this.connectionState,activeSubscriptions:this.subscriptions.size,reconnectAttempts:this.reconnectAttempts,maxReconnectAttempts:vc,currentTokenIds:Array.from(this.currentTokenIds)}}forceReconnect(){this.subscriptions.size!==0&&(this.reconnectAttempts=0,this.disconnect(),this.connect(new Set(this.subscriptions.keys())))}destroy(){this.cancelReconnection(),this.disconnect(),this.subscriptions.clear(),this.subscriptionOrder.length=0,this.connectionState="disconnected",this.reconnectAttempts=0}},Ac=new Zo;l();d();l();d();l();d();var zt;(function(e){e[e.Always=1/0]="Always",e[e.Short=P({days:1})]="Short",e[e.Medium=P({days:3})]="Medium",e[e.Long=P({days:7})]="Long",e[e.VeryLong=P({days:30})]="VeryLong",e[e.Never=0]="Never"})(zt||(zt={}));var Ae;(function(e){e[e.Immediate=0]="Immediate",e[e.VeryShort=P({seconds:1})]="VeryShort",e[e.Short=P({seconds:15})]="Short",e[e.Medium=P({minutes:3})]="Medium",e[e.Long=P({minutes:5})]="Long",e[e.VeryLong=P({minutes:10})]="VeryLong",e[e.Never=1/0]="Never"})(Ae||(Ae={}));var Ze;(function(e){e[e.VeryShort=P({seconds:2})]="VeryShort",e[e.Short=P({seconds:15})]="Short",e[e.Medium=P({minutes:3})]="Medium",e[e.Long=P({minutes:5})]="Long"})(Ze||(Ze={}));var Sc=P({seconds:10}),xc={gcTime:zt.Short,staleTime:Ae.Short};l();d();var Gf="prices",Cr=i((e,t)=>{if(!Jn(e))return;let r=e.response?.status;if(!r||r===0||r>=500||r===404){B.addBreadcrumb(Gf,e.message,te.Info,t);return}r>=400&&r<500&&B.captureError(e,K.Prices)},"captureClientError");var Pc=g.object({price:g.number(),priceChange24h:g.number(),lastUpdatedAt:g.string().datetime().optional()}),Cc=g.object({prices:g.record(ys,Pc)});async function Dt({tokens:e}){try{let t=e.filter(a=>!ut.get(a.chainId)?.pricesDisabled),n={tokens:t.map(a=>({token:a}))},r="/price/v1",o,s=re.timeout(Sc).retry(1,200).validateStatus(!0).api();if(t.length===0)return{};if(t.length===1){let a=t[0];r+=`/${a.chainId}`,a.resourceType===le.nativeToken?r+=`/nativeToken/${a.slip44}`:r+=`/address/${a.address}`;let c=await s.get(r);o=Cc.parse({prices:{[oe(a)]:c.data}})}else{let a=await s.post(r,n);o=Cc.parse(a.data)}return Qf(o.prices)}catch(t){throw Cr(t),t}}i(Dt,"getPrices");function Qf(e){let t={};for(let n of Object.keys(e)){let{price:r,priceChange24h:o,lastUpdatedAt:s}=e[n],a={price:r,usd:r,usd_24h_change:o,lastUpdatedAt:s};t[n]=a}return t}i(Qf,"pricesToPriceMap");l();d();function Pr(e){return{caip19:_o(e)}}i(Pr,"parseCaip19Able");function _o(e){return typeof e=="string"?ze(e):e}i(_o,"fungibledCaip19");l();d();var Mr="prices",Se={price:i(e=>[Mr,{id:e}],"price"),priceError:i(()=>[Mr,"error"],"priceError"),priceHistory:i((e,t)=>[Mr,e,t],"priceHistory"),priceHistoryInterval:i((e,t,n,r)=>[Mr,e,t,n,...r?[r]:[]],"priceHistoryInterval"),tempPrices:i(e=>["tempPrices",e],"tempPrices")};var Mc=new Error("Price not available"),Nc=i(e=>{let t=e?e.data:void 0;return t?qf(t):void 0},"tokenIdFromQuery"),Dc=i(({query:e,enabled:t=!0,queryOptions:n={refetchInterval:Ze.Short,staleTime:Ae.Short,gcTime:Ae.Short}})=>{let r=Nc(e),o=n.refetchInterval,s=n.staleTime,a=n.gcTime,c=e?e.data:void 0,f=c?Pr(c).caip19.chainId:void 0,u=f?!ut.get(f).pricesDisabled:!1;return{enabled:t&&!!r&&u,queryKey:Se.price(r),refetchInterval(p){return p.state.error===Mc?!1:o},staleTime:s,gcTime:a,retry:!1,queryFn:i(async()=>{if(!c||!r)throw new Error("No caip19able provided");let p=_o(c);try{let b=(await Dt({tokens:[p]}))[r];if(!b)throw new Error(`Failed to fetch price for ${c}`);return b}catch(h){let b=h;throw r&&(b.response?.status===404||b.response?.status===400)?Mc:h}},"queryFn")}},"getPriceQueryConfig");function qf(e){return typeof e=="string"?e:oe(e)}i(qf,"encodedCaip19");var jf=Vo(()=>({__typename:j.typename("TokenPrice"),id:j.id,usd:j.union(j.number,j.undefined),usd_24h_change:j.union(j.number,j.undefined),price:j.union(j.number,j.undefined),priceChange24h:j.union(j.number,j.undefined),currencyValue:j.union(j.number,j.undefined),currencyChange:j.union(j.number,j.undefined),lastUpdatedAt:j.union(j.string,j.undefined)})),$f=Wo(()=>({id:"PriceStream",response:jf,params:{tokenId:j.union(j.string,j.undefined)},subscribe:i((e,t)=>e.tokenId?Ac.subscribe(e.tokenId,(n,r)=>{t({...r,__typename:"TokenPrice",id:e.tokenId})}):()=>{},"subscribe")})),Wf=i(e=>{let{value:t,error:n,isReady:r,isResolved:o,isPending:s,isRejected:a,isFetching:c}=Cs($f,{tokenId:e});return(0,Nr.useMemo)(()=>({data:t,error:n,isFetched:r,isFetching:c,isSuccess:o,isLoading:s,isError:a}),[t,n,r,o,s,a,c])},"usePriceLegacyInterop");function kt({query:e,enabled:t=!0,queryOptions:n={refetchInterval:Ze.Short,staleTime:Ae.Short,gcTime:Ae.Short}}){let[r]=(0,Nr.useState)(Rs("enable-signalium-query-price-streaming"));if(!r)return F(Dc({query:e,enabled:t,queryOptions:n}));let o=Nc(e);return Wf(o)}i(kt,"usePrice");l();d();l();d();var Lc=R(Q());l();d();var kc=i(function(e,t=0){let n=3735928559^t,r=1103547991^t;for(let o=0,s;o<e.length;o++)s=e.charCodeAt(o),n=Math.imul(n^s,2654435761),r=Math.imul(r^s,1597334677);return n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(n^n>>>13,3266489909),4294967296*(2097151&r)+(n>>>0)},"cyrb53");l();d();function Rc(e){return e.data.map(Pr)}i(Rc,"parseQueries");l();d();l();d();var Fc=i((e,t)=>Array.apply(0,new Array(Math.ceil(e.length/t))).map((n,r)=>e.slice(r*t,(r+1)*t)),"chunks");var zf=500;async function Ic({queryClient:e,queries:t}){let n={};try{let r={},o=[];for(let u of t){let m=u.caip19,p=oe(m);if(r[p])continue;r[p]=!0;let h=Se.price(p),b=e.getQueryState(h);if(b&&Date.now()-b.dataUpdatedAt<xc.staleTime){n[p]=b.data;continue}o.push(m)}let s=await Promise.allSettled(Fc(o,zf).map(u=>Dt({tokens:u}))),a=[],c=s.some(u=>u.status==="rejected"),f=s.reduce((u,m)=>m.status==="rejected"?u:{...u,...m.value},{});for(let u of o){let m=oe(u),p=f[m],h=Se.price(m);!p&&c&&(p=e.getQueryData(h)),p&&(n[m]=p),a.push(()=>{let b=p??null;e.setQueryData(h,b,{updatedAt:Date.now()})})}if(c){let u=e.getQueryData(Se.priceError())??0;e.setQueryData(Se.priceError(),u+1)}else e.removeQueries({queryKey:Se.priceError()});Yf(a,50)}catch(r){Cr(r)}return n}i(Ic,"fetchPricesFn");function Yf(e,t){let n=e.length,r=0;function o(){let s=e.slice(r,r+t);nr.batch(()=>{s.forEach(a=>a())}),r+=t,r<n&&setTimeout(o,0)}i(o,"processNextChunk"),o()}i(Yf,"updateCacheInChunks");var Xf=i(e=>typeof e=="string"?e:e.resourceType==="nativeToken"?e.slip44:e.address,"uniqueStringFromCaip19Able"),Jf=i((e,t)=>e.localeCompare(t),"compare"),Oc=i(e=>{let t=e.map(Xf).sort(Jf).join(",");return kc(t)},"getPricesKey"),Uc=i(({query:e,enabled:t=!0,key:n,queryOptions:r={refetchInterval:Ze.Short},queryClient:o})=>{let{refetchInterval:s}=r,a=Rc(e),c=t&&e!=null&&e.data.length>0;return{queryKey:Se.tempPrices(n),staleTime:Ae.Immediate,gcTime:zt.Never,refetchInterval:s,queryFn:i(()=>Ic({queryClient:o,queries:a}),"queryFn"),enabled:c}},"getPricesQueryConfig");function ei({query:e,enabled:t=!0,queryOptions:n={refetchInterval:Ze.Short}}){let r=Z(),o=(0,Lc.useMemo)(()=>Oc(e.data),[e]);return F(Uc({query:e,enabled:t,key:o,queryOptions:n,queryClient:r}))}i(ei,"usePrices");l();d();var ti=i(()=>F({queryKey:Se.priceError(),queryFn:i(()=>{throw new Error("This query is cache-only")},"queryFn"),enabled:!1,initialData:0,staleTime:1/0}),"usePricesErrorCount");l();d();l();d();var VA=g.object({caip19:g.string(),price:g.number().nullish(),priceChange24h:g.number().nullish(),lastUpdatedAt:g.string(),marketCap:g.string().nullish()}),Zf=[g.literal("1H"),g.literal("1D"),g.literal("1W"),g.literal("1M"),g.literal("YTD"),g.literal("ALL")],HA=g.union(Zf).nullish().transform(e=>e??"1D");var _f=[g.literal("1m"),g.literal("5m"),g.literal("1h"),g.literal("4h"),g.literal("1d"),g.literal("1w"),g.literal("4w"),g.literal("1mo")],GA=g.union(_f).nullish().transform(e=>e??"1d"),em=g.object({unixTime:g.number(),value:g.string()}),Bc=g.object({history:g.array(em)});var xn=new Error("Price history unavailable for this token"),ni=new Error("Insufficient data for this time frame and token"),tm=i(async({caip19:e,timeFrame:t})=>{let n=ze(e);if(ut.get(n.chainId)?.pricesDisabled)throw xn;let o=await re.api().get("/price-history/v1",{params:{token:e,type:t}});if(o.status===400)throw xn;let s=Bc.safeParse(o.data);if(!s.success)throw xn;if(s.data.history.length<2)throw ni;return s.data.history},"fetchPriceHistory"),nm=i(({caip19:e,timeFrame:t})=>({queryKey:Se.priceHistory(e,t),queryFn:i(()=>tm({caip19:e,timeFrame:t}),"queryFn"),staleTime:Ae.Short,gcTime:Ae.Short}),"getPriceHistoryQueryConfig"),Kc=i(e=>F(nm(e)),"usePriceHistory");l();d();var rm=1*60*1e3,om=i(e=>{let t=e.queryKey[1];return Object.prototype.hasOwnProperty.call(t??{},"id")?e.state.dataUpdatedAt>Date.now()-rm:String(t)===Se.priceError()[1]},"pricesShouldDehydrateQueryPredicate");l();d();l();d();l();d();var Gc=R(Hc()),Dr=R(Wd());(0,Gc.default)(Dr.default.localeData("en"),{abbreviations:{thousand:"K",million:"M",billion:"B",trillion:"T"}});l();d();var Qc=i(e=>{let t=e?Math.floor(Math.log10(e)):0,n=t<0?Math.pow(10,1-t):100;return Math.round(e*n)/n},"roundToTwoTrailingDecimals");var pm=i(e=>{let t=Math.abs(e);if(t<1e3)return e;let n=Math.floor(Math.log10(t)),r=n>=6?1e5:n>=5?1e3:100;return Math.sign(e)*Math.floor(t/r)*r},"floorForDisplay"),qc=i((e,t={})=>{let n=typeof e=="number"?e:V(e).toNumber(),{includePlusPrefix:r=!1,prefix:o="",infix:s="",suffix:a="",extendedDecimalsForSmallNumbers:c=!1,minimumAmount:f=.01,format:u="0,0.[00]",decimalFormatSmallNumbers:m="0.[00]",roundDecimals:p=!1}=t,h=n<0?"-":"",b=r&&n>0?"+":h,w=p?Qc(Math.abs(n)):Math.abs(n);if(t.compact&&w>=1e3&&(w=Math.abs(pm(n))),Math.abs(n)>=f||n===0){let E=Math.abs(n)>1?t.compact?"0.[00]a":u:m,v=(0,Dr.default)(w).format(E);return`${o}${b}${s}${v}${a}`}else if(c){let E=new V(w).abs().toFormat();return`${o}${b}${s}${E}${a}`}else return`${o}${b}<${s}${new V(f).toFormat()}${a}`},"formatNumber");var se=R(Q());l();d();var jc=i(({priceHistory:e,realtimePriceUpdates:t})=>{let n=e.at(-1),r=e.at(-2);if(!n||!r)return e.map(c=>({...c,tooltipUnixTime:c.unixTime}));let o=n.unixTime-r.unixTime,s=t.map((c,f)=>({unixTime:n.unixTime+(f+1)*o,value:c.value,tooltipUnixTime:c.unixTime}));return[...e.map(c=>({...c,tooltipUnixTime:c.unixTime})),...s]},"ensureConsistentIntervals");l();d();var $c=i(({priceHistory:e,currentPrice:t})=>{let n=e.at(-1),r=e.at(-2),o=e.map(c=>({...c,tooltipUnixTime:c.unixTime}));if(t===void 0||!n||!r)return o;let s=n.unixTime-r.unixTime,a={unixTime:n.unixTime+s,value:t.toString(),tooltipUnixTime:n.unixTime+s};return[...o,a]},"ensureLatestPricing");l();d();var Wc=R($d()),Yt=R(Q());var zc=i((e,t=100)=>{let[n,r]=(0,Yt.useState)(e),o=(0,Yt.useMemo)(()=>(0,Wc.default)(s=>r(s),t),[t]);return(0,Yt.useEffect)(()=>o(e),[o,e]),n},"useThrottle");var hm=i(({error:e,chainId:t,prices:n,isPending:r})=>{if(ut.get(t).pricesDisabled)return ne.t("assetDetailPriceNoValue");if(e===xn)return ne.t("assetDetailPriceHistoryUnavailable");if(e===ni||!r&&n.length===0)return ne.t("assetDetailPriceHistoryInsufficientData");if(e)return ne.t("assetDetailPriceHistoryError")},"getErrorText"),ym=i(({caip19:e,userLocale:t="en-US",timeFrame:n="1D"})=>{let{t:r}=Be(),o=Ke(),s=Z(),[a,c]=(0,se.useState)(n),f=(0,se.useCallback)(J=>{if(J!==a){c(J);try{let{symbol:Ee}=s.getQueryData(gr.tokenDetails({caip19:e,includePrice:!0}))||{};o.capture("onPublicFungibleTimeframeChanged",{data:{timeFrame:J,caip19:e,symbol:typeof Ee=="string"?Ee:void 0}})}catch(Ee){console.error("error capturing onPublicFungibleTimeframeChanged",Ee)}}},[o,e,s,a]),{data:u,isPending:m,error:p}=Kc({caip19:e,timeFrame:a}),{data:h}=kt({query:{data:e},queryOptions:{refetchInterval:Ze.VeryShort,staleTime:Ae.VeryShort}}),b=(0,se.useMemo)(()=>{if(u){if(h?.price&&h.lastUpdatedAt&&u){let J=h.price,Ee=new Date(h.lastUpdatedAt),Bt={value:J.toString(),unixTime:Math.floor(Ee.getTime()/1e3)};return jc({priceHistory:u,realtimePriceUpdates:[Bt]})}return $c({priceHistory:u,currentPrice:h?.price})}},[u,h?.price,h?.lastUpdatedAt]),E=ze(e).chainId,v=h?.price,k=h?.usd_24h_change,G=(0,se.useMemo)(()=>!v||!k?null:v/(1+k/100),[v,k]),[W,ge]=(0,se.useState)(null);(0,se.useEffect)(()=>{b?.length&&ge(b)},[b,ge]);let ee=(0,se.useMemo)(()=>b||W||[],[b,W]),be=hm({error:p,chainId:E,prices:ee,isPending:m});(0,se.useEffect)(()=>{be&&ge(null)},[be]);let ae=(0,se.useMemo)(()=>[{timeFrame:"1H",label:r("assetDetailTimeFrame1H")},{timeFrame:"1D",label:r("assetDetailTimeFrame1D")},{timeFrame:"1W",label:r("assetDetailTimeFrame1W")},{timeFrame:"1M",label:r("assetDetailTimeFrame1M")},{timeFrame:"YTD",label:r("assetDetailTimeFrameYTD")},{timeFrame:"ALL",label:r("assetDetailTimeFrameAll")}].map(J=>({...J,label:J.label?.toUpperCase()})),[r]),[we,Me]=(0,se.useState)(null),Ne=zc(we,100),[A,T]=(0,se.useMemo)(()=>{if(!ee.length)return[G??null,v??null];let[J,Ee]=[ee[0],ee[ee.length-1]].map(Bt=>new V(Bt.value).toNumber());return[J,v||Ee]},[v,G,ee]),C=(0,se.useMemo)(()=>Ne??T,[Ne,T]),S=(0,se.useMemo)(()=>T===null||A===null?null:T-A,[A,T]),N=(0,se.useMemo)(()=>C===null||A===null?null:C-A,[C,A]),M=(0,se.useMemo)(()=>{if(N===null||A===null||A===0)return null;let J=N/A*100;return`${qc(J,{includePlusPrefix:!0})}%`},[N,A]),H=(0,se.useCallback)(J=>{let Ee=new Date(J*1e3),Bt=Ee.toLocaleTimeString(t,{hour:"2-digit",minute:"2-digit"}),cs=Ee.toLocaleString(t,{month:"short",day:"2-digit"}),Id=Ee.getFullYear(),us=ee.at(-1);if(us&&us.unixTime===J)return r("assetDetailPriceHistoryNow");switch(a){case"1H":case"1D":return Bt;case"1W":case"1M":return`${Bt}, ${cs}`;case"YTD":case"ALL":return`${cs}, ${Id}`;default:return a}},[t,ee,a,r]),$=(0,se.useMemo)(()=>ut.get(E).pricesDisabled??!1,[E]);return{activeTimeFrame:a,setActiveTimeFrame:f,prices:ee,isPending:m,errorText:be,timeFrames:ae,setScrubValue:Me,scrubValue:Ne,currentPrice:C,overallPriceChange:S,currentPriceChange:N,formattedPercentageChange:M,formatTimeFrameText:H,hidePriceAmounts:$,hideTimeFrames:$}},"usePriceHistoryState");l();d();l();d();var ri=g.object({feerate:g.string()}),Yc=g.object({conservative:ri,economical:ri,unset:ri}),gm=g.object({recommended:g.object({priceEstimates:Yc}),bitcoin_rpc:g.object({priceEstimates:Yc})}),bm=g.object({gasPriceSources:gm}),wm=new Y("1.25"),Em=new Y("1.5"),Xc=i(async(e,t=!0)=>{let n,r,o;try{let{priceEstimates:s}=(await Tm(e)).gasPriceSources.recommended,{conservative:a,economical:c,unset:f}=s;n=new Y(a.feerate),r=new Y(c.feerate),o=new Y(f.feerate)}catch(s){if(!t)throw s;let a=await la(e).estimateSmartFee(2,"ECONOMICAL");o=new Y(a.feerate),r=o.times(wm),n=o.times(Em)}return{[me.fast]:{btcPerKilobyte:n.multipliedBy(1)},[me.standard]:{btcPerKilobyte:r.multipliedBy(1)},[me.slow]:{btcPerKilobyte:o.multipliedBy(1)}}},"getBitcoinTransactionSpeeds");async function Tm(e){let t=`https://gas-price-oracle.phantom.app/?chainId=${e}`,n=await re.headers({"Content-Type":"application/json"}).get(t);return bm.parse(n.data)}i(Tm,"getBitcoinTransactionUnitCosts");l();d();var Xt="gas-estimation";var vm=3,Am=600,Sm=P({seconds:30}),Rt=i(({networkID:e,enableFallback:t=!1,retry:n=vm,retryDelay:r=Am,enabled:o=!0})=>F({queryFn:i(async()=>{try{if(!e)throw new Error("Missing networkID");if(x.isBitcoinNetworkID(e))return await Xc(e,t);if(x.isEVMNetworkID(e))return await Zs(e,t);if(x.isSolanaNetworkID(e))throw new Error("Transaction speeds is not supported for Solana.");if(x.isSuiNetworkID(e))throw new hs("transaction speeds to unit cost");return Fe(e)}catch(s){throw s instanceof Js||(B.addBreadcrumb(Xt,`enableFallback: ${t}, networkID: ${e}`,te.Info),B.captureError(s,K.Transaction)),s}},"queryFn"),queryKey:q.transactionSpeedsToUnitCost(e),refetchOnMount:"always",retry:n,retryDelay:r,staleTime:Sm,enabled:o&&!!e&&(x.isEVMNetworkID(e)||x.isBitcoinNetworkID(e)),placeholderData:tr}),"useTransactionSpeedsToUnitCost");l();d();l();d();var Jc=i(async(e,t)=>{let n=zs(e),r=await Qs.eth_estimateGas(n,[t]);if("error"in r)throw new Error(`[${r.error.code}] ${r.error.message}`);return new Y(r.result)},"estimateGas");var ex=new Y(21e3),xm=6,Cm=600,Pm=P({seconds:5}),Mm=P({days:1}),oi=i((e,t=!0)=>F({queryFn:i(async()=>{if(!e)throw new Error("Args is required for calculating transaction units.");try{return await Nm(e)}catch(r){throw B.addBreadcrumb(Xt,`networkId: ${e?.networkID}`,te.Info),B.captureError(r,K.Transaction),r}},"queryFn"),queryKey:q.transactionUnitAmount(e),enabled:!!e&&(x.isEVMNetworkID(e.networkID)||x.isBitcoinNetworkID(e.networkID))&&t,retry:xm,retryDelay:Cm,staleTime:Pm,gcTime:Mm}),"useTransactionUnitAmount"),Nm=i(async e=>{if(dr(e)){let{gas:t}=e.unsignedTransaction;if(t)return{gasLimit:new Y(t,16)};{let n=await Jc(e.networkID,e.unsignedTransaction);return{gasLimit:new Y(_s(n))}}}else if(lr(e)){let t=e.psbtChain,n=t?new Y(vo(t.map(o=>o.additionalCost.vb.toNumber()))):new Y(0),r=t?new Y(vo(t.map(o=>o.additionalCost.sats.toNumber()))):new Y(0);return{virtualBytes:new Y(e.vb),additionalCosts:{vb:n,sats:r}}}else throw new Error(`Unsupported transaction networkId: ${e.networkID} for calculating transaction units.`)},"getTransactionUnitAmount");l();d();l();d();var kr=R(Bd(),1),_c=R(Kt(),1);var Zc=(0,kr.struct)([(0,kr.u8)("instruction")]);function eu(e,t,n,r=[],o=fn){let s=ka([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],n,r),a=Buffer.alloc(Zc.span);return Zc.encode({instruction:Na.CloseAccount},a),new _c.TransactionInstruction({keys:s,programId:o,data:a})}i(eu,"createCloseAccountInstruction");l();d();var Dm=P({seconds:30}),km=P({minutes:5}),tu=i(e=>F({queryKey:q.transactionAdditionalCosts(e),queryFn:i(async()=>{if(!e)return new Y(0);let t=Pt.get(e.networkID).additionalTransactionCost;return t?await t(e):new Y(0)},"queryFn"),enabled:!!e,staleTime:Dm,gcTime:km}),"useTransactionAdditionalCosts");var Rm=6,Fm=600,Im=P({seconds:5}),Lm=P({days:1}),Om=[me.fast,me.standard,me.slow],Um=i(e=>{if(!e)return me.fast;for(let t of Om)if(e[t])return t;throw new Error("No valid transaction speeds found.")},"getFastestSpeed"),ii=i(e=>{let t=Vm(e),n=e?.queryOptions?.refetchInterval,{data:r,isError:o}=oi(e?.multichainTransaction,t),{data:s}=Rt({networkID:e?.networkID,enableFallback:!0,refetchInterval:n}),{data:a}=tu(e?.multichainTransaction),c=Km(e,r,s);return F({queryFn:i(async()=>{try{if(!e)throw new Error("Missing args");let{multichainTransaction:u,transactionSpeed:m=me.standard}=e;if(!u)throw new Error("Multichain transaction is null.");if(o&&si(e.networkID))throw new Error("Transaction unit amount is required but errored.");if(dr(u)||lr(u)){if(!s)throw new Error("Missing transactionSpeedsToUnitCost");if(!r)throw new Error("Missing transactionUnit");let p=m==="fastest"?Um(s):m,h=s[p];if(!h)throw new Error(`Missing transactionSpeedsToUnitCost for ${m}`);return qt(u.networkID,h,r,a)}if(aa(u))return u.networkID===Zn.Localnet?{networkID:u.networkID,value:0,highFees:!1}:await Ra(u.networkID,u.transaction.map(h=>"version"in h?h.message:h.compileMessage()));if(ca(u))return await xa(u);Fe(u)}catch(u){throw B.addBreadcrumb(Xt,`chainId: ${e?.networkID}`,te.Info),B.captureError(u,K.Transaction),u}},"queryFn"),queryKey:q.gasEstimation(e?.networkID,e?.multichainTransaction,e?.transactionSpeed,a),enabled:c,retry:Rm,retryDelay:Fm,refetchInterval:n,staleTime:Im,gcTime:Lm,placeholderData:i(u=>u,"placeholderData")})},"useGasEstimation");function si(e){return x.isBitcoinNetworkID(e)||x.isEVMNetworkID(e)?!0:x.isSolanaNetworkID(e)||x.isSuiNetworkID(e)?!1:Fe(e)}i(si,"isTransactionUnitAmountRequired");function Bm(e){return x.isBitcoinNetworkID(e)||x.isEVMNetworkID(e)?!0:x.isSolanaNetworkID(e)||x.isSuiNetworkID(e)?!1:Fe(e)}i(Bm,"isTransactionUnitCostsBySpeedRequired");function Km(e,t,n){if(!e)return!1;let{networkID:r,multichainTransaction:o}=e;return o?(!!t||!si(r))&&(!!n||!Bm(r)):!1}i(Km,"calculateGasEstimationEnabled");function Vm(e){return e?si(e.networkID):!1}i(Vm,"calculateTransactionUnitAmountEnabled");l();d();l();d();var Hm=new Error("missing price"),Gm=new Error("Unable to format gas estimation"),Rr=i((e,t)=>{if(!t.usd)throw Hm;try{let n=x.getTokenDecimals(e.networkID);if(ur(e)){let r=ya(e),s=new V(r).div(dn(n)).times(new V(t.usd));return{gasEstimationPriceUSD:ln(s),gasEstimationPriceUSDNumber:s.toNumber(),gasEstimationAmount:r}}else if(Ht(e)){let r=ga(e),s=r.div(new V(fe.LAMPORTS_PER_SOL)).times(t.usd);return{gasEstimationPriceUSD:ln(s),gasEstimationPriceUSDNumber:s.toNumber(),gasEstimationAmount:r}}else if(cr(e)){let o=oa(e.gasBudget,n).times(t.usd);return{gasEstimationPriceUSD:ln(o),gasEstimationPriceUSDNumber:o.toNumber(),gasEstimationAmount:e.gasBudget}}else if(Gt(e)){let r=ba(e),s=new V(r).div(dn(n)).times(t.usd);return{gasEstimationPriceUSD:ln(s),gasEstimationPriceUSDNumber:s.toNumber(),gasEstimationAmount:r}}else throw Fe(e),new Error("unsupported chain type")}catch{throw Gm}},"createGasEstimationPrice");var Qm=i((e,t,n)=>{let r=e?x.getChainID(e):null,o=r?_n(r):void 0,{data:s,isFetched:a}=kt({query:{data:o}}),c=!!e&&!!t&&a,f=q.gasEstimationPrice(e,t);return F({enabled:c,queryKey:f,queryFn:i(()=>{if(!s||!t)throw new Error("missing args");return Rr(t,s)},"queryFn"),refetchOnMount:!0,placeholderData:tr,...n||{}})},"useGasEstimationPrice");l();d();var su=R(sr(),1),au=R(zd(),1);l();d();var nu=Object.prototype.hasOwnProperty;function ru(e,t,n){for(n of e.keys())if(Ft(n,t))return n}i(ru,"find");function Ft(e,t){var n,r,o;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Ft(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(o=r,o&&typeof o=="object"&&(o=ru(t,o),!o)||!t.has(o))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(o=r[0],o&&typeof o=="object"&&(o=ru(t,o),!o)||!Ft(r[1],t.get(o)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(nu.call(e,n)&&++r&&!nu.call(t,n)||!(n in t)||!Ft(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}i(Ft,"dequal");var Pn=R(Q(),1);l();d();var Cn=R(sr(),1),ou=R(Q(),1);function iu(e,t){let n=(0,ou.useRef)((0,Cn.default)());F({queryKey:["PENDING-TX-POLLER",e],enabled:e.length>0,queryFn:i(()=>ha(e,t),"queryFn"),refetchInterval:i(()=>(0,Cn.default)().diff(n.current,"seconds")<30?5*1e3:(0,Cn.default)().diff(n.current,"minutes")<2?15*1e3:(0,Cn.default)().diff(n.current,"minutes")<5?30*1e3:!1,"refetchInterval")})}i(iu,"usePendingTransactionsFromEndpoint");su.default.extend(au.default);var Mn=i(e=>{let t=ke(),n=(0,Pn.useRef)([]),r=(0,Pn.useRef)([]);(0,Pn.useEffect)(()=>{n.current=[],r.current=[]},[e]);let o=q.pendingTransactions(e),s=i(async()=>{let a=await fa(t),c=ma(a,e);if(!Ft(c,n.current)){let f=n.current.filter(u=>!c.find(m=>m.id===u.id));Ft(f,r.current)||(r.current=f),n.current=c}return{pendingTransaction:n.current,removedPendingTransactions:r.current}},"queryFn");return iu(e,t),F({queryKey:o,queryFn:s,refetchInterval:1e3,staleTime:500,gcTime:0,refetchOnMount:!0,enabled:!!e.length})},"usePendingTransactions");l();d();var du=R(Q(),1);l();d();var cu=i(e=>({connection:Qt(e),cluster:mr(e)}),"solanaNetworkIDToConnection"),uu=i(()=>cu(At.Solana.Mainnet),"getDefaultSolanaConnection"),lu=i(e=>{let t,n=e?.addresses??[];for(let o of n)if(x.isSolanaNetworkID(o.networkID)){t=o.networkID;break}let r=t??At.Solana.Mainnet;return cu(r)},"selectSolanaConnection");var Nn=i(()=>{let e=(0,du.useMemo)(uu,[]),{data:t=e}=Ve({select:lu});return t},"useSelectedSolanaConnection");l();d();var fu=R(Ud(),1);l();d();var ht=R(Q(),1);var mu=(0,ht.createContext)(null),qm=i(({children:e})=>{let{data:t}=Hs(),{data:n,isLoading:r}=bo(t),o=t&&n?po[t].languageCode:ir.languageCode,s=t||ir.value,a=t&&n?po[t].symbol:ir.symbol,c=(0,ht.useCallback)((p,h)=>Intl.NumberFormat(o,{style:"currency",currency:s,...h}).format(p),[s,o]),f=(0,ht.useCallback)(p=>!t||!n?Number(p):V(p).div(V(n)).toNumber(),[t,n]),u=(0,ht.useCallback)((p,h)=>{if(!t||!n)return Number(p);let b=V(p).times(V(n));return h===void 0?b.toNumber():b.decimalPlaces(h).toNumber()},[t,n]),m={isLoading:r,currencyLocale:o,currencySymbol:a,currencyCode:s,toUsd:f,fromUsd:u,formatLocalizedPrice:c};return(0,fu.jsx)(mu.Provider,{value:m,children:e})},"LocalizedCurrencyProvider"),Dn=i(()=>{let e=(0,ht.useContext)(mu);if(!e)throw new Error("useLocalizedCurrency must be used within a LocalizedCurrencyProvider");return e},"useLocalizedCurrency");l();d();l();d();var Hu=R(Q(),1);l();d();var pu=i(async e=>{try{return await Ys(At.Ethereum.Mainnet).resolveName(e)}catch(t){return console.error(t),null}},"resolveEVMDomainName");l();d();var hu=i(async(e,t)=>{let n="/uns/v1/resolve";try{let r=await re.api().headers({"Content-Type":"application/json"}).post(n,{query:e,chainId:t});if(!Ue(r))throw Eo;let o=r.data;if(o.address===""||o.status!=="OK")throw Eo;return o.address}catch{return null}},"resolveSolanaHandle");l();d();var Bu=R(Uu(),1);var Ku=i(async(e,t)=>{try{if(!x.isSolanaNetworkID(t))return null;let n=mr(t),r=da(n),s=await new Bu.TldParser(r).getOwnerFromDomainTld(e);return s?s.toString():null}catch{return null}},"fetchAnsDomainOwner");l();d();var Vu=i(async(e,t)=>{try{if(!x.isSuiNetworkID(t))return null;let n=ua(t);return e.toLowerCase().endsWith(".sui")&&await n.resolveNameServiceAddress({name:e})||null}catch{return null}},"fetchSuiNsDomainOwner");function Ti(e,t){let n=e?.toLowerCase(),r=vi(n,t),o=r.error,s=(0,Hu.useMemo)(()=>o===ar?ne.t("sendFormErrorInvalidDomain"):o===js?ne.t("sendFormErrorInvalidSolanaAddress"):o===$s?ne.t("sendFormErrorInvalidTwitterHandle"):o===wo?ne.t("sendFormErrorInvalidUsername"):"",[o]);return{...r,error:s}}i(Ti,"useResolveDomainOwner");function vi(e,t){let n=Us(),r=Ke(),o=!!e&&!!t,s=q.resolveDomainName(e,t);return F({queryKey:s,queryFn:i(async()=>{if(!e||!t)throw qs;let c=await Gu(e,t,n,r);return{address:c?.owner??null,type:c?.type??null,handle:e}},"queryFn"),enabled:o})}i(vi,"useFetchDomainOwner");var Fp=i(async(e,t)=>{try{if(e.startsWith("@")||!x.isEVMNetworkID(t))return null;let[n]=Ls(e);if(n){let r=await pu(e);if(!r)throw ar;return r}return null}catch(n){return B.captureError(n instanceof Error?n:new Error(`Unable to resolve EVM domain: ${e}`),K.Transaction),null}},"fetchEVMDomainOwner"),Ip=i(async(e,t,n)=>{try{if(e.startsWith("@")||!x.isSolanaNetworkID(t))return null;let[r,o,s]=Is(e);(r||o||s)&&n.capture("resolveDomainBonfida");let a=r||o||s,c=null;if(a&&(c=await hu(e,t),!c))throw ar;return c}catch(r){return B.captureError(r instanceof Error?r:new Error(`Unable to resolve solana domain: ${e}`),K.Transaction),null}},"fetchSolanaDomainOwner"),Lp=i(async(e,t,n)=>{try{if(!e.startsWith("@"))return null;let r=e.slice(1),o=await n.getUserProfileByUsername(r),s=o?.username?.toLowerCase()===r.toLowerCase(),a=o?.addresses?o.addresses?.[t]!==void 0:!1,c=!!o&&s&&a,f=null;if(c&&(f=o.addresses[t],!f))throw wo;return f}catch(r){return B.captureError(r instanceof Error?r:new Error(`Unable to resolve username: ${e}`),K.Auth),null}},"fetchUsernameDomainOwner");async function Gu(e,t,n,r){let o=or.isFeatureEnabled("kill-suins"),s=[{type:"username",fetch:Lp(e,t,n)},{type:"solana",fetch:Ip(e,t,r)},{type:"evm",fetch:Fp(e,t)},{type:"ans",fetch:Ku(e,t)}];o||s.push({type:"suins",fetch:Vu(e,t)});let a=await Promise.all(s.map(({fetch:f})=>f)),c=a.findIndex(f=>f!==null);return c===-1?null:{type:s[c].type,owner:a[c]}}i(Gu,"fetchDomainOwner");l();d();var Qu=R(Q(),1);function Op(e,t){let n=Gs(e,500),{data:r,error:o,isLoading:s}=Ti(n,t),c=r?.address??e,f=e.length>0,m=!f||e!==n||s,p=(0,Qu.useMemo)(()=>{if(m)return;if(o)return o;if(!ws(c,t))return ne.t("sendFormInvalidAddress",{assetName:x.getChainName(t)})},[t,m,o,c]);return{recipientError:p,currentRecipient:c,isStaleRecipient:m,disabledDueToRecipient:!!p||m||!f,isRecipientLoading:s&&e!==""}}i(Op,"useRecipient");l();d();var Up=3,Bp=500,Kp=5e3,Vp=i((e,t,n)=>F({async queryFn(){if(x.isEVMNetworkID(e))try{return await Hp(e,t,n)}catch(r){throw B.captureError(r,K.Transaction),r}},queryKey:q.gasEstimationTimeToMine(e,t,n),retry:Up,retryDelay:Bp,refetchInterval:Kp,enabled:x.isEVMNetworkID(e)&&x.isMainnetNetworkID(e)}),"useEvmTimeToMineEstimate");async function Hp(e,t,n){let r=`https://gas-price-oracle.phantom.app/time_to_mine?chainId=${e}&maxFeePerGas=${t}&maxPriorityFeePerGas=${n}`,o={Accept:"application/json","Content-Type":"application/json"},s=await re.headers(o).get(r);if(s.status!==200)throw new Error("Error estimating time to mine");return s.data}i(Hp,"fetchEvmTimeToMineEstimate");l();d();l();d();var Gp=i(({networkID:e,refetchInterval:t,transactionSpeed:n=me.standard,gasLimit:r,enabled:o=!0})=>{let{data:s,status:a,fetchStatus:c,isError:f,isPending:u,isFetched:m,isSuccess:p}=Rt({networkID:e,refetchInterval:t,enableFallback:!0,enabled:o}),h;if(o&&s&&r){let{maxFeePerGas:w,maxPriorityFeePerGas:E}=s[n];h={networkID:e,gasLimit:r,maxFeePerGas:w,maxPriorityFeePerGas:E}}return{status:a,data:h,isError:f,isLoading:u,fetchStatus:c,hasFailed:m&&!p}},"useEvmGasEstimation");l();d();var qu=i(e=>{let t=e[0]?.networkID,n=t?x.getChainID(t):null,r=n?_n(n):void 0,{data:o}=kt({query:{data:r}});return ks({queries:e.map(a=>({queryKey:q.gasEstimationPrice(t,a),queryFn:i(()=>{if(!o||!a)throw new Error("missing args");return Rr(a,o)},"queryFn")}))}).map(a=>a.data)},"useGasEstimationPrices");l();d();var ju=R(Q(),1);var Qp=P({days:5}),qp=i(()=>{let e=Ke(),t=Z(),{data:n={}}=F({queryKey:q.timestamps(),queryFn:i(()=>({...t.getQueryData(q.timestamps())||{}}),"queryFn")});(0,ju.useEffect)(()=>{let r=Object.values(n),{staleTimestampDatas:o,freshTimestampDatas:s}=r.reduce((c,f)=>{let u=Math.max(...Object.values(f.timestamps));return Date.now()-u>Qp?c.staleTimestampDatas.push(f):c.freshTimestampDatas.push(f),c},{staleTimestampDatas:[],freshTimestampDatas:[]});ta(t,o?.map(c=>c.transactionId)??[]);let a=s.filter(c=>c.timestamps.appUpdated);na(a,e,t)},[n,e,t])},"useLogTimestamps");l();d();var $u=R(Q(),1);var Ai=i((e,t,n=!1)=>{let r=Z();return(0,$u.useCallback)((o,s,a)=>{if(o===void 0)return;let c=q.timestamps(),u=r.getQueryData(c)||{[o]:{chainId:t,transactionType:e,isLedger:n,transactionId:o,timestamps:{}}},m=u[o];if(m?.timestamps[s])return;let p={...u,[o]:{...m||{chainId:t,transactionType:e,isLedger:n,transactionId:o,timestamps:{}},timestamps:{...m?.timestamps??{},[s]:a??Date.now()}}};r.setQueryData(c,p)},[t,n,r,e])},"useMarkTimestamp");l();d();function jp(e){let t=ke(),n=Xe();return Ye({mutationFn:i(async o=>await jt({...o,accountSigner:n,connection:e,storage:t}),"mutationFn")})}i(jp,"useSignAndSendSolanaTransactionAsync");l();d();l();d();function Wu(e){return e!=null}i(Wu,"nonNullable");var Un=R(Q(),1);var $p={[me.fast]:"gasFast",[me.standard]:"gasAverage",[me.slow]:"gasSlow"};function Wp(e,t,n){let[r,o]=(0,Un.useState)(t),s=n??ra(e),{data:a={}}=Rt({networkID:e}),c=(0,Un.useMemo)(()=>Object.keys(a).reduce((v,k)=>{let G=k,W=a[G];return W&&(v[G]=qt(e,W,s,void 0)),v},{}),[a,e,s]),f=Object.keys(c),u=Object.values(c),m=qu(Object.values(c)),p=u.map(v=>fr(v)),{fromUsd:h,formatLocalizedPrice:b}=Dn(),w=f.map((v,k)=>{let G=u[k],W=m[k],ge=p[k];return zp(W,ge,v,G,h,b)});return{presets:(0,Un.useMemo)(()=>w.map((v,k)=>({description:v,title:ne.t($p[f[k]]),selected:r===f[k],onClick:i(()=>o(f[k]),"onClick"),withBorderTop:k!==0})),[w,f,r]),transactionSpeed:r}}i(Wp,"useTransactionSettingsViewState");var zp=i((e,t,n,r,o,s)=>{let a=[],c=e?.gasEstimationPriceUSDNumber?o(e?.gasEstimationPriceUSDNumber):void 0,f=c?s(c,{maximumFractionDigits:4}):void 0,u=f?ne.t("gasUpTo",{amount:f}):t?ne.t("gasUpTo",{amount:t}):void 0;a.push(u);let m=r?Pt.get(r.networkID).transactionSettingsRowFeeDescription?.(r):void 0;a.push(m);let p=r?.networkID;if(p){let h=Pt.get(p).transactionSpeedDescription(n);h&&a.push(ne.t(h))}return a.filter(Wu).join("  \u2022  ")},"getSpeedDescriptionString");l();d();function Yp(e){let{data:t}=Mn(e?[e]:[]);if(e&&x.isBitcoinNetworkID(e.networkID))return!t||t.pendingTransaction.length===0?void 0:{title:ne.t("sendSummaryBitcoinPendingTxTitle"),description:ne.t("sendSummaryBitcoinPendingTxDescription"),buttonText:ne.t("gotIt")}}i(Yp,"useTxSubmissionCheck");l();d();var zu=R(Q(),1);l();d();var Hr=Os(ke,e=>Ta(new Ea(e)));var Xp="transactions-utxo-state",Jp=6,Zp=600,_p=P({seconds:30}),eh=P({seconds:5}),th=P({minutes:10}),Si=i(e=>{let t=Hr(),n=mo("enable-bypass-utxo-protection");return F({queryFn:Yu(e,t,n),queryKey:q.utxoState(e,n),enabled:Xu(e),retry:Jp,retryDelay:Zp,refetchInterval:_p,staleTime:eh,gcTime:th})},"useUtxoState");function nh(e){let t=Hr(),n=Z(),r=mo("enable-bypass-utxo-protection"),o=q.utxoState(e,r);(0,zu.useEffect)(()=>{Xu(e)&&n.prefetchQuery({queryKey:o,queryFn:Yu(e,t,r)})},[])}i(nh,"usePrefetchUtxoState");function Yu(e,t,n){return async()=>{try{if(!e)throw new Error("chainAddress not provided when fetching utxo state.");if(uo(e)){await t.refetchUtxos(e,n);let[r,o,s]=await Promise.all([t.getSafeToSendUtxos(e.address,n),t.getInscribedUtxos(e.address),t.getRareSatsUtxos(e.address)]);return{safeToSendUtxos:r,inscribedUtxos:o,rareSatsUtxos:s}}else throw new Error(`Unsupported chain address type for fetching utxo state: ${e.addressType}`)}catch(r){if(Jn(r)){let o=r.response?.status;va(r,o,Xp)}throw r}}}i(Yu,"queryFn");function Xu(e){return!!e&&uo(e)}i(Xu,"enabled");l();d();function rh(e,t){let n=e?.toLowerCase(),{data:r}=vi(n,t);return r?.address||e}i(rh,"useResolveDomainOwnerIfNecessary");l();d();var oh=i(({networkID:e,gasEstimation:t,gasEstimationPrice:n})=>{let r=fr(t),{fromUsd:o,formatLocalizedPrice:s}=Dn(),a=n?.gasEstimationPriceUSDNumber?o(n?.gasEstimationPriceUSDNumber):void 0,c=a?s(a,{maximumFractionDigits:4}):void 0,f=!x.isMainnetNetworkID(e),u=c&&!f?c:r||void 0;return Pt.get(e).networkFeeRowString(u,c)},"useNetworkFee");l();d();var Ju=R(Q(),1);function ih(e,t,n){let r=e.data.transactions[e.data.transactions.length-1],{data:o}=Mn(n?.addresses||[]),s=e.networkID;(0,Ju.useEffect)(()=>{let v=o?.pendingTransaction.find(k=>k.id===e.id);(!v||v.data.transactions.some(k=>k.confirmations>0))&&t()},[o?.pendingTransaction,t,e]);let a={networkID:s,unsignedTransaction:r.unsignedTransaction},{data:c,status:f}=ii({networkID:s,transactionSpeed:me.fast,multichainTransaction:a,queryOptions:{refetchInterval:!1}}),u=new Y(r.unsignedTransaction.maxFeePerGas??"0"),m=c?.maxFeePerGas&&c?.maxFeePerGas.gt(u)?c?.maxFeePerGas:u,p=new Y(r.unsignedTransaction.maxPriorityFeePerGas??"0"),h=c?.maxPriorityFeePerGas&&c?.maxPriorityFeePerGas.gt(p)?c?.maxPriorityFeePerGas:p,b=m?.multipliedBy(1.11).integerValue(),w=h?.multipliedBy(1.11).integerValue();return{data:qt(s,{maxFeePerGas:b,maxPriorityFeePerGas:w},{gasLimit:new Y(r.unsignedTransaction.gas??"0")},c?.l1Fee),status:f}}i(ih,"useReplacementEvmTransactionGasEstimate");l();d();var sh=i(()=>{let e=or.getMultivariateAssignment("frontend-transaction-sharing-delay-ms");if(!e)return Ao;let t=parseInt(e);return Number.isNaN(t)?Ao:t},"getTransactionSharingDelay"),ah=i(()=>({delayMs:sh()}),"useTransactionSharingConfig");l();d();l();d();var Zu=i(async(e,t,n)=>{let{accountIdentifier:r,nonce:o,pendingTransaction:s,pendingTransactionInput:a,gasEstimation:c}=t,{data:{transactions:f}}=s,u=f[f.length-1],{callPayload:m,unsignedTransaction:p}=u,{networkID:h}=s,b=await pr({accountSigner:e,accountIdentifier:r,networkID:h,unsignedTransaction:{...p,...pa(c),nonce:Sa(new Y(o))},callPayload:{...m},pendingTransactionInput:a,storage:n});return{networkID:h,id:b}},"speedUpEvmTransaction");function ch(){let e=Xe(),t=ke();return Ye({mutationFn:i(async r=>Zu(e,r,t),"mutationFn")})}i(ch,"useSpeedUpEvmTransaction");l();d();function uh(e,t){let n=Ke(),r=!!t,o=q.waitForTransactionConfirmation(t);return F({enabled:r,queryKey:o,queryFn:i(async()=>{if(!t){let a="Missing chainID or transactionReceipt.";throw new Error(a)}try{if(x.isSolanaNetworkID(t.networkID)){let a=Qt(t.networkID);await Fa({connection:a,signature:t.id})}else if(x.isEVMNetworkID(t.networkID))await Xs(t.networkID,t.id);else if(x.isBitcoinNetworkID(t.networkID))await Aa(t.networkID,t.id);else if(x.isSuiNetworkID(t.networkID))await Ca(t.networkID,t.id);else throw new Error("Unsupported transaction receipt type.");return e(t),!0}catch(a){if(a&&a instanceof Ws)throw a;let c="Unable to send transaction.";a.message&&(c=a.message);let{networkID:f}=t,u={chainId:x.getChainID(f),networkId:f};throw n.capture("waitForTransactionConfirmationError",{data:{...u,errorMessage:a.message}}),new Error(c)}},"queryFn")})}i(uh,"useWaitForTransactionConfirmation");l();d();var lh=i(e=>{let t=e.transaction.getData();return F({queryKey:q.suiTransaction(t),queryFn:i(()=>Pa(e),"queryFn")})},"useSuiTransaction");l();d();var dh=/[e|+|-]/i;function fh(e,t){let n=Math.floor(e*t*100)/100;return!Number.isFinite(n)||n.toString().match(dh)?0:n}i(fh,"assetToDollars");function mh(e,t,n){let r=V(e);return t<=0||!r.isFinite()?0:r.dividedBy(t).decimalPlaces(n).toNumber()}i(mh,"dollarsToAsset");l();d();l();d();function xi({balance:e,priceId:t,priceMap:n}){let r=t?n[t]?.usd:void 0,o=t?n[t]?.usd_24h_change:void 0;if(r===void 0)return{usd:void 0,usd_24h_change:void 0,price:r};let s=e.multipliedBy(r),a;return o!==void 0&&(a=s.minus(s.dividedBy(1+o/100))),{usd:s.toNumber(),usd_24h_change:a?.toNumber(),price:r,priceChange24h:o,currencyValue:s.toNumber(),currencyChange:a?.toNumber()}}i(xi,"calculatePriceData");l();d();l();d();l();d();var nt;(function(e){e.AccountIdToHiddenMints="accountIdToHiddenMints"})(nt||(nt={}));var ph=g.union([g.object({version:g.literal(1),value:g.record(g.array(g.string()))}),g.object({version:g.literal(2),value:g.record(g.array(g.object({mintId:g.string(),status:g.nativeEnum(mn)})))})]),hh=i((e,t)=>{let n=t,r=e;return n||r||null},"visibilityOverridesResolver"),[yh,_u,el]=Ps("fungibles",[{key:nt.AccountIdToHiddenMints,type:"object",validator:ph,nullable:!0,resolver:hh,updateOn:"idle"}]),tl=i((...e)=>xs(yh,...e),"useFungiblesStorage");var nl=R(Q());function Ci(e){let t=tl(nt.AccountIdToHiddenMints);return(0,nl.useMemo)(()=>{if(!e)return new Map;let o=($t(t??null)?.value??{})[e]??[];return new Map(o.map(s=>[s.mintId,s]))},[t,e])}i(Ci,"useVisibilityOverrides");l();d();var rl=R(Q());var gh=i(()=>{let{connection:e}=Nn(),{data:t}=Ve(),{solanaChainAddress:n,accountIdentifier:r}=(0,rl.useMemo)(()=>({solanaChainAddress:t?.addresses.find(St),accountIdentifier:t?.identifier??""}),[t]),o=ke(),s=Xe(),{t:a}=Be();return Ye({mutationFn:i(async c=>{if(!n)throw new Error("solanaChainAddress not loaded");if(c.type!==I.CompressedSPL)throw new Error("SPL is not compressed");let f=await Ia({owner:c.data.walletAddress,mint:c.data.mintAddress,amount:c.data.amount,programId:c.data.programId,connection:e}),{networkID:u,address:m}=n,p={ownerAddress:m,networkID:u,data:{signature:""},type:Vt.Decompress,display:{summary:{topLeft:{text:a("assetDetailClaiming")}}}};await jt({accountIdentifier:r,accountSigner:s,connection:e,feePayer:new fe.PublicKey(m),pendingTransactionInput:p,storage:o,transaction:f,useSubmissionService:!1})},"mutationFn")})},"useDecompressSpl");l();d();l();d();var rt=R(Q());l();d();function ol(e){let t,n;for(let{data:r}of e){let{usd:o,usd_24h_change:s}=r;o!==void 0&&(t=t!==void 0?t+o:o),s!==void 0&&(n=n!==void 0?n+s:s)}return{value:t,earnings:n}}i(ol,"calculatePortfolio");l();d();function il(e,t){return e.getQueriesData({predicate:i(r=>r.queryKey[0]===Ga.transferFungibleLoggingContext,"predicate")}).map(([,r])=>r).filter(r=>{if(!r)return!1;let{previousBalance:o,fungibleKey:s}=r,a=t.get(s);return a?!a.data.balance.isEqualTo(o):!1})}i(il,"checkForExpectedAppUpdates");l();d();var sl=i((e,t)=>{let n=Te.transferFungibleLoggingContext(e);t.removeQueries({queryKey:n})},"removeLoggingContext");l();d();function al({tokens:e,priceMap:t}){let n=[];for(let r of e){let{amount:o,decimals:s}=r.data,a=wr(r),c=oe(a),f=br(r),u=hn(o,s),m={type:r.type,data:{...r.data,balance:u,key:f}},p,h=xi({priceId:c,balance:u,priceMap:t});if(r.type===I.SPL||r.type===I.CompressedSPL){let{mintAddress:b}=r.data;p=b}else if(r.type===I.ERC20||r.type===I.SuiCoin){let{contractAddress:b}=r.data;p=b}else if(r.type===I.BRC20){let{firstCreatedInscriptionId:b}=r.data;p=b}m.data.tokenAddress=p,m.data.usd=h.usd,m.data.price=h.price,m.data.usd_24h_change=h.usd_24h_change,m.data.priceChange24h=h.priceChange24h,m.data.currencyChange=h.currencyChange,m.data.currencyValue=h.currencyValue,n.push(m)}return n}i(al,"tokensToFungibles");function Lt({showHiddenMints:e=!1,keys:t,keyTokens:n,enablePrices:r=!0,enableSorting:o=!0,usePricesQueryOptions:s,useTokenQueryOptions:a}={}){let{data:c}=Ve(),{data:f=[],isPending:u,isRefetching:m,refetch:p,error:h}=qa({chainAddresses:c?.addresses,keys:t,keyTokens:n,queryOptions:a}),b=h!==null,w=Ci(c?.identifier),{query:E}=(0,rt.useMemo)(()=>({query:{data:f.map(wr)}}),[f]),{data:v,isPending:k,isRefetching:G,refetch:W,isError:ge}=ei({query:E,enabled:r&&!u&&c?.identifier!=null,queryOptions:s}),{fungibles:ee,fungibleMap:be}=(0,rt.useMemo)(()=>{let C=e?f:f.filter(M=>{let H=br(M),$=(t||[]).includes(H),ce=hr(w,{key:H,spamStatus:M.data.spamStatus});return $||ce}),S=al({tokens:C,priceMap:v??{}});o&&(t===void 0?S=S.sort(ja):S=S.sort((M,H)=>{let $=t.indexOf(M.data.key),ce=t.indexOf(H.data.key);return $<ce?-1:$>ce?1:0}));let N=new Map;for(let M of S)N.set(M.data.key,M);return{fungibles:S,fungibleMap:N}},[f,t,e,w,v,o]),ae=(0,rt.useMemo)(()=>!!w&&w.size>0&&f.length>0&&ee.length===0,[f,w,ee]),we=Z(),Me=(0,rt.useMemo)(()=>il(we,be),[be,we]),Ne=Ai("send:fungible",At.Solana.Mainnet);(0,rt.useEffect)(()=>{for(let C of Me)Ne(C.transactionId,"appUpdated"),sl(C.fungibleKey,we)},[Me,Ne,we]);let A=(0,rt.useMemo)(()=>ol(ee),[ee]),T=(0,rt.useCallback)(async()=>{await Promise.all([p(),W()])},[p,W]);return{fungibles:ee,portfolio:A,visibilityOverrides:w,isHidingAllFungibles:ae,isLoadingTokens:u,isLoadingPrices:r?k:!1,isRefetchingTokens:m,isRefetchingPrices:r?G:!1,isErrorTokens:b,tokensError:h,isErrorPrices:ge,refetch:T}}i(Lt,"useGetFungibleBalances");function bh({key:e,keyTokens:t,splTokenAccount:n,...r}){let{fungibles:o,...s}=Lt({...r,keys:e?[e]:[],keyTokens:t}),a;return o.length===1?a=o[0]:o.length>1&&n?a=o.find(c=>c.type===I.SPL&&c.data.splTokenAccountPubkey===n):o.length>1&&(a=o.filter(c=>c.type===I.SPL).reduce((c,f)=>!c||f.data.balance.gt(c.data.balance)?f:c,void 0)),{fungible:a,...s}}i(bh,"useGetFungibleBalance");l();d();var sn=R(Q());l();d();l();d();l();d();var en=D(new Ds);function Pi(){return Pi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pi.apply(this,arguments)}i(Pi,"i");y.NODE_ENV!=="production"&&(en.debugPrivate=!0);var wh=i((e,t,n)=>e?.suspense&&Eh(t,n),"a"),Eh=i((e,t)=>e.isPending&&!t,"p"),Th=i(({result:e,throwOnError:t,query:n})=>e.isError&&!e.isFetching&&vh(t,[e.error,n]),"d");function vh(e,t){return typeof e=="function"?e(...t):!!e}i(vh,"E");var Ah=i(e=>e.suspense&&typeof e.staleTime!="number"?Pi({},e,{staleTime:1e3}):e,"l");function cl(e,t,n=r=>r(en)){let r=D(0),o=D(n);y.NODE_ENV!=="production"&&(o.debugPrivate=!0);let s=D(()=>new WeakMap);y.NODE_ENV!=="production"&&(s.debugPrivate=!0);let a=D(u=>{let m=u(o),p=e(u),h=m.defaultQueryOptions(p),b=u(s).get(m);return h._optimisticResults="optimistic",b&&b.setOptions(h,{listeners:!1}),Ah(h)});y.NODE_ENV!=="production"&&(a.debugPrivate=!0);let c=D(u=>{let m=u(o),p=u(a),h=u(s),b=h.get(m);if(b)return b;let w=new t(m,p);return h.set(m,w),w});y.NODE_ENV!=="production"&&(c.debugPrivate=!0);let f=D(u=>{let m=u(c),p=u(a),h=m.getOptimisticResult(p),b=D(h);return y.NODE_ENV!=="production"&&(b.debugPrivate=!0),b.onMount=w=>{let E=m.subscribe(nr.batchCalls(w));return()=>{m.getCurrentResult().isError&&m.getCurrentQuery().reset(),E()}},b});return y.NODE_ENV!=="production"&&(f.debugPrivate=!0),D(u=>{u(r);let m=u(c),p=u(a),h=u(u(f));if(wh(p,h,!1))return m.fetchOptimistic(p);if(Th({result:h,query:m.getCurrentQuery(),throwOnError:p.throwOnError}))throw h.error;return h},(u,m)=>{m(r,p=>p+1)})}i(cl,"b");function ul(e,t=n=>n(en)){return cl(e,Ms,t)}i(ul,"O");function ll(e,t=n=>n(en)){return cl(e,Ns,t)}i(ll,"g");l();d();var sI=Symbol((import.meta.env?import.meta.env.MODE:void 0)!=="production"?"RESET":"");var Mi=i((e,t,n)=>(t.has(n)?t:t.set(n,e())).get(n),"getCached$2"),Sh=new WeakMap,xh=i((e,t,n,r)=>{let o=Mi(()=>new WeakMap,Sh,t),s=Mi(()=>new WeakMap,o,n);return Mi(e,s,r)},"memo3");function ot(e,t,n=Object.is){return xh(()=>{let r=Symbol(),o=i(([a,c])=>{if(c===r)return t(a);let f=t(a,c);return n(c,f)?c:f},"selectValue"),s=D(a=>{let c=a(s),f=a(e);return o([f,c])});return s.init=r,s},e,t,n)}i(ot,"selectAtom");var Ch=i(e=>typeof e?.then=="function","isPromiseLike");function Ph(e=()=>{try{return self.localStorage}catch(n){(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&typeof self<"u"&&console.warn(n);return}},t){var n;let r,o,s={getItem:i((f,u)=>{var m,p;let h=i(w=>{if(w=w||"",r!==w){try{o=JSON.parse(w,t?.reviver)}catch{return u}r=w}return o},"parse"),b=(p=(m=e())==null?void 0:m.getItem(f))!=null?p:null;return Ch(b)?b.then(h):h(b)},"getItem"),setItem:i((f,u)=>{var m;return(m=e())==null?void 0:m.setItem(f,JSON.stringify(u,t?.replacer))},"setItem"),removeItem:i(f=>{var u;return(u=e())==null?void 0:u.removeItem(f)},"removeItem")},a=i(f=>(u,m,p)=>f(u,h=>{let b;try{b=JSON.parse(h||"")}catch{b=p}m(b)}),"createHandleSubscribe"),c;try{c=(n=e())==null?void 0:n.subscribe}catch{}return!c&&typeof self<"u"&&typeof self.addEventListener=="function"&&self.Storage&&(c=i((f,u)=>{if(!(e()instanceof self.Storage))return()=>{};let m=i(p=>{p.storageArea===e()&&p.key===f&&u(p.newValue)},"storageEventCallback");return self.addEventListener("storage",m),()=>{self.removeEventListener("storage",m)}},"subscriber")),c&&(s.subscribe=a(c)),s}i(Ph,"createJSONStorage");var aI=Ph();l();d();l();d();l();d();var Mh=i(e=>{let t=yr(e);if(Je(t))return t===I.BitcoinNative,t;if(t===I.SPL&&e.resourceType===le.address||t===I.ERC20&&e.resourceType===le.address)return e.address;if(t===I.BRC20&&e.resourceType===le.address)return`${e.address}-${ms[0]}`;if(t===I.SuiCoin&&e.resourceType===le.address)return e.address},"getLegacyKey"),dl=Mh;function Nh({caip19:e,...t}){let n=ze(e);return{...t,type:e.includes("/nativeToken:")?"native":"fungible",chainName:x.getChainName(n.chainId).toLowerCase(),encodedCaip19:e,decodedCaip19:n,legacyKey:dl(n)??e}}i(Nh,"getDerivedCaip19Values");var tn=Nh;var Dh=g.object({account:g.string(),quantity:g.number(),quantityString:g.string()}),Bn=g.object({address:g.string(),quantity:g.number(),quantityString:g.string(),lastTransferredDate:g.coerce.date().nullish(),subaccounts:g.array(Dh).optional()}),nn=g.object({price:g.number(),priceChange24h:g.number().optional(),lastUpdatedAt:g.coerce.date(),marketCap:g.number().optional()}).nullish(),fl=g.object({id:g.string(),name:g.string(),imageUri:g.string().nullish().transform(e=>e??""),numTokens:g.number()}),Gr=g.object({compression:g.object({compressed:g.boolean()}).optional(),creators:g.array(g.object({address:g.string(),share:g.number(),verified:g.boolean()})).nullish(),tokenProgram:g.string().nullish(),extensions:La(Oa).nullish()}),Qr=g.enum(["TRUSTED","VERIFIED","NOT_VERIFIED","POSSIBLE_SPAM","SPAM"]),kI=g.object({totalValueUsdCentsCurrent:g.number().optional(),totalValueUsdStringCurrent:g.string().optional(),totalValueUsdCents24h:g.number().optional(),totalValueUsdString24h:g.string().optional(),totalPercentChange24h:g.number().optional()}),ml=g.object({name:g.string().nullish(),symbol:g.string().nullish(),decimals:g.number(),logoUri:g.string().nullish(),extraMetadata:Gr.optional(),price:nn}),Ni=ml.extend({type:g.enum(["native","fungible"]),encodedCaip19:g.string(),decodedCaip19:bs,spamStatus:Qr,chainName:g.string(),legacyKey:g.string()}),kh=ml.extend({caip19:g.string(),spamStatus:Qr.nullish().transform(e=>e??"NOT_VERIFIED")}),pl=g.union([kh.transform(e=>tn(e)),Ni]),hl=Ni.extend({totalQuantity:g.number(),totalQuantityString:g.string(),walletAddress:g.string().optional(),queriedWalletBalances:g.array(Bn),livePrice:nn}),yl=Ni.extend({timestamp:g.string().nullish(),totalQuantityString:g.string(),totalQuantity:g.number(),queriedWalletBalances:g.array(Bn)});l();d();l();d();l();d();function $e(e){let t=D(0),n=D(()=>({i:0}),(f,u)=>{let m=f(n);return Object.assign(m,{m:!0,peek:f,set:u}),u(t,p=>p+1),()=>{m.m=!1,a(m),c(m)}});n.onMount=f=>f();let r=D(f=>{f(t);let u=f(n);if(!u.m||u.irc||u.i&&!u.irf)return u.p;c(u);let m=new Map,p=i(E=>{let v=f(E);return m.set(E,v),v},"getter");p.peek=u.peek;let h=i((...E)=>{try{return++u.i,u.set(...E)}finally{Array.from(m.keys(),f),--u.i}},"setter");h.recurse=(E,...v)=>{if(u.fc){if(y.NODE_ENV!=="production")throw new Error("set.recurse is not allowed in cleanup");return}try{return u.irc=!0,u.set(E,...v)}finally{u.irc=!1,Array.from(m).some(b)&&s(u)}};function b([E,v]){return f(E)!==v}i(b,"areDifferent"),++u.i;function w(){try{if(u.irf=!1,!u.m)return;a(u),u.c=o.effect(p,h)}catch(E){u.e=E,s(u)}finally{u.p=void 0,--u.i}}return i(w,"runEffect"),u.irf?w():u.p=Promise.resolve().then(w)});if(y.NODE_ENV!=="production"){let f=function(u,m){Object.defineProperty(u,"debugLabel",{get:i(()=>`${o.debugLabel??"effect"}:${m}`,"get")}),u.debugPrivate=!0};i(f,"setLabel"),f(t,"refresh"),f(n,"ref"),f(r,"base")}let o=D(f=>void f(r));return o.effect=e,o;function s(f){try{f.irf=!0,f.set(t,u=>u+1)}finally{f.irf=!1}}i(s,"refresh");function a(f){if(typeof f.c=="function")try{f.fc=!0,f.c()}finally{f.fc=!1,f.c=void 0}}i(a,"cleanup");function c(f){if("e"in f){let u=f.e;throw delete f.e,u}}i(c,"throwPendingError")}i($e,"atomEffect");l();d();var Rh=i(()=>{if(typeof self>"u")return!1;try{return typeof chrome<"u"&&(chrome.runtime?.id!==void 0||typeof browser<"u")}catch(e){return console.error("Error checking for extension context:",e),!1}},"isExtensionContext"),Di=class{static{i(this,"ExtensionStorage")}browser;storage;constructor(t){if(!t||!t.storage||!t.storage.local)throw new Error("[ExtensionStorage] Invalid 'browser' object received.");this.browser=t,this.storage=this.browser.storage.local}async get(t){try{let r=(await this.storage.get(t))[t];return r==null||typeof r!="string"?null:JSON.parse(r)}catch(n){return console.error(`[ExtensionStorage.get] Error getting/parsing key (${t}):`,n),null}}async getAll(t){try{let n=await this.storage.get(t),r={};for(let o in n)if(Object.prototype.hasOwnProperty.call(n,o)){let s=n[o];if(s==null||typeof s!="string")r[o]=null;else try{r[o]=JSON.parse(s)}catch(a){console.error(`[ExtensionStorage.getAll] Error parsing key (${o}):`,a),r[o]=null}}return r}catch(n){let r=`[ExtensionStorage.getAll] Error getting keys (${t}): ${n}`;throw console.error(r),new Error(r)}}async remove(t){try{await this.storage.remove(t)}catch(n){let r=`[ExtensionStorage.remove] Error removing key(s) (${t}): ${n}`;throw console.error(r),new Error(r)}}async set(t,n){try{let r=JSON.stringify(n);await this.storage.set({[t]:r})}catch(r){let o=`[ExtensionStorage.set] Error setting/stringifying key (${t}): ${r}`;throw console.error(o),new Error(o)}}async setAll(t){try{let n={};for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=JSON.stringify(t[r]));await this.storage.set(n)}catch(n){let o=`[ExtensionStorage.setAll] Error setting/stringifying keys (${Object.keys(t)}): ${n}`;throw console.error(o),new Error(o)}}async update(t,n){if(!navigator.locks){let r=await this.get(t),o=await n(r);o===null?await this.remove(t):await this.set(t,o);return}try{await navigator.locks.request(`storage.${t}`,async r=>{let o=await this.get(t),s=await n(o);s===null?await this.remove(t):await this.set(t,s)})}catch(r){let o=`[ExtensionStorage.update] Error updating key (${t}): ${r}`;throw console.error(o),new Error(o)}}async clear(){try{await this.storage.clear()}catch(t){let n=`[ExtensionStorage.clear] Error clearing storage: ${t}`;throw console.error(n),new Error(n)}}},qr=class{static{i(this,"WebLocalStorage")}_storage;get storage(){if(!this._storage){if(typeof self>"u")throw new Error("WebLocalStorage requires window.localStorage");this._storage=self.localStorage}return this._storage}async get(t){try{let n=this.storage.getItem(t);return n===null||typeof n!="string"?null:JSON.parse(n)}catch(n){return console.error(`[WebLocalStorage.get] Error getting/parsing key (${t}):`,n),null}}async getAll(t){let n={},r=t??Object.keys(this.storage);for(let o of r)try{let s=this.storage.getItem(o);if(t&&s===null)continue;if(s===null||typeof s!="string")n[o]=null;else try{n[o]=JSON.parse(s)}catch(a){console.error(`[WebLocalStorage.getAll] Error parsing key (${o}):`,a),n[o]=null}}catch(s){console.error(`[WebLocalStorage.getAll] Error reading key (${o}) from storage:`,s),t||(n[o]=null)}return n}async remove(t){try{let n=Array.isArray(t)?t:[t];for(let r of n)this.storage.removeItem(r)}catch(n){let r=`[WebLocalStorage.remove] Error removing key(s) (${t}): ${n}`;throw console.error(r),new Error(r)}}async set(t,n){try{let r=JSON.stringify(n);this.storage.setItem(t,r)}catch(r){let o=`[WebLocalStorage.set] Error setting/stringifying key (${t}): ${r}`;throw console.error(o),new Error(o)}}async setAll(t){let n=!1,r=Object.keys(t);for(let o in t)if(Object.prototype.hasOwnProperty.call(t,o))try{await this.set(o,t[o])}catch{n=!0}if(n)throw new Error(`[WebLocalStorage.setAll] One or more errors occurred while setting keys (${r})`)}async update(t,n){if(!navigator.locks){let r=await this.get(t),o=await n(r);o===null?await this.remove(t):await this.set(t,o);return}try{await navigator.locks.request(`storage.${t}`,async r=>{let o=await this.get(t),s=await n(o);s===null?await this.remove(t):await this.set(t,s)})}catch(r){let o=`[WebLocalStorage.update] Error updating key (${t}): ${r}`;throw console.error(o),new Error(o)}}async clear(){try{this.storage.clear()}catch(t){let n=`[WebLocalStorage.clear] Error clearing storage: ${t}`;throw console.error(n),new Error(n)}}},ki=class{static{i(this,"LocalStorage")}initPromise;storageImpl=null;constructor(){this.initPromise=this._initialize(),this.initPromise.catch(t=>{console.error("LocalStorage initialization failed:",t)})}async _initialize(){if(!this.storageImpl&&!(typeof self>"u"))if(Rh())try{let n=(await import("./browser-polyfill-UM4GLF6W.js")).default;if(!n||!n.storage||!n.storage.local)throw new Error("webextension-polyfill loaded but missing storage.local API.");this.storageImpl=new Di(n)}catch{this.storageImpl=new qr}else this.storageImpl=new qr}async ensureInitialized(){if(await this.initPromise,!this.storageImpl&&typeof self<"u"&&await this._initialize(),!this.storageImpl)throw new Error("LocalStorage is not initialized. Initialization may have failed or is not available in this context.")}async get(t){return await this.ensureInitialized(),this.storageImpl.get(t)}async getAll(t){return await this.ensureInitialized(),this.storageImpl.getAll(t)}async remove(t){return await this.ensureInitialized(),this.storageImpl.remove(t)}async set(t,n){return await this.ensureInitialized(),this.storageImpl.set(t,n)}async setAll(t){return await this.ensureInitialized(),this.storageImpl.setAll(t)}async update(t,n){return await this.ensureInitialized(),this.storageImpl.update(t,n)}async clear(){return await this.ensureInitialized(),this.storageImpl.clear()}},Ri=new ki;l();d();l();d();var Kn=class{static{i(this,"PersistentStore")}namespaceKey;ttlMilliseconds;storage;onError;data={};isLoaded=!1;constructor(t){this.namespaceKey=t.namespaceKey,this.ttlMilliseconds=t.ttlMilliseconds,this.storage=t.storage,this.onError=t.onError,this._load().then(()=>{if(this._cleanupExpired())return this._save()}).catch(n=>{console.error("Failed to load data",n)})}async _load(){if(!this.isLoaded){try{let t=await this.storage.get(this.namespaceKey);t?(this.data=t,(typeof this.data!="object"||this.data===null)&&(this.onError?.(new Error("Stored data is not a valid object."),"load"),this.data={})):this.data={}}catch(t){this.onError?.(t instanceof Error?t:new Error("Failed to parse stored data"),"load"),this.data={}}this.isLoaded=!0}}async _save(){try{await this.storage.set(this.namespaceKey,this.data)}catch(t){this.onError?.(t instanceof Error?t:new Error("Failed to serialize data for storage"),"save")}}_cleanupExpired(){let t=Date.now(),n=!1;for(let r in this.data)Object.prototype.hasOwnProperty.call(this.data,r)&&this.data[r].expiresAt<=t&&(delete this.data[r],n=!0);return n}_updateExpiration(t){return this.data[t]?(this.data[t].expiresAt=Date.now()+this.ttlMilliseconds,!0):!1}async set(t,n){this.isLoaded||await this._load(),this._cleanupExpired(),this.data[t]={value:n,expiresAt:Date.now()+this.ttlMilliseconds},await this._save()}async get(t,n){this.isLoaded||await this._load();let r=this._cleanupExpired(),o=this.data[t];if(!o)return r&&await this._save(),null;let s=this._updateExpiration(t),a=n.safeParse(o.value);return a.success?((r||s)&&await this._save(),a.data):(this.onError?.(new ft(a.error.issues),`get (validation failed for key: ${t})`),delete this.data[t],await this._save(),null)}async remove(t){let n=this._cleanupExpired(),r=!1;Object.prototype.hasOwnProperty.call(this.data,t)&&(delete this.data[t],r=!0),(n||r)&&await this._save()}async clear(){this.data={},await this._save()}};var gl=new Map;function Fh({storage:e,namespaceKey:t,ttlMs:n}){let r=gl.get(t);if(r)return r;if(!e)throw new Error("Storage is required");let o=new Kn({storage:e,namespaceKey:t,ttlMilliseconds:n,onError:i((s,a)=>{console.error(`[PersistentStore Error - ${a}]:`,s.message),s instanceof ft&&console.error("Zod Issues:",s.issues)},"onError")});return gl.set(t,o),o}i(Fh,"getDataStorage");var Fi=Fh;function Ih({atomToStoreOffline:e,namespaceKey:t,ttlMs:n,initialValue:r,schema:o,...s}){let a=D({status:"pending",value:r}),c=D(p=>{if("offlineKey"in s)return p(s.offlineKey);let h=p(e);if("offlineKey"in h&&typeof h.offlineKey=="string")return h.offlineKey;throw new Error("No key provided")}),f=$e((p,h)=>{Fi({storage:Ri,namespaceKey:`.offline.${t}`,ttlMs:n}).get(p(c),o).then(b=>{b&&h(a,{status:"offline",value:b})}).catch(b=>{console.error(b)})}),u=$e((p,h)=>{p(c),h(a,{status:"pending",value:r})}),m=$e((p,h)=>{let b=p(e),w=p(c);b.status==="success"&&b.data&&b.data!==p(a).value&&(h(a,{status:"live",value:b.data}),Fi({storage:Ri,namespaceKey:`.offline.${t}`,ttlMs:n}).set(w,b.data).catch(E=>{B.addBreadcrumb(K.Tokens,"Error storing offline data",te.Error,{namespaceKey:t,error:E.toString()})}))});return ot(D(p=>{let h=p(e);p(u),p(f),p(m);let b=p(a);return h.data?{status:"live",value:h.data}:{status:"offline",value:b.value}}),p=>p.value)}i(Ih,"atomWithOfflineStorage");var jr=Ih;l();d();l();d();var Ii=g.object({caip19:g.string(),name:g.string().nullish(),symbol:g.string().nullish(),decimals:g.number(),spamStatus:Qr.nullish().transform(e=>e??"NOT_VERIFIED"),logoUri:g.string().nullish()}),bl=Ii.extend({totalQuantity:g.number(),totalQuantityString:g.string(),queriedWalletBalances:g.array(Bn),extraMetadata:Gr.optional(),price:nn}),wl=bl.transform(tn),El=g.object({items:g.array(bl),cursor:g.string().nullish().default(null),errors:g.array(g.object({code:g.string(),message:g.string(),details:g.object({chainId:g.string(),address:g.string()})})).optional()}).transform(e=>{let{items:t,cursor:n,errors:r,...o}=e;return{...o,nextCursor:n,tokens:t,errors:r||[],updatedAt:Date.now()}}),Tl=Ii.extend({timestamp:g.string().nullish(),postQuantityString:g.string(),postQuantity:g.number(),price:nn,queriedWalletBalances:g.array(Bn)}),vl=Tl.transform(e=>{let{postQuantity:t,postQuantityString:n,...r}=tn(e);return{...r,totalQuantity:t,totalQuantityString:n}}),Al=g.object({cursor:g.string().nullish().default(null),items:g.array(Tl)}).transform(e=>({nextCursor:e.cursor,transfers:e.items})),wL=g.object({totalValueUsdCentsCurrent:g.number(),totalValueUsdStringCurrent:g.string(),totalValueUsdCents24h:g.number(),totalValueUsdString24h:g.string(),totalPercentChange24h:g.number(),errors:g.array(g.object({code:g.string(),message:g.string(),details:g.object({chainId:g.string(),address:g.string()})})).optional()}),Li=Ii.extend({createdDate:g.coerce.date().nullish().default(null),extraMetadata:Gr.extend({id:g.string().nullish().default(null),description:g.string().nullish().default(null),marketCap:g.coerce.number().optional(),circulatingSupply:g.coerce.number().optional(),totalSupply:g.coerce.number().optional(),liquidity:g.coerce.number().optional(),holders:g.coerce.number().optional(),links:g.array(g.object({type:g.string(),url:g.string()})).optional(),volume24hUSD:g.coerce.number().optional(),volume24hUSDChangePercentage:g.coerce.number().optional(),trades24h:g.coerce.number().optional(),trades24hChangePercentage:g.coerce.number().optional(),uniqueWallets24h:g.coerce.number().optional(),uniqueWallets24hChangePercentage:g.coerce.number().optional(),top10HoldersPercent:g.coerce.number().optional(),mintable:g.boolean().optional(),freezable:g.boolean().optional(),mutableMetadata:g.boolean().optional(),ownershipRenounced:g.boolean().optional(),updateAuthority:g.string().optional(),createdDate:g.string().datetime().nullish().default(null)}).optional(),categories:g.array(fl).optional().default([]),price:nn}),Sl=Li.transform(tn);l();d();var Lh=i(e=>x.isBitcoinNetworkID(e.decodedCaip19.chainId)&&e.decodedCaip19.resourceType===le.nativeToken?e.queriedWalletBalances.map(r=>{let o=Va(e.decodedCaip19.chainId,r.address);if(!o)throw new Error("No legacy key found for bitcoin native token");return{...e,legacyKey:o,queriedWalletBalances:[r],totalQuantity:r.quantity,totalQuantityString:r.quantityString,walletAddress:r.address}}):[e],"explodeBitcoinToken"),Oh=i(e=>t=>t.map(n=>e.parse(n)),"createTokenMapper"),PL=Oh(pl),Uh=i(e=>t=>t.flatMap(n=>{let r=e.parse(n);return Lh(r)}),"createTokenBalanceMapper"),xl=Uh(wl),Bh=i(e=>t=>t.map(n=>e.parse(n)),"createTokenBalanceUpdateMapper"),Cl=Bh(vl);async function Kh(e){let t={walletAddresses:e.walletCaip19s.join(","),includePrices:"true"};"cursor"in e&&(t.cursor=e.cursor),"fromMicroseconds"in e?t.fromTimestamp=e.fromMicroseconds.toString():"from"in e&&(t.fromTimestamp=e.from.toString());let n=await re.api().timeout(P({seconds:30})).get("/portfolio/v1/fungibles/updates",{params:t}).then(r=>{if(Ue(r))return r.data;throw new Error(r.data?.message||r.data?.error||r.statusText||`Status: ${r.status}`,{cause:r.data?.code??r.data?.name})}).catch(r=>{throw B.addBreadcrumb(K.Tokens,"getTokenBalanceUpdates",te.Error,{message:r.message,cause:r.cause,...t}),B.captureError(r,K.Tokens),r});try{return Al.parse(n)}catch(r){throw r instanceof ft&&B.addBreadcrumb(K.Tokens,"getTokenBalanceUpdates parse error",te.Error,{message:r.message,...r.issues?{issues:JSON.stringify(r.issues)}:{},result:JSON.stringify(n)}),r}}i(Kh,"getTokenBalanceUpdates");async function Pl(e){let t=[],n=i(()=>t.at(-1)?.nextCursor,"getNextCursor");do{let r=n(),o=await Kh(r?{walletCaip19s:e.walletCaip19s,cursor:r}:e);t.push(o)}while(n());return Cl(t.flatMap(r=>r.transfers))}i(Pl,"getTokenBalanceUpdatesAll");l();d();var Vh="25.13.0",Vn=`fungible-tokens-${Vh}`,Ml=[Vn,"token-updates"];var Nl=[Vn,"portfolio-value"],Hh=[Vn,"token-balance"],Gh=[Vn,"infinite-token-balances"],Qh=[Vn,"visibility-overrides"],it={infiniteTokenBalances:i(({walletCaip19s:e})=>[...Gh,{walletCaip19s:e}],"infiniteTokenBalances"),tokenBalance:i(({wallets:e,encodedCaip19:t,isSplCompressed:n})=>{let r=e.map(o=>typeof o=="string"?o:oe({chainId:o.networkID,address:o.address,resourceType:le.address})).sort();return[...Hh,{walletCaip19s:r,encodedCaip19:t,isSplCompressed:n}]},"tokenBalance"),tokenUpdates:i(({walletCaip19s:e,from:t})=>[...Ml,{walletCaip19s:e,from:t}],"tokenUpdates"),portfolioValue:i(({walletCaip19s:e,include:t,exclude:n,isMainnet:r})=>[...Nl,{walletCaip19s:e,include:t,exclude:n,isMainnet:r}],"portfolioValue"),visibilityOverrides:i(({accountId:e})=>[...Qh,{accountId:e}],"visibilityOverrides"),tokenDetails:gr.tokenDetails};l();d();l();d();function qh(e){let t=yr(e.decodedCaip19);return t===I.SPL?e.extraMetadata?.compression?.compressed||"queriedWalletBalances"in e&&e.queriedWalletBalances.some(n=>!n.subaccounts?.length)?I.CompressedSPL:I.SPL:t}i(qh,"getTokenTypeFromToken");var Dl=qh;function Oi({newUpdates:e,existingUpdates:t={}}){return e.reduce((n,r)=>n[r.encodedCaip19]?.totalQuantityString===r.totalQuantityString?n:Dl(r)===I.CompressedSPL?{...n,[`${r.encodedCaip19}-compressed`]:r}:r?{...n,[r.encodedCaip19]:r}:n,t)}i(Oi,"aggregateUpdates");l();d();function jh(e){let t=e.match(/(.*\d{2}:\d{2}:\d{2})\.(?<fraction>\d+)Z/);if(!t||!t.groups?.fraction)throw new Error("Invalid date format");let n=new Date(e).getTime(),s=t.groups.fraction.padEnd(6,"0").slice(-3);return n*1e3+parseInt(s,10)}i(jh,"getMicrosecondsFromTimestamp");var Ui=jh;l();d();var $h=D(!1),kl=$h;l();d();l();d();l();d();var Wh=P({minutes:5}),Hn=0;function EO(){if(!Hn){Hn=Math.floor(Math.random()*1e6);return}Hn++}i(EO,"incrementTokensBalancesCacheBust");async function Rl({walletCaip19s:e,fungibleCaip19s:t,cursor:n,cacheBust:r}){let o={walletAddresses:e.join(","),includePrices:"true"};n&&(o.cursor=n),(r||Hn)&&(o.cacheBust=r?.toString()||Hn.toString()),t&&t.length>0&&(o.fungibleAddresses=t.sort().join(","));try{let s=await re.api().timeout(P({seconds:30})).get("/portfolio/v1/fungibles/balances",{params:o}).then(c=>{if(Ue(c))return c.data;throw new Error(c.data?.message||c.data?.error||c.statusText||`Status: ${c.status}`,{cause:c.data?.code})}),a=El.parse(s);return a.errors&&a.errors.length>0&&a.errors.forEach(c=>{B.addBreadcrumb(K.Tokens,"getTokenBalances_partialError",te.Info,{code:c.code,message:c.message,chainId:c.details.chainId,address:c.details.address})}),{...a,tokens:xl(a.tokens)}}catch(s){throw s instanceof Error&&(B.addBreadcrumb(K.Tokens,"getTokenBalances",te.Error,{...o,message:s.message,...typeof s.cause=="string"||typeof s.cause=="number"?{cause:s.cause}:{}}),B.captureError(s,K.Tokens)),s}}i(Rl,"getTokenBalances");function Fl({walletCaip19s:e,isEnabled:t=!0,cacheBust:n}){return{staleTime:Wh,gcTime:P({days:3}),queryKey:it.infiniteTokenBalances({walletCaip19s:e}),enabled:t&&!!e.length,queryFn:i(async({pageParam:r})=>Rl({walletCaip19s:e,cursor:r,cacheBust:n}),"queryFn"),initialPageParam:"",getNextPageParam:i(r=>r?.nextCursor||void 0,"getNextPageParam")}}i(Fl,"getTokenBalancesQuery");function Il(e){let{walletCaip19s:t,encodedCaip19:n,queryOptions:r={enabled:!0}}=e;return{staleTime:P({seconds:10}),gcTime:P({days:3}),queryKey:it.tokenBalance({wallets:t,encodedCaip19:n}),enabled:r.enabled&&!!t.length,queryFn:i(async()=>(await Rl({walletCaip19s:t,fungibleCaip19s:[n]})).tokens,"queryFn")}}i(Il,"getTokenBalanceQuery");l();d();l();d();var zh=D(void 0),$r=zh;var Yh=D(e=>{let t=e($r);return t?t.addresses.map(n=>oe({chainId:n.networkID,address:n.address,resourceType:le.address})).sort():[]}),rn=Yh;var Xh=ll(e=>{let t=e(rn);return Fl({walletCaip19s:t})}),st=Xh;var Jh=D(e=>{let{data:t}=e(st),n=t?.pages[0];return!n||!n.tokens.length?0:n.updatedAt}),Ll=Jh;l();d();var Zh=ot($r,e=>e?.identifier),wt=Zh;var _h=1e3,Ol=5e3,Ul=Math.ceil(Ol*2.25);function Bl(e){return P(e)*1e3}i(Bl,"toMicroseconds");function ey(e){if(!e?.length)return null;let t=new Date(Date.now()-Ul).toISOString();return Math.floor(Math.max(...e.map(({timestamp:n})=>Ui(n||t))))}i(ey,"getLastTimestamp");function ty(e){let t=ey(e);return t?t-Bl({seconds:1}):null}i(ty,"getNextTimestamp");var ny=ul(e=>{let t=e(en),n=e(Ll),r=Math.floor(n-P({minutes:10})),o=e(rn),s=e(kl),a=r>Date.now()-P({days:10}),c=it.tokenUpdates({walletCaip19s:o,from:r}),f=i(async()=>{let u=t.getQueryData(c)?.lastTimestamp;if(!u){let b=new Date(r-Ul).toISOString();return{updates:{},lastTimestamp:Ui(b)}}let m=await Pl({walletCaip19s:o,fromMicroseconds:u-Bl({seconds:30})}),p=t.getQueryData(c)?.updates??{};return{updates:Oi({newUpdates:m,existingUpdates:p}),lastTimestamp:Math.max(ty(m)??0,u)}},"queryFn");return{meta:{fetchCount:0},enabled:a&&!s&&o.length>0,queryKey:c,refetchInterval:i(u=>{let m=Number(u.meta?.fetchCount??0);return u.meta&&(u.meta.fetchCount=m+1),Math.min(Math.max(m*250,_h),Ol)},"refetchInterval"),queryFn:f}}),ry=jr({atomToStoreOffline:ny,offlineKey:D(e=>`${e(wt)??""}:token-balance-updates`),namespaceKey:"fungible-tokens",ttlMs:P({days:10}),initialValue:{updates:{},lastTimestamp:0},schema:g.object({updates:g.record(g.string(),yl),lastTimestamp:g.number()})}),oy=ot(ry,e=>e?.updates??{},(e,t)=>JSON.stringify(e)===JSON.stringify(t)),Wr=oy;l();d();l();d();function zr(e){return t=>{let n=!1,r={...t};for(let[o,s]of Object.entries(e)){let a=s?.price,c=s?.lastUpdatedAt?new Date(s.lastUpdatedAt):null;if(!a||!c)continue;let f=t[o]?.price!==a&&(!t[o]?.lastUpdatedAt||c>t[o].lastUpdatedAt);n=n||f,f&&(r[o]={price:s.price,priceChange24h:s.priceChange24h,lastUpdatedAt:c})}return n?r:t}}i(zr,"processExtractedPriceData");l();d();var iy=D(e=>{let{data:t,status:n}=e(st);return{data:t?.pages.flatMap(r=>r.tokens),status:n}}),sy=jr({atomToStoreOffline:iy,offlineKey:D(e=>`${e(wt)??""}:infinite-tokens`),namespaceKey:"fungible-tokens",ttlMs:P({days:10}),initialValue:[],schema:g.array(hl)}),Et=sy;var Yr=D({}),ay=D(e=>e(Et).slice(-100).reduce((r,o)=>(o.price&&(r[o.encodedCaip19]=o.price),r),{})),cy=$e((e,t)=>{let n=e(ay);!n||Object.keys(n).length===0||t(Yr,zr(n))}),uy=D(e=>{let t=e(Wr);return Object.values(t).reduce((r,o)=>(o.price&&(r[o.encodedCaip19]=o.price),r),{})}),ly=$e((e,t)=>{let n=e(uy);!n||Object.keys(n).length===0||t(Yr,zr(n))}),dy=D(e=>(e(cy),e(ly),e(Yr)),(e,t,n)=>{t(Yr,n)}),Tt=dy;l();d();l();d();var fy=ot(st,e=>e.hasNextPage),on=fy;var Gn=D(1/0),Xr=D(e=>(e(my),e(py),e(on)?e(Gn):0),(e,t,n)=>{if(n===null){t(Gn,1/0);return}let r=Math.min(e(Gn),n);r!==e(Gn)&&t(Gn,r)}),Kl=Xr,my=$e((e,t)=>{let{hasNextPage:n}=e(st),r=e(Et),o=e(Tt);if(r.length>0&&!n){t(Xr,0);return}let s=r.slice(-100).filter(a=>a.type==="fungible").map(a=>{let c=o[a.encodedCaip19]??a.price;return c?a.totalQuantity*c.price/10**a.decimals:1/0});t(Xr,Math.min(...s))}),py=$e((e,t)=>{e(wt)&&t(Xr,1/0)});function hy(e,t){if(e.type==="native"&&t.type!=="native")return-1;if(e.type!=="native"&&t.type==="native")return 1;if(e.type==="native"&&t.type==="native")return e.name&&t.name?e.name.localeCompare(t.name):0}i(hy,"sortNativeTokensFirst");function yy(e,t){if(!e&&t)return 1;if(e&&!t)return-1}i(yy,"sortTokensWithValidPrice");function Vl(e,t){if(e&&t)return e.localeCompare(t);if(e&&!t)return-1;if(!e&&t)return 1}i(Vl,"sortByString");function Hl(e,t){if(e!==t)return t-e}i(Hl,"sortByNumber");function gy(e){return{totalQuantity:e.totalQuantity,totalQuantityString:e.totalQuantityString}}i(gy,"getUpdatedBalances");var by=D(e=>{let t=e(Et),n=e(Wr),r=new Set(Object.keys(n)),o=t.map(s=>{let a=s.extraMetadata?.compression?.compressed?`${s.encodedCaip19}-compressed`:s.encodedCaip19,c=n[a];return c?(r.delete(a),{...s,...gy(c)}):s});return r.forEach(s=>{let a=n[s];a&&o.push(a)}),o}),wy=D(e=>{let t=e(Tt),n=e(by),r=e(Kl),o=n.filter(s=>s.totalQuantity>0||s.type==="native").map(s=>({...s,livePrice:t[s.encodedCaip19]??s.price})).sort((s,a)=>{let c=s.livePrice?.price,f=a.livePrice?.price,u=yy(c,f);if(u)return u;let m=s.totalQuantity/10**s.decimals,p=a.totalQuantity/10**a.decimals;if(!c&&!f){let v=hy(s,a);if(v)return v;let k=Hl(m,p);if(k)return k;let G=Vl(s.name,a.name);return G||0}let h=(c??0)*m,b=(f??0)*p,w=Hl(h,b);if(w)return w;let E=x.compareNetworkID(s.decodedCaip19.chainId,a.decodedCaip19.chainId);return E||(Vl(s.name,a.name)??0)});return r?o.filter(s=>{let a=s.livePrice?.price,c=s.totalQuantity/10**s.decimals;return(a??0)*c>=r}):o}),vt=wy;l();d();function Ey(e){if(e)return typeof e=="string"||typeof e=="number"?new Date(e):e}i(Ey,"toDate");function Ty(e,{key:t,newPriceData:n}){let r=e[t];if(!n||r?.price===n?.price)return e;let o=Ey(n.lastUpdatedAt);return!o||!(!r?.lastUpdatedAt||o>r.lastUpdatedAt)?e:{...e,[t]:{price:n.price,priceChange24h:n.priceChange24h??n.usd_24h_change,lastUpdatedAt:o}}}i(Ty,"handlePriceAtomUpdate");var Jr=Ty;var vy=i((e,t,n)=>{let r=e.extraMetadata?.compression?.compressed,o=t.extraMetadata?.compression?.compressed;if(r!==o)return n?r?-1:1:r?1:-1},"sortByCompressed"),Ay=i((e,t,n)=>{let r=e.legacyKey===n,o=t.legacyKey===n;if(r!==o)return r?-1:1},"sortByLegacyKey"),Gl=i(({isSplCompressed:e,legacyKey:t},n)=>n.length?n.length===1?n[0]:[...n].sort((o,s)=>{if(e!==void 0&&(o.encodedCaip19.includes("solana:")||s.encodedCaip19.includes("solana:"))){let a=vy(o,s,e);if(a)return a}if(t){let a=Ay(o,s,t);if(a)return a}return s.totalQuantity-o.totalQuantity})[0]:null,"pickBalance"),Zr=i(e=>{let t=ve(rn),n=ve(vt),r=(0,sn.useMemo)(()=>n.filter(m=>m.encodedCaip19!==e.encodedCaip19?!1:e.legacyKey?m.legacyKey===e.legacyKey:!0),[n,e.encodedCaip19,e.legacyKey]),o=(0,sn.useMemo)(()=>Gl(e,r),[e.isSplCompressed,e.legacyKey,r]),s=Il({...e,walletCaip19s:t}),a=F({...s,select:i(m=>Gl(e,m),"select")}),c=a.data??null,f=o??c??null,u=bn(Tt);return(0,sn.useEffect)(()=>{let m=c;m&&!a.isPlaceholderData&&m.price&&u(p=>{let h=m.encodedCaip19,b=m.price;return Jr(p,{key:h,newPriceData:b})})},[a.isPlaceholderData,c,u]),{...a,data:f,isPlaceholderData:o?!1:a.isPlaceholderData}},"useTokenBalance"),_r=i(({networkID:e,queryOptions:t,addressType:n})=>{let r={chainId:e,slip44:x.getSlip44(e),resourceType:le.nativeToken},o=Ka(e,n),s=oe(r);return Zr({encodedCaip19:s,legacyKey:o,queryOptions:t})},"useNativeTokenBalance"),Sy=i(()=>{let{data:e}=Ve(),t=(0,sn.useMemo)(()=>e?.addresses.find(n=>x.isSolanaNetworkID(n.networkID)),[e]);return _r({networkID:t?.networkID||Zn.Mainnet,addressType:t?.addressType})},"useSolanaBalance");l();d();l();d();var xy=D(e=>{let{isFetching:t,isPending:n}=e(st),r=e(Et);return(t||n)&&r.length===0}),eo=ot(xy,e=>e);l();d();var Cy=new Map,Py=D(null),My=D(e=>{let t=e(wt);if(!t)return Cy;let n=e(Py),s=($t(n??null)?.value??{})[t]??[];return new Map(s.map(a=>[a.mintId,a]))}),an=My;function Ql(){let e=ve(vt),t=ve(eo),n=ve(on),r=ve(an);return{isLoading:t,hasNextPage:n,fungibleTokens:e,visibilityOverrides:r}}i(Ql,"useOwnedFungibles");l();d();l();d();var ql=R(Q());var Ny=i(({wallets:e,encodedCaip19:t,isSplCompressed:n=!1})=>{let r=Z();return(0,ql.useCallback)(()=>void r.invalidateQueries({queryKey:it.tokenBalance({wallets:e,encodedCaip19:t,isSplCompressed:n})}),[r,e,t,n])},"useInvalidateFungibleTokensBalance"),Dy=Ny;l();d();l();d();function ky(e){let t={message:"Failed to parse token details response"};if(e instanceof ft)try{t.zodIssuesJson=JSON.stringify(e.issues.map(n=>({path:n.path.join("."),message:n.message,code:n.code})))}catch{t.zodIssuesJson="Failed to stringify Zod issues"}else t.errorMessage=e instanceof Error?e.message:String(e);return t}i(ky,"zodErrorToBreadcrumbData");var jl=ky;function $l(e){return e.resourceType===le.nativeToken?`/fungibles/v1/${e.chainId}/${e.resourceType}/${e.slip44}`:`/fungibles/v1/${e.chainId}/${e.resourceType}/${e.address}`}i($l,"getUrlPathForDecodedCaip19");function Ry(e){return $l(ze(e))}i(Ry,"getUrlPathForEncodedCaip19");function Fy(e){let t=new URLSearchParams,n="encodedCaip19"in e?Ry(e.encodedCaip19):$l(e.decodedCaip19);return e.includePrice&&t.append("includePrice","true"),e.includeFungibleDetails&&t.append("includeFungibleDetails","true"),[n,{params:t}]}i(Fy,"getUrlParams");async function Bi(e){let t=await re.api().noBearer().timeout(P({seconds:10})).get(...Fy(e)).then(n=>{if(Ue(n))return n.data;throw new Error(n.data?.message||n.data?.error||n.statusText||`Status: ${n.status}`,{cause:n.data?.code})}).catch(n=>{throw B.addBreadcrumb(K.Tokens,"getTokenDetails",te.Error,{message:n.message,cause:n.cause,..."encodedCaip19"in e&&{caip19:e.encodedCaip19},..."decodedCaip19"in e&&{caip19:oe(e.decodedCaip19)}}),B.captureError(n,K.Tokens),n});try{return Li.parse(t)}catch(n){console.error(n);let r=jl(n);throw"encodedCaip19"in e&&typeof e.encodedCaip19=="string"?r.caip19=e.encodedCaip19:"decodedCaip19"in e&&(r.caip19=oe(e.decodedCaip19)),B.addBreadcrumb(K.Tokens,"getTokenDetails.ParseError",te.Error,r),n}}i(Bi,"getTokenDetails");l();d();function Wl({tokens:e}){return Dt({tokens:e}).catch(t=>{throw B.addBreadcrumb(K.Tokens,"getTokenPrices",te.Error,{message:t.message,cause:t.cause,tokens:e.map(oe).join(",")}),B.captureError(t,K.Tokens),t})}i(Wl,"getTokenPrices");l();d();l();d();var Iy=D(e=>{let t=e(an);return e(vt).filter(r=>hr(t??new Map,{key:r.legacyKey??"",spamStatus:r.spamStatus}))}),zl=Iy;function Yl(){let e=ve(zl),t=ve(eo),n=ve(on),r=ve(an);return{isLoading:t,hasNextPage:n,fungibleTokens:e,visibilityOverrides:r}}i(Yl,"useOwnedVisibleFungibles");l();d();var Qn=R(Q());function Ly({caip19:e,includePrice:t}){let n=(0,Qn.useMemo)(()=>typeof e=="string"?e:oe(e),[e]),r=ve(vt),o=(0,Qn.useMemo)(()=>{let c=r.find(f=>f.encodedCaip19===n);return c?{chainName:c.chainName,encodedCaip19:n,decodedCaip19:c.decodedCaip19,type:c.type,categories:[],price:c.price,symbol:c.symbol??"",name:c.name??"",decimals:c.decimals,legacyKey:c.legacyKey??n,spamStatus:c.spamStatus??"NOT_VERIFIED",logoUri:c.logoUri??null,extraMetadata:{description:"",id:"",isMutable:!0,createdDate:null,...c.extraMetadata},createdDate:null}:null},[n,t]),s=F({refetchInterval:P({seconds:t?5:30}),queryKey:it.tokenDetails({caip19:n,includePrice:t}),queryFn:i(async()=>{let c=await Bi(typeof e=="string"?{encodedCaip19:e,includeFungibleDetails:!0,includePrice:t}:{decodedCaip19:e,includeFungibleDetails:!0,includePrice:t});return Sl.parse(c)},"queryFn"),...o&&{placeholderData:o}}),a=bn(Tt);return(0,Qn.useEffect)(()=>{let c=s.data;c&&!s.isPlaceholderData&&t&&c.price&&a(f=>{let u=c.encodedCaip19,m=c.price;return Jr(f,{key:u,newPriceData:m})})},[s.data,s.isPlaceholderData,a,t]),s}i(Ly,"useTokenDetails");var Ki=Ly;l();d();var Gi=R(Q());l();d();var Vi=new V(0),Hi=i(({chainAddress:e,type:t,balance:n,decimals:r,recipient:o,gasEstimation:s,clampToZero:a=!0})=>{let{data:c,isPending:f}=Si(e);if(!t||!n)return Vi;let u=new V(n).multipliedBy(dn(r));if(!Je(t))return u;if(!s)return;let m=new V(0);if(Ht(s))m=u.minus(new V(s.value));else if(ur(s)){let{gasLimit:p,maxFeePerGas:h,l1Fee:b=new V(0)}=s,w=p.times(h).plus(b);m=u.minus(w)}else if(Gt(s)){if(!e||f)return;let p=e.addressType,h=c?.safeToSendUtxos??[],b=sa(s.btcPerKilobyte),w=o&&ps.safeParse(o).success?o:"bc1p",v=[{value:h.reduce((G,W)=>G.plus(new V(W.value)),new V(0)).toNumber(),address:w}],k=wa(p,h,v,b.toNumber(),[]);if(k.type==="error")m=new V(k.maxAmount).integerValue(V.ROUND_DOWN);else{let{inputs:G,fee:W}=k;m=G.reduce((ee,be)=>ee.plus(new V(be.value)),new V(0)).minus(W).integerValue(V.ROUND_DOWN)}}else if(cr(s))m=u.minus(s.gasBudget);else return Fe(s);return m.isGreaterThan(Vi)?m:a?Vi:m},"useTransferFungibleMaxAmount");var Oy=i(({networkID:e,addressType:t,gasEstimation:n,transactionValue:r=new V(0),recipient:o})=>{let{data:s,isLoading:a,isError:c}=_r({networkID:e,addressType:t}),f=Ha.get(e).nativeFungibleTokenType,u="unknown",m="",p=(0,Gi.useMemo)(()=>{let b=s?.queriedWalletBalances[0]?.address;if(!b)return;let w=Es(e,b);return{networkID:e,address:b,addressType:w}},[s?.queriedWalletBalances,e]),h=Hi({chainAddress:p,type:f,balance:s?.totalQuantityString?new V(s?.totalQuantityString):void 0,decimals:s?.decimals??0,recipient:o,gasEstimation:n,clampToZero:!1});return!c&&s&&h&&(h.gte(r)?u="sufficient":u="insufficient",m=s?.symbol||""),(0,Gi.useMemo)(()=>({hasSufficientFunds:u,nativeTokenSymbol:m,isLoading:a,isError:c}),[u,m,a,c])},"useHasSufficientFunds");l();d();var _l=R(Q());l();d();var Qi=R(Q());l();d();var Xl=i(({chainAddresses:e=[]})=>{let t=Te.tokensErrorCount(e);return F({queryKey:t,queryFn:i(()=>{throw new Error("This query is cache-only")},"queryFn"),enabled:!1,initialData:0,staleTime:1/0})},"useTokensErrorCount");l();d();var Uy=i(({errors:e})=>e,"select");function Jl({chainAddresses:e,queryOptions:t}){return Qa({select:Uy,chainAddresses:e,queryOptions:t})}i(Jl,"useTokensPartialErrors");var Zl=3,By=1,qi=i(({networkID:e,chainAddresses:t=[]})=>{let{data:n=[]}=Jl({chainAddresses:t}),{data:r=0}=Xl({chainAddresses:t}),o=r>=Zl,{data:s=0}=ti(),a=s>=Zl,c=n.length===By&&n.some(m=>m.code==="TokensTrimmed"),{t:f}=Be(),u=(0,Qi.useMemo)(()=>{if(o)return f("partialErrorGeneric");let m=n.filter(h=>e?h.details.chainId===e:!0),p=m.length+(a?1:0);return p?p>1?f("partialErrorGeneric"):a?f("partialErrorTokenPrices"):c?f("partialErrorTokensTrimmed"):e?f("partialErrorTokenDetail"):f("partialErrorBalanceChainName",{chainName:x.getChainName(m[0].details.chainId)}):""},[o,n,a,e,c,f]);return(0,Qi.useMemo)(()=>({partialErrorMessage:u,shouldShowPartialError:u!==""}),[u])},"usePartialErrorBanner");function Ky(e){let{onTappingBuy:t,onTappingReceive:n,onTappingSend:r,onTappingSwap:o,account:s}=e,{shouldShowPartialError:a,partialErrorMessage:c}=qi({chainAddresses:s?.addresses});return{ctaActions:Vy({onTappingBuy:t,onTappingReceive:n,onTappingSend:r,onTappingSwap:o}),shouldShowPartialError:a,partialErrorMessage:c}}i(Ky,"useHomeViewState");function Vy(e){let{t}=Be(),n=Fs();return(0,_l.useMemo)(()=>{let r=[];return r.push({text:t("commandSend"),type:"send",onClick:e.onTappingSend}),n?r.push({text:t("commandTrade"),type:"trade",onClick:e.onTappingSwap}):r.push({text:t("commandSwap"),type:"swap",onClick:e.onTappingSwap}),r.push({text:t("commandReceive"),type:"receive",onClick:e.onTappingReceive}),r.push({text:t("commandBuy"),type:"buy",onClick:e.onTappingBuy}),r.sort((o,s)=>(Co.get(o.type)??100)-(Co.get(s.type)??100)),{primary:r,more:[]}},[t,n,e.onTappingSend,e.onTappingSwap,e.onTappingReceive,e.onTappingBuy])}i(Vy,"useHomeCTABarActions");l();d();var ed=R(Q());var Hy=i(({networkID:e,unsignedTransaction:t,pendingActivityRows:n,accountIdentifier:r,accountSigner:o,storage:s,includeCallPayload:a})=>({accountSigner:o,accountIdentifier:r,networkID:e,unsignedTransaction:t,...a&&{callPayload:{from:t.from,to:t.to,data:t.data,value:t.value}},pendingTransactionInput:{ownerAddress:t.from,networkID:e,data:{nonce:"",unsignedTransaction:t,hash:""},type:Vt.Swap,display:{summary:n}},storage:s}),"buildArgs"),Gy=i(async({t:e,fungible:t,unsignedUnwrapTx:n,gasEstimation:r,storage:o,accountMetadata:s,accountSigner:a})=>{if(!n)throw new Error("Unsigned unwrap transaction is required");if(!r)throw new Error("Gas estimation is required");let{chain:c,balance:f}=t.data;if(!x.isEthereumNetworkID(c.id))throw new Error(`Chain is not supported: ${c.id}`);let u=c.id,m={topRight:{text:`+${f} ${c.symbol}`},topLeft:{text:e("transactionsPendingSwapping")},bottomRight:{text:`-${f} ${t.data.symbol}`},bottomLeft:{text:`${t.data.name}`}},p=ds.parse({type:ls.eip1559,chainId:x.getEVMNetworkIDValue(u),gas:`0x${r.gasLimit.toString(16)}`,maxFeePerGas:`0x${r.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${r.maxPriorityFeePerGas.toString(16)}`,...n}),h=Hy({storage:o,accountSigner:a,pendingActivityRows:m,includeCallPayload:!1,networkID:u,unsignedTransaction:p,accountIdentifier:s.accountIdentifier});return pr(h)},"executeUnwrapTransaction"),Qy=i(()=>{let{data:e}=Ve();return(0,ed.useMemo)(()=>{let t=e?.type,n=e?.name??"",r=e?.identifier??"";return{accountName:n,accountType:t,accountIdentifier:r}},[e])},"useAccountMetadata"),qy=i(e=>{let t=ke(),n=Z(),{t:r}=Be(),o=Qy(),s=Xe();return Ye({async mutationFn({fungible:a,unsignedUnwrapTx:c,gasEstimation:f}){return await Gy({t:r,fungible:a,unsignedUnwrapTx:c,gasEstimation:f,accountMetadata:o,storage:t,accountSigner:s})},async onSuccess(){await n.invalidateQueries({queryKey:Te.tokens(e)})}})},"useUnwrapTransaction");l();d();var td=R(Q());function jy(e){let t=Ke(),n=Z();return(0,td.useCallback)(async r=>{let o=await el(nt.AccountIdToHiddenMints)??{version:2,value:{}},a=$t(o)?.value??{},c=a[e]??[],f=new Map(c.map(m=>[m.mintId,m]));for(let{fungibleKey:m,...p}of r)if("isHidden"in p){let{isHidden:h}=p;t.capture(h?"hideFungibleToken":"unhideFungibleToken",{data:{fungibleKey:m}}),f.set(m,{mintId:m,status:h?mn.Hidden:mn.Visible})}else{let{visibility:h}=p;f.set(m,{mintId:m,status:h})}a[e]=Array.from(f.values()),await _u(nt.AccountIdToHiddenMints)({version:2,value:a}),await n.invalidateQueries({queryKey:Te.hiddenMints(e)}),await n.invalidateQueries({predicate:i(m=>{let p=m.queryKey;return Array.isArray(p)&&p.length>=2&&typeof p[0]=="string"&&p[0].startsWith("fungible-tokens-")&&p[1]==="visibility-overrides"&&typeof p[2]=="object"&&p[2]!==null&&"accountId"in p[2]&&p[2].accountId===e},"predicate")})},[e,t,n])}i(jy,"useSetVisibilityOverrides");l();d();l();d();var nd=R(Q());var $y=i((e,t,n)=>{let r=Z(),{fungibles:o}=Lt({keys:[e]}),s=o.length===1?o[0]:void 0;(0,nd.useEffect)(()=>{if(!s)return;let{type:a,data:c}=s,{balance:f,decimals:u,chain:m}=c,{id:p}=m,h=Je(a)===!0;if(!n||!f||h||f.isEqualTo(t))return;let b=Te.transferFungibleLoggingContext(e),w={transactionId:n,decimals:u,chainId:p,isNativeToken:h,previousBalance:f,fungibleKey:e};r.setQueryData(b,w)},[n])},"useTransferFungibleLoggingContext");l();d();var od=R(Q());l();d();function rd(e,t,n){return fe.PublicKey.findProgramAddressSync([e.toBuffer(),n.toBuffer(),t.toBuffer()],Ma)[0]}i(rd,"findAssociatedTokenAddress");var Wy=new pn("Unable to unwrap SOL. Wrapped SOL Token account does not exist."),zy=new pn("Unable to unwrap SOL. Token account is not expected mint.");async function Yy(e,t){let n=await e.getAccountInfo(t);if(!n)throw Wy;let r=Da.decode(n.data);return new fe.PublicKey(r.mint)}i(Yy,"getMintOfATA");function Xy(e){if(e)return typeof e=="string"?new fe.PublicKey(e):e}i(Xy,"ensurePublicKey");function Jy(){let{connection:e}=Nn(),{data:t}=Ve(),{solanaChainAddress:n,accountIdentifier:r}=(0,od.useMemo)(()=>({solanaChainAddress:t?.addresses.find(St),accountIdentifier:t?.identifier??""}),[t]),o=ke(),s=Xe(),{t:a}=Be();return Ye({mutationFn:i(async c=>{if(!n)return Promise.reject("solanaChainAddress not loaded");try{let{networkID:f,address:u}=n,m=new fe.PublicKey(u),p=Xy(c?.tokenAccount)??rd(m,So,fn);if((await Yy(e,p)).toBase58()!==So.toBase58())throw zy;let b=eu(p,m,m,[],fn),w=new fs.Transaction().add(b),E={ownerAddress:u,networkID:f,data:{signature:""},type:Vt.UnwrapSOL,display:{summary:{topLeft:{text:a("assetDetailUnwrappingSOL")}}}},v=await jt({accountIdentifier:r,accountSigner:s,connection:e,feePayer:new fe.PublicKey(u),pendingTransactionInput:E,storage:o,transaction:w,useSubmissionService:!1});return{networkID:f,id:v}}catch(f){throw f instanceof Error&&B.captureError(f,K.Tokens),f}},"mutationFn")})}i(Jy,"useUnwrapSOL");l();d();var id=P({minutes:1}),Zy=i((e,t=!0)=>{let n=Te.solanaBalance(e);return F({enabled:!!e&&t&&St(e),gcTime:id,staleTime:id,queryKey:n,async queryFn(){if(!e)throw new Error("No chain address provided");if(St(e))return Qt(e.networkID).getBalance(new fe.PublicKey(e.address));throw new Error(`SOL balance not implemented for ${e.networkID}`)}})},"useSolanaBalance");l();d();var sd=R(Q());var _y=i(e=>{let{data:t}=Vs();return(0,sd.useMemo)(()=>{if(!e||!t)return;let n=e.data.chain.id,r=t.explorers[n]??ho.get(n).defaultExplorer,o,s;if(Je(e.type))s="address",o=e.data.walletAddress;else switch(e.type){case I.SuiCoin:{s="token",o=e.data.contractAddress;break}case I.ERC20:{s="address",o=e.data.contractAddress;break}case I.SPL:case I.CompressedSPL:{s="address",o=e.data.mintAddress;break}case I.BRC20:return{explorerName:"Unisat",explorerUrl:`https://unisat.io/brc20?q=${e.data.walletAddress}`}}let a=go({networkID:n,endpoint:s,explorerType:r,param:o});return{explorerName:yo[r],explorerUrl:a}},[e,t])},"useFungibleExplorerUrl");l();d();var ad=R(Q());var eg=i(e=>{let t=Z();return(0,ad.useCallback)(()=>t.invalidateQueries({queryKey:Te.tokens(e)}),[t,e])},"useInvalidateTokens");l();d();var cd=R(Q());var tg=i((e,t)=>(0,cd.useMemo)(()=>{if(e)if(Gt(e)){let n=ia(e).toNumber().toLocaleString("en-US");return{leftSubtext:void 0,leftSubtextColor:void 0,rightSubtext:t("satsAmount",{sats:n.toString()})}}else return Ht(e)&&e.highFees?{leftSubtext:t("notificationTransactionApprovalNetworkFeeHighWarning"),leftSubtextColor:"spotWarning",rightSubtext:""}:void 0},[e,t]),"useNetworkFeeRow");l();d();var ud=R(Q());var ng=i(({caip19:e,fungibleCaip19:t,fungibleKeys:n,isSplCompressed:r})=>{let{fungibles:o,isLoadingTokens:s,refetch:a}=Lt({keys:n}),{data:c,refetch:f,isLoading:u}=Zr({encodedCaip19:e,legacyKey:n?.[0]??null,isSplCompressed:r}),{data:m,isLoading:p}=Ki({caip19:e,includePrice:!0}),h=sg(o,r),b=(0,ud.useMemo)(()=>{if(!h)return;if(!c)return h;let E=hn(c.totalQuantityString,c.decimals);return{...h,data:{...h.data,amount:c.totalQuantityString,balance:E,usd:c.price?.price?E.times(c.price.price).toNumber():void 0,usd_24h_change:c.price?.priceChange24h!==void 0?ld(E.times(c.price.price).toNumber(),c.price?.priceChange24h):void 0}}},[h,c]);return{derivedFungible:rg({fungible:b,fungibleCaip19:t,tokenDetails:m,tokenBalance:c}),isLoading:s||p||u,refetchFungibleBalance:a,refetchTokenBalance:f}},"useFungibleData");function rg({fungible:e,fungibleCaip19:t,tokenDetails:n,tokenBalance:r}){if(e)return e;if(!n)return;let o=$a(n),s="address"in t?og(t,o):ig(t,o);if(s){if(r){r.extraMetadata?.compression?.compressed&&(s.type=I.CompressedSPL);let a=hn(r.totalQuantityString,r.decimals);s.data.balance=a,s.data.amount=r.totalQuantityString,s.data.usd=r.price?.price?a.times(r.price.price).toNumber():void 0,s.data.usd_24h_change=r.price?.priceChange24h!==void 0?ld(a.times(r.price.price).toNumber(),r.price?.priceChange24h):void 0,s.data.walletAddress=r.queriedWalletBalances.find(c=>c.quantity>0)?.address??""}return s}B.addBreadcrumb(K.Tokens,"deriveFungible",te.Error,{fungibleCaip19:JSON.stringify(t),tokenDetails:JSON.stringify(n),tokenBalance:JSON.stringify(r)}),B.captureError(new Error(`Fungible type could not be derived from ${JSON.stringify(t)}`),K.Fungibles)}i(rg,"deriveFungible");function og(e,t){let n=xo(e);if(Je(n))throw new Error("Cannot create fake non-native fungible for native token");let r=t.address??e.address,o={amount:"0",balance:V(0),chain:t.chain,decimals:t.decimals,logoUri:t.logoURI??t.logoUri,name:t.name??"Unknown",symbol:t.symbol??"Unknown",key:r,walletAddress:"",spamStatus:t.spamStatus};switch(n){case I.SPL:return{type:n,data:{...o,mintAddress:r,programId:"",splTokenAccountPubkey:""}};case I.CompressedSPL:return{type:n,data:{...o,mintAddress:r,programId:""}};case I.ERC20:case I.SuiCoin:return{type:n,data:{...o,contractAddress:r}};case I.BRC20:return{type:n,data:{...o,firstCreatedInscriptionId:r}};case I.HypercoreAsset:return;default:Fe(n)}}i(og,"createFakeNonNativeFungible");function ig(e,t){let n=xo(e),r={amount:"0",balance:V(0),chain:t.chain,decimals:t.decimals,logoUri:t.logoURI??t.logoUri,name:t.name??"Unknown",symbol:t.symbol??"Unknown",key:n,walletAddress:"",spamStatus:t.spamStatus};switch(e.slip44){case We.Solana:return{type:I.SolanaNative,data:r};case We.Bitcoin:return{type:I.BitcoinNative,data:r};case We.Ethereum:return{type:I.EthereumNative,data:r};case We.Base:return{type:I.BaseNative,data:r};case We.Monad:return{type:I.MonadNative,data:r};case We.Arbitrum:return{type:I.ArbitrumNative,data:r};case We.Hypercore:return{type:I.HypercoreNative,data:r};case We.Polygon:return{type:I.PolygonNative,data:r};case We.Sui:return{type:I.SuiNative,data:r};default:{let o=new Error("Missing native token implementation when creating fake a Fungible");throw Fe(e.slip44,o),o}}}i(ig,"createFakeNativeFungible");var sg=i((e,t)=>e?.length?[...e].sort((r,o)=>{if(t!==void 0){let s=r.type===I.CompressedSPL,a=o.type===I.CompressedSPL;if(s!==a)return t?s?-1:1:s?1:-1}return o.data.balance.minus(r.data.balance).toNumber()})[0]:void 0,"getSelectedFungible"),ld=i((e,t)=>{if(t===-100)return-1*e;let n=e/(1+t/100);return e-n},"calculatePriceDifference");l();d();l();d();var to;(function(e){e.AF="AF",e.AX="AX",e.AL="AL",e.DZ="DZ",e.AS="AS",e.AD="AD",e.AO="AO",e.AI="AI",e.AQ="AQ",e.AG="AG",e.AR="AR",e.AM="AM",e.AW="AW",e.AU="AU",e.AT="AT",e.AZ="AZ",e.BS="BS",e.BH="BH",e.BD="BD",e.BB="BB",e.BY="BY",e.BE="BE",e.BZ="BZ",e.BJ="BJ",e.BM="BM",e.BT="BT",e.BO="BO",e.BQ="BQ",e.BA="BA",e.BW="BW",e.BV="BV",e.BR="BR",e.IO="IO",e.BN="BN",e.BG="BG",e.BF="BF",e.BI="BI",e.KH="KH",e.CM="CM",e.CA="CA",e.CV="CV",e.KY="KY",e.CF="CF",e.TD="TD",e.CL="CL",e.CX="CX",e.CC="CC",e.CO="CO",e.KM="KM",e.CK="CK",e.CR="CR",e.CI="CI",e.HR="HR",e.CU="CU",e.CW="CW",e.CY="CY",e.CZ="CZ",e.CD="CD",e.DK="DK",e.DJ="DJ",e.DM="DM",e.DO="DO",e.EC="EC",e.EG="EG",e.SV="SV",e.GQ="GQ",e.ER="ER",e.EE="EE",e.SZ="SZ",e.ET="ET",e.FK="FK",e.FO="FO",e.FJ="FJ",e.FI="FI",e.FR="FR",e.GF="GF",e.PF="PF",e.TF="TF",e.GA="GA",e.GE="GE",e.DE="DE",e.GH="GH",e.GI="GI",e.GR="GR",e.GL="GL",e.GD="GD",e.GP="GP",e.GU="GU",e.GT="GT",e.GG="GG",e.GN="GN",e.GW="GW",e.GY="GY",e.HT="HT",e.HM="HM",e.VA="VA",e.HN="HN",e.HK="HK",e.HU="HU",e.IS="IS",e.IN="IN",e.ID="ID",e.IQ="IQ",e.IE="IE",e.IR="IR",e.IM="IM",e.IL="IL",e.IT="IT",e.JM="JM",e.JP="JP",e.JE="JE",e.JO="JO",e.KZ="KZ",e.KE="KE",e.KI="KI",e.XK="XK",e.KW="KW",e.KG="KG",e.LA="LA",e.LV="LV",e.LB="LB",e.LS="LS",e.LR="LR",e.LY="LY",e.LI="LI",e.LT="LT",e.LU="LU",e.MO="MO",e.MG="MG",e.MW="MW",e.MY="MY",e.MV="MV",e.ML="ML",e.MT="MT",e.MH="MH",e.MQ="MQ",e.MR="MR",e.MU="MU",e.YT="YT",e.MX="MX",e.FM="FM",e.MD="MD",e.MC="MC",e.MN="MN",e.ME="ME",e.MS="MS",e.MA="MA",e.MZ="MZ",e.MM="MM",e.NA="NA",e.NR="NR",e.NP="NP",e.NL="NL",e.NC="NC",e.NZ="NZ",e.NI="NI",e.NE="NE",e.NG="NG",e.NU="NU",e.NF="NF",e.KP="KP",e.MP="MP",e.NO="NO",e.OM="OM",e.PK="PK",e.PW="PW",e.PA="PA",e.PG="PG",e.PY="PY",e.CN="CN",e.PE="PE",e.PH="PH",e.PN="PN",e.PL="PL",e.PT="PT",e.PR="PR",e.QA="QA",e.CG="CG",e.GM="GM",e.RE="RE",e.RO="RO",e.RU="RU",e.RW="RW",e.BL="BL",e.SH="SH",e.KN="KN",e.LC="LC",e.MF="MF",e.PM="PM",e.VC="VC",e.WS="WS",e.SM="SM",e.ST="ST",e.SA="SA",e.SN="SN",e.RS="RS",e.SC="SC",e.SL="SL",e.SG="SG",e.SX="SX",e.SK="SK",e.SI="SI",e.SB="SB",e.SO="SO",e.ZA="ZA",e.GS="GS",e.KR="KR",e.SS="SS",e.ES="ES",e.LK="LK",e.PS="PS",e.SD="SD",e.SR="SR",e.SJ="SJ",e.SE="SE",e.CH="CH",e.SY="SY",e.TW="TW",e.TJ="TJ",e.TH="TH",e.MK="MK",e.TL="TL",e.TG="TG",e.TK="TK",e.TO="TO",e.TT="TT",e.TN="TN",e.TR="TR",e.TM="TM",e.TC="TC",e.TV="TV",e.UG="UG",e.UA="UA",e.AE="AE",e.GB="GB",e.TZ="TZ",e.UM="UM",e.US="US",e.UY="UY",e.UZ="UZ",e.VU="VU",e.VE="VE",e.VN="VN",e.VG="VG",e.VI="VI",e.WF="WF",e.EH="EH",e.YE="YE",e.ZM="ZM",e.ZW="ZW"})(to||(to={}));var de;(function(e){e.FAIL_SEVERE="FAIL_SEVERE",e.FAIL_HIGH="FAIL_HIGH",e.NO_ACTION="NO_ACTION",e.DATA_NOT_FOUND="DATA_NOT_FOUND"})(de||(de={}));var dd=g.object({action:g.nativeEnum(de),address:gs,expirationUnixtimeInSec:g.number().nullish().default(null)}),$i=g.object({addressScreenResults:g.array(dd)}),fd=g.object({country:g.nativeEnum(to)}),qn=class extends Error{static{i(this,"WalletScreenError")}constructor(t){super(t),this.name="WalletScreenError"}},ji;(function(e){e.BURN_COLLECTIBLE="BURN_COLLECTIBLE",e.SEND_COLLECTIBLE="SEND_COLLECTIBLE",e.SEND_FUNGIBLE="SEND_FUNGIBLE",e.STAKE_FUNGIBLE="STAKE_FUNGIBLE",e.SWAP_FUNGIBLE="SWAP_FUNGIBLE",e.INSTANT_SELL="INSTANT_SELL",e.PERPS_FUNDING="PERPS_FUNDING"})(ji||(ji={}));l();d();var wd=R(Q());l();d();l();d();var md="@phantom/wallet-screening",pd=`${md}:wallet-screen-action`,ag=`${md}:wallet-screen-geo`,no={walletScreenAction(e){return[pd,e]},walletGeo(){return[ag]}};l();d();var hd=new Error("Failed to fetch wallet screen action.");async function yd(e){try{let t=await re.api().post("/wallet_screen/v1",e);if(!Ue(t))throw hd;let n=t.data;return $i.parse(n)}catch{throw hd}}i(yd,"fetchWalletScreenAction");var gd=P({days:7}),bd=i(e=>{let t=e!==void 0&&x.isMainnetNetworkID(e.networkID),n=[];if(e!==void 0){let c=x.isEVMNetworkID(e.networkID)?e.address.toLowerCase():e.address;n=[{chainId:e.networkID,address:c,resourceType:le.address}]}let r={addresses:n},o=Z(),s=no.walletScreenAction(r),a=[s[0]];return F({enabled:t,queryKey:s,gcTime:gd,staleTime:gd,refetchInterval:!1,refetchOnMount:!1,async queryFn(){if(cg(o,a))return de.FAIL_SEVERE;let f=await yd(r);return ug(f)}})},"useWalletScreenAction"),cg=i((e,t)=>{let n=e.getQueriesData({queryKey:t,exact:!1}),r=!1;for(let[o,s]of n){let a=s;if(a&&a===de.FAIL_SEVERE){r=!0;break}}return r},"findSevereInQueryData"),ug=i(e=>{let t=e.addressScreenResults;return t.some(n=>n.action===de.FAIL_SEVERE)?de.FAIL_SEVERE:t.some(n=>n.action===de.FAIL_HIGH)?de.FAIL_HIGH:t.some(n=>n.action===de.NO_ACTION)?de.NO_ACTION:de.DATA_NOT_FOUND},"getActionFromResponse");var lg=i((e,t)=>{let n=Ke(),{data:r}=bd(e);switch((0,wd.useEffect)(()=>{r&&e&&n.capture("walletScreened",{data:{walletScreen:{action:r.toString(),surface:t},chainId:x.getChainID(e.networkID),networkId:e.networkID}})},[r,e,t,n]),r){case de.FAIL_SEVERE:case de.FAIL_HIGH:throw new qn(`Transaction disabled: ${t}`);case de.NO_ACTION:case de.DATA_NOT_FOUND:return}},"useThrowIfFailWalletScreen");l();d();l();d();l();d();var Ed=new Error("Failed to fetch wallet geo.");async function Td(){try{let e=await re.api().get("/wallet_screen/v1/geo");if(!Ue(e))throw Ed;let t=e.data;return fd.parse(t).country}catch{throw Ed}}i(Td,"fetchWalletGeo");var vd=P({hours:1}),dg=i(()=>{let e=no.walletGeo();return F({queryKey:e,staleTime:vd,refetchInterval:vd,queryFn:Td})},"useWalletGeo");l();d();l();d();function dt(e){return Array.isArray?Array.isArray(e):Dd(e)==="[object Array]"}i(dt,"isArray");var fg=1/0;function mg(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-fg?"-0":t}i(mg,"baseToString");function pg(e){return e==null?"":mg(e)}i(pg,"toString");function at(e){return typeof e=="string"}i(at,"isString");function Md(e){return typeof e=="number"}i(Md,"isNumber");function hg(e){return e===!0||e===!1||yg(e)&&Dd(e)=="[object Boolean]"}i(hg,"isBoolean");function Nd(e){return typeof e=="object"}i(Nd,"isObject");function yg(e){return Nd(e)&&e!==null}i(yg,"isObjectLike");function Oe(e){return e!=null}i(Oe,"isDefined");function Wi(e){return!e.trim().length}i(Wi,"isBlank");function Dd(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}i(Dd,"getTag");var gg="Incorrect 'index' type",bg=i(e=>`Invalid value for key ${e}`,"LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY"),wg=i(e=>`Pattern length exceeds max of ${e}.`,"PATTERN_LENGTH_TOO_LARGE"),Eg=i(e=>`Missing ${e} property in key`,"MISSING_KEY_PROPERTY"),Tg=i(e=>`Property 'weight' in key '${e}' must be a positive integer`,"INVALID_KEY_WEIGHT_VALUE"),Ad=Object.prototype.hasOwnProperty,zi=class{static{i(this,"KeyStore")}constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let o=kd(r);this._keys.push(o),this._keyMap[o.id]=o,n+=o.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function kd(e){let t=null,n=null,r=null,o=1,s=null;if(at(e)||dt(e))r=e,t=Sd(e),n=Yi(e);else{if(!Ad.call(e,"name"))throw new Error(Eg("name"));let a=e.name;if(r=a,Ad.call(e,"weight")&&(o=e.weight,o<=0))throw new Error(Tg(a));t=Sd(a),n=Yi(a),s=e.getFn}return{path:t,id:n,weight:o,src:r,getFn:s}}i(kd,"createKey");function Sd(e){return dt(e)?e:e.split(".")}i(Sd,"createKeyPath");function Yi(e){return dt(e)?e.join("."):e}i(Yi,"createKeyId");function vg(e,t){let n=[],r=!1,o=i((s,a,c)=>{if(Oe(s))if(!a[c])n.push(s);else{let f=a[c],u=s[f];if(!Oe(u))return;if(c===a.length-1&&(at(u)||Md(u)||hg(u)))n.push(pg(u));else if(dt(u)){r=!0;for(let m=0,p=u.length;m<p;m+=1)o(u[m],a,c+1)}else a.length&&o(u,a,c+1)}},"deepGet");return o(e,at(t)?t.split("."):t,0),r?n:n[0]}i(vg,"get");var Ag={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Sg={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:i((e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,"sortFn")},xg={location:0,threshold:.6,distance:100},Cg={useExtendedSearch:!1,getFn:vg,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},O={...Sg,...Ag,...xg,...Cg},Pg=/[^ ]+/g;function Mg(e=1,t=3){let n=new Map,r=Math.pow(10,t);return{get(o){let s=o.match(Pg).length;if(n.has(s))return n.get(s);let a=1/Math.pow(s,.5*e),c=parseFloat(Math.round(a*r)/r);return n.set(s,c),c},clear(){n.clear()}}}i(Mg,"norm");var jn=class{static{i(this,"FuseIndex")}constructor({getFn:t=O.getFn,fieldNormWeight:n=O.fieldNormWeight}={}){this.norm=Mg(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,at(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){let n=this.size();at(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!Oe(t)||Wi(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((o,s)=>{let a=o.getFn?o.getFn(t):this.getFn(t,o.path);if(Oe(a)){if(dt(a)){let c=[],f=[{nestedArrIndex:-1,value:a}];for(;f.length;){let{nestedArrIndex:u,value:m}=f.pop();if(Oe(m))if(at(m)&&!Wi(m)){let p={v:m,i:u,n:this.norm.get(m)};c.push(p)}else dt(m)&&m.forEach((p,h)=>{f.push({nestedArrIndex:h,value:p})})}r.$[s]=c}else if(at(a)&&!Wi(a)){let c={v:a,n:this.norm.get(a)};r.$[s]=c}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}};function Rd(e,t,{getFn:n=O.getFn,fieldNormWeight:r=O.fieldNormWeight}={}){let o=new jn({getFn:n,fieldNormWeight:r});return o.setKeys(e.map(kd)),o.setSources(t),o.create(),o}i(Rd,"createIndex");function Ng(e,{getFn:t=O.getFn,fieldNormWeight:n=O.fieldNormWeight}={}){let{keys:r,records:o}=e,s=new jn({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(o),s}i(Ng,"parseIndex");function ro(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:o=O.distance,ignoreLocation:s=O.ignoreLocation}={}){let a=t/e.length;if(s)return a;let c=Math.abs(r-n);return o?a+c/o:c?1:a}i(ro,"computeScore$1");function Dg(e=[],t=O.minMatchCharLength){let n=[],r=-1,o=-1,s=0;for(let a=e.length;s<a;s+=1){let c=e[s];c&&r===-1?r=s:!c&&r!==-1&&(o=s-1,o-r+1>=t&&n.push([r,o]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}i(Dg,"convertMaskToIndices");var Ot=32;function kg(e,t,n,{location:r=O.location,distance:o=O.distance,threshold:s=O.threshold,findAllMatches:a=O.findAllMatches,minMatchCharLength:c=O.minMatchCharLength,includeMatches:f=O.includeMatches,ignoreLocation:u=O.ignoreLocation}={}){if(t.length>Ot)throw new Error(wg(Ot));let m=t.length,p=e.length,h=Math.max(0,Math.min(r,p)),b=s,w=h,E=c>1||f,v=E?Array(p):[],k;for(;(k=e.indexOf(t,w))>-1;){let ae=ro(t,{currentLocation:k,expectedLocation:h,distance:o,ignoreLocation:u});if(b=Math.min(ae,b),w=k+m,E){let we=0;for(;we<m;)v[k+we]=1,we+=1}}w=-1;let G=[],W=1,ge=m+p,ee=1<<m-1;for(let ae=0;ae<m;ae+=1){let we=0,Me=ge;for(;we<Me;)ro(t,{errors:ae,currentLocation:h+Me,expectedLocation:h,distance:o,ignoreLocation:u})<=b?we=Me:ge=Me,Me=Math.floor((ge-we)/2+we);ge=Me;let Ne=Math.max(1,h-Me+1),A=a?p:Math.min(h+Me,p)+m,T=Array(A+2);T[A+1]=(1<<ae)-1;for(let S=A;S>=Ne;S-=1){let N=S-1,M=n[e.charAt(N)];if(E&&(v[N]=+!!M),T[S]=(T[S+1]<<1|1)&M,ae&&(T[S]|=(G[S+1]|G[S])<<1|1|G[S+1]),T[S]&ee&&(W=ro(t,{errors:ae,currentLocation:N,expectedLocation:h,distance:o,ignoreLocation:u}),W<=b)){if(b=W,w=N,w<=h)break;Ne=Math.max(1,2*h-w)}}if(ro(t,{errors:ae+1,currentLocation:h,expectedLocation:h,distance:o,ignoreLocation:u})>b)break;G=T}let be={isMatch:w>=0,score:Math.max(.001,W)};if(E){let ae=Dg(v,c);ae.length?f&&(be.indices=ae):be.isMatch=!1}return be}i(kg,"search");function Rg(e){let t={};for(let n=0,r=e.length;n<r;n+=1){let o=e.charAt(n);t[o]=(t[o]||0)|1<<r-n-1}return t}i(Rg,"createPatternAlphabet");var oo=class{static{i(this,"BitapSearch")}constructor(t,{location:n=O.location,threshold:r=O.threshold,distance:o=O.distance,includeMatches:s=O.includeMatches,findAllMatches:a=O.findAllMatches,minMatchCharLength:c=O.minMatchCharLength,isCaseSensitive:f=O.isCaseSensitive,ignoreLocation:u=O.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:o,includeMatches:s,findAllMatches:a,minMatchCharLength:c,isCaseSensitive:f,ignoreLocation:u},this.pattern=f?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;let m=i((h,b)=>{this.chunks.push({pattern:h,alphabet:Rg(h),startIndex:b})},"addChunk"),p=this.pattern.length;if(p>Ot){let h=0,b=p%Ot,w=p-b;for(;h<w;)m(this.pattern.substr(h,Ot),h),h+=Ot;if(b){let E=p-Ot;m(this.pattern.substr(E),E)}}else m(this.pattern,0)}searchIn(t){let{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let w={isMatch:!0,score:0};return r&&(w.indices=[[0,t.length-1]]),w}let{location:o,distance:s,threshold:a,findAllMatches:c,minMatchCharLength:f,ignoreLocation:u}=this.options,m=[],p=0,h=!1;this.chunks.forEach(({pattern:w,alphabet:E,startIndex:v})=>{let{isMatch:k,score:G,indices:W}=kg(t,w,E,{location:o+v,distance:s,threshold:a,findAllMatches:c,minMatchCharLength:f,includeMatches:r,ignoreLocation:u});k&&(h=!0),p+=G,k&&W&&(m=[...m,...W])});let b={isMatch:h,score:h?p/this.chunks.length:1};return h&&r&&(b.indices=m),b}},ct=class{static{i(this,"BaseMatch")}constructor(t){this.pattern=t}static isMultiMatch(t){return xd(t,this.multiRegex)}static isSingleMatch(t){return xd(t,this.singleRegex)}search(){}};function xd(e,t){let n=e.match(t);return n?n[1]:null}i(xd,"getMatch");var Xi=class extends ct{static{i(this,"ExactMatch")}constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){let n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}},Ji=class extends ct{static{i(this,"InverseExactMatch")}constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){let r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}},Zi=class extends ct{static{i(this,"PrefixExactMatch")}constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){let n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}},_i=class extends ct{static{i(this,"InversePrefixExactMatch")}constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){let n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}},es=class extends ct{static{i(this,"SuffixExactMatch")}constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){let n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},ts=class extends ct{static{i(this,"InverseSuffixExactMatch")}constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){let n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}},io=class extends ct{static{i(this,"FuzzyMatch")}constructor(t,{location:n=O.location,threshold:r=O.threshold,distance:o=O.distance,includeMatches:s=O.includeMatches,findAllMatches:a=O.findAllMatches,minMatchCharLength:c=O.minMatchCharLength,isCaseSensitive:f=O.isCaseSensitive,ignoreLocation:u=O.ignoreLocation}={}){super(t),this._bitapSearch=new oo(t,{location:n,threshold:r,distance:o,includeMatches:s,findAllMatches:a,minMatchCharLength:c,isCaseSensitive:f,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}},so=class extends ct{static{i(this,"IncludeMatch")}constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r,o=[],s=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+s,o.push([r,n-1]);let a=!!o.length;return{isMatch:a,score:a?0:1,indices:o}}},ns=[Xi,so,Zi,_i,ts,es,Ji,io],Cd=ns.length,Fg=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Ig="|";function Lg(e,t={}){return e.split(Ig).map(n=>{let r=n.trim().split(Fg).filter(s=>s&&!!s.trim()),o=[];for(let s=0,a=r.length;s<a;s+=1){let c=r[s],f=!1,u=-1;for(;!f&&++u<Cd;){let m=ns[u],p=m.isMultiMatch(c);p&&(o.push(new m(p,t)),f=!0)}if(!f)for(u=-1;++u<Cd;){let m=ns[u],p=m.isSingleMatch(c);if(p){o.push(new m(p,t));break}}}return o})}i(Lg,"parseQuery");var Og=new Set([io.type,so.type]),rs=class{static{i(this,"ExtendedSearch")}constructor(t,{isCaseSensitive:n=O.isCaseSensitive,includeMatches:r=O.includeMatches,minMatchCharLength:o=O.minMatchCharLength,ignoreLocation:s=O.ignoreLocation,findAllMatches:a=O.findAllMatches,location:c=O.location,threshold:f=O.threshold,distance:u=O.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:o,findAllMatches:a,ignoreLocation:s,location:c,threshold:f,distance:u},this.pattern=n?t:t.toLowerCase(),this.query=Lg(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){let n=this.query;if(!n)return{isMatch:!1,score:1};let{includeMatches:r,isCaseSensitive:o}=this.options;t=o?t:t.toLowerCase();let s=0,a=[],c=0;for(let f=0,u=n.length;f<u;f+=1){let m=n[f];a.length=0,s=0;for(let p=0,h=m.length;p<h;p+=1){let b=m[p],{isMatch:w,indices:E,score:v}=b.search(t);if(w){if(s+=1,c+=v,r){let k=b.constructor.type;Og.has(k)?a=[...a,...E]:a.push(E)}}else{c=0,s=0,a.length=0;break}}if(s){let p={isMatch:!0,score:c/s};return r&&(p.indices=a),p}}return{isMatch:!1,score:1}}},os=[];function Ug(...e){os.push(...e)}i(Ug,"register");function is(e,t){for(let n=0,r=os.length;n<r;n+=1){let o=os[n];if(o.condition(e,t))return new o(e,t)}return new oo(e,t)}i(is,"createSearcher");var ao={AND:"$and",OR:"$or"},ss={PATH:"$path",PATTERN:"$val"},as=i(e=>!!(e[ao.AND]||e[ao.OR]),"isExpression"),Bg=i(e=>!!e[ss.PATH],"isPath"),Kg=i(e=>!dt(e)&&Nd(e)&&!as(e),"isLeaf"),Pd=i(e=>({[ao.AND]:Object.keys(e).map(t=>({[t]:e[t]}))}),"convertToExplicit");function Fd(e,t,{auto:n=!0}={}){let r=i(o=>{let s=Object.keys(o),a=Bg(o);if(!a&&s.length>1&&!as(o))return r(Pd(o));if(Kg(o)){let f=a?o[ss.PATH]:s[0],u=a?o[ss.PATTERN]:o[f];if(!at(u))throw new Error(bg(f));let m={keyId:Yi(f),pattern:u};return n&&(m.searcher=is(u,t)),m}let c={children:[],operator:s[0]};return s.forEach(f=>{let u=o[f];dt(u)&&u.forEach(m=>{c.children.push(r(m))})}),c},"next");return as(e)||(e=Pd(e)),r(e)}i(Fd,"parse");function Vg(e,{ignoreFieldNorm:t=O.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:o,norm:s,score:a})=>{let c=o?o.weight:null;r*=Math.pow(a===0&&c?Number.EPSILON:a,(c||1)*(t?1:s))}),n.score=r})}i(Vg,"computeScore");function Hg(e,t){let n=e.matches;t.matches=[],Oe(n)&&n.forEach(r=>{if(!Oe(r.indices)||!r.indices.length)return;let{indices:o,value:s}=r,a={indices:o,value:s};r.key&&(a.key=r.key.src),r.idx>-1&&(a.refIndex=r.idx),t.matches.push(a)})}i(Hg,"transformMatches");function Gg(e,t){t.score=e.score}i(Gg,"transformScore");function Qg(e,t,{includeMatches:n=O.includeMatches,includeScore:r=O.includeScore}={}){let o=[];return n&&o.push(Hg),r&&o.push(Gg),e.map(s=>{let{idx:a}=s,c={item:t[a],refIndex:a};return o.length&&o.forEach(f=>{f(s,c)}),c})}i(Qg,"format");var Ut=class{static{i(this,"Fuse")}constructor(t,n={},r){this.options={...O,...n},this.options.useExtendedSearch,this._keyStore=new zi(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof jn))throw new Error(gg);this._myIndex=n||Rd(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Oe(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){let n=[];for(let r=0,o=this._docs.length;r<o;r+=1){let s=this._docs[r];t(s,r)&&(this.removeAt(r),r-=1,o-=1,n.push(s))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){let{includeMatches:r,includeScore:o,shouldSort:s,sortFn:a,ignoreFieldNorm:c}=this.options,f=at(t)?at(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Vg(f,{ignoreFieldNorm:c}),s&&f.sort(a),Md(n)&&n>-1&&(f=f.slice(0,n)),Qg(f,this._docs,{includeMatches:r,includeScore:o})}_searchStringList(t){let n=is(t,this.options),{records:r}=this._myIndex,o=[];return r.forEach(({v:s,i:a,n:c})=>{if(!Oe(s))return;let{isMatch:f,score:u,indices:m}=n.searchIn(s);f&&o.push({item:s,idx:a,matches:[{score:u,value:s,norm:c,indices:m}]})}),o}_searchLogical(t){let n=Fd(t,this.options),r=i((c,f,u)=>{if(!c.children){let{keyId:p,searcher:h}=c,b=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(f,p),searcher:h});return b&&b.length?[{idx:u,item:f,matches:b}]:[]}let m=[];for(let p=0,h=c.children.length;p<h;p+=1){let b=c.children[p],w=r(b,f,u);if(w.length)m.push(...w);else if(c.operator===ao.AND)return[]}return m},"evaluate"),o=this._myIndex.records,s={},a=[];return o.forEach(({$:c,i:f})=>{if(Oe(c)){let u=r(n,c,f);u.length&&(s[f]||(s[f]={idx:f,item:c,matches:[]},a.push(s[f])),u.forEach(({matches:m})=>{s[f].matches.push(...m)}))}}),a}_searchObjectList(t){let n=is(t,this.options),{keys:r,records:o}=this._myIndex,s=[];return o.forEach(({$:a,i:c})=>{if(!Oe(a))return;let f=[];r.forEach((u,m)=>{f.push(...this._findMatches({key:u,value:a[m],searcher:n}))}),f.length&&s.push({idx:c,item:a,matches:f})}),s}_findMatches({key:t,value:n,searcher:r}){if(!Oe(n))return[];let o=[];if(dt(n))n.forEach(({v:s,i:a,n:c})=>{if(!Oe(s))return;let{isMatch:f,score:u,indices:m}=r.searchIn(s);f&&o.push({score:u,key:t,value:s,idx:a,norm:c,indices:m})});else{let{v:s,n:a}=n,{isMatch:c,score:f,indices:u}=r.searchIn(s);c&&o.push({score:f,key:t,value:s,norm:a,indices:u})}return o}};Ut.version="7.0.0";Ut.createIndex=Rd;Ut.parseIndex=Ng;Ut.config=O;Ut.parseQuery=Fd;Ug(rs);l();d();var Sq=i(async(e,t)=>new Promise((n,r)=>{let o=setTimeout(()=>{r("Promise timed out")},t);e.then(s=>{n(s),clearTimeout(o)}).catch(r)}),"withTimeout");export{Ft as a,Sq as b,Za as c,_a as d,Mo as e,ec as f,Yd as g,eu as h,D as i,cc as j,lw as k,ve as l,bn as m,dw as n,en as o,ul as p,ot as q,uf as r,Fc as s,Dt as t,ei as u,lc as v,j as w,$o as x,xr as y,Lf as z,Yo as A,Xo as B,kt as C,om as D,Dr as E,qc as F,ym as G,Xc as H,Rt as I,Gp as J,oi as K,ii as L,Qm as M,qp as N,Ai as O,Mn as P,lu as Q,Nn as R,jp as S,qm as T,Dn as U,Wu as V,Wp as W,Yp as X,Hr as Y,Si as Z,nh as _,Ti as $,Gu as aa,rh as ba,oh as ca,ih as da,Op as ea,ah as fa,ch as ga,uh as ha,Vp as ia,lh as ja,fh as ka,mh as la,nt as ma,tl as na,Ci as oa,Lt as pa,$y as qa,Hi as ra,Jy as sa,gh as ta,Zy as ua,_y as va,bh as wa,it as xa,Dy as ya,fl as za,kI as Aa,pl as Ba,wL as Ca,Wh as Da,EO as Ea,$e as Fa,jr as Ga,Dl as Ha,kl as Ia,$r as Ja,rn as Ka,st as La,Ll as Ma,wt as Na,ny as Oa,Tt as Pa,on as Qa,vt as Ra,Zr as Sa,Sy as Ta,Wl as Ua,eo as Va,Py as Wa,an as Xa,Ql as Ya,zl as Za,Yl as _a,Ki as $a,Oy as ab,qi as bb,Ky as cb,eg as db,tg as eb,qy as fb,ng as gb,jy as hb,Ut as ib,qn as jb,ji as kb,pd as lb,lg as mb,dg as nb};
//# sourceMappingURL=chunk-4T2FPKLQ.js.map
