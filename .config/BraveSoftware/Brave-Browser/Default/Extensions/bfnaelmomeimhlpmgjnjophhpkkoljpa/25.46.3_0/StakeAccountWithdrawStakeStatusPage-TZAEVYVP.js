import{a as G}from"./chunk-FFLDOMRI.js";import{a as g}from"./chunk-SUKAPYGM.js";import{d as V}from"./chunk-736WIWZX.js";import{e as Q,f as U,g as q}from"./chunk-PV5WDBPS.js";import"./chunk-LOTYUAC5.js";import"./chunk-BXLRR6GM.js";import"./chunk-ST7U2VUQ.js";import"./chunk-LEFSCI55.js";import"./chunk-M62EOSRT.js";import"./chunk-WWYPP3MY.js";import"./chunk-IJJXVSGB.js";import"./chunk-N3C6FBKY.js";import{b as A}from"./chunk-JUI4ISS4.js";import"./chunk-S5LVVL2E.js";import{db as f}from"./chunk-4EXJCS3P.js";import{W as K,ha as M}from"./chunk-2UWPPO5V.js";import"./chunk-4T2FPKLQ.js";import"./chunk-A3JYJELV.js";import"./chunk-OQCZPFI2.js";import"./chunk-YJCG6GWC.js";import{o as O,ub as _}from"./chunk-KLKDJF5S.js";import{Bb as B,Cb as F,s as z,t as v}from"./chunk-BQE2SXP7.js";import{$ as R,Lb as T,Y as N,w as m}from"./chunk-L3JU23Z5.js";import"./chunk-5HNKNX3S.js";import{U as h,a as et,b as P,q as H}from"./chunk-R3MCCTIW.js";import"./chunk-FNC6PQ53.js";import"./chunk-5QQLABHI.js";import"./chunk-VL3IRAUM.js";import"./chunk-FA7LVEFF.js";import{a as W,g as D,i as x,n as I}from"./chunk-WKJYWAXG.js";x();I();var i=D(et(),1);var e=D(P(),1),ot=W(r=>{let c={stakePubkey:r.stakeAccountPubkey,amount:r.amount,usdPerSol:r.usdPerSol,onClose:r.onClose},{t}=H(),{withdrawStake:d,needsLedgerApproval:l,txHash:n,confirmationStatus:s,isError:u,error:k,onDeny:a}=rt(c);if(l)return(0,e.jsx)(U,{ledgerAction:d,cancel:a});if(u){let o=k,S=o?.message,w=Q(o),p=o?.message.includes(v),E=o?.message.includes(z);return w?(0,e.jsx)(q,{ledgerActionError:o,onRetryClick:d,onCancelClick:a}):p||E?(0,e.jsx)(G,{onCancelClick:a}):(0,e.jsxs)(A,{icon:"error",title:t("stakeAccountWithdrawStakeWithdrawalFailed"),onClose:a,showButton:!!n,children:[(0,e.jsx)(f,{wordBreak:"break-word",color:h.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:S??t("stakeAccountWithdrawStakeWithdrawalFailedDescription")}),(0,e.jsx)(g,{txHash:n,children:t("stakeAccountWithdrawStakeViewTransaction")})]})}return s==="confirmed"||s==="finalized"?(0,e.jsxs)(A,{icon:"success",title:t("stakeAccountWithdrawStakeSolWithdrawn"),onClose:r.onClose,iconSize:"large",children:[(0,e.jsxs)(f,{wordBreak:"break-word",color:h.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:[t("stakeAccountWithdrawStakeSolWithdrawnDescription.part1"),(0,e.jsx)("br",{})," ",t("stakeAccountWithdrawStakeSolWithdrawnDescription.part2")]}),(0,e.jsx)(g,{txHash:n,children:t("stakeAccountWithdrawStakeViewTransaction")})]}):(0,e.jsxs)(A,{icon:"loading",title:t("stakeAccountWithdrawStakeWithdrawingSol"),onClose:r.onClose,iconSize:"large",children:[(0,e.jsx)(f,{wordBreak:"break-word",color:h.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:t("stakeAccountWithdrawStakeWithdrawingSolDescription")}),(0,e.jsx)(g,{txHash:n,children:t("stakeAccountWithdrawStakeViewTransaction")})]})},"StakeAccountWithdrawStakeStatusPage"),Ct=ot,rt=W(({onClose:r,...c})=>{let{data:t,isSuccess:d}=_(),{accountIdentifier:l,isLedgerAccount:n,solanaChainAddress:s,solanaPublicKey:u,connection:k,networkID:a}=(0,i.useMemo)(()=>{let Y=t?.identifier??"",C=(t?.addresses??[]).find(tt=>T.isSolanaNetworkID(tt.networkID)),Z=new m.PublicKey(C?.address??""),$=t?.type===O.Ledger,L=C?.networkID,j=B(F(L));return{accountIdentifier:Y,isLedgerAccount:$,solanaChainAddress:C,solanaPublicKey:Z,connection:j,networkID:L}},[t]),o=V(k),S=(0,i.useCallback)(()=>{o.mutate({...c,accountIdentifier:l,senderAddress:s,stakePubkey:new m.PublicKey(c.stakePubkey),authorizedPubkey:u})},[l,c,s,u,o]),w=K(),p=(0,i.useCallback)(()=>{w.denied({chainType:N.Solana,chainName:R.Solana,networkId:T.getSolanaNetworkIDValue(a),type:"withdraw"}),r()},[a,r,w]);(0,i.useEffect)(()=>{if(d){if(!t||!s)throw new Error("Selected account undefined when trying to perform stake transaction.");n||S()}},[d]);let b=o.data?.id,y=M(k,2e3,b),J=n&&(o.isIdle||o.isPending),X=y.data?.value?.confirmationStatus;return{withdrawStake:S,onDeny:p,needsLedgerApproval:J,txHash:b,confirmationStatus:X,isError:o.isError||y.isError,error:o.error||y.error}},"useWithdrawStakeOnMount");export{ot as StakeAccountWithdrawStakeStatusPage,Ct as default};
//# sourceMappingURL=StakeAccountWithdrawStakeStatusPage-TZAEVYVP.js.map
