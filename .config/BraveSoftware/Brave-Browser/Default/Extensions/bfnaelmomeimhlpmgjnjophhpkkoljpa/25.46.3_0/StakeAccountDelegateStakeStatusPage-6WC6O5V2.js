import{a as J}from"./chunk-FFLDOMRI.js";import{a as p}from"./chunk-SUKAPYGM.js";import{c as U}from"./chunk-736WIWZX.js";import{e as Y,f as q,g as G}from"./chunk-PV5WDBPS.js";import"./chunk-LOTYUAC5.js";import"./chunk-BXLRR6GM.js";import"./chunk-ST7U2VUQ.js";import"./chunk-LEFSCI55.js";import"./chunk-M62EOSRT.js";import"./chunk-WWYPP3MY.js";import"./chunk-IJJXVSGB.js";import"./chunk-N3C6FBKY.js";import{b as D}from"./chunk-JUI4ISS4.js";import"./chunk-S5LVVL2E.js";import{db as A}from"./chunk-4EXJCS3P.js";import{W as V,ha as Q,u as _}from"./chunk-2UWPPO5V.js";import"./chunk-4T2FPKLQ.js";import"./chunk-A3JYJELV.js";import"./chunk-OQCZPFI2.js";import"./chunk-YJCG6GWC.js";import{o as O,ub as H}from"./chunk-KLKDJF5S.js";import{Bb as F,Cb as M,s as K,t as B}from"./chunk-BQE2SXP7.js";import{$ as R,Lb as b,Y as v,w as u}from"./chunk-L3JU23Z5.js";import"./chunk-5HNKNX3S.js";import{U as f,a as oe,b as N,q as z}from"./chunk-R3MCCTIW.js";import"./chunk-FNC6PQ53.js";import"./chunk-5QQLABHI.js";import"./chunk-VL3IRAUM.js";import"./chunk-FA7LVEFF.js";import{a as C,g as T,i as P,n as I}from"./chunk-WKJYWAXG.js";P();I();var i=T(oe(),1);var e=T(N(),1),ne=C(n=>{let s={stakePubkey:n.stakeAccountPubkey,votePubkey:n.voteAccountPubkey,onClose:n.onClose},{t}=z(),{delegateStake:c,onDeny:a,needsLedgerApproval:k,txHash:r,confirmationStatus:l,isError:d,error:S}=ae(s);if(k)return(0,e.jsx)(q,{ledgerAction:c,cancel:a});if(d){let o=S,g=o?.message,m=Y(o),y=o?.message.includes(B),L=o?.message.includes(K);return m?(0,e.jsx)(G,{ledgerActionError:o,onRetryClick:c,onCancelClick:a}):y||L?(0,e.jsx)(J,{onCancelClick:a}):(0,e.jsxs)(D,{icon:"error",title:t("stakeAccountDelegateStakeStakingFailed"),onClose:a,showButton:!!r,iconSize:"large",children:[(0,e.jsx)(A,{wordBreak:"break-word",color:f.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:g??t("stakeAccountDelegateStakeStakingFailedDescription")}),(0,e.jsx)(p,{txHash:r,children:t("stakeAccountDelegateStakeViewTransaction")})]})}return l==="confirmed"||l==="finalized"?(0,e.jsxs)(D,{icon:"success",title:t("stakeAccountDelegateStakeSolStaked"),onClose:n.onClose,iconSize:"large",children:[(0,e.jsx)(A,{wordBreak:"break-word",color:f.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:(0,e.jsxs)(_,{i18nKey:"stakeAccountDelegateStakeSolStakedDescriptionInterpolated",children:["Your SOL will begin earning rewards",(0,e.jsx)("br",{})," in the next couple of days once the stake account becomes active."]})}),(0,e.jsx)(p,{txHash:r,children:t("stakeAccountDelegateStakeViewTransaction")})]}):(0,e.jsxs)(D,{icon:"loading",title:t("stakeAccountDelegateStakeStakingSol"),onClose:n.onClose,iconSize:"large",children:[(0,e.jsx)(A,{wordBreak:"break-word",color:f.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:t("stakeAccountDelegateStakeStakingSolDescription")}),(0,e.jsx)(p,{txHash:r,children:t("stakeAccountDelegateStakeViewTransaction")})]})},"StakeAccountDelegateStakeStatusPage"),Te=ne,ae=C(({onClose:n,...s})=>{let{data:t,isSuccess:c}=H(),{accountIdentifier:a,isLedgerAccount:k,solanaChainAddress:r,solanaPublicKey:l,connection:d,networkID:S}=(0,i.useMemo)(()=>{let Z=t?.identifier??"",w=(t?.addresses??[]).find(te=>b.isSolanaNetworkID(te.networkID)),$=new u.PublicKey(w?.address??""),j=t?.type===O.Ledger,E=w?.networkID,ee=F(M(E));return{accountIdentifier:Z,isLedgerAccount:j,solanaChainAddress:w,solanaPublicKey:$,connection:ee,networkID:E}},[t]),o=U(d),g=(0,i.useCallback)(()=>{o.mutate({...s,accountIdentifier:a,senderAddress:r,stakePubkey:new u.PublicKey(s.stakePubkey),authorizedPubkey:l,votePubkey:new u.PublicKey(s.votePubkey)})},[a,s,o,r,l]),m=V(),y=(0,i.useCallback)(()=>{m.denied({chainType:v.Solana,chainName:R.Solana,networkId:b.getSolanaNetworkIDValue(S),type:"delegate"}),n()},[S,n,m]);(0,i.useEffect)(()=>{c&&!k&&g()},[c]);let x=o.data?.id,h=Q(d,2e3,x),W=k&&(o.isIdle||o.isPending),X=h.data?.value?.confirmationStatus;return{delegateStake:g,onDeny:y,needsLedgerApproval:W,txHash:x,confirmationStatus:X,isError:o.isError||h.isError,error:o.error||h.error}},"useDelegateStakeOnMount");export{ne as StakeAccountDelegateStakeStatusPage,Te as default};
//# sourceMappingURL=StakeAccountDelegateStakeStatusPage-6WC6O5V2.js.map
