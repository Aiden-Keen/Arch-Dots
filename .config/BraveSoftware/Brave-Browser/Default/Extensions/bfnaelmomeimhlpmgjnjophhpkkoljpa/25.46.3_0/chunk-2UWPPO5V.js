import{E as fi,L as hi,R as ft,S as Si,Ta as gi,ab as yi,ha as Lo,ib as ki,kb as Ai,mb as wi,nb as Ti,u as pi,wa as Ot}from"./chunk-4T2FPKLQ.js";import{e as bo,qa as _e}from"./chunk-OQCZPFI2.js";import{A as Gn,Qb as Jn,Ya as $n,da as Qn,fb as Yn,j as zn,mc as xt,o as fe,qc as Xn,ub as ie}from"./chunk-KLKDJF5S.js";import{Ab as Io,Ac as Le,Be as mi,De as he,Ec as ti,Fc as ei,Gd as ze,Hc as Mr,Ic as oi,Jb as Po,Kb as Eo,Kc as _o,Lc as ri,Mb as Qt,Rc as Co,T as xo,U as Pt,Uc as ni,Zc as ii,dd as si,g as Ce,me as li,re as jt,vc as Lr,vd as ai,wd as D,xd as ci,yd as ui,ye as di}from"./chunk-BQE2SXP7.js";import{$ as pt,Cc as Q,Fc as $,Lb as N,Ld as At,Oc as Bn,Od as Kn,Pd as Wn,Qc as Rn,Rb as Dn,Sb as ne,Sc as Vn,Sd as qn,Uc as je,Wd as jn,Y as j,Zb as Un,_d as R,b as En,ba as pe,c as Qa,dd as vt,fd as Ee,he as qt,id as L,m as Ln,pa as _r,qa as bt,s as Mn,t as On,u as Tt,v as Y,w as A,xc as qe}from"./chunk-L3JU23Z5.js";import{b as Ao,d as Ga}from"./chunk-5HNKNX3S.js";import{Ea as It,W as vo,a as C,b as Mt,ba as ct,d as X,e as q,fa as Zn,ia as Z,l as v,nb as Cr,p as Hn,q as J}from"./chunk-R3MCCTIW.js";import{h as mt,k as Wt}from"./chunk-VL3IRAUM.js";import{A as wo,B as Fn,C as To,D as Nn,b as Er,c as We,d as re,e as _n,f as Cn,g as T,m as Ie,y as Pe}from"./chunk-FA7LVEFF.js";import{a as n,d as za,g as x,i as c,l as Ha,m as Buffer,n as u}from"./chunk-WKJYWAXG.js";var na=za(_=>{"use strict";c();u();var Wu=_&&_.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_,"__esModule",{value:!0});_.map=_.array=_.rustEnum=_.str=_.vecU8=_.tagged=_.vec=_.bool=_.option=_.publicKey=_.i256=_.u256=_.i128=_.u128=_.i64=_.u64=_.struct=_.f64=_.f32=_.i32=_.u32=_.i16=_.u16=_.i8=_.u8=void 0;var z=Lr(),qu=En(),ju=Wu(Ao()),Jt=Lr();Object.defineProperty(_,"u8",{enumerable:!0,get:n(function(){return Jt.u8},"get")});Object.defineProperty(_,"i8",{enumerable:!0,get:n(function(){return Jt.s8},"get")});Object.defineProperty(_,"u16",{enumerable:!0,get:n(function(){return Jt.u16},"get")});Object.defineProperty(_,"i16",{enumerable:!0,get:n(function(){return Jt.s16},"get")});Object.defineProperty(_,"u32",{enumerable:!0,get:n(function(){return Jt.u32},"get")});Object.defineProperty(_,"i32",{enumerable:!0,get:n(function(){return Jt.s32},"get")});Object.defineProperty(_,"f32",{enumerable:!0,get:n(function(){return Jt.f32},"get")});Object.defineProperty(_,"f64",{enumerable:!0,get:n(function(){return Jt.f64},"get")});Object.defineProperty(_,"struct",{enumerable:!0,get:n(function(){return Jt.struct},"get")});var ce=class extends z.Layout{static{n(this,"BNLayout")}constructor(e,o,r){super(e,r),this.blob=(0,z.blob)(e),this.signed=o}decode(e,o=0){let r=new ju.default(this.blob.decode(e,o),10,"le");return this.signed?r.fromTwos(this.span*8).clone():r}encode(e,o,r=0){return this.signed&&(e=e.toTwos(this.span*8)),this.blob.encode(e.toArrayLike(Buffer,"le",this.span),o,r)}};function oa(t){return new ce(8,!1,t)}n(oa,"u64");_.u64=oa;function zu(t){return new ce(8,!0,t)}n(zu,"i64");_.i64=zu;function Hu(t){return new ce(16,!1,t)}n(Hu,"u128");_.u128=Hu;function Gu(t){return new ce(16,!0,t)}n(Gu,"i128");_.i128=Gu;function Qu(t){return new ce(32,!1,t)}n(Qu,"u256");_.u256=Qu;function $u(t){return new ce(32,!0,t)}n($u,"i256");_.i256=$u;var Gt=class extends z.Layout{static{n(this,"WrappedLayout")}constructor(e,o,r,i){super(e.span,i),this.layout=e,this.decoder=o,this.encoder=r}decode(e,o){return this.decoder(this.layout.decode(e,o))}encode(e,o,r){return this.layout.encode(this.encoder(e),o,r)}getSpan(e,o){return this.layout.getSpan(e,o)}};function Yu(t){return new Gt((0,z.blob)(32),e=>new qu.PublicKey(e),e=>e.toBuffer(),t)}n(Yu,"publicKey");_.publicKey=Yu;var Sn=class extends z.Layout{static{n(this,"OptionLayout")}constructor(e,o){super(-1,o),this.layout=e,this.discriminator=(0,z.u8)()}encode(e,o,r=0){return e==null?this.discriminator.encode(0,o,r):(this.discriminator.encode(1,o,r),this.layout.encode(e,o,r+1)+1)}decode(e,o=0){let r=this.discriminator.decode(e,o);if(r===0)return null;if(r===1)return this.layout.decode(e,o+1);throw new Error("Invalid option "+this.property)}getSpan(e,o=0){let r=this.discriminator.decode(e,o);if(r===0)return 1;if(r===1)return this.layout.getSpan(e,o+1)+1;throw new Error("Invalid option "+this.property)}};function Ju(t,e){return new Sn(t,e)}n(Ju,"option");_.option=Ju;function Xu(t){return new Gt((0,z.u8)(),Zu,tl,t)}n(Xu,"bool");_.bool=Xu;function Zu(t){if(t===0)return!1;if(t===1)return!0;throw new Error("Invalid bool: "+t)}n(Zu,"decodeBool");function tl(t){return t?1:0}n(tl,"encodeBool");function el(t,e){let o=(0,z.u32)("length"),r=(0,z.struct)([o,(0,z.seq)(t,(0,z.offset)(o,-o.span),"values")]);return new Gt(r,({values:i})=>i,i=>({values:i}),e)}n(el,"vec");_.vec=el;function ol(t,e,o){let r=(0,z.struct)([oa("tag"),e.replicate("data")]);function i({tag:s,data:a}){if(!s.eq(t))throw new Error("Invalid tag, expected: "+t.toString("hex")+", got: "+s.toString("hex"));return a}return n(i,"decodeTag"),new Gt(r,i,s=>({tag:t,data:s}),o)}n(ol,"tagged");_.tagged=ol;function ra(t){let e=(0,z.u32)("length"),o=(0,z.struct)([e,(0,z.blob)((0,z.offset)(e,-e.span),"data")]);return new Gt(o,({data:r})=>r,r=>({data:r}),t)}n(ra,"vecU8");_.vecU8=ra;function rl(t){return new Gt(ra(),e=>e.toString("utf-8"),e=>Buffer.from(e,"utf-8"),t)}n(rl,"str");_.str=rl;function nl(t,e,o){let r=(0,z.union)(o??(0,z.u8)(),e);return t.forEach((i,s)=>r.addVariant(s,i,i.property)),r}n(nl,"rustEnum");_.rustEnum=nl;function il(t,e,o){let r=(0,z.struct)([(0,z.seq)(t,e,"values")]);return new Gt(r,({values:i})=>i,i=>({values:i}),o)}n(il,"array");_.array=il;var gn=class extends z.Layout{static{n(this,"MapEntryLayout")}constructor(e,o,r){super(e.span+o.span,r),this.keyLayout=e,this.valueLayout=o}decode(e,o){o=o||0;let r=this.keyLayout.decode(e,o),i=this.valueLayout.decode(e,o+this.keyLayout.getSpan(e,o));return[r,i]}encode(e,o,r){r=r||0;let i=this.keyLayout.encode(e[0],o,r),s=this.valueLayout.encode(e[1],o,r+i);return i+s}getSpan(e,o){return this.keyLayout.getSpan(e,o)+this.valueLayout.getSpan(e,o)}};function sl(t,e,o){let r=(0,z.u32)("length"),i=(0,z.struct)([r,(0,z.seq)(new gn(t,e),(0,z.offset)(r,-r.span),"values")]);return new Gt(i,({values:s})=>new Map(s),s=>({values:Array.from(s.entries())}),o)}n(sl,"map");_.map=sl});c();u();var Et;(function(t){t.DirectLink="Deep Link",t.Modal="Modal",t.BottomSheet="Bottom Sheet"})(Et||(Et={}));var He;(function(t){t.Buy="Buy",t.Collectibles="Collectibles",t.ConnectHardwareWallet="Connect Hardware Wallet",t.ConvertStakeAccount="Convert Stake Account",t.ConvertToJito="Convert to Jito",t.MintPSOL="Mint PSOL",t.Explore="Explore",t.Perps="Perps",t.MintCollectible="Mint Collectible",t.SocialLogin="Social Login",t.SettingsClaimUsername="Settings: Claim Username",t.SettingsCurrency="Settings: Currency",t.SettingsImportSeedPhrase="Settings: Import Seed Phrase",t.SettingsNotificationPreferences="Settings: Notification Preferences",t.SettingsSecurityAndPrivacy="Settings: Security & Privacy",t.TokenCategory="Token Category",t.Swapper="Swapper",t.ExternalLink="External Link",t.Token="Token",t.TokenChat="Token Chat",t.Terminal="Terminal"})(He||(He={}));var $a=T.enum(["dark","light"]).default("dark").catch("dark"),Ya=T.enum(["normal","full"]).default("normal").catch("normal"),Xl=T.object({theme:$a,imageBleed:Ya}),P;(function(t){t.Multichain="Multichain",t.MultichainSwapper="MultichainSwapper",t.InvalidChecksum="InvalidChecksum",t.AdditionalPermissions="AdditionalPermissions",t.SuiWelcome="SuiWelcome",t.SuiWelcomeDefaultOn="SuiWelcomeDefaultOn",t.MonadMainnetWelcome="MonadMainnetWelcome",t.ArbitrumWelcome="ArbitrumWelcome",t.StakingWelcome="StakingWelcomeNew",t.ClaimUsernameNudge="ClaimUsernameNudge",t.QuickClaimUsername="QuickClaimUsername",t.SeedlessPinVerification="SeedlessPinVerification",t.TermsOfServiceUpdate="TermsOfServiceUpdate",t.NotificationsUpdate="NotificationsUpdate",t.SocialFeedNux="SocialFeedNux",t.SocialFeedNuxWelcome="SocialFeedNuxWelcome",t.PerpsJoinFeedbackGroup="PerpsJoinFeedbackGroup",t.PerpsIntro="PerpsIntro",t.CashWaitlistActivated="CashWaitlistActivated",t.CashGeneralAccessActivation="CashGeneralAccessActivation",t.PredictionInsiderTradingAttestation="PredictionInsiderTradingAttestation"})(P||(P={}));c();u();c();u();var Mo=n(t=>{let e=[];for(let o in t.errors)Array.isArray(t.errors[o])&&e.push(t.errors[o].join(", "));return e.join(", ")},"formatErrorMessages");var Oo;(function(t){t.Upgrade="upgrade",t.Noop="noop"})(Oo||(Oo={}));var vi=n(async({locale:t})=>{let e;try{let o=JSON.stringify({platform:wo,appVersion:Pe,locale:t}),r=await mt.api().headers({"Content-Type":"application/json"}).post(({apiEnv:s})=>`/banners/force_upgrade/${s}/v1`,o);if(r.status===400){let s=await r.data,a=Mo(s);throw new Error(a)}else if(r.status<200||r.status>299)throw new Error(`status code: ${r.status}, body: ${r.statusText}`);let i=r.data;return i?{...i}:bi}catch(o){return e===400&&o instanceof Error&&$.captureError(o,Q.ActionBanner),bi}},"fetchForceUpgradeStatus"),bi={forceUpgradeStatus:Oo.Noop};c();u();c();u();var xi=n(async({locale:t})=>({...await vi({locale:t})}),"fetchForceUpgrade");c();u();var zt="@phantom/interstitials",Me=`${zt}:action-banners`,Ii=`${zt}:force-upgrade`,Or={actionBanners:n((t,e)=>[Me,{accountIdentifier:t,accessToken:e}],"actionBanners"),hasSeenInterstitial:n(t=>[`${zt}:has-seen-interstitial`,{feature:t}],"hasSeenInterstitial"),interstitialViewHistory:n(t=>[`${zt}:interstitial-view-history`,{feature:t}],"interstitialViewHistory"),appLaunchTimes:n(()=>[`${zt}:app-launch-times`],"appLaunchTimes"),lastOnboardedAt:n(()=>[`${zt}:last-onboarded-at`],"lastOnboardedAt"),contentCards:[`${zt}:content-cards`]};var Ja=n(()=>L({queryKey:[Ii],queryFn:n(async()=>{let e=bo(v.language)??"en";return xi({locale:e})},"queryFn"),enabled:!!Pe,staleTime:R({minutes:5})}),"useForceUpgrade");c();u();c();u();c();u();c();u();var Xa={[P.Multichain]:2,[P.MultichainSwapper]:1,[P.InvalidChecksum]:1,[P.SuiWelcome]:1,[P.SuiWelcomeDefaultOn]:1,[P.MonadMainnetWelcome]:1,[P.ArbitrumWelcome]:1,[P.ClaimUsernameNudge]:1,[P.QuickClaimUsername]:1,[P.SeedlessPinVerification]:1,[P.AdditionalPermissions]:1,[P.TermsOfServiceUpdate]:1,[P.StakingWelcome]:1,[P.SocialFeedNux]:1,[P.SocialFeedNuxWelcome]:1,[P.PerpsJoinFeedbackGroup]:1,[P.PerpsIntro]:1,[P.NotificationsUpdate]:1,[P.CashWaitlistActivated]:1,[P.CashGeneralAccessActivation]:1,[P.PredictionInsiderTradingAttestation]:1},Za={[P.Multichain]:3,[P.MultichainSwapper]:1,[P.InvalidChecksum]:1,[P.SuiWelcome]:1,[P.SuiWelcomeDefaultOn]:1,[P.MonadMainnetWelcome]:1,[P.ArbitrumWelcome]:1,[P.StakingWelcome]:1,[P.ClaimUsernameNudge]:1,[P.QuickClaimUsername]:1,[P.AdditionalPermissions]:1,[P.SeedlessPinVerification]:1,[P.TermsOfServiceUpdate]:1,[P.SocialFeedNux]:1,[P.SocialFeedNuxWelcome]:1,[P.PerpsJoinFeedbackGroup]:1,[P.PerpsIntro]:1,[P.NotificationsUpdate]:1,[P.CashWaitlistActivated]:1,[P.CashGeneralAccessActivation]:1,[P.PredictionInsiderTradingAttestation]:1},Fo=n(t=>To?Xa[t]:Fn?Za[t]:-1,"getMostRecentVersion");var tc=1,No=".phantom-labs.settings.interstitials";var ec={...Vn(No,[`${zt}:has-seen-interstitial`,`${zt}:interstitial-view-history`],(t,e)=>({version:tc,interstitialsSeen:{...t?.interstitialsSeen,...e?.interstitialsSeen},interstitialsViewHistory:{...t?.interstitialsViewHistory,...e?.interstitialsViewHistory}}))};var ht;(function(t){t.LastOnboardedAt="lastOnboardedAt",t.AppLaunchTimes="appLaunchTimes",t.DismissedActionBanners="dismissedActionBanners",t.DismissedContentCards="dismissedContentCards"})(ht||(ht={}));var oc=T.object({version:T.literal(1),dismissedContentCards:T.record(T.string().describe("cardId"),T.object({dismissedTimestamp:T.number().describe("unix timestamp in milliseconds of dismissal")}))}),[Do,Pi]=Bn("interstitials",[{key:ht.LastOnboardedAt,defaultValue:-1,type:"number"},{key:ht.AppLaunchTimes,defaultValue:[],type:"array",validator:T.array(T.number())},{key:ht.DismissedActionBanners,defaultValue:[],type:"array",validator:T.array(T.string())},{key:ht.DismissedContentCards,type:"object",validator:oc,nullable:!0}]),Se=n((...t)=>qe(Do,...t),"useInterstitialsStorage"),Uo=n((...t)=>qe(Pi,...t),"useSetInterstitialsStorage"),rc=1,nc=T.object({version:T.literal(1),interstitialsSeen:T.record(T.number()).optional(),interstitialsViewHistory:T.record(T.array(T.number())).optional()}),ic=n((t,e)=>{let o=t,r=e;return!o&&!r?null:{version:rc,interstitialsSeen:{...o?.interstitialsSeen??{},...r?.interstitialsSeen??{}},interstitialsViewHistory:{...o?.interstitialsViewHistory??{},...r?.interstitialsViewHistory??{}}}},"interstitialsResolver"),[Fr,Ei,sc]=Rn("interstitials",[{key:No,type:"object",validator:nc,nullable:!0,resolver:ic,updateOn:"idle"}]);var Nr=n((...t)=>qe(Ei,...t),"useSetSyncedInterstitialsStorage"),_i=n((...t)=>qe(sc,...t),"useAsyncSyncedInterstitialsStorage");var Ge=n(t=>{let{value:e,isReady:o}=_i(".phantom-labs.settings.interstitials"),r=Fo(t);return{isReady:o,data:(e?.interstitialsSeen?.[t]??0)>=r}},"useHasSeenInterstitial");c();u();var Ci=x(C());var ac=1,ut=n(t=>{let e=Nr(".phantom-labs.settings.interstitials");return(0,Ci.useCallback)(async()=>{let o=Fr(".phantom-labs.settings.interstitials"),r=Fo(t);await e({version:ac,interstitialsSeen:{...o?.interstitialsSeen??{},[t]:r},interstitialsViewHistory:{...o?.interstitialsViewHistory??{},[t]:[...o?.interstitialsViewHistory?.[t]??[],Date.now()]}})},[t,e])},"useSetHasSeenInterstitial");c();u();var Dr=x(Mt(),1);c();u();var Li=x(C());var Bo=class extends Li.default.Component{static{n(this,"ErrorBoundary")}constructor(e){super(e),this.state={error:null}}static getDerivedStateFromError(e){return e instanceof Error?{error:e}:typeof e=="string"?{error:new Error(e)}:{error:new Error}}componentDidCatch(e,o){e instanceof Error&&$.captureError(e,Q.Generic)}render(){return this.state.error?typeof this.props.fallback=="function"?this.props.fallback(this.state.error):this.props.fallback:this.props.children}};var Ro=x(C(),1);var ge=Ro.default.memo(({children:t,i18nKey:e,...o})=>{let{t:r}=J(),i=(0,Ro.useMemo)(()=>(e?`${r(e,{...o,...o.values})}`:"").replace(/<\/?[^>]+(>|$)/g,""),[e,o,r]);return(0,Dr.jsx)(Bo,{fallback:i,children:(0,Dr.jsx)(Hn,{i18nKey:e,...o,children:t})})});c();u();c();u();c();u();c();u();c();u();var Oi=n(async({accountID:t,deviceId:e,locale:o,rootId:r,selectedAccountAddresses:i,accessToken:s})=>{let a;try{let l={accountID:t,deviceId:e,locale:o,platform:wo,rootId:r,selectedAccountAddresses:i,version:Pe},d=await mt.api().headers({"Content-Type":"application/json"}).bearer(s).post(({apiEnv:f})=>`/banners/get_banners/${f}/v2`,l);if(d.status===400){let f=await d.data,p=Mo(f);throw new Error(p)}else if(d.status<200||d.status>299)throw new Error(`status code: ${d.status}, body: ${await d.statusText}`);let m=d.data;return m?{...m,banners:m.banners??[]}:Mi}catch(l){return a===400&&l instanceof Error&&$.captureError(l,Q.ActionBanner),Mi}},"fetchSanityActionBanners"),Mi={id:void 0,banners:[]};c();u();c();u();var Ur=n(t=>t?Object.values(He).includes(t):!1,"isActionBannerDestinationSupported");c();u();var Fi=n(t=>{switch(t){case Et.BottomSheet:return To;case Et.Modal:return!0;default:return!1}},"isActionBannerInterstitialSupported");var Ni=n(t=>{let{bannerType:e,destinationType:o}=t;switch(e){case Et.DirectLink:return Ur(o);case Et.BottomSheet:case Et.Modal:return Fi(e)&&Ur(o);default:return!1}},"isActionBannerSupported");var Di=n(async({accountID:t,deviceId:e,dismissedBanners:o,locale:r,rootId:i,selectedAccountAddresses:s,accessToken:a})=>{let l=await Oi({accountID:t,deviceId:e,locale:r,rootId:i,selectedAccountAddresses:s,accessToken:a});return{...l,banners:l.banners.filter(d=>Ni(d)&&!o.includes(d.id))}},"fetchActionBanners");var cc=R({minutes:1}),uc=n(()=>{let t=qt(),{data:e,isLoading:o}=Qn(),{data:r}=ie(),i=n(async()=>{let s=r?.type!==fe.ReadOnly?r?.addresses.map(Un)??[]:[],a=r?.type===fe.Seed?r.seedIdentifier:null,l=Do(ht.DismissedActionBanners),d=bo(v.language)??"en",m=await t.getDeviceId();return Di({accountID:r?.identifier??"",deviceId:m,dismissedBanners:l,locale:d,rootId:a,selectedAccountAddresses:s,accessToken:e?.accessToken})},"queryFn");return L({queryKey:Or.actionBanners(r?.identifier,e?.accessToken),queryFn:i,enabled:!o&&!!r?.identifier,staleTime:cc})},"useActionBanners");c();u();c();u();var Vo=x(C());c();u();var Ui=n(()=>{let t=Se(ht.LastOnboardedAt),e=Se(ht.AppLaunchTimes);if(e.length<2)return!0;if(t!==void 0){let[o,r]=e;if(t<o&&t<r)return!1}return!0},"useHasJustOnboarded");function ye(t,e,o){let{data:r,isReady:i}=Ge(t),{data:s}=qn(e?[e]:[]),a=s?.length===1?s[0]:!0,l=Ui(),d=(0,Vo.useCallback)(()=>o(),[o]);return(0,Vo.useMemo)(()=>a&&i&&!r&&!l&&d(),[a,r,l,d,i])}n(ye,"useNewFeatureVisibility");c();u();var Ko=x(Mt());var Oe=x(C());var Br={data:{feature:"arbitrum"}},lc=n(({onPrimaryAction:t,onSecondaryAction:e,image:o,condition:r=n(()=>!0,"condition")})=>{let{t:i}=J(),{mutateAsync:s}=$n(),[a]=Yn([pt.Arbitrum]),l=ut(P.ArbitrumWelcome),d=ye(P.ArbitrumWelcome,"enable-arbitrum",()=>r()&&!a&&!Ie()),m=(0,Oe.useCallback)(async()=>{await s({chainIDs:[pt.Arbitrum]}),t(),l()},[s,t,l]),f=(0,Oe.useCallback)(()=>{e(),l()},[e,l]),p=(0,Oe.useMemo)(()=>({title:i("interstitialArbitrumWelcomeTitle"),items:[{key:"arbitrumValueProp1",title:i("interstitialArbitrumWelcomeItemTitle_1"),icon:(0,Ko.jsx)(It,{icon:"InfoCircle",color:"spotBase",backgroundColor:"brandMidnight",shape:"square"}),description:i("interstitialArbitrumWelcomeItemDescription_1")},{key:"arbitrumValueProp2",title:i("interstitialArbitrumWelcomeItemTitle_2"),icon:(0,Ko.jsx)(It,{icon:"InfoCircle",color:"spotBase",backgroundColor:"brandMidnight",shape:"square"}),description:i("interstitialArbitrumWelcomeItemDescription_2")},{key:"arbitrumValueProp3",title:i("interstitialArbitrumWelcomeItemTitle_3"),icon:(0,Ko.jsx)(It,{icon:"InfoCircle",color:"spotBase",backgroundColor:"brandMidnight",shape:"square"}),description:i("interstitialArbitrumWelcomeItemDescription_3")}],primaryButton:{children:i("interstitialArbitrumWelcomePrimaryButtonText"),onAction:m,analyticsEvent:{event:"welcomeInterstitialPrimaryButtonClickedByUser",payload:Br}},secondaryButton:{children:i("commandNotNow"),onAction:f,analyticsEvent:{event:"welcomeInterstitialSecondaryButtonClickedByUser",payload:Br}},onDismiss:l,image:o,displayEvent:{event:"welcomeInterstitialSeen",payload:Br}}),[i,m,f,o,l]);return(0,Oe.useMemo)(()=>({interstitial:p,shouldShow:d}),[p,d])},"useArbitrumWelcomeModal");c();u();var Wo=x(Mt());var Qe=x(C());var Bi={data:{feature:"monad"}},dc=n(({onPrimaryAction:t,image:e,condition:o=n(()=>!0,"condition")})=>{let{t:r}=J(),i=ut(P.MonadMainnetWelcome),s=ye(P.MonadMainnetWelcome,"enable-monad-mainnet",()=>o()&&!Ie()),a=(0,Qe.useCallback)(()=>{t(),i()},[t,i]),l=(0,Qe.useMemo)(()=>({title:r("interstitialMonadWelcomeTitle"),items:[{key:"monadValueProp1",title:r("interstitialMonadWelcomeItemTitle_1"),icon:(0,Wo.jsx)(It,{icon:"ToggleLeft",color:"spotBase",backgroundColor:"brandMidnight",shape:"square"}),description:r("interstitialMonadWelcomeItemDescription_1")},{key:"monadValueProp2",title:r("interstitialMonadWelcomeItemTitle_2"),icon:(0,Wo.jsx)(It,{icon:"Compass",color:"spotBase",backgroundColor:"brandMidnight",shape:"square"}),description:r("interstitialMonadWelcomeItemDescription_2")},{key:"monadValueProp3",title:r("interstitialMonadWelcomeItemTitle_3"),icon:(0,Wo.jsx)(It,{icon:"Terminal",color:"spotBase",backgroundColor:"brandMidnight",shape:"square"}),description:r("interstitialMonadWelcomeItemDescription_3")}],primaryButton:{children:r("interstitialMonadWelcomePrimaryButtonText"),onAction:a,analyticsEvent:{event:"welcomeInterstitialPrimaryButtonClickedByUser",payload:Bi}},onDismiss:i,image:e,displayEvent:{event:"welcomeInterstitialSeen",payload:Bi}}),[r,a,e,i]);return(0,Qe.useMemo)(()=>({interstitial:l,shouldShow:s}),[l,s])},"useMonadWelcomeModal");c();u();var qo=x(Mt());var Fe=x(C());var Rr={data:{feature:"staking"}},mc=n(({onPrimaryAction:t,onSecondaryAction:e,image:o,condition:r=n(()=>!0,"condition")})=>{let{t:i}=J(),s=ut(P.StakingWelcome),a=ye(P.StakingWelcome,"enable-psol-welcome-modal",()=>r()&&!Ie()),l=(0,Fe.useCallback)(()=>{t(),s()},[t,s]),d=(0,Fe.useCallback)(()=>{e(),s()},[e,s]),m=(0,Fe.useMemo)(()=>({title:void 0,mobileTitleSheetInset:Nn,items:[{key:"stakingValueProp1",title:i("stakingInterstitialWelcomeItemTitle_1"),icon:(0,qo.jsx)(It,{icon:"InfoCircle",color:"spotPositive",backgroundColor:"areaBase",shape:"square"}),description:i("stakingInterstitialWelcomeItemDescription_1")},{key:"stakingValueProp2",title:i("stakingInterstitialWelcomeItemTitle_2"),icon:(0,qo.jsx)(It,{icon:"TrendingUp",color:"spotPositive",backgroundColor:"areaBase",shape:"square"}),description:i("stakingInterstitialWelcomeItemDescription_2")},{key:"stakingValueProp3",title:i("stakingInterstitialWelcomeItemTitle_3"),icon:(0,qo.jsx)(It,{icon:"Shield",color:"spotPositive",backgroundColor:"areaBase",shape:"square"}),description:i("stakingInterstitialWelcomeItemDescription_3")}],primaryButton:{children:i("stakingInterstitialWelcomePrimaryButtonText"),onAction:l,analyticsEvent:{event:"welcomeInterstitialPrimaryButtonClickedByUser",payload:Rr},background:"spot",theme:"positive"},secondaryButton:{children:i("commandNotNow"),onAction:d,analyticsEvent:{event:"welcomeInterstitialSecondaryButtonClickedByUser",payload:Rr}},onDismiss:s,image:o,displayEvent:{event:"welcomeInterstitialSeen",payload:Rr},disclaimers:[i("mintStakeInfoPageDisclaimer1"),i("mintStakeInfoPageDisclaimer2_US")]}),[i,l,d,o,s]);return(0,Fe.useMemo)(()=>({interstitial:m,shouldShow:a}),[m,a])},"useStakingWelcomeModal");c();u();var $t=x(Mt());var Ne=x(C());var pc="https://phantom.com/terms",fc="https://phantom.com/privacy",hc="https://phantom.com/terms-and-privacy-update",Sc=n(({onConfirm:t,openUrl:e})=>{let{t:o}=J(),r=qt(),i=ut(P.TermsOfServiceUpdate),s=(0,Ne.useCallback)(async()=>{i(),t()},[i,t]),a=(0,Ne.useCallback)(d=>async()=>{await r.capture("termsOfServiceUpdateClick",{data:{uiContext:"interstitial"}}),await e(d)},[r,e]),l=(0,Ne.useMemo)(()=>({title:o("interstitialTermsOfServiceUpdateTitle"),items:[],primaryButton:{children:o("commandContinue"),onAction:s,analyticsEvent:{event:"termsOfServiceUpdateAgreedByUser",payload:{data:{uiContext:"interstitial"}}}},image:"",displayEvent:{event:"termsOfServiceUpdateSeen",payload:{data:{uiContext:"interstitial"}}},description:(0,$t.jsx)(gc,{openUrl:a}),dismissGestureDisabled:!0}),[o,s,a]);return(0,Ne.useMemo)(()=>({interstitial:l}),[l])},"useTermsOfServiceUpdated"),gc=n(({openUrl:t})=>(0,$t.jsx)(ct,{marginTop:24,children:(0,$t.jsx)(Z,{font:"body",align:"center",children:(0,$t.jsxs)(ge,{i18nKey:"interstitialTermsOfServiceUpdateSubtitle",children:["Please review our updated",(0,$t.jsx)(Z,{onPress:t(pc),color:"spotBase",children:"Terms of Use"}),"and",(0,$t.jsx)(Z,{onPress:t(fc),color:"spotBase",children:"Privacy Policy"}),". By continuing, you agree to the updated terms and policies.",(0,$t.jsx)(Z,{onPress:t(hc),color:"spotBase",children:"Learn More"}),"."]})})}),"TermsOfServiceUpdateDescription");c();u();var Ri=x(Mt());var Vi=x(C());c();u();var yc=x(Mt());var Ki=x(C());c();u();var kc=x(Mt());var Wi=x(C());c();u();var Ac=x(C());c();u();var qi=x(C());var wc=n(()=>{let t=Se(ht.DismissedActionBanners),e=Uo(ht.DismissedActionBanners),o=vt();return(0,qi.useCallback)(r=>{e([...t,r]),o.setQueriesData({queryKey:[Me]},i=>{if(!i)return;let s=i.banners.filter(a=>a.id!==r);return{...i,banners:s}})},[t,e,o])},"useDismissActionBanner");c();u();c();u();var Tc=x(C());c();u();var sh=R({seconds:20}),ah=R({seconds:5});var gh=R({minutes:5});c();u();var ji=n(async t=>{await t.invalidateQueries({queryKey:[Me]})},"invalidateActionBanners");jn(ji);var zi=n(t=>t,"coerceStorageKey"),Uh=n(t=>Se(zi(t)),"useInterstitialStorage"),Bh=n(t=>Uo(zi(t)),"useSetInterstitialStorage");c();u();c();u();var Vr=class{static{n(this,"ActionBannerAnalytics")}#t;constructor(e){this.#t=e}onBannerSeen=n(e=>{this.#t.capture("actionBannerSeenByUser",{data:{banner:e}})},"onBannerSeen");onBannerClick=n(e=>{this.#t.capture("actionBannerClickedByUser",{data:{banner:e}})},"onBannerClick");onBannerDismiss=n(e=>{this.#t.capture("actionBannerDismissedByUser",{data:{banner:e}})},"onBannerDismiss");onInterstitialSeen=n(e=>{this.#t.capture("actionBannerInterstitialSeenByUser",{data:{banner:e}})},"onInterstitialSeen");onInterstitialPrimaryClick=n(e=>{this.#t.capture("actionBannerInterstitialPrimaryButtonClickedByUser",{data:{banner:e}})},"onInterstitialPrimaryClick");onInterstitialSecondaryClick=n(e=>{this.#t.capture("actionBannerInterstitialSecondaryButtonClickedByUser",{data:{banner:e}})},"onInterstitialSecondaryClick");onInterstitialDismiss=n(e=>{this.#t.capture("actionBannerInterstitialDismissedByUser",{data:{banner:e}})},"onInterstitialDismiss")};c();u();var bc=n(({id:t,humanReadableId:e,description:o,bannerType:r})=>({id:t,humanReadableId:e,description:o,type:r}),"generateActionBannerBaseAnalyticsPayload"),vc=n(({id:t,humanReadableId:e,description:o,bannerType:r,interstitial:i})=>{let{title:s,primaryButtonText:a,secondaryButtonText:l}=i,d;if(r===Et.Modal)for(let[m,f]of Object.values(i.lineItems).entries())d={...d??{},[`lineItem${m+1}`]:{title:f.title,description:f.description}};return{id:t,humanReadableId:e,description:o,type:r,interstitial:{title:s,body:d,primaryButtonText:a??v.t("commandContinue"),secondaryButtonText:l??v.t("commandDismiss")}}},"generateActionBannerInterstitialAnalyticsPayload");c();u();c();u();function Ho(t,e,o,r){function i(s){return s instanceof o?s:new o(function(a){a(s)})}return n(i,"adopt"),new(o||(o=Promise))(function(s,a){function l(f){try{m(r.next(f))}catch(p){a(p)}}n(l,"fulfilled");function d(f){try{m(r.throw(f))}catch(p){a(p)}}n(d,"rejected");function m(f){f.done?s(f.value):i(f.value).then(l,d)}n(m,"step"),m((r=r.apply(t,e||[])).next())})}n(Ho,"__awaiter");var xc="ENTRIES",Yi="KEYS",Ji="VALUES",rt="",$e=class{static{n(this,"TreeIterator")}constructor(e,o){let r=e._tree,i=Array.from(r.keys());this.set=e,this._type=o,this._path=i.length>0?[{node:r,keys:i}]:[]}next(){let e=this.dive();return this.backtrack(),e}dive(){if(this._path.length===0)return{done:!0,value:void 0};let{node:e,keys:o}=De(this._path);if(De(o)===rt)return{done:!1,value:this.result()};let r=e.get(De(o));return this._path.push({node:r,keys:Array.from(r.keys())}),this.dive()}backtrack(){if(this._path.length===0)return;let e=De(this._path).keys;e.pop(),!(e.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:e})=>De(e)).filter(e=>e!==rt).join("")}value(){return De(this._path).node.get(rt)}result(){switch(this._type){case Ji:return this.value();case Yi:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}},De=n(t=>t[t.length-1],"last$1"),Ic=n((t,e,o)=>{let r=new Map;if(e===void 0)return r;let i=e.length+1,s=i+o,a=new Uint8Array(s*i).fill(o+1);for(let l=0;l<i;++l)a[l]=l;for(let l=1;l<s;++l)a[l*i]=l;return Xi(t,e,o,r,a,1,i,""),r},"fuzzySearch"),Xi=n((t,e,o,r,i,s,a,l)=>{let d=s*a;t:for(let m of t.keys())if(m===rt){let f=i[d-1];f<=o&&r.set(l,[t.get(m),f])}else{let f=s;for(let p=0;p<m.length;++p,++f){let g=m[p],S=a*f,k=S-a,y=i[S],w=Math.max(0,f-o-1),b=Math.min(a-1,f+o);for(let E=w;E<b;++E){let M=g!==e[E],B=i[k+E]+ +M,H=i[k+E+1]+1,W=i[S+E]+1,G=i[S+E+1]=Math.min(B,H,W);G<y&&(y=G)}if(y>o)continue t}Xi(t.get(m),e,o,r,i,f,a,l+m)}},"recurse"),Ye=class t{static{n(this,"SearchableMap")}constructor(e=new Map,o=""){this._size=void 0,this._tree=e,this._prefix=o}atPrefix(e){if(!e.startsWith(this._prefix))throw new Error("Mismatched prefix");let[o,r]=Go(this._tree,e.slice(this._prefix.length));if(o===void 0){let[i,s]=Qr(r);for(let a of i.keys())if(a!==rt&&a.startsWith(s)){let l=new Map;return l.set(a.slice(s.length),i.get(a)),new t(l,e)}}return new t(o,e)}clear(){this._size=void 0,this._tree.clear()}delete(e){return this._size=void 0,Pc(this._tree,e)}entries(){return new $e(this,xc)}forEach(e){for(let[o,r]of this)e(o,r,this)}fuzzyGet(e,o){return Ic(this._tree,e,o)}get(e){let o=zr(this._tree,e);return o!==void 0?o.get(rt):void 0}has(e){let o=zr(this._tree,e);return o!==void 0&&o.has(rt)}keys(){return new $e(this,Yi)}set(e,o){if(typeof e!="string")throw new Error("key must be a string");return this._size=void 0,Kr(this._tree,e).set(rt,o),this}get size(){if(this._size)return this._size;this._size=0;let e=this.entries();for(;!e.next().done;)this._size+=1;return this._size}update(e,o){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;let r=Kr(this._tree,e);return r.set(rt,o(r.get(rt))),this}fetch(e,o){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;let r=Kr(this._tree,e),i=r.get(rt);return i===void 0&&r.set(rt,i=o()),i}values(){return new $e(this,Ji)}[Symbol.iterator](){return this.entries()}static from(e){let o=new t;for(let[r,i]of e)o.set(r,i);return o}static fromObject(e){return t.from(Object.entries(e))}},Go=n((t,e,o=[])=>{if(e.length===0||t==null)return[t,o];for(let r of t.keys())if(r!==rt&&e.startsWith(r))return o.push([t,r]),Go(t.get(r),e.slice(r.length),o);return o.push([t,e]),Go(void 0,"",o)},"trackDown"),zr=n((t,e)=>{if(e.length===0||t==null)return t;for(let o of t.keys())if(o!==rt&&e.startsWith(o))return zr(t.get(o),e.slice(o.length))},"lookup"),Kr=n((t,e)=>{let o=e.length;t:for(let r=0;t&&r<o;){for(let s of t.keys())if(s!==rt&&e[r]===s[0]){let a=Math.min(o-r,s.length),l=1;for(;l<a&&e[r+l]===s[l];)++l;let d=t.get(s);if(l===s.length)t=d;else{let m=new Map;m.set(s.slice(l),d),t.set(e.slice(r,r+l),m),t.delete(s),t=m}r+=l;continue t}let i=new Map;return t.set(e.slice(r),i),i}return t},"createPath"),Pc=n((t,e)=>{let[o,r]=Go(t,e);if(o!==void 0){if(o.delete(rt),o.size===0)Zi(r);else if(o.size===1){let[i,s]=o.entries().next().value;ts(r,i,s)}}},"remove"),Zi=n(t=>{if(t.length===0)return;let[e,o]=Qr(t);if(e.delete(o),e.size===0)Zi(t.slice(0,-1));else if(e.size===1){let[r,i]=e.entries().next().value;r!==rt&&ts(t.slice(0,-1),r,i)}},"cleanup"),ts=n((t,e,o)=>{if(t.length===0)return;let[r,i]=Qr(t);r.set(i+e,o),r.delete(i)},"merge"),Qr=n(t=>t[t.length-1],"last"),$r="or",es="and",Ec="and_not",Je=class t{static{n(this,"MiniSearch")}constructor(e){if(e?.fields==null)throw new Error('MiniSearch: option "fields" must be provided');let o=e.autoVacuum==null||e.autoVacuum===!0?jr:e.autoVacuum;this._options=Object.assign(Object.assign(Object.assign({},qr),e),{autoVacuum:o,searchOptions:Object.assign(Object.assign({},Hi),e.searchOptions||{}),autoSuggestOptions:Object.assign(Object.assign({},Oc),e.autoSuggestOptions||{})}),this._index=new Ye,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=Gr,this.addFields(this._options.fields)}add(e){let{extractField:o,tokenize:r,processTerm:i,fields:s,idField:a}=this._options,l=o(e,a);if(l==null)throw new Error(`MiniSearch: document does not have ID field "${a}"`);if(this._idToShortId.has(l))throw new Error(`MiniSearch: duplicate ID ${l}`);let d=this.addDocumentId(l);this.saveStoredFields(d,e);for(let m of s){let f=o(e,m);if(f==null)continue;let p=r(f.toString(),m),g=this._fieldIds[m],S=new Set(p).size;this.addFieldLength(d,g,this._documentCount-1,S);for(let k of p){let y=i(k,m);if(Array.isArray(y))for(let w of y)this.addTerm(g,d,w);else y&&this.addTerm(g,d,y)}}}addAll(e){for(let o of e)this.add(o)}addAllAsync(e,o={}){let{chunkSize:r=10}=o,i={chunk:[],promise:Promise.resolve()},{chunk:s,promise:a}=e.reduce(({chunk:l,promise:d},m,f)=>(l.push(m),(f+1)%r===0?{chunk:[],promise:d.then(()=>new Promise(p=>setTimeout(p,0))).then(()=>this.addAll(l))}:{chunk:l,promise:d}),i);return a.then(()=>this.addAll(s))}remove(e){let{tokenize:o,processTerm:r,extractField:i,fields:s,idField:a}=this._options,l=i(e,a);if(l==null)throw new Error(`MiniSearch: document does not have ID field "${a}"`);let d=this._idToShortId.get(l);if(d==null)throw new Error(`MiniSearch: cannot remove document with ID ${l}: it is not in the index`);for(let m of s){let f=i(e,m);if(f==null)continue;let p=o(f.toString(),m),g=this._fieldIds[m],S=new Set(p).size;this.removeFieldLength(d,g,this._documentCount,S);for(let k of p){let y=r(k,m);if(Array.isArray(y))for(let w of y)this.removeTerm(g,d,w);else y&&this.removeTerm(g,d,y)}}this._storedFields.delete(d),this._documentIds.delete(d),this._idToShortId.delete(l),this._fieldLength.delete(d),this._documentCount-=1}removeAll(e){if(e)for(let o of e)this.remove(o);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new Ye,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(e){let o=this._idToShortId.get(e);if(o==null)throw new Error(`MiniSearch: cannot discard document with ID ${e}: it is not in the index`);this._idToShortId.delete(e),this._documentIds.delete(o),this._storedFields.delete(o),(this._fieldLength.get(o)||[]).forEach((r,i)=>{this.removeFieldLength(o,i,this._documentCount,r)}),this._fieldLength.delete(o),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(this._options.autoVacuum===!1)return;let{minDirtFactor:e,minDirtCount:o,batchSize:r,batchWait:i}=this._options.autoVacuum;this.conditionalVacuum({batchSize:r,batchWait:i},{minDirtCount:o,minDirtFactor:e})}discardAll(e){let o=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(let r of e)this.discard(r)}finally{this._options.autoVacuum=o}this.maybeAutoVacuum()}replace(e){let{idField:o,extractField:r}=this._options,i=r(e,o);this.discard(i),this.add(e)}vacuum(e={}){return this.conditionalVacuum(e)}conditionalVacuum(e,o){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&o,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(()=>{let r=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=Gr,this.performVacuuming(e,r)}),this._enqueuedVacuum)):this.vacuumConditionsMet(o)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(e),this._currentVacuum)}performVacuuming(e,o){return Ho(this,void 0,void 0,function*(){let r=this._dirtCount;if(this.vacuumConditionsMet(o)){let i=e.batchSize||Hr.batchSize,s=e.batchWait||Hr.batchWait,a=1;for(let[l,d]of this._index){for(let[m,f]of d)for(let[p]of f)this._documentIds.has(p)||(f.size<=1?d.delete(m):f.delete(p));this._index.get(l).size===0&&this._index.delete(l),a%i===0&&(yield new Promise(m=>setTimeout(m,s))),a+=1}this._dirtCount-=r}yield null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null})}vacuumConditionsMet(e){if(e==null)return!0;let{minDirtCount:o,minDirtFactor:r}=e;return o=o||jr.minDirtCount,r=r||jr.minDirtFactor,this.dirtCount>=o&&this.dirtFactor>=r}get isVacuuming(){return this._currentVacuum!=null}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(e){return this._idToShortId.has(e)}getStoredFields(e){let o=this._idToShortId.get(e);if(o!=null)return this._storedFields.get(o)}search(e,o={}){let{searchOptions:r}=this._options,i=Object.assign(Object.assign({},r),o),s=this.executeQuery(e,o),a=[];for(let[l,{score:d,terms:m,match:f}]of s){let p=m.length||1,g={id:this._documentIds.get(l),score:d*p,terms:Object.keys(f),queryTerms:m,match:f};Object.assign(g,this._storedFields.get(l)),(i.filter==null||i.filter(g))&&a.push(g)}return e===t.wildcard&&i.boostDocument==null||a.sort(Qi),a}autoSuggest(e,o={}){o=Object.assign(Object.assign({},this._options.autoSuggestOptions),o);let r=new Map;for(let{score:s,terms:a}of this.search(e,o)){let l=a.join(" "),d=r.get(l);d!=null?(d.score+=s,d.count+=1):r.set(l,{score:s,terms:a,count:1})}let i=[];for(let[s,{score:a,terms:l,count:d}]of r)i.push({suggestion:s,terms:l,score:a/d});return i.sort(Qi),i}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(e,o){if(o==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(e),o)}static loadJSONAsync(e,o){return Ho(this,void 0,void 0,function*(){if(o==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(e),o)})}static getDefault(e){if(qr.hasOwnProperty(e))return Wr(qr,e);throw new Error(`MiniSearch: unknown option "${e}"`)}static loadJS(e,o){let{index:r,documentIds:i,fieldLength:s,storedFields:a,serializationVersion:l}=e,d=this.instantiateMiniSearch(e,o);d._documentIds=jo(i),d._fieldLength=jo(s),d._storedFields=jo(a);for(let[m,f]of d._documentIds)d._idToShortId.set(f,m);for(let[m,f]of r){let p=new Map;for(let g of Object.keys(f)){let S=f[g];l===1&&(S=S.ds),p.set(parseInt(g,10),jo(S))}d._index.set(m,p)}return d}static loadJSAsync(e,o){return Ho(this,void 0,void 0,function*(){let{index:r,documentIds:i,fieldLength:s,storedFields:a,serializationVersion:l}=e,d=this.instantiateMiniSearch(e,o);d._documentIds=yield zo(i),d._fieldLength=yield zo(s),d._storedFields=yield zo(a);for(let[f,p]of d._documentIds)d._idToShortId.set(p,f);let m=0;for(let[f,p]of r){let g=new Map;for(let S of Object.keys(p)){let k=p[S];l===1&&(k=k.ds),g.set(parseInt(S,10),yield zo(k))}++m%1e3===0&&(yield os(0)),d._index.set(f,g)}return d})}static instantiateMiniSearch(e,o){let{documentCount:r,nextId:i,fieldIds:s,averageFieldLength:a,dirtCount:l,serializationVersion:d}=e;if(d!==1&&d!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");let m=new t(o);return m._documentCount=r,m._nextId=i,m._idToShortId=new Map,m._fieldIds=s,m._avgFieldLength=a,m._dirtCount=l||0,m._index=new Ye,m}executeQuery(e,o={}){if(e===t.wildcard)return this.executeWildcardQuery(o);if(typeof e!="string"){let g=Object.assign(Object.assign(Object.assign({},o),e),{queries:void 0}),S=e.queries.map(k=>this.executeQuery(k,g));return this.combineResults(S,g.combineWith)}let{tokenize:r,processTerm:i,searchOptions:s}=this._options,a=Object.assign(Object.assign({tokenize:r,processTerm:i},s),o),{tokenize:l,processTerm:d}=a,p=l(e).flatMap(g=>d(g)).filter(g=>!!g).map(Mc(a)).map(g=>this.executeQuerySpec(g,a));return this.combineResults(p,a.combineWith)}executeQuerySpec(e,o){let r=Object.assign(Object.assign({},this._options.searchOptions),o),i=(r.fields||this._options.fields).reduce((y,w)=>Object.assign(Object.assign({},y),{[w]:Wr(r.boost,w)||1}),{}),{boostDocument:s,weights:a,maxFuzzy:l,bm25:d}=r,{fuzzy:m,prefix:f}=Object.assign(Object.assign({},Hi.weights),a),p=this._index.get(e.term),g=this.termResults(e.term,e.term,1,e.termBoost,p,i,s,d),S,k;if(e.prefix&&(S=this._index.atPrefix(e.term)),e.fuzzy){let y=e.fuzzy===!0?.2:e.fuzzy,w=y<1?Math.min(l,Math.round(e.term.length*y)):y;w&&(k=this._index.fuzzyGet(e.term,w))}if(S)for(let[y,w]of S){let b=y.length-e.term.length;if(!b)continue;k?.delete(y);let E=f*y.length/(y.length+.3*b);this.termResults(e.term,y,E,e.termBoost,w,i,s,d,g)}if(k)for(let y of k.keys()){let[w,b]=k.get(y);if(!b)continue;let E=m*y.length/(y.length+b);this.termResults(e.term,y,E,e.termBoost,w,i,s,d,g)}return g}executeWildcardQuery(e){let o=new Map,r=Object.assign(Object.assign({},this._options.searchOptions),e);for(let[i,s]of this._documentIds){let a=r.boostDocument?r.boostDocument(s,"",this._storedFields.get(i)):1;o.set(i,{score:a,terms:[],match:{}})}return o}combineResults(e,o=$r){if(e.length===0)return new Map;let r=o.toLowerCase(),i=_c[r];if(!i)throw new Error(`Invalid combination operator: ${o}`);return e.reduce(i)||new Map}toJSON(){let e=[];for(let[o,r]of this._index){let i={};for(let[s,a]of r)i[s]=Object.fromEntries(a);e.push([o,i])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:e,serializationVersion:2}}termResults(e,o,r,i,s,a,l,d,m=new Map){if(s==null)return m;for(let f of Object.keys(a)){let p=a[f],g=this._fieldIds[f],S=s.get(g);if(S==null)continue;let k=S.size,y=this._avgFieldLength[g];for(let w of S.keys()){if(!this._documentIds.has(w)){this.removeTerm(g,w,o),k-=1;continue}let b=l?l(this._documentIds.get(w),o,this._storedFields.get(w)):1;if(!b)continue;let E=S.get(w),M=this._fieldLength.get(w)[g],B=Lc(E,k,this._documentCount,M,y,d),H=r*i*p*b*B,W=m.get(w);if(W){W.score+=H,Fc(W.terms,e);let G=Wr(W.match,o);G?G.push(f):W.match[o]=[f]}else m.set(w,{score:H,terms:[e],match:{[o]:[f]}})}}return m}addTerm(e,o,r){let i=this._index.fetch(r,$i),s=i.get(e);if(s==null)s=new Map,s.set(o,1),i.set(e,s);else{let a=s.get(o);s.set(o,(a||0)+1)}}removeTerm(e,o,r){if(!this._index.has(r)){this.warnDocumentChanged(o,e,r);return}let i=this._index.fetch(r,$i),s=i.get(e);s==null||s.get(o)==null?this.warnDocumentChanged(o,e,r):s.get(o)<=1?s.size<=1?i.delete(e):s.delete(o):s.set(o,s.get(o)-1),this._index.get(r).size===0&&this._index.delete(r)}warnDocumentChanged(e,o,r){for(let i of Object.keys(this._fieldIds))if(this._fieldIds[i]===o){this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(e)} has changed before removal: term "${r}" was not present in field "${i}". Removing a document after it has changed can corrupt the index!`,"version_conflict");return}}addDocumentId(e){let o=this._nextId;return this._idToShortId.set(e,o),this._documentIds.set(o,e),this._documentCount+=1,this._nextId+=1,o}addFields(e){for(let o=0;o<e.length;o++)this._fieldIds[e[o]]=o}addFieldLength(e,o,r,i){let s=this._fieldLength.get(e);s==null&&this._fieldLength.set(e,s=[]),s[o]=i;let l=(this._avgFieldLength[o]||0)*r+i;this._avgFieldLength[o]=l/(r+1)}removeFieldLength(e,o,r,i){if(r===1){this._avgFieldLength[o]=0;return}let s=this._avgFieldLength[o]*r-i;this._avgFieldLength[o]=s/(r-1)}saveStoredFields(e,o){let{storeFields:r,extractField:i}=this._options;if(r==null||r.length===0)return;let s=this._storedFields.get(e);s==null&&this._storedFields.set(e,s={});for(let a of r){let l=i(o,a);l!==void 0&&(s[a]=l)}}};Je.wildcard=Symbol("*");var Wr=n((t,e)=>Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0,"getOwnProperty"),_c={[$r]:(t,e)=>{for(let o of e.keys()){let r=t.get(o);if(r==null)t.set(o,e.get(o));else{let{score:i,terms:s,match:a}=e.get(o);r.score=r.score+i,r.match=Object.assign(r.match,a),Gi(r.terms,s)}}return t},[es]:(t,e)=>{let o=new Map;for(let r of e.keys()){let i=t.get(r);if(i==null)continue;let{score:s,terms:a,match:l}=e.get(r);Gi(i.terms,a),o.set(r,{score:i.score+s,terms:i.terms,match:Object.assign(i.match,l)})}return o},[Ec]:(t,e)=>{for(let o of e.keys())t.delete(o);return t}},Cc={k:1.2,b:.7,d:.5},Lc=n((t,e,o,r,i,s)=>{let{k:a,b:l,d}=s;return Math.log(1+(o-e+.5)/(e+.5))*(d+t*(a+1)/(t+a*(1-l+l*r/i)))},"calcBM25Score"),Mc=n(t=>(e,o,r)=>{let i=typeof t.fuzzy=="function"?t.fuzzy(e,o,r):t.fuzzy||!1,s=typeof t.prefix=="function"?t.prefix(e,o,r):t.prefix===!0,a=typeof t.boostTerm=="function"?t.boostTerm(e,o,r):1;return{term:e,fuzzy:i,prefix:s,termBoost:a}},"termToQuerySpec"),qr={idField:"id",extractField:n((t,e)=>t[e],"extractField"),tokenize:n(t=>t.split(Nc),"tokenize"),processTerm:n(t=>t.toLowerCase(),"processTerm"),fields:void 0,searchOptions:void 0,storeFields:[],logger:n((t,e)=>{typeof console?.[t]=="function"&&console[t](e)},"logger"),autoVacuum:!0},Hi={combineWith:$r,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:Cc},Oc={combineWith:es,prefix:n((t,e,o)=>e===o.length-1,"prefix")},Hr={batchSize:1e3,batchWait:10},Gr={minDirtFactor:.1,minDirtCount:20},jr=Object.assign(Object.assign({},Hr),Gr),Fc=n((t,e)=>{t.includes(e)||t.push(e)},"assignUniqueTerm"),Gi=n((t,e)=>{for(let o of e)t.includes(o)||t.push(o)},"assignUniqueTerms"),Qi=n(({score:t},{score:e})=>e-t,"byScore"),$i=n(()=>new Map,"createMap"),jo=n(t=>{let e=new Map;for(let o of Object.keys(t))e.set(parseInt(o,10),t[o]);return e},"objectToNumericMap"),zo=n(t=>Ho(void 0,void 0,void 0,function*(){let e=new Map,o=0;for(let r of Object.keys(t))e.set(parseInt(r,10),t[r]),++o%1e3===0&&(yield os(0));return e}),"objectToNumericMapAsync"),os=n(t=>new Promise(e=>setTimeout(e,t)),"wait"),Nc=/[\n\r\p{Z}\p{P}]+/u;var Xe=x(C(),1);var OS=n((t,e,o,r=!1)=>{let i=(0,Xe.useMemo)(()=>r?null:new ki(t,o),[t,o,r]);return(0,Xe.useMemo)(()=>r||!i?t:e?i.search(e).map(s=>s.item):t,[i,t,e,r])},"useFuse"),FS=n((t,e,o,r=!1)=>{let i=(0,Xe.useMemo)(()=>{if(r)return null;let s=new Je(o);return s.addAll(t),s},[t,o,r]);return(0,Xe.useMemo)(()=>r||!i?t:e?i.search(e).map(s=>s):t,[i,t,e,r])},"useMiniSearch");c();u();var ke=n((t,e)=>{let o=e?.format??"0,0.00%";return`${(e?.includePlusPrefix??!1)&&t>0?"+":""}${(0,fi.default)(t).format(t===0?"0%":o)}`},"formatPercentage");c();u();c();u();var Qo=x(Qa(),1);var ns=x(En(),1);var rs=(0,Qo.struct)([(0,Qo.u8)("instruction"),ti("amount")]);function Yr(t,e,o,r,i=[],s=Le){let a=oi([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1}],o,i),l=Buffer.alloc(rs.span);return rs.encode({instruction:ei.Approve,amount:BigInt(r)},l),new ns.TransactionInstruction({keys:a,programId:s,data:l})}n(Yr,"createApproveInstruction");var is=new A.PublicKey("Config1111111111111111111111111111111111111"),Dc="https://docs.solana.com/staking",Uc="https://help.phantom.com/hc/en-us/articles/4406379756307-Why-is-my-stake-still-activating-or-deactivating";var St={type:ze.SolanaNative,data:{amount:"0",balance:new X(0),chain:{id:N.solana.mainnetID,imageUrl:N.solana.iconUrl,name:N.solana.name,symbol:N.solana.tokenSymbol},decimals:9,key:"SolanaNative",logoUri:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",name:"Solana",symbol:"SOL",tokenAddress:void 0,walletAddress:"",spamStatus:si.NotVerified}},ss=new Map([[bt.Solana.Mainnet,St]]);var Jr="https://www.jito.network/staking/?mode=unstake",Xr="https://help.phantom.com/hc/en-us/articles/29846774040467",Bc="https://www.jito.network/blog/reward-bearing-vs-rebasing-solana-liquid-staking-tokens/",Zr="https://help.phantom.com/hc/en-us/articles/41210373532307";var tn="https://kamino.com/borrow/reserve/7u3HeHxYDLhnCoErrtycNokbQYbWGzLs6JSDqGAv5PfF/HV9KsS5mB4b9CFhDJVKdfxWBAomYfUk5PeUsdgMQsUrB",se="solana:101/address:J1toso1uCk3RLmjorhTtrVwY9HJ7X8V9yYac6Y7kGCPn",$o=4e6,Ze=2282880;c();u();var Ue;(function(t){t.Initialized="initialized",t.Delegated="delegated"})(Ue||(Ue={}));var to=T.object({apy:T.number()}),Rc=T.object({validators:T.array(T.string())}),as=T.object({epoch:T.number(),effectiveSlot:T.number(),amount:T.number(),postBalance:T.number(),percentChange:T.number(),apr:T.number(),timestamp:T.number()}),Vc=T.object({items:T.array(as)}),Kc=T.object({address:T.string(),chainId:_r,decimals:T.number(),logoURI:T.string(),name:T.string(),symbol:T.string()}),Wc=T.object({caip19:T.string(),metadata:Kc}),qc=T.object({vote_account:T.string()}),jc=T.object({apy:T.string(),totalRewardsFeePercentage:T.string().optional(),chainId:_r,convertRatio:T.string(),name:T.string(),stakePoolAddress:T.string(),stakePoolTokenMetadata:Wc,validators:T.array(qc)}),cs=T.record(T.string(),T.array(jc)),cg=T.object({totalStaked:T.string(),rewards:T.string()}),eo=n(t=>t==="inactive","canWithdrawStakeAccount"),oo=n(t=>t==="active"||t==="activating","canUnstakeStakeAccount");c();u();function Yo(t,e){let o=new q(t/100),r=new q(e/100);return o.minus(o.times(r)).times(100).decimalPlaces(2).toNumber()}n(Yo,"calculateTotalValidatorAPY");function us(t){return new q(t/100).times(100).decimalPlaces(2).toNumber()}n(us,"formatTotalValidatorAPY");c();u();c();u();c();u();var tt="staking",Ft;(function(t){t.convertStakeList="convertStakeAccountList",t.supportedTokens="liquidStakingSupportedTokens",t.convertStakeTransaction="convertStakeTransaction",t.mintTokenTransaction="mintTokenTransaction",t.withdrawLiquidStakeTransaction="withdrawLiquidStakeTransaction",t.featureUsed="featureUsed"})(Ft||(Ft={}));var en=[tt,"stakeAccounts"],on=[tt,"stakeActivationData"],rn=[tt,Ft.convertStakeList],nn=[tt,Ft.convertStakeTransaction],sn=[tt,Ft.mintTokenTransaction],zc=[tt,Ft.withdrawLiquidStakeTransaction],Hc=[tt,"deactivateStakeTransaction"],an="averageValidatorApy",Gc="recommendedValidators",Qc="signatureStatus",$c="stakeAccountMinBalance",Yc="stakeRewardsHistory",Jc="stakeApy",Xc="validatorInfo",Zc="voteAccounts",tu="validatorsV2",eu="keybaseUserAvatar",ou="epochTimeRemaining",F={keybaseUserAvatar(t){return[tt,eu,t]},signatureStatus(t){return[tt,Qc,t]},stakeAccounts(t,e){return[...en,t,e]},stakeAccountMinBalance(){return[tt,$c]},stakeActivationData(t){return[...on,t]},stakeRewardsHistory(t){return[tt,Yc,t]},stakeApy(){return[tt,Jc]},averageValidatorApy(){return[tt,an]},recommendedValidators(){return[tt,Gc]},validatorInfo(){return[tt,Xc]},voteAccounts(t){return[tt,Zc,t]},validatorsV2(){return[tt,tu]},convertStakeAccountList(t,e){return[...rn,t,e]},liquidStakingSupportedTokens(){return[tt,Ft.supportedTokens]},getConvertStakeTransaction(t){return[...nn,t]},getMintTokenTransaction(t){return[...sn,t]},getWithdrawLiquidStakeTransaction(t){return[...zc,t]},featureUsed(){return[tt,Ft.featureUsed]},epochTimeRemaining(t){return[tt,ou,t]},getDeactivateStakeTransaction(t){return[...Hc,t]}};var ro=n(t=>()=>{t.invalidateQueries({predicate:n(e=>{let o=n(r=>r.every((i,s)=>e.queryKey[s]===i),"matchesEveryKeyScope");return o(en)||o(on)||o(rn)||o(nn)||o(sn)},"predicate")})},"invalidateAllStakeAccountData");c();u();function Jo(t,e=9){return t.match(new RegExp(`^\\d*(\\.\\d{0,${e}})?$`))}n(Jo,"validateDecimals");c();u();var ls={type:"fungible",isNativeOfType:"sol",chain:pt.Solana,name:"Solana",symbol:"SOL",iconUrl:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",decimals:9},ru="stake",ds=n(t=>new cn(t,ru),"createStakeAnalytics"),cn=class extends _e{static{n(this,"StakeAnalytics")}createStakeAccountAndDelegateStake=n(e=>{this.analytics.capture("createStakeAccountAndDelegateStake",{data:{...e,...ls}})},"createStakeAccountAndDelegateStake");deactivateStake=n(()=>{this.analytics.capture("deactivateStake",{data:{...ls}})},"deactivateStake")};var un=Jn(qt,t=>ds(t));c();u();var bs=x(C());c();u();var ms=new Error("Failed to fetch validators from API"),nu=new Error("Missing validators in response"),iu=T.object({validators:T.array(T.object({identityPubkey:T.string(),voteAccountPubkey:T.string(),commission:T.number(),lastVote:T.number(),epochCredits:T.array(T.tuple([T.number(),T.number(),T.number()])).nullish().transform(t=>t??[]),activatedStake:T.number(),info:T.object({details:T.string().optional(),keybaseUsername:T.string().optional(),name:T.string(),website:T.string().optional(),iconUrl:T.string().nullish().transform(t=>t??"")}).optional(),totalApy:T.number()}))});async function ps(){try{let t=await mt.api().get("/staking/v1/validators");if(!Wt(t))throw ms;let e=iu.safeParse(t.data);if(!e.success)throw console.error("Failed to parse validators from API",e.error),nu;return e.data.validators}catch(t){throw console.error("Failed to fetch validators from API",t),ms}}n(ps,"getValidatorsFromAPI");c();u();var ae;(function(t){t[t.Always=1/0]="Always",t[t.Short=R({days:1})]="Short",t[t.Medium=R({days:3})]="Medium",t[t.Long=R({days:7})]="Long"})(ae||(ae={}));var K;(function(t){t[t.Immediate=0]="Immediate",t[t.Short=R({minutes:1})]="Short",t[t.Medium=R({minutes:2.5})]="Medium",t[t.Long=R({minutes:5})]="Long",t[t.Never=1/0]="Never"})(K||(K={}));c();u();var Xo=x(C());c();u();var hs=n((t,e)=>t+e[1],"calcReturns");function Ss(t){let e=su(t),o={commissionWeight:.6,epochCreditsWeight:.1,activatedStakeWeight:.3},r=cu(e.maxEpochCredits,e.maxActivatedStake,o);return t.sort(r)}n(Ss,"sortVoteAccounts");function su(t){let e={maxEpochCredits:0,maxActivatedStake:0};for(let o of t){let r=o.epochCredits.reduce(hs,0);e.maxEpochCredits<r&&(e.maxEpochCredits=r),e.maxActivatedStake<o.activatedStake&&(e.maxActivatedStake=o.activatedStake)}return e}n(su,"findMaxValues");function au(t,e,o,r,i){let s=(100-t)/100,a=e/o,l=Math.log10(r+1)/Math.log10(i+1);return{normalizedCommission:s,normalizedEpochCredits:a,normalizedActivatedStake:l}}n(au,"calculateNormalizedValues");function fs(t,e,o,r){let{commission:i,epochCredits:s,activatedStake:a}=t,{commissionWeight:l,epochCreditsWeight:d,activatedStakeWeight:m}=r,{normalizedCommission:f,normalizedEpochCredits:p,normalizedActivatedStake:g}=au(i,s.reduce(hs,0),e,a,o);return(i>10?.5:1)*(l*f+d*p+m*g)}n(fs,"calculateScore");function cu(t,e,o){return(r,i)=>{let s=fs(r,t,e,o);return fs(i,t,e,o)-s}}n(cu,"createVoteAccountSorter");c();u();c();u();var gs=new Error("Failed to fetch staking APY");async function ys(){try{let t=await mt.api().get("/staking/v1/apy");if(!Wt(t))throw gs;let e=t.data;return to.parse(e).apy}catch{throw gs}}n(ys,"getStakingApy");var ks=n(()=>{let t=F.stakeApy();return L({enabled:!0,queryKey:t,gcTime:ae.Short,staleTime:K.Never,async queryFn(){return ys()}})},"useStakeApy");c();u();var uu=n(t=>async()=>(await t.getParsedProgramAccounts(is)).reduce((o,r)=>{if(r.account.data.parsed?.type!=="validatorInfo")return o;let i=r.pubkey.toString(),s=r.account.data.parsed.info.keys,[,a]=s;if(!a.signer)return o;let l=a.pubkey,d=r.account.data.parsed.info.configData;return o.push({identityPubkey:l,infoPubkey:i,info:d}),o},[]),"fetchValidatorInfo");function As(t,e){let o=F.validatorInfo(),r=uu(t);return L({queryKey:o,queryFn:r,placeholderData:[],staleTime:K.Never,enabled:e})}n(As,"useValidatorInfo");c();u();var lu=n(async t=>{let e=await t.getVoteAccounts();return[...e.current,...e.delinquent].map(o=>({identityPubkey:o.nodePubkey,voteAccountPubkey:o.votePubkey,commission:o.commission,lastVote:o.lastVote,epochCredits:o.epochCredits,activatedStake:o.activatedStake})).filter(o=>o.commission<99)},"fetchVoteAccounts");function ws(t,e){let o=F.voteAccounts(t.rpcEndpoint);return L({queryKey:o,queryFn:n(async()=>lu(t),"queryFn"),placeholderData:[],staleTime:K.Never,enabled:e})}n(ws,"useVoteAccounts");function Ts(t,e){let{isFetched:o,isFetching:r,isSuccess:i,isError:s,isPending:a,dataUpdatedAt:l,errorUpdatedAt:d,error:m,refetch:f,data:p}=ws(t,e),g=Math.max(l,d),{data:S=null}=ks(),{isFetched:k,isFetching:y,isSuccess:w,isPending:b,isError:E,dataUpdatedAt:M,errorUpdatedAt:B,error:H,refetch:W,data:G}=As(t,e),O=Math.max(M,B),nt=a||b,at=Math.max(g,O),ot=o&&k,it=r||y,Ct=i||w,Kt=s||E,Xt=m||H,Zt=(0,Xo.useCallback)(async()=>{Promise.all([f(),W()])},[W,f]);return{results:(0,Xo.useMemo)(()=>{if(!p)return[];if(!G)return[];let ee=Ss(p),oe=new Map(ee.map(V=>[V.identityPubkey,V])),et=new Map(G.map(V=>[V.identityPubkey,V])),kt=[];for(let[V,Lt]of oe){let xe=et.get(V);kt.push({...Lt,...xe,totalApy:S?Yo(S,Lt.commission):0})}return kt},[G,p,S]),dataUpdatedAt:at,error:Xt,isSuccess:Ct,isError:Kt,isFetched:ot,isFetching:it,isPending:nt,refetch:Zt}}n(Ts,"useValidators");function du(t){let e=F.validatorsV2(),o=L({enabled:t,queryKey:e,gcTime:ae.Short,staleTime:K.Long,async queryFn(){return ps()}});return{results:(0,bs.useMemo)(()=>{let i=o.data??[];return i.sort((s,a)=>a.totalApy-s.totalApy),i},[o.data]),dataUpdatedAt:o.dataUpdatedAt,error:o.error,isSuccess:o.isSuccess,isError:o.isError,isFetched:o.isFetched,isFetching:o.isFetching,isPending:o.isPending,refetch:n(async()=>{await o.refetch()},"refetch")}}n(du,"useValidatorsV2Inner");function no(){let{connection:t}=ft(),e=Wn("kill-validators-v2"),o=Ts(t,e),r=du(!e);return e?o:r}n(no,"useValidatorsV2");c();u();function ln(t){let e=!!t?.info.meta.lockup,o=new Date((t?.info.meta.lockup?.unixTimestamp??0)*1e3);return e&&o.getTime()>Date.now()}n(ln,"isLockedStakeAccount");c();u();var or=x(C());c();u();var Es=x(C());c();u();var mu="https://keybase.io/_/api/1.0/user/pic_url.json",Zo=n(async t=>{let e=await mt.get(`${mu}?username=${encodeURIComponent(t)}`);if(!Wt(e)||e.data.status?.code!==0)throw new Error("Couldn't fetch keybase user avatar");return e.data.pic_url},"getKeybaseUserAvatar");c();u();c();u();c();u();function tr(t,e){for(let o of e)if(o.epoch===t)return o;return null}n(tr,"getStakeHistoryEntry");var vs=.09;function pu(t,e,o){if(t.activationEpoch===t.deactivationEpoch)return{effective:BigInt(0),activating:BigInt(0)};if(e===t.activationEpoch)return{effective:BigInt(0),activating:t.stake};if(e<t.activationEpoch)return{effective:BigInt(0),activating:BigInt(0)};let r=t.activationEpoch,i=tr(r,o);if(i!==null){let s=BigInt(0);for(;i!==null;){r++;let a=t.stake-s,l=Number(a)/Number(i.activating),d=Number(i.effective)*vs,m=BigInt(Math.max(1,Math.round(l*d)));if(s+=m,s>=t.stake){s=t.stake;break}if(r>=e||r>=t.deactivationEpoch)break;i=tr(r,o)}return{effective:s,activating:t.stake-s}}else return{effective:t.stake,activating:BigInt(0)}}n(pu,"getStakeAndActivating");function xs(t,e,o){let{effective:r,activating:i}=pu(t,e,o);if(e<t.deactivationEpoch)return{effective:r,activating:i,deactivating:BigInt(0)};if(e==t.deactivationEpoch)return{effective:r,activating:BigInt(0),deactivating:r};let s=t.deactivationEpoch,a=tr(s,o);if(a!==null){let l=r;for(;a!==null&&(s++,a.deactivating!==BigInt(0));){let d=Number(l)/Number(a.deactivating),m=Number(a.effective)*vs,f=BigInt(Math.max(1,Math.round(d*m)));if(l-=f,l<=0){l=BigInt(0);break}if(s>=e)break;a=tr(s,o)}return{effective:l,deactivating:l,activating:BigInt(0)}}else return{effective:BigInt(0),activating:BigInt(0),deactivating:BigInt(0)}}n(xs,"getStakeActivatingAndDeactivating");c();u();var Is=n(function(t){if(t.value===null||t.value.data instanceof Buffer)throw new Error("Account not found");let e=[];return t.value.data.parsed.info.forEach(o=>{e.push({epoch:BigInt(o.epoch),effective:BigInt(o.stakeHistory.effective),activating:BigInt(o.stakeHistory.activating),deactivating:BigInt(o.stakeHistory.deactivating)})}),e},"getStakeHistory"),Ps=n(function(t){let e=BigInt(0);if(t.value===null||t.value.data instanceof Buffer)throw new Error("Account not found");return t.value.data.parsed.type==="delegated"&&(e=BigInt(1)),{discriminant:e,meta:{rentExemptReserve:BigInt(t.value.data.parsed.info.meta.rentExemptReserve),authorized:{staker:t.value.data.parsed.info.meta.authorized.staker,withdrawer:t.value.data.parsed.info.meta.authorized.withdrawer},lockup:{unixTimestamp:BigInt(t.value.data.parsed.info.meta.lockup.unixTimestamp),epoch:BigInt(t.value.data.parsed.info.meta.lockup.epoch),custodian:t.value.data.parsed.info.meta.lockup.custodian}},stake:{delegation:{voterPubkey:t.value.data.parsed.info.stake.delegation.voterPubkey,stake:BigInt(t.value.data.parsed.info.stake.delegation.stake),activationEpoch:BigInt(t.value.data.parsed.info.stake.delegation.activationEpoch),deactivationEpoch:BigInt(t.value.data.parsed.info.stake.delegation.deactivationEpoch)},creditsObserved:BigInt(t.value.data.parsed.info.stake.creditsObserved)}}},"getStakeAccount");async function io(t,e){let o=new A.PublicKey("SysvarStakeHistory1111111111111111111111111"),r=await t.getParsedAccountInfo(e);if(r===null||r.value===null)throw new Error("Account not found");let i=await t.getParsedAccountInfo(o);if(i===null)throw new Error("StakeHistory not found");let s=Is(i),a=await t.getEpochInfo(),l=Ps(r),{effective:d,activating:m,deactivating:f}=xs(l.stake.delegation,BigInt(a.epoch),s),p;f>0?p="deactivating":m>0?p="activating":d>0?p="active":p="inactive";let g=BigInt(r.value.lamports)-d-l.meta.rentExemptReserve;return{state:p,active:Number(d),inactive:Number(g)}}n(io,"getStakeActivation");var fu=n(t=>{let e=[];return t.ownerPublicKey&&e.push({memcmp:{offset:44,bytes:t.ownerPublicKey}}),t.voteAccountPublicKey&&e.push({dataSize:200},{memcmp:{offset:124,bytes:t.voteAccountPublicKey}}),e},"getStakeAccountFilters"),_s=n(async(t,e,o)=>{let r=fu(e),i=await t.getParsedProgramAccounts(A.StakeProgram.programId,{filters:r}),a=(await Promise.allSettled(i.map(m=>io(t,m.pubkey)))).map(m=>{if(m.status==="fulfilled")return m.value.state}),d=(await Promise.allSettled(i.map(m=>{let f=m.account.data?.parsed?.info?.stake?.delegation?.voter,p=o.get(f),g=p?.info?.keybaseUsername,S=p?.info?.iconUrl;return S?new Promise(k=>k(S)):g?Zo(g):new Promise(k=>k(null))}))).map(m=>{if(m.status==="fulfilled"&&m.value!==null)return m.value});return i.map((m,f)=>({pubkey:m.pubkey.toString(),lamports:m.account.lamports,activationState:a[f],imageUri:d[f],...m.account.data.parsed}))},"fetchStakeAccounts"),Cs=n((t,e)=>F.convertStakeAccountList(t,e),"getQueryKey"),hu=n((t,e,o)=>()=>_s(t,{ownerPublicKey:e},o),"getQueryFn");function Ls(t,e,o,r=!0){let i=Cs(e,t.rpcEndpoint),s=hu(t,e,o);return L({queryKey:i,queryFn:s,enabled:!!e&&r,staleTime:K.Never})}n(Ls,"useConvertStakeAccountList");var Ms=n((t,e,o,r)=>{let i=vt();return(0,Es.useCallback)(async()=>{r&&await i.prefetchQuery({queryKey:Cs(e,t.rpcEndpoint),queryFn:n(()=>_s(t,{ownerPublicKey:e},o),"queryFn")})},[i,e,t,o,r])},"usePrefetchConvertStakeAccountList");c();u();var _t=x(C());var er=null,Su=n(t=>{if(!er&&t){let e="liquidStake";er=new _e(t,e)}if(!er)throw new Error("liquidStakeAnalytics was not properly configured");return er},"getLiquidStakeSequenceAnalytics"),Nt=n(()=>{let t=qt(),e=Su(t),o=(0,_t.useCallback)((S,k)=>{t.capture("liquidStakingConvertAccountClicked",{data:{stake:{validatorName:S,stakeAccountBalance:k}}})},[t]),r=(0,_t.useCallback)(S=>{t.capture("liquidStakingConvertAccountListSeen",{data:{stake:{stakeAccounts:S}}})},[t]),i=(0,_t.useCallback)(()=>{t.capture("liquidStakingConvertBannerClicked")},[t]),s=(0,_t.useCallback)(()=>{t.capture("liquidStakingConvertBannerSeen")},[t]),a=(0,_t.useCallback)(()=>{t.capture("liquidStakingConvertModalContinue")},[t]),l=(0,_t.useCallback)(()=>{t.capture("liquidStakingConvertModalNotNow")},[t]),d=(0,_t.useCallback)(({provider:S,convertDetails:k,amount:y,fromAmount:w,toAmount:b,fromAmountUSD:E,toAmountUSD:M})=>{t.capture("liquidStakingConvertApprovedByUser",{data:{stake:{stakePoolAddress:S?.stakePoolAddress,token:S?.stakePoolTokenMetadata.metadata.name,fromAmount:w,toAmount:b,fromAmountUSD:E,toAmountUSD:M,apy:S?.apy,convertRatio:S?.convertRatio,caip19:S?.stakePoolTokenMetadata.caip19,validatorName:k?.validatorName,stakeAccountBalance:y}}})},[t]),m=(0,_t.useCallback)((S,k)=>{e.submittedTransaction(S,{chainType:j.Solana,chainName:pt.Solana,networkId:"mainnet",method:"signAndSendTransaction",walletAddress:k})},[e]),f=(0,_t.useCallback)(({amount:S,convertDetails:k,provider:y})=>{t.capture("liquidStakingConvertSuccess",{data:{stake:{apy:y?.apy,convertRatio:y?.convertRatio,caip19:y?.stakePoolTokenMetadata.caip19,stakePoolAddress:y?.stakePoolAddress,token:y?.stakePoolTokenMetadata.metadata.name,totalAmount:S,validatorName:k?.validatorName}}})},[t]),p=(0,_t.useCallback)(({amount:S,convertDetails:k})=>{t.capture("liquidStakingConvertFailed",{data:{stake:{validatorName:k?.validatorName,stakeAccountBalance:S}}})},[t]),g=(0,_t.useCallback)(()=>{t.capture("liquidStakingConvertMoreClicked")},[t]);return{trackConvertStakeAccountClicked:o,trackConvertStakeAccountListSeen:r,trackConvertBannerClicked:i,trackConvertBannerSeen:s,trackConvertModalContinue:a,trackConvertModalNotNow:l,trackConvertApprovedByUser:d,trackConvertFailed:p,trackConvertSubmitted:m,trackConvertSuccess:f,trackConvertMoreClicked:g}},"useConvertStakeAnalytics");var gu=n(()=>{let{connection:t}=ft(),{data:e}=xt(j.Solana),{trackConvertModalContinue:o,trackConvertModalNotNow:r}=Nt(),{results:i,isFetched:s}=no(),a=(0,or.useMemo)(()=>new Map(i.map(d=>[d.voteAccountPubkey,d])),[i]),l=Ms(t,e?.address??"",a,s);return(0,or.useEffect)(()=>{l()},[l]),{trackConvertModalContinue:o,trackConvertModalNotNow:r}},"useConvertStakeAccountInfoPageProps");c();u();c();u();var Os=n(({numSignatures:t,lamportsPerSignature:e,lamportBalance:o,rentExemptionMinimum:r})=>{let i=X(e).multipliedBy(t),s=o.minus(i);return X.max(s.minus(r),0)},"getMaxTransferrableSol");var yu=n(({balance:t,rentExemptionMinimum:e})=>{let o=Os({numSignatures:11,lamportsPerSignature:ii,lamportBalance:X(t),rentExemptionMinimum:On(e)});return parseFloat(Mn(o).toFixed(9))},"useGetMaxTransferrableSol");c();u();var ku=n(t=>{let e=F.keybaseUserAvatar(t);return L({enabled:!!t,queryKey:e,async queryFn(){if(!t)throw new Error("Keybase username is required");return Zo(t)},placeholderData:"",staleTime:K.Never})},"useKeybaseUserAvatar");c();u();c();u();var Fs=new Error("Missing sender address for staking fungibles."),Ns=new Error("Missing signature from waiting for staking transaction confirmation."),Ds=new Error("PublicKey is required"),Be;(function(t){t.MissingTransactionData="MissingTransactionData",t.UnknownError="UnknownError",t.FailedToConfirmTransaction="FailedToConfirmTransaction"})(Be||(Be={}));var Ae=class extends Error{static{n(this,"StakingError")}constructor(e){super(e)}};var Au=n(async(t,e)=>await t.getSignatureStatuses([e],{searchTransactionHistory:!0}),"fetchSignatureStatus");function wu(t,e,o){let r=vt(),i=F.signatureStatus(o),s=n(async()=>{if(!o)throw Ns;let m=await Au(t,o);return{...m,value:m.value[0]}},"queryFn"),l=r.getQueryData(i)?.value?.confirmationStatus;return L({queryKey:i,queryFn:s,enabled:!!o&&l!=="finalized",refetchInterval:e,staleTime:K.Never})}n(wu,"useSignatureStatus");c();u();var Tu=n(t=>async()=>await t.getMinimumBalanceForRentExemption(A.StakeProgram.space),"getStakeAccountMinBalance");function bu(t){let e=F.stakeAccountMinBalance(),o=Tu(t);return L({queryKey:e,queryFn:o,placeholderData:0,staleTime:K.Never})}n(bu,"useStakeAccountMinBalance");c();u();var vu=n(async(t,e,o,r="confirmed")=>await t.getInflationReward(e,o,r),"getInflationReward"),xu=n(async(t,e)=>{let o=[];e.ownerPublicKey&&o.push({memcmp:{offset:44,bytes:e.ownerPublicKey}}),e.voteAccountPublicKey&&o.push({dataSize:200},{memcmp:{offset:124,bytes:e.voteAccountPublicKey}});let r=await t.getParsedProgramAccounts(A.StakeProgram.programId,{filters:o}),i=[];if(e.fetchInflationRewards)try{i=await vu(t,r.map(({pubkey:s})=>s))}catch(s){let a=s;!a.message.includes("RPC request timed out")&&$.captureError(a,Q.Staking)}return r.map((s,a)=>({pubkey:s.pubkey.toString(),lamports:s.account.lamports,inflationReward:i[a]?.amount,...s.account.data.parsed}))},"fetchStakeAccounts"),Iu=n((t,e)=>F.stakeAccounts(t,e),"getQueryKey"),Pu=n((t,e)=>()=>xu(t,{ownerPublicKey:e,fetchInflationRewards:!0}),"getQueryFn");function Eu(t,e){let o=Iu(e,t.rpcEndpoint),r=Pu(t,e);return L({queryKey:o,queryFn:r,placeholderData:[],staleTime:R({minutes:5})})}n(Eu,"useStakeAccounts");c();u();function _u(t,e){let o=F.stakeActivationData(e);return L({queryKey:o,queryFn:n(async()=>{if(!e)throw Ds;return await io(t,new A.PublicKey(e))},"queryFn"),enabled:!!e,staleTime:K.Never})}n(_u,"useStakeActivationData");c();u();var Rs=x(C());c();u();c();u();var Us=new Error("Failed to fetch liquid staking supported tokens"),Cu=new Error("Missing supported tokens in response");async function Bs(){try{let t=await mt.api().get("/liquid-staking/v1/supported-tokens");if(!Wt(t))throw Us;let e=cs.safeParse(t.data.supportedTokens);if(!e.success)throw Cu;return e.data}catch{throw Us}}n(Bs,"getLiquidStakingSupportedTokens");var rr=n(()=>{let t=F.liquidStakingSupportedTokens();return L({queryKey:t,staleTime:R({minutes:15}),async queryFn(){return await Bs()}})},"useLiquidStakingSupportedTokens");function Lu(t){return typeof t=="string"?t:t?ne(jt(t)):""}n(Lu,"getCaip19String");var Ht=n(t=>{let e=Lu(t),o=At("enable-psol-staking"),{data:r={}}=rr(),i=(0,Rs.useMemo)(()=>!!Object.values(r).flat().find(a=>a.stakePoolTokenMetadata.caip19===e),[e,r]);return e===D?o&&i:i},"useIsSupportedLST");c();u();c();u();var so=x(C());c();u();c();u();var Vs=new Error("Failed to fetch Average Validator APY");async function Ks(){let t=await mt.api().get("/staking/v1/avg-validator-apy");if(!Wt(t))throw Vs;let e=to.safeParse(t.data);if(e.success)return e.data.apy;throw Vs}n(Ks,"getAverageValidatorApy");var Ws=n(()=>{let t=F.averageValidatorApy();return L({enabled:!0,queryKey:t,gcTime:R({hours:1}),staleTime:1/0,async queryFn(){return Ks()}})},"useAverageValidatorApy");var qs=n(t=>{let e=(0,so.useMemo)(()=>t?ne(jt(t)):"",[t]),{data:o,isPending:r}=Ws(),i=o?o/100:null,{data:s={},isPending:a}=rr(),l=(0,so.useMemo)(()=>s[e]??[],[e,s]),d=l?l[0]:void 0,m=(0,so.useCallback)((f,p=!1)=>f?l.find(g=>g.stakePoolTokenMetadata.caip19===f):p?void 0:d,[d,l]);return{isLoading:a||r,isSupported:l.length>0,providers:l,pickedLSTProvider:m,defaultProvider:d,avgValidatorApy:i}},"useLiquidStaking");var Dt=n(t=>{let e=ss.get(t);return qs(e)},"useNativeLiquidStaking");c();u();var js=x(C());var Mu=n(({onLiquidStake:t,onNativeStake:e})=>{let{t:o}=J(),r=Xr,{avgValidatorApy:i,pickedLSTProvider:s}=Dt(bt.Solana.Mainnet),a=Ht(D),l=s(a?D:ui);return{options:(0,js.useMemo)(()=>[{type:"liquid",isRecommended:!0,title:o("stakeMethodSelectionLiquidStakingTitle"),description:o("stakeMethodSelectionLiquidStakingDescription",{poolTokenSymbol:l?.stakePoolTokenMetadata?.metadata?.symbol}),apy:l?o("stakeMethodEstApy",{apy:ke(parseFloat(l.apy))}):null,disabled:!l,onClick:t??(()=>{})},{type:"native",isRecommended:!1,title:o("stakeMethodSelectionNativeStakingTitle"),description:o("stakeMethodSelectionNativeStakingDescription"),apy:i?o("stakeMethodEstApy",{apy:ke(i)}):null,onClick:e,disabled:!1}],[i,l,t,e,o]),learnMoreLink:r}},"useStakingMethodSelectionProps");c();u();function Ou({hideOnLowBalance:t}){let{pickedLSTProvider:e}=Dt(bt.Solana.Mainnet),o=Ht(D),r=e(D),{data:i}=gi();if(!i||!r)return{shouldHide:!0,apy:0,formattedApy:"0%"};let s=Pt(i.totalQuantityString,i.decimals),a=!1;t&&(a=!s.isGreaterThan(0)),o||(a=!0);let l=parseFloat(r.apy),d=`${(l*100).toFixed(2)}%`;return{shouldHide:a,apy:l,formattedApy:d}}n(Ou,"useStakingWelcomeProps");c();u();var Yt=n(()=>{let{data:t}=Ti(),e=t==="GB",o=At("enable-uk-staking-disclaimers"),r=At("enable-uk-staking-override"),i=Ht(D);return r?!0:o&&e&&i},"useShowUKDisclaimer");c();u();var Hs=x(C());c();u();var Fu=n(async t=>{let e=await t.getEpochInfo(),o=e.slotsInEpoch-e.slotIndex;return{hours:o*.4/3600,totalSlots:e.slotsInEpoch,remainingSlots:o,epoch:e.epoch}},"fetchEpochTimeRemaining"),zs=n(t=>{let e=F.epochTimeRemaining(t.rpcEndpoint);return L({queryKey:e,queryFn:n(async()=>Fu(t),"queryFn"),placeholderData:{hours:0,totalSlots:0,remainingSlots:0,epoch:0},staleTime:K.Long})},"useEpochTimeRemaining");var we=n(()=>{let{t}=J(),{connection:e}=ft(),{data:o}=zs(e);return(0,Hs.useMemo)(()=>{if(!o)return"";if(o.hours<24){let r=Math.max(o.hours,1),i=t(r===1?"timeUnitHour":"timeUnitHours");return`${r.toFixed(0)} ${i}`}else{let r=o.hours,i=Math.floor(r/24),s=r%24,a=Math.floor(s),l=t(a===1?"timeUnitHour":"timeUnitHours"),d=t(i===1?"timeUnitDay":"timeUnitDays");return a===0?`${i} ${d}`:`${i} ${d} ${a} ${l}`}},[o,t])},"useDurationUntilEpochEnds");c();u();c();u();var ao=x(C());c();u();var Gs=n(t=>ln(t)?!1:eo(t.activationState),"isEligibleToConvert");var nr=n(t=>{let e=At("enable-psol-native-convert"),o=At("enable-psol-native-delayed-convert"),{connection:r}=ft(),{data:i}=xt(j.Solana),{results:s,isFetched:a,isError:l}=no(),d=(0,ao.useMemo)(()=>new Map(s.map(E=>[E.voteAccountPubkey,E])),[s]),{data:m,isLoading:f,isFetching:p,error:g,refetch:S}=Ls(r,i?.address??"",d,a||l),k=f||p,y=(0,ao.useMemo)(()=>k||!m?[]:m.map(E=>Nu(E,d)).sort((E,M)=>E.lamports>M.lamports?-1:1),[k,m,d]),w=(0,ao.useMemo)(()=>y.filter(E=>E.eligible),[y]),b=(0,ao.useMemo)(()=>y.filter(E=>!E.eligible),[y]);return t?.stakePoolTokenMetadata.caip19===D?{hasConvertibleStakeAccounts:e&&w.length>0||o&&b.length>0,eligibleStakeAccounts:w,inelegibleStakeAccounts:b,isLoadingList:k,error:g,refetch:S}:{hasConvertibleStakeAccounts:!1,eligibleStakeAccounts:[],inelegibleStakeAccounts:[],isLoadingList:k,error:g,refetch:S}},"useConvertibleStakeAccounts"),Nu=n((t,e)=>{let o=Gs(t),r=Du(t,e),i=t.lamports;return{...t,amount:i,eligible:o,title:r,imageUri:t.imageUri}},"mapStakeAccountToViewState"),Du=n((t,e)=>{let o="";if(t.type===Ue.Delegated){let{voter:r}=t.info.stake.delegation,i=e.get(r),s=i?.info?.keybaseUsername;o=i?.info?.name??s??Gn(r)}else t.type===Ue.Initialized&&(o=t.pubkey);return o},"getTitleForConvertStakeAccount");c();u();var Uu=n(()=>{let t=co();if(!t)throw new Error("PSOL provider not found");return t},"usePSolProviderUnsafe"),co=n(()=>{let{pickedLSTProvider:t}=Dt(N.solana.mainnetID);return t(D,!0)},"usePSolProvider");c();u();var Ys=x(C());c();u();var ir=x(C());c();u();var uo;(function(t){t.FeatureUsed="featureUsed"})(uo||(uo={}));function Qs({key:t,queryKey:e,defaultValue:o=null}){let r=je();return L({enabled:!0,queryKey:e,gcTime:ae.Long,staleTime:K.Never,async queryFn(){try{return await r.get(t)}catch(i){return i instanceof Error&&$.captureError(i,Q.Staking),o}}})}n(Qs,"useStakeStorageValue");function $s({key:t,queryKey:e}){let o=je(),r=vt();return Ee({async mutationFn(i){try{return await o.set(t,i)}catch(s){s instanceof Error&&$.captureError(s,Q.Staking);return}},async onMutate(i){await r.cancelQueries({queryKey:e});let s=r.getQueryData(e);return r.setQueryData(e,i),{previousValue:s}},onError(i,s,a){r.setQueryData(e,a?.previousValue)}})}n($s,"useSetStakeStorageValue");var Bu=T.object({convert:T.boolean(),mint:T.boolean()}),dn={convert:!1,mint:!1},Ru=JSON.stringify(dn),Re=n(()=>{let{data:t}=Qs({key:uo.FeatureUsed,queryKey:F.featureUsed(),defaultValue:Ru}),e=(0,ir.useMemo)(()=>{if(!t)return dn;let i=Bu.safeParse(JSON.parse(t));return i.success?i.data:dn},[t]),{mutateAsync:o}=$s({key:uo.FeatureUsed,queryKey:F.featureUsed()}),r=(0,ir.useCallback)(async i=>{let s={...e,...i};await o(JSON.stringify(s))},[o,e]);return{usageState:e,setUsageState:r}},"useFeatureUsage");var mn=n(({method:t,goToInfoPage:e,goToInitFlowPage:o})=>{let{usageState:r}=Re();return(0,Ys.useCallback)(()=>{r[t]?o():e()},[e,o,t,r])},"useOnShowLiquidStakingMethod");c();u();var Vu=n(t=>{let e=Yt();return t&&t!==D?{screen:"MintLiquidStakeAmountPage",params:{lstCaip19:t}}:e?{screen:"MintPSOLUKInfoPage",params:{presentNext:!0}}:{screen:"MintLiquidStakeAmountPage",params:{lstCaip19:D}}},"useLiquidStakingScreen");c();u();var Js=x(C());c();u();c();u();var lo={transactionData:void 0,provider:void 0,convert:{validatorVote:"",stakeAccount:"",validatorName:"",eligibleAccountsCount:0,activationState:void 0,stakeAuthorityPubkey:""},amount:"",navigateTo:null},U=Xn(t=>({...lo,resetStaking:n(()=>t(e=>({...e,amount:lo.amount,transactionData:lo.transactionData,convert:lo.convert,navigateTo:lo.navigateTo})),"resetStaking"),setTransactionData:n(e=>t({transactionData:e}),"setTransactionData"),setProvider:n(e=>t({provider:e}),"setProvider"),setConvertStakeAccount:n(e=>t({convert:e}),"setConvertStakeAccount"),setAmount:n(e=>t({amount:e}),"setAmount"),setNavigateTo:n(e=>t({navigateTo:e}),"setNavigateTo")}));var Xs=n(t=>{let e=U(d=>d.setConvertStakeAccount),o=U(d=>d.setAmount),{trackConvertStakeAccountClicked:r}=Nt(),i=co(),s=At("enable-psol-native-delayed-convert"),{eligibleStakeAccounts:a,inelegibleStakeAccounts:l}=nr(i);return(0,Js.useCallback)(({stakeAccount:d,validatorName:m,activationState:f})=>{let p=d?.info?.stake?.delegation?.voter??"",g=`${d?.lamports??"0"}`;e({validatorVote:p,stakeAccount:d.pubkey,stakeAuthorityPubkey:d?.info?.meta?.authorized?.staker??"",validatorName:m??"",activationState:f,eligibleAccountsCount:s?a.length+l.length:a.length}),o(g),r(m??"",g),t()},[r,t,e,o,a.length,l.length,s])},"useConvertStakeNavigateToReview");c();u();var mo=x(C());var Ku=n((t,e)=>{let o=St,{pickedLSTProvider:r}=Dt(N.solana.mainnetID),i=r(D,!0),{trackConvertStakeAccountListSeen:s}=Nt(),{error:a,refetch:l,isLoadingList:d,eligibleStakeAccounts:m,inelegibleStakeAccounts:f}=nr(i);(0,mo.useEffect)(()=>{d||s([...m,...f].map(y=>({title:y.title,amount:y.amount,eligible:y.eligible})))},[s,m,f,d]);let p=Xs(t),g=(0,mo.useCallback)(y=>{p({stakeAccount:y,validatorName:y.title,activationState:y.activationState})},[p]),S=we(),k=(0,mo.useCallback)(()=>{l()},[l]);return{isLoading:d,error:a,eligibleStakeAccounts:m,inelegibleStakeAccounts:f,onPressBack:e,onReload:k,onSelectStakeAccount:g,tokenSymbol:o?.data.symbol??"",tokenDecimals:o?.data.decimals??0,durationUntilEpochEnds:S}},"useConvertStakeAccountListPageProps");c();u();c();u();var Zs=x(C());var sr=n(()=>{let t=vt();return(0,Zs.useCallback)(()=>ro(t)(),[t])},"useInvalidateQueries"),ta=n((t,e,o)=>Co({connection:t,signature:e,commitment:"finalized"}).then(()=>{ro(o)()}),"invalidateStakeDataOnTransactionFinalized");c();u();var Ke=x(Ao());c();u();var pn=x(Ha());var Hv=new A.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");var wt=new A.PublicKey("SPoo1Ku8WFXoNDMHPsrGSTSG1Y47rzgn41SLUNakuHy");var Gv=pn.Buffer.from("ephemeral"),ea=pn.Buffer.from("transient"),po=A.LAMPORTS_PER_SOL;c();u();var fn=Object.freeze({DepositStake:{index:9,layout:Tt.struct([Tt.u8("instruction")])},DepositSol:{index:14,layout:Tt.struct([Tt.u8("instruction"),Tt.ns64("lamports")])},WithdrawStake:{index:10,layout:Tt.struct([Tt.u8("instruction"),Tt.ns64("poolTokens")])},WithdrawSol:{index:16,layout:Tt.struct([Tt.u8("instruction"),Tt.ns64("poolTokens")])}});function hn(t,e){let o=t.layout.span,r=Buffer.alloc(o),i=Object.assign({instruction:t.index},e);return t.layout.encode(i,r),r}n(hn,"encodeData");var Ve=class{static{n(this,"StakePoolInstruction")}static depositSol(e){let{stakePool:o,withdrawAuthority:r,depositAuthority:i,reserveStake:s,fundingAccount:a,destinationPoolAccount:l,managerFeeAccount:d,referralPoolAccount:m,poolMint:f,lamports:p,referralAccount:g}=e,S=fn.DepositSol,k=hn(S,{lamports:p}),y=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:A.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:Le,isSigner:!1,isWritable:!1}];return i&&y.push({pubkey:i,isSigner:!0,isWritable:!1}),g&&y.push({pubkey:g,isSigner:!1,isWritable:!1}),new Y.TransactionInstruction({programId:wt,keys:y,data:k})}static withdrawStake(e){let{stakePool:o,validatorList:r,withdrawAuthority:i,validatorStake:s,destinationStake:a,destinationStakeAuthority:l,sourceTransferAuthority:d,sourcePoolAccount:m,managerFeeAccount:f,poolMint:p,poolTokens:g}=e,S=fn.WithdrawStake,k=hn(S,{poolTokens:g}),y=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!0,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:A.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:Le,isSigner:!1,isWritable:!1},{pubkey:A.StakeProgram.programId,isSigner:!1,isWritable:!1}];return new Y.TransactionInstruction({programId:wt,keys:y,data:k})}static withdrawSol(e){let{stakePool:o,withdrawAuthority:r,sourceTransferAuthority:i,sourcePoolAccount:s,reserveStake:a,destinationSystemAccount:l,managerFeeAccount:d,solWithdrawAuthority:m,poolMint:f,poolTokens:p}=e,g=fn.WithdrawSol,S=hn(g,{poolTokens:p}),k=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:A.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:A.SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:A.StakeProgram.programId,isSigner:!1,isWritable:!1},{pubkey:Le,isSigner:!1,isWritable:!1}];return m&&k.push({pubkey:m,isSigner:!0,isWritable:!1}),new Y.TransactionInstruction({programId:wt,keys:k,data:S})}};c();u();var I=x(na());var sa=x(Ao()),aa=x(Lr());var ue=[(0,I.u64)("denominator"),(0,I.u64)("numerator")],ia;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.StakePool=1]="StakePool",t[t.ValidatorList=2]="ValidatorList"})(ia||(ia={}));var ar=Er().transform(t=>new sa.default(t,10)),cr=Er().transform(t=>new A.PublicKey(t)),al=_n(["uninitialized","initialized","delegated","rewardsPool"]),cl=re({rentExemptReserve:ar,authorized:re({staker:cr,withdrawer:cr}),lockup:re({unixTimestamp:We(),epoch:We(),custodian:cr})}),ul=re({meta:cl,stake:re({delegation:re({voter:cr,stake:ar,activationEpoch:ar,deactivationEpoch:ar,warmupCooldownRate:We()}),creditsObserved:We()}).nullish().default(null)}),ca=re({type:al,info:Cn(ul)}),kn=class extends aa.Layout{static{n(this,"FutureEpochLayout")}layout;discriminator;constructor(e,o){super(-1,o),this.layout=e,this.discriminator=(0,I.u8)()}encode(e,o,r=0){return e==null?this.discriminator.encode(0,o,r):(this.discriminator.encode(2,o,r),this.layout.encode(e,o,r+1)+1)}decode(e,o=0){let r=this.discriminator.decode(e,o);if(r===0)return null;if(r===1||r===2)return this.layout.decode(e,o+1);throw new Error("Invalid future epoch "+this.property)}getSpan(e,o=0){let r=this.discriminator.decode(e,o);if(r===0)return 1;if(r===1||r===2)return this.layout.getSpan(e,o+1)+1;throw new Error("Invalid future epoch "+this.property)}};function yn(t,e){return new kn(t,e)}n(yn,"futureEpoch");var ua=(0,I.struct)([(0,I.u8)("accountType"),(0,I.publicKey)("manager"),(0,I.publicKey)("staker"),(0,I.publicKey)("stakeDepositAuthority"),(0,I.u8)("stakeWithdrawBumpSeed"),(0,I.publicKey)("validatorList"),(0,I.publicKey)("reserveStake"),(0,I.publicKey)("poolMint"),(0,I.publicKey)("managerFeeAccount"),(0,I.publicKey)("tokenProgramId"),(0,I.u64)("totalLamports"),(0,I.u64)("poolTokenSupply"),(0,I.u64)("lastUpdateEpoch"),(0,I.struct)([(0,I.u64)("unixTimestamp"),(0,I.u64)("epoch"),(0,I.publicKey)("custodian")],"lockup"),(0,I.struct)(ue,"epochFee"),yn((0,I.struct)(ue),"nextEpochFee"),(0,I.option)((0,I.publicKey)(),"preferredDepositValidatorVoteAddress"),(0,I.option)((0,I.publicKey)(),"preferredWithdrawValidatorVoteAddress"),(0,I.struct)(ue,"stakeDepositFee"),(0,I.struct)(ue,"stakeWithdrawalFee"),yn((0,I.struct)(ue),"nextStakeWithdrawalFee"),(0,I.u8)("stakeReferralFee"),(0,I.option)((0,I.publicKey)(),"solDepositAuthority"),(0,I.struct)(ue,"solDepositFee"),(0,I.u8)("solReferralFee"),(0,I.option)((0,I.publicKey)(),"solWithdrawAuthority"),(0,I.struct)(ue,"solWithdrawalFee"),yn((0,I.struct)(ue),"nextSolWithdrawalFee"),(0,I.u64)("lastEpochPoolTokenSupply"),(0,I.u64)("lastEpochTotalLamports")]),ur;(function(t){t[t.Active=0]="Active",t[t.DeactivatingTransient=1]="DeactivatingTransient",t[t.ReadyForRemoval=2]="ReadyForRemoval"})(ur||(ur={}));var ll=(0,I.struct)([(0,I.u64)("activeStakeLamports"),(0,I.u64)("transientStakeLamports"),(0,I.u64)("lastUpdateEpoch"),(0,I.u64)("transientSeedSuffixStart"),(0,I.u64)("transientSeedSuffixEnd"),(0,I.u8)("status"),(0,I.publicKey)("voteAccountAddress")]),lr=(0,I.struct)([(0,I.u8)("accountType"),(0,I.u32)("maxValidators"),(0,I.vec)(ll,"validators")]);c();u();var Ut=x(Ao());function An(t){return isNaN(t)?0:Number(t*A.LAMPORTS_PER_SOL)}n(An,"solToLamports");function dr(t,e){let o=e.mul(t.totalLamports),r=t.poolTokenSupply;return o.lt(r)?new Ut.default(0):o.div(r)}n(dr,"calcLamportsWithdrawAmount");async function mr(t,e){let[o]=await A.PublicKey.findProgramAddress([e.toBuffer(),Buffer.from("withdraw")],t);return o}n(mr,"findWithdrawAuthorityProgramAddress");async function pr(t,e,o,r){let[i]=await A.PublicKey.findProgramAddress([e.toBuffer(),o.toBuffer(),r?new Ut.default(r).toArrayLike(Buffer,"le",4):Buffer.alloc(0)],t);return i}n(pr,"findStakeProgramAddress");function Te(t){if(typeof t=="number")return Math.abs(t)/A.LAMPORTS_PER_SOL;if(typeof t=="bigint")return Math.abs(Number(t))/A.LAMPORTS_PER_SOL;let e=1;t.isNeg()&&(e=-1);let r=t.abs().toString(10).padStart(10,"0"),i=r.length-9,s=r.slice(0,i)+"."+r.slice(i);return e*parseFloat(s)}n(Te,"lamportsToSol");async function dl(t,e,o,r){let[i]=await A.PublicKey.findProgramAddress([ea,e.toBuffer(),o.toBuffer(),r.toArrayLike(Buffer,"le",8)],t);return i}n(dl,"findTransientStakeProgramAddress");function ml(t,e){return t.poolTokenSupply.isZero()||t.totalLamports.isZero()?e:e.mul(t.poolTokenSupply).div(t.totalLamports)}n(ml,"calcPoolTokensForDeposit");async function la(t,e,o,r,i,s){let a=await t.getAccountInfo(e.validatorList),l=lr.decode(a?.data);if(!l?.validators||l?.validators.length==0)throw new Error("No accounts found");let d=await t.getMinimumBalanceForRentExemption(A.StakeProgram.space),m=new Ut.default(d+po),f=[];for(let b of l.validators){if(b.status!==ur.Active)continue;let E=await pr(wt,b.voteAccountAddress,o);if(!b.activeStakeLamports.isZero()){let B=e?.preferredWithdrawValidatorVoteAddress?.equals(b.voteAccountAddress);f.push({type:B?"preferred":"active",voteAddress:b.voteAccountAddress,stakeAddress:E,lamports:b.activeStakeLamports})}let M=b.transientStakeLamports.sub(m);if(M.gt(new Ut.default(0))){let B=await dl(wt,b.voteAccountAddress,o,b.transientSeedSuffixStart);f.push({type:"transient",voteAddress:b.voteAccountAddress,stakeAddress:B,lamports:M})}}f=f.sort(i||((b,E)=>E.lamports.sub(b.lamports).toNumber()));let p=await t.getAccountInfo(e.reserveStake),g=new Ut.default((p?.lamports??0)-d);g.gt(new Ut.default(0))&&f.push({type:"reserve",stakeAddress:e.reserveStake,lamports:g});let S=[],k=new Ut.default(r),y=e.stakeWithdrawalFee,w={numerator:y.denominator.sub(y.numerator),denominator:y.denominator};for(let b of["preferred","active","transient","reserve"]){let E=f.filter(M=>M.type==b);for(let{stakeAddress:M,voteAddress:B,lamports:H}of E){if(H.lte(m)&&b=="transient")continue;let W=ml(e,H);!s&&!w.numerator.isZero()&&(W=W.mul(w.denominator).div(w.numerator));let G=Ut.default.min(W,k);if(!G.lte(new Ut.default(0))&&(S.push({stakeAddress:M,voteAddress:B,poolAmount:G}),k=k.sub(G),k.isZero()))break}if(k.isZero())break}if(k.gt(new Ut.default(0)))throw new Error(`No stake accounts found in this pool with enough balance to withdraw ${Te(r)} pool tokens.`);return S}n(la,"prepareWithdrawAccounts");function da(t,e,o){let r=A.Keypair.generate();return e.push(A.SystemProgram.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:o,space:A.StakeProgram.space,programId:A.StakeProgram.programId})),r}n(da,"newStakeAccount");function fo(t){let e,o;return t.solWithdrawalFee&&(e=t.solWithdrawalFee.numerator.toNumber()*100/t.solWithdrawalFee.denominator.toNumber()),t.stakeWithdrawalFee&&(o=t.stakeWithdrawalFee.numerator.toNumber()*100/t.stakeWithdrawalFee.denominator.toNumber()),{solWithdrawalFee:e,stakeWithdrawalFee:o}}n(fo,"getStakePoolFee");async function fr(t,e){let o=await t.getAccountInfo(e);if(!o)throw new Error("Invalid stake pool account");return{pubkey:e,account:{data:ua.decode(o.data),executable:o.executable,lamports:o.lamports,owner:o.owner}}}n(fr,"getStakePoolAccount");async function pl(t,e){let o=(await t.getParsedAccountInfo(e)).value;if(!o||!("parsed"in o.data))throw new Error("Invalid stake account");if(o.data.program!="stake")throw new Error("Not a stake account");return ca.parse(o.data.parsed)}n(pl,"getStakeAccount");async function hr(t,e,o,r,i,s,a,l,d=!0){if(d){let b=await t.getBalance(o,"confirmed");if(b<r)throw new Error(`Not enough SOL to deposit into pool. Maximum deposit amount is ${Te(b)} SOL.`)}let f=(await fr(t,e)).account.data,p=new A.Keypair,g=[p],S=[];if(S.push(A.SystemProgram.transfer({fromPubkey:o,toPubkey:p.publicKey,lamports:r})),!i){let b=_o(f.poolMint,o);S.push(ri(o,b,o,f.poolMint)),i=b}let k=await mr(wt,e);S.push(Ve.depositSol({stakePool:e,reserveStake:f.reserveStake,fundingAccount:p.publicKey,destinationPoolAccount:i,managerFeeAccount:f.managerFeeAccount,referralPoolAccount:a??i,poolMint:f.poolMint,lamports:r,withdrawAuthority:k,depositAuthority:l,referralAccount:s}));let{solWithdrawalFee:y,stakeWithdrawalFee:w}=fo(f);return{instructions:S,signers:g,solWithdrawalFee:y,stakeWithdrawalFee:w}}n(hr,"depositSol");async function ma(t,e){let o=await fr(t,e);return fo(o.account.data)}n(ma,"fetchStakePoolFees");async function pa(t,e,o,r,i=!1,s,a,l,d){let m=await fr(t,e),f=new Ke.default(An(r));l||(l=_o(m.account.data.poolMint,o));let p=await Mr(t,l);if(p.amount<f.toNumber())throw new Error(`Not enough token balance to withdraw ${Te(f)} pool tokens.
          Maximum withdraw amount is ${Te(p.amount)} pool tokens.`);let g=await t.getMinimumBalanceForRentExemption(A.StakeProgram.space),S=await mr(wt,e),k=null;a&&(k=await pl(t,a));let y=[];if(i)y.push({stakeAddress:m.account.data.reserveStake,voteAddress:void 0,poolAmount:f});else if(k&&k?.type=="delegated"){let O=k.info?.stake?.delegation.voter;if(!O)throw new Error(`Invalid stake reciever ${a} delegation`);let nt=await t.getAccountInfo(m.account.data.validatorList),ot=lr.decode(nt?.data).validators.find(it=>it.voteAccountAddress.equals(O));if(s&&s!==O)throw new Error(`Provided withdrawal vote account ${s} does not match delegation on stake receiver account ${O},
        remove this flag or provide a different stake account delegated to ${s}`);if(ot){let it=await pr(wt,O,e),Ct=await t.getAccountInfo(it);if(!Ct)throw new Error("Preferred withdraw valdator's stake account is invalid");let Kt=dr(m.account.data,new Ke.default(Ct.lamports-po-g));if(Kt.lt(f))throw new Error(`Not enough lamports available for withdrawal from ${it},
              ${f} asked, ${Kt} available.`);y.push({stakeAddress:it,voteAddress:O,poolAmount:f})}else throw new Error(`Provided stake account is delegated to a vote account ${O} which does not exist in the stake pool`)}else if(s){let O=await pr(wt,s,e),nt=await t.getAccountInfo(O);if(!nt)throw new Error("Invalid Stake Account");let at=new Ke.default(nt.lamports-po-g);if(at.lt(new Ke.default(0)))throw new Error("Invalid Stake Account");let ot=dr(m.account.data,at);if(ot.lt(f))throw new Error(`Not enough lamports available for withdrawal from ${O},
            ${f} asked, ${ot} available.`);y.push({stakeAddress:O,voteAddress:s,poolAmount:f})}else{let O=await la(t,m.account.data,e,f,d,l.equals(m.account.data.managerFeeAccount));y.push(...O)}let w=[],b=A.Keypair.generate(),E=[b];w.push(Yr(l,b.publicKey,o,f.toNumber()));let M=0,B=5,H=0;for(let O of y){if(H>B)break;let at=`Withdrawing \u25CE${dr(m.account.data,O.poolAmount)},
        from stake account ${O.stakeAddress?.toBase58()}`;O.voteAddress&&(at=`${at}, delegated to ${O.voteAddress?.toBase58()}`);let ot;if(!a||k&&k.type==="delegated"){let it=da(o,w,g);E.push(it),M+=g,ot=it.publicKey}else ot=a;w.push(Ve.withdrawStake({stakePool:e,validatorList:m.account.data.validatorList,validatorStake:O.stakeAddress,destinationStake:ot,destinationStakeAuthority:o,sourceTransferAuthority:b.publicKey,sourcePoolAccount:l,managerFeeAccount:m.account.data.managerFeeAccount,poolMint:m.account.data.poolMint,poolTokens:O.poolAmount.toNumber(),withdrawAuthority:S})),w.push(...A.StakeProgram.deactivate({stakePubkey:ot,authorizedPubkey:o}).instructions),H++}a&&k&&k.type==="delegated"&&E.forEach(O=>{w.concat(A.StakeProgram.merge({stakePubkey:a,sourceStakePubKey:O.publicKey,authorizedPubkey:o}).instructions)});let{solWithdrawalFee:W,stakeWithdrawalFee:G}=fo(m.account.data);return{instructions:w,signers:E,stakeReceiver:a,totalRentFreeBalances:M,solWithdrawalFee:W,stakeWithdrawalFee:G}}n(pa,"withdrawStake");async function fa(t,e,o,r,i,s){let a=await fr(t,e),l=new Ke.default(An(i)),d=_o(a.account.data.poolMint,o),m=await Mr(t,d);if(m.amount<l.toNumber())throw new Error(`Not enough token balance to withdraw ${Te(l)} pool tokens.
            Maximum withdraw amount is ${Te(m.amount)} pool tokens.`);let f=[],p=A.Keypair.generate(),g=[p];f.push(Yr(d,p.publicKey,o,l.toNumber()));let S=await mr(wt,e);if(s){let b=a.account.data.solWithdrawAuthority;if(!b)throw new Error("SOL withdraw authority specified in arguments but stake pool has none");if(s.toBase58()!=b.toBase58())throw new Error(`Invalid deposit withdraw specified, expected ${b.toBase58()}, received ${s.toBase58()}`)}let k=Ve.withdrawSol({stakePool:e,withdrawAuthority:S,reserveStake:a.account.data.reserveStake,sourcePoolAccount:d,sourceTransferAuthority:p.publicKey,destinationSystemAccount:r,managerFeeAccount:a.account.data.managerFeeAccount,poolMint:a.account.data.poolMint,poolTokens:l.toNumber(),solWithdrawAuthority:s});f.push(k);let{solWithdrawalFee:y,stakeWithdrawalFee:w}=fo(a.account.data);return{instructions:f,signers:g,solWithdrawalFee:y,stakeWithdrawalFee:w}}n(fa,"withdrawSol");function ha({stakePubkey:t,stakeAuthorityPubkey:e,authorizedPubkey:o,transaction:r=new Y.Transaction}){return e.equals(o)||r.add(A.StakeProgram.authorize({authorizedPubkey:o,newAuthorizedPubkey:o,stakeAuthorizationType:A.StakeAuthorizationLayout.Staker,stakePubkey:t})),r.add(A.StakeProgram.deactivate({stakePubkey:t,authorizedPubkey:o})),r}n(ha,"deactivateStake");var zx=n(t=>{let{t:e}=J(),o=vt(),r=un(),{mutateAsync:i}=Si(t);return Ee({mutationFn:n(async({accountIdentifier:l,senderAddress:d,stakePubkey:m,stakeAuthorityPubkey:f,authorizedPubkey:p})=>{if(!d)throw Fs;let{networkID:g,address:S}=d,k=ha({stakePubkey:m,stakeAuthorityPubkey:f,authorizedPubkey:p}),y=await Qt(k,{connection:t}),w={ownerAddress:S??"",networkID:g,data:{signature:""},type:Ce.DeactivateStake,display:{summary:{topLeft:{text:e("transactionsPendingDeactivatingStake")}}}};r.approved({chainType:j.Solana,chainName:pt.Solana,networkId:N.getSolanaNetworkIDValue(g),type:"undelegate"});let b=await i({accountIdentifier:l,feePayer:new A.PublicKey(S),transaction:y,pendingTransactionInput:w});return r.submittedTransaction(b,{chainType:j.Solana,chainName:pt.Solana,networkId:N.getSolanaNetworkIDValue(g),method:"signAndSendTransaction",walletAddress:S}),r.deactivateStake(),{networkID:g,id:b??""}},"mutationFn"),onSuccess:n(l=>{Co({connection:t,signature:l.id}).then(()=>{r.transactionStatus(l.id,{chainType:j.Solana,chainName:pt.Solana,networkId:N.getSolanaNetworkIDValue(l.networkID),status:{type:"confirmed"}})}).catch(d=>{r.transactionStatus(l.id,{chainType:j.Solana,chainName:pt.Solana,networkId:N.getSolanaNetworkIDValue(l.networkID),status:{type:"error"}}),$.captureError(d,Q.Staking)}),ta(t,l.id,o)},"onSuccess")})},"useDeactivateStake");async function fl({connection:t,stakePubkey:e,stakeAuthorityPubkey:o,authorizedPubkey:r}){let i=ha({stakePubkey:e,stakeAuthorityPubkey:o,authorizedPubkey:r}),s=(await t.getLatestBlockhash("confirmed")).blockhash,a=new Y.TransactionMessage({instructions:i.instructions,payerKey:o,recentBlockhash:s}).compileToV0Message(),l=new Y.VersionedTransaction(a);return await Qt(l,{connection:t})}n(fl,"getDeactivateStakeTransaction");var Sa=n(({stakePubkey:t,stakeAuthorityPubkey:e,authorizedPubkey:o,connection:r,stakePoolAddress:i,disabled:s})=>{let a=F.getDeactivateStakeTransaction({stakePubkey:t.toString(),stakeAuthorityPubkey:e.toString(),authorizedPubkey:o.toString()});return L({enabled:!s&&!!t&&!!e&&!!o,queryKey:a,staleTime:R({seconds:30}),async queryFn(){try{let[d,{solWithdrawalFee:m,stakeWithdrawalFee:f}]=await Promise.all([fl({connection:r,stakePubkey:t,stakeAuthorityPubkey:e,authorizedPubkey:o}),ma(r,i)]);return{transaction:d,networkID:bt.Solana.Mainnet,solWithdrawalFee:m,stakeWithdrawalFee:f}}catch(d){throw $.captureError(d,Q.Staking),d}}})},"useGetDeactivateStakeTransaction");c();u();var st=x(C());c();u();var ga=x(C());var Sr=n(({txReceipt:t,isTxError:e,poolTokenFungible:o,invalidateQueries:r,dismissLiquidStaking:i})=>{let s=U(l=>l.resetStaking),a=U(l=>l.setNavigateTo);return(0,ga.useCallback)(()=>{if(s(),!t||e)return i();r(),a(o?{screen:"FungibleDetail",caip19:ne(jt(o))}:{screen:"Activity"}),i()},[t,e,o,r,i,a,s])},"useDismissLiquidStaking");c();u();var gr=x(C());c();u();var ya=n(({connection:t})=>{let e=je(),o=zn();return Ee({mutationFn:n(async({accountIdentifier:i,ownerAddress:s,pendingActivityRow:a,activityType:l,transactionData:{networkID:d,transaction:m,signers:f}})=>{if(N.isSolanaNetworkID(d)){await Ln(m,t);let p={ownerAddress:s,networkID:d,data:{signature:""},type:l,display:{summary:a}};return{id:await ni({accountIdentifier:i,feePayer:new A.PublicKey(s),connection:t,accountSigner:o,transaction:m,pendingTransactionInput:p,storage:e,opts:{additionalSignerAccounts:f}}),networkID:d}}throw new Error(`Unsupported network for liquid staking: ${d}`)},"mutationFn")})},"useProcessTransactionData");function yr({isLoadingPoolToken:t,pendingActivityRow:e,onTransactionSubmitted:o,onTransactionFailed:r,activityType:i}){let{connection:s}=ft(),a=U(w=>w.transactionData),l=St,{data:d,isLoading:m}=ie(),{mutateAsync:f}=ya({connection:s}),g=(0,gr.useMemo)(()=>(d?.addresses??[]).find(w=>w.networkID===l?.data.chain.id),[l?.data.chain.id,d?.addresses])?.address??"",S=d?.identifier??"";return{executeLiquidStake:(0,gr.useCallback)(async()=>{try{if(!a)throw new Ae(Be.MissingTransactionData);let w=await f({accountIdentifier:S,ownerAddress:g,pendingActivityRow:e,activityType:i,transactionData:a});o(w)}catch(w){r(w)}},[S,g,e,a,f,o,r,i]),isReadyToExecute:!m&&!t}}n(yr,"useExecuteLiquidStakeTransaction");c();u();function kr(t){return t instanceof Ae?t:new Ae(Be.UnknownError)}n(kr,"parseStakingError");function hl({stakedTokenSymbol:t,poolTokenSymbol:e,txHash:o,txError:r,confirmationStatus:i,eligibleAccountsCount:s,isConvertDelayed:a,durationUntilEpochEnds:l,onDismiss:d,onConvertMore:m}){let f={title:v.t("commandClose"),onPress:d},p={title:v.t("convertStakeStatusConvertMore"),onPress:m},g={txHash:o,txHashTitle:v.t("commandViewTransaction")};return r?{type:"error",title:v.t("convertStakeStatusErrorTitle"),message:v.t("convertStakeStatusErrorMessage",{poolTokenSymbol:e}),...g,primaryButton:f,showUKDisclaimer:!1,openExternalLink:void 0}:i==="confirmed"?{type:"success",title:v.t("convertStakeStatusSuccessTitle",{poolTokenSymbol:e}),message:"",...g,...s>1?{primaryButton:p,secondaryButton:f}:{primaryButton:f},showUKDisclaimer:!1,openExternalLink:void 0,...a?{title:v.t("convertStakeStatusSuccessTitleDelayed"),message:v.t("convertStakeStatusSuccessMessageDelayed",{durationUntilEpochEnds:l})}:{}}:{type:"loading",title:v.t("convertStakeStatusLoadingTitle",{poolTokenSymbol:e}),message:v.t("convertStakeStatusLoadingMessage",{stakedTokenSymbol:t,poolTokenSymbol:e}),...g,primaryButton:f,showUKDisclaimer:!1,openExternalLink:void 0}}n(hl,"getStatusPageProps");var Sl=n(({dismissConvertFlow:t,goToConvertAccountList:e})=>{let o=sr(),[r,i]=(0,st.useState)("loading"),[s,a]=(0,st.useState)(),[l,d]=(0,st.useState)(),{trackConvertSubmitted:m,trackConvertSuccess:f,trackConvertFailed:p,trackConvertMoreClicked:g}=Nt(),{usageState:S,setUsageState:k}=Re(),y=co(),w=U(dt=>dt.convert),b=U(dt=>dt.amount),[E]=(0,st.useState)(w?.eligibleAccountsCount??0),M=U(dt=>dt.convert),B=U(dt=>dt.setTransactionData),H=St,W=H?.data.symbol??"",G=y?.stakePoolTokenMetadata.metadata.symbol??"",O=y?.stakePoolTokenMetadata.metadata.address??"",{data:nt}=ie(),at=nt?.type===fe.Ledger,it=(0,st.useMemo)(()=>(nt?.addresses??[]).find(dt=>dt.networkID===H?.data.chain.id),[H?.data.chain.id,nt?.addresses])?.addressType??j.Solana,{fungible:Ct,isLoadingTokens:Kt}=Ot({key:O}),Xt=we(),Zt=(0,st.useCallback)(dt=>{m(dt.id),a(dt),S.convert||k({convert:!0})},[k,m,S.convert]),te=(0,st.useCallback)(dt=>{p({amount:b,convertDetails:w});let ja=kr(dt);d(ja)},[p,b,w]),ee=(0,st.useMemo)(()=>({topLeft:{text:v.t("convertStakePendingTitle",{symbol:G})}}),[G]),{executeLiquidStake:oe,isReadyToExecute:et}=yr({isLoadingPoolToken:Kt,pendingActivityRow:ee,onTransactionSubmitted:Zt,onTransactionFailed:te,activityType:Ce.ConvertStake}),kt=(0,st.useCallback)(()=>{f({amount:b,convertDetails:w,provider:y}),B(void 0),o()},[b,f,B,o,y,w]),{isSuccess:V,isError:Lt,error:xe}=Lo(kt,s);(0,st.useEffect)(()=>{V?i("confirmed"):Lt&&(i("error"),d(xe),p({amount:b,convertDetails:w}))},[b,w,V,Lt,p,xe,s]);let yo=Sr({txReceipt:s,isTxError:Lt,poolTokenFungible:Ct,invalidateQueries:o,dismissLiquidStaking:t}),ko=(0,st.useCallback)(()=>{g(),e()},[g,e]),qa=(0,st.useMemo)(()=>hl({stakedTokenSymbol:W,poolTokenSymbol:G,txHash:s?.id,txError:l,confirmationStatus:r,eligibleAccountsCount:E,isConvertDelayed:oo(M?.activationState),durationUntilEpochEnds:Xt,onDismiss:yo,onConvertMore:ko}),[W,G,s?.id,l,r,E,M?.activationState,Xt,yo,ko]);return{addressType:it,isLedger:at,isReadyToExecute:et,statusPageProps:qa,txError:l,executeLiquidStake:oe,learnMoreLink:Zr,isJitoSOL:!1,isPSOL:!0}},"useConvertStakeAccountStatusPageProps");c();u();c();u();var Fa=x(C());c();u();var Pa=x(C());c();u();var ka=n((t,e)=>{let o=[],r=t?jt(t):void 0,i=Dn(e?.stakePoolTokenMetadata.caip19??"");return r&&i&&(o.push(r),o.push(i)),{query:{data:o}}},"getPriceArgs");c();u();var be=x(C());c();u();function Ar(t){return t?t.stakePoolTokenMetadata.caip19===se:!1}n(Ar,"isJitoLST");c();u();c();u();var uP={name:"Jito",stakePoolAddress:"Jito4APyf642JPZPx3hGc6WWJ8zPKtRbRs4P815Awbb",apy:"0.0760131222374123",convertRatio:"1.1067926864808721",stakePoolTokenMetadata:{metadata:{address:"J1toso1uCk3RLmjorhTtrVwY9HJ7X8V9yYac6Y7kGCPn",name:"Jito Staked SOL",symbol:"JitoSOL",decimals:9,logoURI:"https://storage.googleapis.com/token-metadata/JitoSOL-256.png",chainId:pe.Mainnet},caip19:"solana:101/address:J1toso1uCk3RLmjorhTtrVwY9HJ7X8V9yYac6Y7kGCPn"},chainId:pe.Mainnet,validators:[{vote_account:"validator"}]},Aa={name:"Phantom Staked SOL",stakePoolAddress:"pSPcvR8GmG9aKDUbn9nbKYjkxt9hxMS7kF1qqKJaPqJ",apy:"0.0950000000000000",convertRatio:"1.0500000000000000",stakePoolTokenMetadata:{metadata:{address:ai,name:"Phantom Staked SOL",symbol:"PSOL",decimals:9,logoURI:"https://storage.googleapis.com/token-metadata/PSOL-256.png",chainId:pe.Mainnet},caip19:"solana:101/address:pSo1f9nQXWgXibFtKf7NWYxb5enAM4qfP6UJSiXRQfL"},chainId:pe.Mainnet,validators:[{vote_account:"validator"}]};function wr(t){return t?t.stakePoolTokenMetadata.caip19===Aa.stakePoolTokenMetadata.caip19:!1}n(wr,"isPhantomLST");var gl=n((t,e)=>{if(e===void 0)return;let o=jt(t),r=ne(o);return e[r]},"extractPrice"),yl=n((t,e,o)=>{if(!e)return q(0);let r=new q(e.convertRatio),i=Pt(t,e.stakePoolTokenMetadata.metadata.decimals);return o?i.multipliedBy(r):i.div(r)},"getReceiveAmount");function wa(t,e,o){return e?{network:{id:e.stakePoolTokenMetadata.metadata.chainId??pe.Mainnet,name:t.data.chain.name,symbol:t.data.chain.symbol,imageUrl:t.data.chain.imageUrl},priceData:o?o[e.stakePoolTokenMetadata.caip19]:void 0,decimals:e.stakePoolTokenMetadata.metadata.decimals,logoUri:e.stakePoolTokenMetadata.metadata.logoURI??null,symbol:e.stakePoolTokenMetadata.metadata.symbol,tokenAddress:e.stakePoolTokenMetadata.metadata.address,tokenType:ze.SPL}:{network:{id:t.data.chain.id,name:t.data.chain.name,symbol:t.data.chain.symbol,imageUrl:t.data.chain.imageUrl},priceData:gl(t,o),decimals:t.data.decimals,logoUri:t.data.logoUri??null,symbol:t.data.symbol,tokenAddress:t.data.tokenAddress,tokenType:t.type??ze.SolanaNative}}n(wa,"extractAssetMetadata");var Ta=n((t,e,o,r,i=!1)=>{if(!t)return null;let{priceData:s,decimals:a,...l}=wa(t,i?e:void 0,r),d=Pt(o,a),m=s?.usd?d.multipliedBy(s.usd):null;return{amount:he(d),amountUsd:m?m.toNumber():null,border:!1,title:v.t("liquidStakeReviewYouPay"),...l}},"getAssetPropsForPayAsset"),ba=n((t,e,o,r,i=!1)=>{if(!e||!t)return null;let{priceData:s,...a}=wa(t,i?void 0:e,r),l=yl(o,e,i),d=s?.usd?l.multipliedBy(s.usd):null;return{amount:he(l),amountUsd:d?d.toNumber():null,border:!1,title:i?v.t("liquidStakeUnstakeReviewYouReceive"):v.t("liquidStakeReviewYouReceive"),...a}},"getAssetPropsForReceiveAsset"),va=n(({process:t,fungibleToStake:e,amount:o,provider:r,selectedChainAddress:i,transactionFees:s,isLoading:a,canSubmit:l,transactionData:d,priceMap:m,networkFeeErrorMsg:f,showUKDisclaimer:p})=>{let g=(0,be.useMemo)(()=>Ta(e,r,o,m),[e,r,o,m]),S=(0,be.useMemo)(()=>ba(e,r,o,m),[e,r,o,m]),k=r?.name??"",y=i?.address??"",w=r?.apy!==void 0?ke(Number.parseFloat(r.apy)):"",b=`${he(Pt(s,e?.data.decimals??0))} ${e?.data.symbol}`,E=Ar(r),M=wr(r),B=r?.totalRewardsFeePercentage??"8",H=d?.solWithdrawalFee??d?.stakeWithdrawalFee,W=(0,be.useMemo)(()=>({accountLabelText:v.t("stakeReviewAccount"),providerLabelText:v.t("liquidStakeReviewProvider"),apyLabelText:v.t("stakeReviewAPY"),apyLabelTextTooltip:v.t("stakeReviewAPYTooltip"),networkFeeLabelText:v.t("liquidStakeReviewNetworkFee"),primaryButtonText:v.t(t==="convert"||t==="convertDelayed"?"commandConvert":"commandStake"),feeFootnoteText:v.t("liquidStakeReviewPhantomFeeFootnote",{totalRewardsFeePercentage:B}),feeFootnoteDescriptionText:v.t("liquidStakeReviewPhantomFeeFootnoteDescription",{withdrawalFeePercentage:H}),feeFootnoteTooltipText:v.t("liquidStakeReviewPhantomFeeFootnoteTooltip",{totalRewardsFeePercentage:B}),title:v.t("liquidStakeReviewPageTitle")}),[t,B,H]);return{process:t,payAsset:g,receiveAsset:S,account:y,providerName:k,apy:w,networkFee:b,strings:W,isLoading:a,canSubmit:l,networkFeeErrorMsg:f,isJitoSOL:E,isPSOL:M,showUKDisclaimer:p,totalRewardsFeePercentage:B}},"useStakeMapToViewState"),PP=n(({stakedFungible:t,amount:e,provider:o,selectedChainAddress:r,transactionFees:i,isLoading:s,canSubmit:a,priceMap:l,networkFeeErrorMsg:d,transactionData:m,durationUntilEpochEnds:f})=>{let p=(0,be.useMemo)(()=>Ta(t,o,e,l,!0),[t,o,e,l]),g=(0,be.useMemo)(()=>ba(t,o,e,l,!0),[t,o,e,l]),S=r?.address??"",k=`${he(Pt(i,t?.data.decimals??0))} ${t?.data.symbol}`,y=m?.isWithdrawSol??!0,w=y?m?.solWithdrawalFee??.1:m?.stakeWithdrawalFee??.1,b=(0,be.useMemo)(()=>({accountLabelText:v.t("stakeReviewAccount"),networkFeeLabelText:v.t("liquidStakeReviewNetworkFee"),primaryButtonText:v.t("commandUnstake"),feeLabelText:v.t("unstakeLiquidStakeFee"),feeLabelTextTooltip:v.t("unstakeLiquidStakeFeeTooltip"),unstakeDelayDisclaimerText:v.t("unstakeLiquidStakeDelayDisclaimer",{durationUntilEpochEnds:f}),feePercentageText:`${w}%`,title:v.t("liquidStakeReviewPageTitle")}),[w,f]),E=Yt();return{payAsset:p,receiveAsset:g,account:S,networkFee:k,strings:b,isLoading:s,canSubmit:a,networkFeeErrorMsg:d,isWithdrawSol:y,showUKDisclaimer:E}},"useUnstakeMapToViewState");c();u();var xa=x(C());var kl=R({seconds:10}),Ia=n(({hasPoolTokenAccount:t,chainAddress:e,transactionData:o})=>{let{data:r,isPending:i,isFetched:s,isSuccess:a}=hi({networkID:o?.networkID??N.solana.mainnetID,multichainTransaction:wl(o),queryOptions:{refetchInterval:kl}}),{data:l=0}=li(e),d=X($o).plus(Ze),m=t?X(d):X(l).plus(d),{hasSufficientFunds:f,isLoading:p,nativeTokenSymbol:g}=yi({networkID:o?.networkID??N.solana.mainnetID,addressType:e?.addressType,gasEstimation:r,transactionValue:m}),S=Tl({hasSufficientFunds:f,hasGasEstimationFailed:s&&!a,nativeTokenSymbol:g}),k=Al(r),y=m.plus(k),w=i||p;return(0,xa.useMemo)(()=>({isLoading:w,hasSufficientFunds:f,transactionFees:y,networkFeeErrorMsg:S,nativeTokenSymbol:g}),[w,f,y,S,g])},"useLiquidStakingTransactionFees"),Al=n(t=>t?N.isSolanaNetworkID(t.networkID)?new X(t.value):new X(0):new X(0),"getGasEstimationValue"),wl=n(t=>{if(t&&N.isSolanaNetworkID(t.networkID)){let{networkID:e,transaction:o}=t;return{networkID:e,transaction:[o]}}},"getMultichainTransaction"),Tl=n(({hasSufficientFunds:t,hasGasEstimationFailed:e,nativeTokenSymbol:o})=>e?v.t("transactionGasEstimationError"):t==="insufficient"?v.t("transactionNotEnoughNative",{nativeTokenSymbol:o}):void 0,"getNetworkFeeErrorMessage");var Tr=n(({process:t,provider:e,transactionData:o,isLoadingTransactionData:r})=>{let i=St,s=U(M=>M.amount),{data:a}=xt(j.Solana),{fungible:l,isLoadingTokens:d}=Ot({key:e?.stakePoolTokenMetadata.metadata.address||""}),{isLoading:m,hasSufficientFunds:f,transactionFees:p,networkFeeErrorMsg:g}=Ia({hasPoolTokenAccount:!!l,chainAddress:a,transactionData:o}),S=(0,Pa.useMemo)(()=>ka(i,e),[i,e]),{data:k}=pi(S),y=r||m||d,w=!y&&!!o&&f!=="insufficient"&&!g,b=Yt();return va({process:t,fungibleToStake:i,amount:s,provider:e,selectedChainAddress:a,transactionFees:p,transactionData:o,isLoading:y,canSubmit:w,priceMap:k,networkFeeErrorMsg:g,showUKDisclaimer:t==="mint"&&b})},"useLiquidStakeReviewPageProps");c();u();c();u();c();u();c();u();c();u();c();u();c();u();function bl(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}n(bl,"bytes");function wn(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}n(wn,"exists");function Ea(t,e){bl(t);let o=e.outputLen;if(t.length<o)throw new Error(`digestInto() expects output buffer of length at least ${o}`)}n(Ea,"output");c();u();var vl=n(t=>t instanceof Uint8Array,"u8a");var vr=n(t=>new DataView(t.buffer,t.byteOffset,t.byteLength),"createView"),Bt=n((t,e)=>t<<32-e|t>>>e,"rotr"),xl=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!xl)throw new Error("Non little-endian hardware is not supported");function Il(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}n(Il,"utf8ToBytes");function Tn(t){if(typeof t=="string"&&(t=Il(t)),!vl(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}n(Tn,"toBytes");var br=class{static{n(this,"Hash")}clone(){return this._cloneInto()}},cE={}.toString;function _a(t){let e=n(r=>t().update(Tn(r)).digest(),"hashC"),o=t();return e.outputLen=o.outputLen,e.blockLen=o.blockLen,e.create=()=>t(),e}n(_a,"wrapConstructor");function Pl(t,e,o,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,o,r);let i=BigInt(32),s=BigInt(4294967295),a=Number(o>>i&s),l=Number(o&s),d=r?4:0,m=r?0:4;t.setUint32(e+d,a,r),t.setUint32(e+m,l,r)}n(Pl,"setBigUint64");var xr=class extends br{static{n(this,"SHA2")}constructor(e,o,r,i){super(),this.blockLen=e,this.outputLen=o,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=vr(this.buffer)}update(e){wn(this);let{view:o,buffer:r,blockLen:i}=this;e=Tn(e);let s=e.length;for(let a=0;a<s;){let l=Math.min(i-this.pos,s-a);if(l===i){let d=vr(e);for(;i<=s-a;a+=i)this.process(d,a);continue}r.set(e.subarray(a,a+l),this.pos),this.pos+=l,a+=l,this.pos===i&&(this.process(o,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){wn(this),Ea(e,this),this.finished=!0;let{buffer:o,view:r,blockLen:i,isLE:s}=this,{pos:a}=this;o[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(r,0),a=0);for(let p=a;p<i;p++)o[p]=0;Pl(r,i-8,BigInt(this.length*8),s),this.process(r,0);let l=vr(e),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let m=d/4,f=this.get();if(m>f.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<m;p++)l.setUint32(4*p,f[p],s)}digest(){let{buffer:e,outputLen:o}=this;this.digestInto(e);let r=e.slice(0,o);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:o,buffer:r,length:i,finished:s,destroyed:a,pos:l}=this;return e.length=i,e.pos=l,e.finished=s,e.destroyed=a,i%o&&e.buffer.set(r),e}};var El=n((t,e,o)=>t&e^~t&o,"Chi"),_l=n((t,e,o)=>t&e^t&o^e&o,"Maj"),Cl=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),le=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),de=new Uint32Array(64),bn=class extends xr{static{n(this,"SHA256")}constructor(){super(64,32,8,!1),this.A=le[0]|0,this.B=le[1]|0,this.C=le[2]|0,this.D=le[3]|0,this.E=le[4]|0,this.F=le[5]|0,this.G=le[6]|0,this.H=le[7]|0}get(){let{A:e,B:o,C:r,D:i,E:s,F:a,G:l,H:d}=this;return[e,o,r,i,s,a,l,d]}set(e,o,r,i,s,a,l,d){this.A=e|0,this.B=o|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=a|0,this.G=l|0,this.H=d|0}process(e,o){for(let p=0;p<16;p++,o+=4)de[p]=e.getUint32(o,!1);for(let p=16;p<64;p++){let g=de[p-15],S=de[p-2],k=Bt(g,7)^Bt(g,18)^g>>>3,y=Bt(S,17)^Bt(S,19)^S>>>10;de[p]=y+de[p-7]+k+de[p-16]|0}let{A:r,B:i,C:s,D:a,E:l,F:d,G:m,H:f}=this;for(let p=0;p<64;p++){let g=Bt(l,6)^Bt(l,11)^Bt(l,25),S=f+g+El(l,d,m)+Cl[p]+de[p]|0,y=(Bt(r,2)^Bt(r,13)^Bt(r,22))+_l(r,i,s)|0;f=m,m=d,d=l,l=a+S|0,a=s,s=i,i=r,r=S+y|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,l=l+this.E|0,d=d+this.F|0,m=m+this.G|0,f=f+this.H|0,this.set(r,i,s,a,l,d,m,f)}roundClean(){de.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Ca=_a(()=>new bn);var La=x(Ga());var Ll=[69,107,109,106,121,122,120,100,105,53,52,51,110,99,76,56,54,116,99,97,67,65,100,117,108,79,119,121,110,86,53,68,118,54,86,67,109,73,84,117,118,48,51,118,53,101,98,76,80,98,48,88,101,57,111,108,82,71,75,72,85,71,119,68,117,116,111,117,68,117,77,55,49,88,65,106,55,97,111,74,102,77,78,106,56,119,61,61],Ir=n(t=>{let e=`${String.fromCharCode(...Ll)}||${t}`,o=Ca(Buffer.from(e));return La.default.encode(o)},"getReferralAccount");var vn=n(async({connection:t,stakePoolAddress:e,ownerAddress:o,amount:r,poolTokenAccountAddress:i})=>{let s=new A.PublicKey(e),a=new A.PublicKey(o),l=i?new A.PublicKey(i):void 0,d=new A.PublicKey(Ir(o)),{instructions:m,signers:f,solWithdrawalFee:p,stakeWithdrawalFee:g}=await hr(t,s,a,r,l,d),S=(await t.getLatestBlockhash("confirmed")).blockhash,k=new Y.VersionedTransaction(new Y.TransactionMessage({instructions:m,payerKey:a,recentBlockhash:S}).compileToV0Message());return{transaction:await Qt(k,{connection:Io(bt.Solana.Mainnet),calculators:{cost:Eo,budget:new Po(2e5,2e5)}}),signers:f,solWithdrawalFee:p,stakeWithdrawalFee:g}},"getMintPoolTokenTransaction");c();u();async function Ma({connection:t,stakePoolAddress:e,amount:o,senderAddress:r,useWithdrawSol:i}){let s=new A.PublicKey(r),a,l,d,m;if(i){let S=await fa(t,new A.PublicKey(e),s,s,o).catch(k=>{throw $.captureError(k,Q.Staking),k});a=S.instructions,l=S.signers,d=S.solWithdrawalFee,m=S.stakeWithdrawalFee}else{let S=await pa(t,new A.PublicKey(e),s,o).catch(k=>{throw $.captureError(k,Q.Staking),k});a=S.instructions,l=S.signers,d=S.solWithdrawalFee,m=S.stakeWithdrawalFee}let f=(await t.getLatestBlockhash("confirmed")).blockhash,p=new Y.VersionedTransaction(new Y.TransactionMessage({instructions:a,payerKey:s,recentBlockhash:f}).compileToV0Message());return{transaction:await Qt(p,{connection:t}),signers:l,solWithdrawalFee:d,stakeWithdrawalFee:m}}n(Ma,"getWithdrawLiquidStakeTransactionWithOptions");async function Ml({connection:t,stakePoolAddress:e,amount:o,senderAddress:r,useWithdrawSol:i}){try{let s=await Ma({connection:t,stakePoolAddress:e,amount:o,senderAddress:r,useWithdrawSol:i}),a=await t.simulateTransaction(s.transaction,{sigVerify:!1});if(a.value.err)throw new Error(`Simulation failed with useWithdrawSol: true - ${JSON.stringify(a.value.err)}`);return{...s,isWithdrawSol:i}}catch(s){$.captureError(s instanceof Error?s:new Error(String(s)),Q.Staking);try{return{...await Ma({connection:t,stakePoolAddress:e,amount:o,senderAddress:r,useWithdrawSol:!1}),isWithdrawSol:!1}}catch(a){throw $.captureError(a instanceof Error?a:new Error(String(a)),Q.Staking),a}}}n(Ml,"getWithdrawLiquidStakeTransaction");c();u();var xn=n(async({connection:t,stakePoolAddress:e,stakePubkey:o,ownerAddress:r,amount:i})=>{let s=new A.PublicKey(e),a=new A.PublicKey(r),l=new A.PublicKey(o),d=new A.PublicKey(Ir(r)),m=A.StakeProgram.withdraw({stakePubkey:l,authorizedPubkey:a,toPubkey:a,lamports:i}),[f]=m.instructions,{instructions:p,signers:g,solWithdrawalFee:S,stakeWithdrawalFee:k}=await hr(t,s,a,i,void 0,d,void 0,void 0,!1),y=[f,...p],w=(await t.getLatestBlockhash("confirmed")).blockhash,b=new Y.TransactionMessage({instructions:y,payerKey:a,recentBlockhash:w}).compileToV0Message(),E=new Y.VersionedTransaction(b);return{transaction:await Qt(E,{connection:Io(bt.Solana.Mainnet),calculators:{cost:Eo,budget:new Po(2e5,2e5)}}),signers:g,solWithdrawalFee:S,stakeWithdrawalFee:k}},"getConvertToPSOLTransaction");var Oa=n(t=>{let e=F.getConvertStakeTransaction({stakePoolAddress:t.stakePoolAddress,ownerAddress:t.ownerAddress,validatorVoteAddress:"",stakeAccountAddress:t.stakePubkey}),o=!t.disabled&&!!t.stakePoolAddress&&!!t.ownerAddress&&!!t.stakePubkey&&!!t.amount;return L({enabled:o,queryKey:e,staleTime:R({seconds:30}),async queryFn(){if(N.isSolanaNetworkID(t.networkId))try{let{transaction:r,signers:i,solWithdrawalFee:s,stakeWithdrawalFee:a}=await xn({connection:t.connection,stakePoolAddress:t.stakePoolAddress,stakePubkey:t.stakePubkey,ownerAddress:t.ownerAddress,amount:t.amount});return{networkID:t.networkId,transaction:r,signers:i,solWithdrawalFee:s,stakeWithdrawalFee:a}}catch(r){throw $.captureError(r,Q.Staking),r}throw new Error(`Unsupported networkId: ${t.networkId}`)}})},"useGetConvertToPSOLTransaction");var Ol=n((t,e,o)=>{let{data:r}=xt(j.Solana),{trackConvertApprovedByUser:i}=Nt(),s=U(M=>M.amount),a=U(M=>M.setTransactionData),l=we(),{connection:d}=ft(),{data:m,isLoading:f}=Sa({connection:d,stakePubkey:new A.PublicKey(e.stakeAccount??""),stakeAuthorityPubkey:new A.PublicKey(e.stakeAuthorityPubkey??""),authorizedPubkey:new A.PublicKey(r?.address??""),stakePoolAddress:new A.PublicKey(t?.stakePoolAddress??""),disabled:e.activationState!=="active"&&e.activationState!=="activating"}),{data:p,isLoading:g}=Oa({connection:d,networkId:t?.chainId??N.solana.mainnetID,stakePoolAddress:t?.stakePoolAddress??"",ownerAddress:r?.address??"",stakePubkey:e?.stakeAccount??"",amount:parseInt(s),disabled:e?.activationState!=="inactive"}),S=eo(e?.activationState),k=oo(e?.activationState),y=S?p:k?m:void 0,w=S?g:k?f:!1,b=Tr({process:e?.activationState==="active"?"convertDelayed":"convert",provider:t,transactionData:y,isLoadingTransactionData:w}),E=(0,Fa.useCallback)(()=>{i({provider:t,convertDetails:e,amount:s,fromAmount:b.payAsset?.amount,toAmount:b.receiveAsset?.amount,fromAmountUSD:b.payAsset?.amountUsd,toAmountUSD:b.receiveAsset?.amountUsd}),a(y),o()},[o,a,y,i,e,t,b,s]);return{...b,durationUntilEpochEnds:l,onPrimaryButtonPress:E}},"useConvertStakeAccountReviewPageProps");c();u();c();u();var Na=n((t,e)=>new X(t).div(xo(e)).toString(),"amountToUiAmountString");c();u();var Da=n(t=>t.replace(/,|\.{2,}/g,".").replace(/^[0]+/g,"0").replace(/^\./g,"0.").replace(/[^\d.]/g,""),"formatTokenAmountInputs");c();u();var Ua=n((t,e)=>e===0?new X(t):new X(t).multipliedBy(xo(e)),"uiAmountToAmount");var Rt=x(C());c();u();var Fl=2,Ba=n(({networkID:t,poolTokenMintAddress:e})=>{let o=N.getAddressType(t),{fungible:r}=Ot({key:e}),i=di(t,o),{fungible:s}=Ot({key:i}),a=q(s?.data.amount??""),l=q($o),d=q(Ze),m=q(Ze),f=q(Fl).plus(l),p=r?q(f).plus(d):q(m).plus(f).plus(d),g=q(a).minus(p),S=q.max(g,0);return{minAmount:p,maxAmount:S,balance:a}},"useMintMaxMinAmounts");var Nl=n(t=>{if(t.isLessThan(.01))return t.toString();let e=t.dp();return t.isLessThan(1)&&e&&e>1?t.toFixed(2,q.ROUND_FLOOR):parseFloat(t.toFixed(1,q.ROUND_FLOOR)).toString()},"formatInitialStakeUiAmount"),Dl=n(({goBack:t,goToReviewPage:e,showInfoPage:o,lstCaip19:r})=>{let i=St,s=U(et=>et.amount),a=U(et=>et.setAmount),l=U(et=>et.setProvider),d=i?.data.symbol??"",m=i?.data.chain.id??N.solana.mainnetID,f=i?.data.decimals??St.data.decimals,{data:p}=xt(j.Solana),{pickedLSTProvider:g}=Dt(N.solana.mainnetID),S=g(r),k=S?.stakePoolTokenMetadata.metadata.address??"";wi(p,Ai.STAKE_FUNGIBLE);let{minAmount:y,maxAmount:w,balance:b}=Ba({networkID:m,poolTokenMintAddress:k}),E=(0,Rt.useMemo)(()=>{if(s)return Na(s,f);let et=b.multipliedBy(.95),kt=q.max(q.min(et,w),y);return Nl(Pt(kt,f))},[s,b,f,w,y]),[M,B]=(0,Rt.useState)(E),H=Pt(w,f),W=Pt(y,f),G=Pt(b,f),O=Ua(M,f).toString(),nt=q(O),at=b.isLessThan(y),ot=nt.isGreaterThan(w),it=nt.isFinite(),Ct=(0,Rt.useMemo)(()=>{if(!S)return v.t("mintLiquidStakeAmountNoProviders");if(O&&at)return v.t("mintLiquidStakeAmountMinRequired",{symbol:d,amount:W});if(O&&ot)return v.t("mintLiquidStakeAmountInsufficientBalance")},[S,O,at,ot,W,d]),Kt=it&&!Ct,Xt=(0,Rt.useMemo)(()=>{if(!S)return;let et=ke(Number.parseFloat(S.apy)),{address:kt,name:V,symbol:Lt,logoURI:xe}=S.stakePoolTokenMetadata.metadata,yo=q(1).dividedBy(q(S.convertRatio)),ko=`1 ${d} \u2248 ${he(yo)} ${Lt}`;return{identifier:kt,apy:et,name:V,symbol:Lt,rate:ko,logoURI:xe}},[S,d]),Zt=(0,Rt.useCallback)(()=>{B(String(H))},[H]),te=(0,Rt.useCallback)(et=>{let kt=Da(et);Jo(kt,f??9)&&B(kt)},[f]),ee=(0,Rt.useCallback)(()=>{l(S),a(O),e()},[S,O,e,a,l]),oe=(0,Rt.useCallback)(()=>{a(""),t()},[a,t]);return{amount:M,amountError:Ct,balance:G,symbol:d,title:v.t("liquidStakeMintStakeSOL"),poolToken:Xt,canSubmit:Kt,onBack:oe,onContinue:ee,onChangeAmount:te,onSetMax:Zt,onInfoPress:r===D?o:void 0}},"useMintLiquidStakeAmountProps");c();u();var me=x(C());var Pr=null,Ul=n(t=>{if(!Pr&&t){let e="liquidStake";Pr=new _e(t,e)}if(!Pr)throw new Error("liquidStakeAnalytics was not properly configured");return Pr},"getLiquidStakeSequenceAnalytics"),Vt=n(()=>{let t=qt(),e=Ul(t),o=n(p=>{switch(p){case D:return"Phantom Staked SOL";case se:return"Jito Staked SOL";default:return}},"getTokenNameFromCaip19"),r=n(p=>{switch(p){case D:return"PSOL";case se:return"JITOSOL";default:return}},"getTokenSymbolFromCaip19"),i=(0,me.useCallback)(({provider:p,entryPoint:g,testVariant:S})=>{t.capture("liquidStakingMarketingPageSeen",{data:{lstCaip19:p,lstSymbol:r(p),entryPoint:g,testVariant:S??""}})},[t]),s=(0,me.useCallback)(({lstCaip19:p,testVariant:g,entryPoint:S})=>{t.capture("liquidStakingMarketingPagePrimaryButtonClicked",{data:{stake:{caip19:p,lstSymbol:r(p),testVariant:g,entryPoint:S}}})},[t]),a=(0,me.useCallback)(p=>{let g=p?o(p):void 0,S=p?r(p):void 0;t.capture("liquidStakingMintModalContinueClicked",{data:{stake:{caip19:p,token:g,tokenSymbol:S}}})},[t]),l=(0,me.useCallback)(({provider:p,payAmount:g,receiveAmount:S,payAmountUSD:k,receiveAmountUSD:y,payAssetTitle:w,providerName:b,receiveAssetTitle:E})=>{t.capture("liquidStakingMintApprovedByUser",{data:{stake:{stakePoolAddress:p?.stakePoolAddress,token:p?.stakePoolTokenMetadata.metadata.name,apy:p?.apy,convertRatio:p?.convertRatio,caip19:p?.stakePoolTokenMetadata.caip19,payAmount:g,receiveAmount:S,payAmountUSD:k,receiveAmountUSD:y,payAssetTitle:w,receiveAssetTitle:E,providerName:b}}})},[t]),d=(0,me.useCallback)((p,g)=>{e.submittedTransaction(p,{chainType:j.Solana,chainName:pt.Solana,networkId:"mainnet",method:"signAndSendTransaction",walletAddress:g})},[e]),m=(0,me.useCallback)(({provider:p,amount:g})=>{t.capture("liquidStakingMintSuccess",{data:{stake:{apy:p?.apy,convertRatio:p?.convertRatio,caip19:p?.stakePoolTokenMetadata.caip19,stakePoolAddress:p?.stakePoolAddress,token:p?.stakePoolTokenMetadata.metadata.name,totalAmount:g}}})},[t]),f=(0,me.useCallback)(p=>{t.capture("liquidStakingMintFailed",{data:{stake:{amount:p}}})},[t]);return{trackMintModalContinue:a,trackMarketingModalSeen:i,trackMarketingModalContinue:s,trackMintSubmitted:d,trackMintSuccess:m,trackMintFailed:f,trackMintApprovedByUser:l}},"useMintStakeAnalytics");c();u();var gt=x(C());var Bl="https://www.jito.network/defi/";function Rl({poolTokenSymbol:t,txHash:e,txError:o,confirmationStatus:r,showUKDisclaimer:i,onDismiss:s,openExternalLink:a}){let l={title:v.t("commandClose"),onPress:s},d={txHash:e,txHashTitle:v.t("commandViewTransaction")};return o?{type:"error",title:v.t("mintStakeStatusErrorTitle"),message:v.t("mintStakeStatusErrorMessage",{poolTokenSymbol:t}),...d,primaryButton:l,showUKDisclaimer:i,openExternalLink:a}:r==="confirmed"?{type:"success",title:v.t("mintStakeStatusSuccessTitle"),message:"",...d,primaryButton:l,showUKDisclaimer:i,openExternalLink:a}:{type:"loading",title:v.t("mintStakeStatusLoadingTitle"),message:v.t("mintStakeStatusLoadingMessage"),...d,primaryButton:l,showUKDisclaimer:i,openExternalLink:a}}n(Rl,"getStatusPageProps");var Vl=n((t,e)=>{let o=sr(),[r,i]=(0,gt.useState)("loading"),[s,a]=(0,gt.useState)(),[l,d]=(0,gt.useState)(),{trackMintSubmitted:m,trackMintSuccess:f,trackMintFailed:p}=Vt(),{usageState:g,setUsageState:S}=Re(),k=U(V=>V.provider),y=U(V=>V.setTransactionData),w=U(V=>V.amount),b=St,E=k?.stakePoolTokenMetadata.metadata.symbol??"",M=k?.stakePoolTokenMetadata.metadata.address??"",{data:B}=ie(),H=B?.type===fe.Ledger,G=(0,gt.useMemo)(()=>(B?.addresses??[]).find(V=>V.networkID===b?.data.chain.id),[b?.data.chain.id,B?.addresses])?.addressType??j.Solana,{fungible:O,isLoadingTokens:nt}=Ot({key:M}),at=(0,gt.useCallback)(V=>{m(V.id),a(V),g.mint||S({mint:!0})},[S,m,g.mint]),ot=(0,gt.useCallback)(V=>{p(w);let Lt=kr(V);d(Lt)},[p,w]),it=(0,gt.useMemo)(()=>({topLeft:{text:v.t("mintLiquidStakePendingTitle")}}),[]),{executeLiquidStake:Ct,isReadyToExecute:Kt}=yr({isLoadingPoolToken:nt,pendingActivityRow:it,onTransactionSubmitted:at,onTransactionFailed:ot,activityType:Ce.DelegateStake}),Xt=(0,gt.useCallback)(()=>{f({amount:w,provider:k}),y(void 0),o()},[f,w,k,y,o]),{isSuccess:Zt,isError:te,error:ee}=Lo(Xt,s);(0,gt.useEffect)(()=>{Zt?i("confirmed"):te&&(i("error"),d(ee),p(w))},[Zt,p,w,te,ee,s]);let oe=Sr({txReceipt:s,isTxError:te,poolTokenFungible:O,invalidateQueries:o,dismissLiquidStaking:t}),et=Yt(),kt=(0,gt.useMemo)(()=>Rl({poolTokenSymbol:E,txHash:s?.id,txError:l,confirmationStatus:r,showUKDisclaimer:et,onDismiss:oe,openExternalLink:e}),[E,s?.id,l,r,oe,e,et]);return{addressType:G,isLedger:H,isReadyToExecute:Kt,statusPageProps:kt,learnMoreLink:Bl,txError:l,executeLiquidStake:Ct,isJitoSOL:Ar(k),isPSOL:wr(k)}},"useMintLiquidStakeStatusPageProps");c();u();var So=x(C());function Kl({navigateToMintLiquidStakeAmountPage:t,navigateBack:e,entryPoint:o}){let{trackMarketingModalContinue:r}=Vt(),i=ut(P.StakingWelcome),s=Kn("psol-popup-copy-test"),a=(0,So.useCallback)(()=>{r({lstCaip19:D,testVariant:s,entryPoint:o}),t(D),i()},[t,r,i,s,o]),l=(0,So.useCallback)(()=>{e(),i()},[e,i]),{t:d}=J(),m={title:d("liquidStakingInfoPageStillEarningZero"),description:d("liquidStakingInfoPageConvertYourSOL"),primaryButtonText:d("liquidStakingInfoPageConvertYourSOLButton")},f={title:d("liquidStakingInfoPageEarnUpTo9APY"),description:d("liquidStakingInfoPageConvertYourSOL2"),primaryButtonText:d("liquidStakingInfoPageStartEarning")},p=s==="test1"?m:s==="test2"?f:m;return(0,So.useLayoutEffect)(()=>()=>void i(),[i]),{onPrimaryButtonPress:a,onClose:l,viewState:p}}n(Kl,"useMintLiquidStakeMarketingProps");c();u();c();u();var Va=x(C());c();u();var Ra=n(t=>{let e=F.getMintTokenTransaction({stakePoolAddress:t.stakePoolAddress,ownerAddress:t.ownerAddress,amount:t.amount,poolTokenAccountAddress:t.poolTokenAccountAddress}),o=!!t.stakePoolAddress&&!!t.ownerAddress&&!!t.amount;return L({enabled:o,queryKey:e,staleTime:K.Never,async queryFn(){if(N.isSolanaNetworkID(t.networkId))try{let{transaction:r,signers:i,solWithdrawalFee:s,stakeWithdrawalFee:a}=await vn(t);return{networkID:t.networkId,transaction:r,signers:i,solWithdrawalFee:s,stakeWithdrawalFee:a}}catch(r){throw $.captureError(r,Q.Staking),r}throw new Error(`Unsupported networkId: ${t.networkId}`)}})},"useGetMintPoolTokenTransaction");var Wl=n((t,e)=>{let o=U(S=>S.amount),r=U(S=>S.setTransactionData),{data:i}=xt(j.Solana),{connection:s}=ft(),{fungible:a}=Ot({key:t?.stakePoolTokenMetadata.metadata.address||""}),l=a?mi(a):void 0,{trackMintApprovedByUser:d}=Vt(),{data:m,isPending:f}=Ra({amount:X(o).toNumber(),connection:s,networkId:t?.chainId??N.solana.mainnetID,stakePoolAddress:t?.stakePoolAddress??"",ownerAddress:i?.address??"",poolTokenAccountAddress:l}),p=Tr({provider:t,process:"mint",transactionData:m,isLoadingTransactionData:f}),g=(0,Va.useCallback)(()=>{d({provider:t,payAmount:p.payAsset?.amount,receiveAmount:p.receiveAsset?.amount,payAmountUSD:p.payAsset?.amountUsd,receiveAmountUSD:p.receiveAsset?.amountUsd,payAssetTitle:p.payAsset?.title,receiveAssetTitle:p.receiveAsset?.title,providerName:p.providerName}),r(m),e()},[d,t,p.payAsset?.amount,p.payAsset?.amountUsd,p.payAsset?.title,p.receiveAsset?.amount,p.receiveAsset?.amountUsd,p.receiveAsset?.title,p.providerName,r,m,e]);return{...p,onPrimaryButtonPress:g}},"useMintLiquidStakeReviewPageProps");c();u();var go=x(C());var ql=n((t,e)=>{let{navigateToStake:o,navigateToUnstake:r,navigateToExternalLink:i}=t,{trackMintModalContinue:s}=Vt(),a=Ht(D),l=At("enable-psol-staking"),d=At("enable-deposit-psol-with-kamino-link"),p=!e||e===ci?l&&a?D:se:e,g=(0,go.useCallback)(()=>{o(p)},[o,p]),S=(0,go.useCallback)(()=>{s(p),o(p)},[o,s,p]),k=(0,go.useCallback)(()=>{p===D?r():i(Jr)},[r,i,p]),y=(0,go.useCallback)(()=>{i(tn)},[i]),w=mn({method:"mint",goToInfoPage:g,goToInitFlowPage:S});return Ht(p)?{isSupported:!0,onStake:w,onUnstake:k,onDepositWithKamino:d?y:void 0}:{isSupported:!1,onStake:void 0,onUnstake:void 0,onDepositWithKamino:void 0}},"useLSTMintActions");c();u();var ve=x(Mt());var jl="https://phantom.com/en-GB/uk-risk-summary";function In({navigateToExternalLink:t,paddingTop:e,marginX:o,paddingX:r}){let{t:i}=J();return(0,ve.jsx)(ct,{backgroundColor:"brandMidnight",paddingX:r??"screen",marginX:o,paddingBottom:12,style:{paddingTop:(e??0)+4},gap:8,children:(0,ve.jsx)(Z,{children:(0,ve.jsxs)(ge,{children:[(0,ve.jsx)(Z,{font:"captionSemibold",color:"textBase",children:i("stakingUKDisclaimerPart1")})," ",(0,ve.jsx)(Z,{font:"captionSemibold",color:"textBase",onPress:n(()=>t(jl),"onPress"),style:{textDecorationLine:"underline"},children:i("stakingUKDisclaimerTake2Mins")})]})})})}n(In,"UKDisclaimerCard");c();u();var Pn=x(C());function zl({navigateToMintLiquidStakeAmountPage:t,navigateBack:e}){let{trackMintModalContinue:o}=Vt(),r=(0,Pn.useCallback)(()=>{o(D),t(D)},[t,o]),i=(0,Pn.useCallback)(()=>{e()},[e]),s={imageUrl:"https://assets.phantom.app/assets/metadata/PSOL.png",title:v.t("mintPSOLInfoPageTitle"),features:[{icon:"InfoCircle",title:v.t("mintPSOLFeature1Title"),description:v.t("mintPSOLFeature1Description")},{icon:"TrendingUp",title:v.t("mintPSOLFeature2Title"),description:v.t("mintPSOLFeature2Description")},{icon:"ShieldVerified",title:v.t("mintPSOLFeature3Title"),description:v.t("mintPSOLFeature3Description")}],primaryButtonText:v.t("gotIt")};return{onPrimaryButtonPress:r,onClose:i,viewState:s}}n(zl,"useMintLiquidStakeUKInfoProps");c();u();var yt=x(Mt());var Wa=x(C());c();u();var lt=x(Mt());function Ka({marginTop:t}){let{t:e}=J();return(0,lt.jsxs)(ct,{marginTop:t,children:[(0,lt.jsx)(Cr,{content:(0,lt.jsx)(ct,{padding:16,children:(0,lt.jsx)(Z,{children:e("stakingUKDisclaimerPastPerformanceBody")})}),children:(0,lt.jsx)(Z,{font:"caption",color:"brandYellowMoon",children:e("stakingUKDisclaimerPastPerformance")})}),(0,lt.jsx)(Z,{children:(0,lt.jsxs)(ge,{children:[(0,lt.jsx)(Z,{font:"caption",color:"textDiminished",children:e("stakingUKDisclaimerExchangeRates")})," "]})}),(0,lt.jsx)(Cr,{content:(0,lt.jsx)(ct,{padding:16,children:(0,lt.jsx)(Z,{children:e("stakingUKDisclosuresMarketDataBody")})}),children:(0,lt.jsx)(Z,{font:"caption",color:"brandPrimary",children:e("stakingUKDisclaimerDisclosures")})}),(0,lt.jsx)(Z,{font:"caption",color:"textDiminished",marginTop:24,children:e("stakingUKDisclaimerApproval")})]})}n(Ka,"UKFooterDisclaimer");var Hl={InfoCircle:vo.InfoCircle,TrendingUp:vo.TrendingUp,ShieldVerified:vo.ShieldVerified};function Gl(t){return Wa.default.createElement(Hl[t],{size:24})}n(Gl,"getIcon");function Ql({viewState:t,openLink:e,onPastPerformancePress:o,onDisclosuresPress:r}){let{features:i,title:s,imageUrl:a}=t;return(0,yt.jsxs)(ct,{flex:1,backgroundColor:"areaBase",borderRadius:"base",width:"100%",maxWidth:400,children:[(0,yt.jsx)(In,{marginX:"-16",paddingX:12,paddingTop:8,navigateToExternalLink:e}),(0,yt.jsx)(ct,{alignItems:"center",padding:24,marginY:16,children:(0,yt.jsx)(Zn,{src:a,size:100})}),(0,yt.jsx)(Z,{color:"white",font:"title1Bold",marginBottom:16,align:"center",children:s}),(0,yt.jsx)(ct,{gap:"list",marginBottom:"screen",children:i.map(l=>(0,yt.jsxs)(ct,{direction:"row",alignItems:"flex-start",marginBottom:16,children:[(0,yt.jsx)(ct,{width:24,height:24,marginRight:"screen",alignItems:"center",justifyContent:"center",children:Gl(l.icon)}),(0,yt.jsxs)(ct,{flex:1,children:[(0,yt.jsx)(Z,{color:"white",font:"bodySemibold",marginBottom:2,children:l.title}),(0,yt.jsx)(Z,{color:"textDiminished",font:"caption",children:l.description})]})]},l.title))}),(0,yt.jsx)(Ka,{marginTop:0,showPastPerformanceInline:!0,onPastPerformancePress:o,onDisclosuresPress:r})]})}n(Ql,"StakeUKInfoView");c();u();c();u();var $l=[Ft.supportedTokens,Ft.featureUsed,an],Yl=n(t=>{let e=String(t.queryKey[1]);return $l.includes(e)},"stakingShouldDehydrateQueryPredicate");export{Me as a,Et as b,He as c,P as d,No as e,ec as f,Vr as g,bc as h,vc as i,ht as j,uc as k,Oo as l,Ja as m,Ge as n,ye as o,ut as p,lc as q,dc as r,mc as s,Bo as t,ge as u,Sc as v,wc as w,ji as x,Uh as y,Bh as z,OS as A,FS as B,ke as C,Na as D,Da as E,Ua as F,Dc as G,Uc as H,St as I,Bc as J,Zr as K,se as L,$o as M,Ze as N,Ue as O,Rc as P,cg as Q,eo as R,oo as S,us as T,F as U,Jo as V,un as W,U as X,Yl as Y,ae as Z,K as _,ks as $,no as aa,ln as ba,Nt as ca,gu as da,yu as ea,ku as fa,Fs as ga,wu as ha,bu as ia,Eu as ja,_u as ka,nr as la,Ht as ma,Dt as na,Uu as oa,mn as pa,Mu as qa,Ou as ra,Yt as sa,Vu as ta,we as ua,Xs as va,Ku as wa,ka as xa,Aa as ya,PP as za,Ia as Aa,ta as Ba,zx as Ca,Ml as Da,Ol as Ea,yr as Fa,Sl as Ga,Dl as Ha,Vt as Ia,Wl as Ja,Vl as Ka,Kl as La,ql as Ma,In as Na,zl as Oa,Ka as Pa,Ql as Qa};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-2UWPPO5V.js.map
