import{$ as pr,$a as sf,$d as km,A as W0,B as nA,Bb as uA,Bc as ee,Cc as G,D as $0,E as iA,Eb as pm,F as G0,Fb as Kt,Fc as Z,Fd as Im,G as Z0,Gb as wc,Gd as Ec,I as ia,Ib as mm,J as J0,K as of,Kb as af,L as Y0,Lb as pe,Lc as cf,M as xe,N as X,O as Q0,Oc as Sc,P as X0,Q as em,Qc as xm,R as tm,S as si,Sb as gm,Ta as im,Tc as sa,Vd as sr,X as ts,Xd as Bi,Y as _,Yd as lA,Zd as _m,_ as oa,_a as om,_d as Ki,ab as nr,ae as uf,ba as rm,bb as Ot,be as Pm,cb as gc,ce as lf,db as po,dc as ym,dd as Ct,de as Bm,eb as sm,ec as rs,ee as Om,fb as B,fc as vm,fd as Qe,fe as Mc,gb as am,hb as cm,he as $t,ia as Bt,ib as um,id as or,jb as oA,jc as bm,kb as Pi,kc as xc,lb as lm,mb as fm,mc as Wt,nd as an,ob as sA,oc as Ac,od as ns,pa as nm,qa as on,qb as kr,qc as wm,ra as sn,rb as dm,rc as mo,sb as ot,tb as yc,tc as Xe,ub as ir,v as na,vb as vc,vd as Am,w as rA,wb as hm,wd as Sm,x as q0,xb as bc,xc as St,xd as Em,y as H0,yb as aA,yd as Mm,zb as cA,zc as Ft,zd as Tm}from"./chunk-L3JU23Z5.js";import{a as D0,b as eA,d as Yo,f as tA,h as Qo,o as V0,q as hc,r as pc,s as mc,w as L0,x as F0}from"./chunk-5HNKNX3S.js";import{Q as fA,a as At,b as dc,l as xn,q as Oi}from"./chunk-R3MCCTIW.js";import{c as z0,h as dt,k as es}from"./chunk-VL3IRAUM.js";import{g as f,h as Pt,i as Xo,l as j0,n as rr}from"./chunk-FA7LVEFF.js";import{a as i,d as he,e as Q1,g as ue,i as h,j as M,k as X1,l as nn,m as Buffer,n as p}from"./chunk-WKJYWAXG.js";var fs=he(Kc=>{"use strict";h();p();Object.defineProperty(Kc,"__esModule",{value:!0});Kc.AppAuthError=void 0;var VA=function(){function e(t,r){this.message=t,this.extras=r}return i(e,"AppAuthError"),e}();Kc.AppAuthError=VA});var Cc=he(En=>{"use strict";h();p();Object.defineProperty(En,"__esModule",{value:!0});En.DefaultCrypto=En.textEncodeLite=En.urlSafe=En.bufferToString=void 0;var LA=X1(),Zm=fs(),Jm=typeof self<"u"&&!!self.crypto,FA=Jm&&!!self.crypto.subtle,bf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function Ym(e){for(var t=[],r=0;r<e.byteLength;r+=1){var n=e[r]%bf.length;t.push(bf[n])}return t.join("")}i(Ym,"bufferToString");En.bufferToString=Ym;function Qm(e){var t=LA.fromByteArray(new Uint8Array(e));return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}i(Qm,"urlSafe");En.urlSafe=Qm;function Xm(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}i(Xm,"textEncodeLite");En.textEncodeLite=Xm;var jA=function(){function e(){}return i(e,"DefaultCrypto"),e.prototype.generateRandom=function(t){var r=new Uint8Array(t);if(Jm)self.crypto.getRandomValues(r);else for(var n=0;n<t;n+=1)r[n]=Math.random()*bf.length|0;return Ym(r)},e.prototype.deriveChallenge=function(t){return t.length<43||t.length>128?Promise.reject(new Zm.AppAuthError("Invalid code length.")):FA?new Promise(function(r,n){self.crypto.subtle.digest("SHA-256",Xm(t)).then(function(o){return r(Qm(new Uint8Array(o)))},function(o){return n(o)})}):Promise.reject(new Zm.AppAuthError("window.crypto.subtle is unavailable."))},e}();En.DefaultCrypto=jA});var wf=he(mr=>{"use strict";h();p();Object.defineProperty(mr,"__esModule",{value:!0});mr.IS_PROFILE=mr.IS_LOG=mr.setFlag=mr.Flags=void 0;mr.Flags={IS_LOG:!0,IS_PROFILE:!1};function zA(e,t){mr.Flags[e]=t}i(zA,"setFlag");mr.setFlag=zA;mr.IS_LOG=mr.Flags.IS_LOG,mr.IS_PROFILE=mr.Flags.IS_PROFILE});var ga=he(Ui=>{"use strict";h();p();var xf=Ui&&Ui.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,a;n<o;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(Ui,"__esModule",{value:!0});Ui.profile=Ui.log=void 0;var eg=wf();function Af(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(eg.Flags.IS_LOG){var n=t?t.length:0;n>0?console.log.apply(console,xf([e],t,!1)):console.log(e)}}i(Af,"log");Ui.log=Af;var qA=typeof self<"u"&&!!self.performance&&!!console.profile;function HA(e,t,r){return eg.Flags.IS_PROFILE?WA(e,t,r):r}i(HA,"profile");Ui.profile=HA;function WA(e,t,r){var n=r.value,o=n.name;return o||(o="anonymous function"),qA?r.value=function(a){console.profile(o);var l=self.performance.now(),d=n.call.apply(n,xf([this||self],a,!1)),g=self.performance.now()-l;return console.log("".concat(o," took ").concat(g," ms")),console.profileEnd(),d}:r.value=function(a){Af("Profile start ".concat(o));var l=Date.now(),d=n.call.apply(n,xf([this||self],a,!1)),g=Date.now()-l;return Af("Profile end ".concat(o," took ").concat(g," ms.")),d},r}i(WA,"performProfile")});var Sf=he(Rc=>{"use strict";h();p();Object.defineProperty(Rc,"__esModule",{value:!0});Rc.AuthorizationRequest=void 0;var $A=Cc(),GA=ga(),ZA=10,JA=i(function(e){return e.generateRandom(ZA)},"newState"),YA=function(){function e(t,r,n){r===void 0&&(r=new $A.DefaultCrypto),n===void 0&&(n=!0),this.crypto=r,this.usePkce=n,this.clientId=t.client_id,this.redirectUri=t.redirect_uri,this.scope=t.scope,this.responseType=t.response_type||e.RESPONSE_TYPE_CODE,this.state=t.state||JA(r),this.extras=t.extras,this.internal=t.internal}return i(e,"AuthorizationRequest"),e.prototype.setupCodeVerifier=function(){var t=this;if(this.usePkce){var r=this.crypto.generateRandom(128),n=this.crypto.deriveChallenge(r).catch(function(o){(0,GA.log)("Unable to generate PKCE challenge. Not using PKCE",o)});return n.then(function(o){o&&(t.internal=t.internal||{},t.internal.code_verifier=r,t.extras=t.extras||{},t.extras.code_challenge=o,t.extras.code_challenge_method="S256")})}else return Promise.resolve()},e.prototype.toJson=function(){var t=this;return this.setupCodeVerifier().then(function(){return{response_type:t.responseType,client_id:t.clientId,redirect_uri:t.redirectUri,scope:t.scope,state:t.state,extras:t.extras,internal:t.internal}})},e.RESPONSE_TYPE_TOKEN="token",e.RESPONSE_TYPE_CODE="code",e}();Rc.AuthorizationRequest=YA});var tg=he(Nc=>{"use strict";h();p();Object.defineProperty(Nc,"__esModule",{value:!0});Nc.requireValidUrl=void 0;var QA=fs();function XA(e){try{return new URL(e),e}catch{throw new QA.AppAuthError("Invalid input url ".concat(e))}}i(XA,"requireValidUrl");Nc.requireValidUrl=XA});var Mf=he(li=>{"use strict";h();p();Object.defineProperty(li,"__esModule",{value:!0});li.AuthorizationRequestHandler=li.BUILT_IN_PARAMETERS=li.AuthorizationNotifier=void 0;var Ef=ga(),eS=tg(),tS=function(){function e(){this.listener=null}return i(e,"AuthorizationNotifier"),e.prototype.setAuthorizationListener=function(t){this.listener=t},e.prototype.onAuthorizationComplete=function(t,r,n){this.listener&&this.listener(t,r,n)},e}();li.AuthorizationNotifier=tS;li.BUILT_IN_PARAMETERS=["redirect_uri","client_id","response_type","state","scope"];var rS=function(){function e(t,r){this.utils=t,this.crypto=r,this.notifier=null}return i(e,"AuthorizationRequestHandler"),e.prototype.buildRequestUrl=function(t,r){var n={redirect_uri:r.redirectUri,client_id:r.clientId,response_type:r.responseType,state:r.state,scope:r.scope};if(r.extras)for(var o in r.extras)r.extras.hasOwnProperty(o)&&li.BUILT_IN_PARAMETERS.indexOf(o)<0&&(n[o]=r.extras[o]);var a=this.utils.stringify(n),l=(0,eS.requireValidUrl)(t.authorizationEndpoint),d="".concat(l,"?").concat(a);return d},e.prototype.completeAuthorizationRequestIfPossible=function(){var t=this;return(0,Ef.log)("Checking to see if there is an authorization response to be delivered."),this.notifier||(0,Ef.log)(`Notifier is not present on AuthorizationRequest handler.
          No delivery of result will be possible`),this.completeAuthorizationRequest().then(function(r){r||(0,Ef.log)("No result is available yet."),r&&t.notifier&&t.notifier.onAuthorizationComplete(r.request,r.response,r.error)})},e.prototype.setAuthorizationNotifier=function(t){return this.notifier=t,this},e}();li.AuthorizationRequestHandler=rS});var Tf=he(ds=>{"use strict";h();p();Object.defineProperty(ds,"__esModule",{value:!0});ds.AuthorizationError=ds.AuthorizationResponse=void 0;var nS=function(){function e(t){this.code=t.code,this.state=t.state}return i(e,"AuthorizationResponse"),e.prototype.toJson=function(){return{code:this.code,state:this.state}},e}();ds.AuthorizationResponse=nS;var iS=function(){function e(t){this.error=t.error,this.errorDescription=t.error_description,this.errorUri=t.error_uri,this.state=t.state}return i(e,"AuthorizationError"),e.prototype.toJson=function(){return{error:this.error,error_description:this.errorDescription,error_uri:this.errorUri,state:this.state}},e}();ds.AuthorizationError=iS});var Dc=he(Br=>{"use strict";h();p();var _f=Br&&Br.__extends||function(){var e=i(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}i(n,"__"),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Br,"__esModule",{value:!0});Br.TestRequestor=Br.FetchRequestor=Br.JQueryRequestor=Br.Requestor=void 0;var If=fs(),Uc=function(){function e(){}return i(e,"Requestor"),e}();Br.Requestor=Uc;var oS=function(e){_f(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return i(t,"JQueryRequestor"),t.prototype.xhr=function(r){var n=$.ajax(r);return new Promise(function(o,a){n.then(function(l,d,g){o(l)},function(l,d,g){a(new If.AppAuthError(g))})})},t}(Uc);Br.JQueryRequestor=oS;var sS=function(e){_f(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return i(t,"FetchRequestor"),t.prototype.xhr=function(r){if(!r.url)return Promise.reject(new If.AppAuthError("A URL must be provided."));var n=new URL(r.url),o={};if(o.method=r.method,o.mode="cors",r.data)if(r.method&&r.method.toUpperCase()==="POST")o.body=r.data;else{var a=new URLSearchParams(r.data);a.forEach(function(g,A){n.searchParams.append(A,g)})}if(o.headers={},r.headers)for(var l in r.headers)r.headers.hasOwnProperty(l)&&(o.headers[l]=r.headers[l]);var d=r.dataType&&r.dataType.toLowerCase()==="json";return d&&(o.headers.Accept="application/json, text/javascript, */*; q=0.01"),fetch(n.toString(),o).then(function(g){if(g.status>=200&&g.status<300){var A=g.headers.get("content-type");return d||A&&A.indexOf("application/json")!==-1?g.json():g.text()}else return Promise.reject(new If.AppAuthError(g.status.toString(),g.statusText))})},t}(Uc);Br.FetchRequestor=sS;var aS=function(e){_f(t,e);function t(r){var n=e.call(this)||this;return n.promise=r,n}return i(t,"TestRequestor"),t.prototype.xhr=function(r){return this.promise},t}(Uc);Br.TestRequestor=aS});var rg=he(Vc=>{"use strict";h();p();Object.defineProperty(Vc,"__esModule",{value:!0});Vc.AuthorizationServiceConfiguration=void 0;var cS=Dc(),uS=".well-known",lS="openid-configuration",fS=function(){function e(t){this.authorizationEndpoint=t.authorization_endpoint,this.tokenEndpoint=t.token_endpoint,this.revocationEndpoint=t.revocation_endpoint,this.userInfoEndpoint=t.userinfo_endpoint,this.endSessionEndpoint=t.end_session_endpoint}return i(e,"AuthorizationServiceConfiguration"),e.prototype.toJson=function(){return{authorization_endpoint:this.authorizationEndpoint,token_endpoint:this.tokenEndpoint,revocation_endpoint:this.revocationEndpoint,end_session_endpoint:this.endSessionEndpoint,userinfo_endpoint:this.userInfoEndpoint}},e.fetchFromIssuer=function(t,r){var n="".concat(t,"/").concat(uS,"/").concat(lS),o=r||new cS.JQueryRequestor;return o.xhr({url:n,dataType:"json",method:"GET"}).then(function(a){return new e(a)})},e}();Vc.AuthorizationServiceConfiguration=fS});var Fc=he(Lc=>{"use strict";h();p();Object.defineProperty(Lc,"__esModule",{value:!0});Lc.BasicQueryStringUtils=void 0;var dS=function(){function e(){}return i(e,"BasicQueryStringUtils"),e.prototype.parse=function(t,r){return r?this.parseQueryString(t.hash):this.parseQueryString(t.search)},e.prototype.parseQueryString=function(t){var r={};t=t.trim().replace(/^(\?|#|&)/,"");for(var n=t.split("&"),o=0;o<n.length;o+=1){var a=n[o],l=a.split("=");if(l.length>=2){var d=decodeURIComponent(l.shift()),g=l.length>0?l.join("="):null;g&&(r[d]=decodeURIComponent(g))}}return r},e.prototype.stringify=function(t){var r=[];for(var n in t)t.hasOwnProperty(n)&&t[n]&&r.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t[n])));return r.join("&")},e}();Lc.BasicQueryStringUtils=dS});var kf=he(Di=>{"use strict";h();p();var hS=Di&&Di.__extends||function(){var e=i(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}i(n,"__"),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Di,"__esModule",{value:!0});Di.LocalStorageBackend=Di.StorageBackend=void 0;var ng=function(){function e(){}return i(e,"StorageBackend"),e}();Di.StorageBackend=ng;var pS=function(e){hS(t,e);function t(r){var n=e.call(this)||this;return n.storage=r||self.localStorage,n}return i(t,"LocalStorageBackend"),t.prototype.getItem=function(r){var n=this;return new Promise(function(o,a){var l=n.storage.getItem(r);o(l||null)})},t.prototype.removeItem=function(r){var n=this;return new Promise(function(o,a){n.storage.removeItem(r),o()})},t.prototype.clear=function(){var r=this;return new Promise(function(n,o){r.storage.clear(),n()})},t.prototype.setItem=function(r,n){var o=this;return new Promise(function(a,l){o.storage.setItem(r,n),a()})},t}(ng);Di.LocalStorageBackend=pS});var sg=he(hs=>{"use strict";h();p();var mS=hs&&hs.__extends||function(){var e=i(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}i(n,"__"),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(hs,"__esModule",{value:!0});hs.RedirectRequestHandler=void 0;var gS=Sf(),yS=Mf(),ig=Tf(),vS=Cc(),jc=ga(),bS=Fc(),wS=kf(),Pf=i(function(e){return"".concat(e,"_appauth_authorization_request")},"authorizationRequestKey"),og=i(function(e){return"".concat(e,"_appauth_authorization_service_configuration")},"authorizationServiceConfigurationKey"),Bf="appauth_current_authorization_request",xS=function(e){mS(t,e);function t(r,n,o,a){r===void 0&&(r=new wS.LocalStorageBackend),n===void 0&&(n=new bS.BasicQueryStringUtils),o===void 0&&(o=self.location),a===void 0&&(a=new vS.DefaultCrypto);var l=e.call(this,n,a)||this;return l.storageBackend=r,l.locationLike=o,l}return i(t,"RedirectRequestHandler"),t.prototype.performAuthorizationRequest=function(r,n){var o=this,a=this.crypto.generateRandom(10),l=Promise.all([this.storageBackend.setItem(Bf,a),n.toJson().then(function(d){return o.storageBackend.setItem(Pf(a),JSON.stringify(d))}),this.storageBackend.setItem(og(a),JSON.stringify(r.toJson()))]);l.then(function(){var d=o.buildRequestUrl(r,n);(0,jc.log)("Making a request to ",n,d),o.locationLike.assign(d)})},t.prototype.completeAuthorizationRequest=function(){var r=this;return this.storageBackend.getItem(Bf).then(function(n){return n?r.storageBackend.getItem(Pf(n)).then(function(o){return JSON.parse(o)}).then(function(o){return new gS.AuthorizationRequest(o)}).then(function(o){var a="".concat(r.locationLike.origin).concat(r.locationLike.pathname),l=r.utils.parse(r.locationLike,!0),d=l.state,g=l.code,A=l.error;(0,jc.log)("Potential authorization request ",a,l,d,g,A);var T=d===o.state,I=null,k=null;if(T){if(A){var K=l.error_uri,C=l.error_description;k=new ig.AuthorizationError({error:A,error_description:C,error_uri:K,state:d})}else I=new ig.AuthorizationResponse({code:g,state:d});return Promise.all([r.storageBackend.removeItem(Bf),r.storageBackend.removeItem(Pf(n)),r.storageBackend.removeItem(og(n))]).then(function(){return(0,jc.log)("Delivering authorization response"),{request:o,response:I,error:k}})}else return(0,jc.log)("Mismatched request (state and request_uri) dont match."),Promise.resolve(null)}):null})},t}(yS.AuthorizationRequestHandler);hs.RedirectRequestHandler=xS});var ag=he(zc=>{"use strict";h();p();Object.defineProperty(zc,"__esModule",{value:!0});zc.RevokeTokenRequest=void 0;var AS=function(){function e(t){this.token=t.token,this.tokenTypeHint=t.token_type_hint,this.clientId=t.client_id,this.clientSecret=t.client_secret}return i(e,"RevokeTokenRequest"),e.prototype.toJson=function(){var t={token:this.token};return this.tokenTypeHint&&(t.token_type_hint=this.tokenTypeHint),this.clientId&&(t.client_id=this.clientId),this.clientSecret&&(t.client_secret=this.clientSecret),t},e.prototype.toStringMap=function(){var t=this.toJson();return t},e}();zc.RevokeTokenRequest=AS});var cg=he(Vi=>{"use strict";h();p();Object.defineProperty(Vi,"__esModule",{value:!0});Vi.TokenRequest=Vi.GRANT_TYPE_REFRESH_TOKEN=Vi.GRANT_TYPE_AUTHORIZATION_CODE=void 0;Vi.GRANT_TYPE_AUTHORIZATION_CODE="authorization_code";Vi.GRANT_TYPE_REFRESH_TOKEN="refresh_token";var SS=function(){function e(t){this.clientId=t.client_id,this.redirectUri=t.redirect_uri,this.grantType=t.grant_type,this.code=t.code,this.refreshToken=t.refresh_token,this.extras=t.extras}return i(e,"TokenRequest"),e.prototype.toJson=function(){return{grant_type:this.grantType,code:this.code,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,client_id:this.clientId,extras:this.extras}},e.prototype.toStringMap=function(){var t={grant_type:this.grantType,client_id:this.clientId,redirect_uri:this.redirectUri};if(this.code&&(t.code=this.code),this.refreshToken&&(t.refresh_token=this.refreshToken),this.extras)for(var r in this.extras)this.extras.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=this.extras[r]);return t},e}();Vi.TokenRequest=SS});var Of=he(Mn=>{"use strict";h();p();Object.defineProperty(Mn,"__esModule",{value:!0});Mn.TokenError=Mn.TokenResponse=Mn.nowInSeconds=void 0;var ES=10*60*-1,MS=i(function(){return Math.round(new Date().getTime()/1e3)},"nowInSeconds");Mn.nowInSeconds=MS;var TS=function(){function e(t){this.accessToken=t.access_token,this.tokenType=t.token_type||"bearer",t.expires_in&&(this.expiresIn=parseInt(t.expires_in,10)),this.refreshToken=t.refresh_token,this.scope=t.scope,this.idToken=t.id_token,this.issuedAt=t.issued_at||(0,Mn.nowInSeconds)()}return i(e,"TokenResponse"),e.prototype.toJson=function(){var t;return{access_token:this.accessToken,id_token:this.idToken,refresh_token:this.refreshToken,scope:this.scope,token_type:this.tokenType,issued_at:this.issuedAt,expires_in:(t=this.expiresIn)===null||t===void 0?void 0:t.toString()}},e.prototype.isValid=function(t){if(t===void 0&&(t=ES),this.expiresIn){var r=(0,Mn.nowInSeconds)();return r<this.issuedAt+this.expiresIn+t}else return!0},e}();Mn.TokenResponse=TS;var IS=function(){function e(t){this.error=t.error,this.errorDescription=t.error_description,this.errorUri=t.error_uri}return i(e,"TokenError"),e.prototype.toJson=function(){return{error:this.error,error_description:this.errorDescription,error_uri:this.errorUri}},e}();Mn.TokenError=IS});var lg=he(qc=>{"use strict";h();p();Object.defineProperty(qc,"__esModule",{value:!0});qc.BaseTokenRequestHandler=void 0;var _S=fs(),kS=Fc(),ug=Of(),PS=Dc(),BS=function(){function e(t,r){t===void 0&&(t=new PS.JQueryRequestor),r===void 0&&(r=new kS.BasicQueryStringUtils),this.requestor=t,this.utils=r}return i(e,"BaseTokenRequestHandler"),e.prototype.isTokenResponse=function(t){return t.error===void 0},e.prototype.performRevokeTokenRequest=function(t,r){var n=this.requestor.xhr({url:t.revocationEndpoint,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.utils.stringify(r.toStringMap())});return n.then(function(o){return!0})},e.prototype.performTokenRequest=function(t,r){var n=this,o=this.requestor.xhr({url:t.tokenEndpoint,method:"POST",dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.utils.stringify(r.toStringMap())});return o.then(function(a){return n.isTokenResponse(a)?new ug.TokenResponse(a):Promise.reject(new _S.AppAuthError(a.error,new ug.TokenError(a)))})},e}();qc.BaseTokenRequestHandler=BS});var dg=he(fg=>{"use strict";h();p();Object.defineProperty(fg,"__esModule",{value:!0})});var Kf=he(vt=>{"use strict";h();p();var OS=vt&&vt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:i(function(){return t[r]},"get")}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),jt=vt&&vt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&OS(t,e,r)};Object.defineProperty(vt,"__esModule",{value:!0});jt(Sf(),vt);jt(Mf(),vt);jt(Tf(),vt);jt(rg(),vt);jt(Cc(),vt);jt(fs(),vt);jt(wf(),vt);jt(ga(),vt);jt(Fc(),vt);jt(sg(),vt);jt(ag(),vt);jt(kf(),vt);jt(cg(),vt);jt(lg(),vt);jt(Of(),vt);jt(dg(),vt);jt(Dc(),vt)});var ey=he(ws=>{"use strict";h();p();Object.defineProperty(ws,"__esModule",{value:!0});ws.testnet=ws.bitcoin=void 0;ws.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};ws.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});var ty=he(lt=>{"use strict";h();p();Object.defineProperty(lt,"__esModule",{value:!0});lt.maybe=lt.Boolean=lt.Array=lt.Buffer256bit=lt.Network=lt.typeforce=void 0;lt.typeforce=cA();lt.Network=lt.typeforce.compile({messagePrefix:lt.typeforce.oneOf(lt.typeforce.Buffer,lt.typeforce.String),bip32:{public:lt.typeforce.UInt32,private:lt.typeforce.UInt32},pubKeyHash:lt.typeforce.UInt8,scriptHash:lt.typeforce.UInt8,wif:lt.typeforce.UInt8});lt.Buffer256bit=lt.typeforce.BufferN(32);lt.Array=lt.typeforce.Array;lt.Boolean=lt.typeforce.Boolean;lt.maybe=lt.typeforce.maybe});var ry=he(uu=>{"use strict";h();p();Object.defineProperty(uu,"__esModule",{value:!0});uu.testEcc=void 0;var ve=i(e=>Buffer.from(e,"hex"),"h");function F2(e){ht(e.isPoint(ve("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),ht(!e.isPoint(ve("030000000000000000000000000000000000000000000000000000000000000005"))),ht(e.isPrivate(ve("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),ht(e.isPrivate(ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),ht(!e.isPrivate(ve("0000000000000000000000000000000000000000000000000000000000000000"))),ht(!e.isPrivate(ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"))),ht(!e.isPrivate(ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364142"))),ht(Buffer.from(e.privateAdd(ve("0000000000000000000000000000000000000000000000000000000000000001"),ve("0000000000000000000000000000000000000000000000000000000000000000"))).equals(ve("0000000000000000000000000000000000000000000000000000000000000001"))),ht(e.privateAdd(ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"),ve("0000000000000000000000000000000000000000000000000000000000000003"))===null),ht(Buffer.from(e.privateAdd(ve("e211078564db65c3ce7704f08262b1f38f1ef412ad15b5ac2d76657a63b2c500"),ve("b51fbb69051255d1becbd683de5848242a89c229348dd72896a87ada94ae8665"))).equals(ve("9730c2ee69edbb958d42db7460bafa18fef9d955325aec99044c81c8282b0a24"))),ht(Buffer.from(e.privateNegate(ve("0000000000000000000000000000000000000000000000000000000000000001"))).equals(ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),ht(Buffer.from(e.privateNegate(ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"))).equals(ve("0000000000000000000000000000000000000000000000000000000000000003"))),ht(Buffer.from(e.privateNegate(ve("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(ve("4eede1bf775995d70a494f0a7bb6bc11e0b8cccd41cce8009ab1132c8b0a3792"))),ht(Buffer.from(e.pointCompress(ve("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!0)).equals(ve("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),ht(Buffer.from(e.pointCompress(ve("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!1)).equals(ve("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),ht(Buffer.from(e.pointCompress(ve("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!0)).equals(ve("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),ht(Buffer.from(e.pointCompress(ve("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!1)).equals(ve("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),ht(Buffer.from(e.pointFromScalar(ve("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(ve("02b07ba9dca9523b7ef4bd97703d43d20399eb698e194704791a25ce77a400df99"))),ht(e.xOnlyPointAddTweak(ve("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))===null);let t=e.xOnlyPointAddTweak(ve("1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b"),ve("a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac"));ht(Buffer.from(t.xOnlyPubkey).equals(ve("e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"))&&t.parity===1),t=e.xOnlyPointAddTweak(ve("2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991"),ve("823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47")),ht(Buffer.from(t.xOnlyPubkey).equals(ve("9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"))&&t.parity===0),ht(Buffer.from(e.sign(ve("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),ve("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))).equals(ve("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),ht(e.verify(ve("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),ve("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),ve("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),e.signSchnorr&&ht(Buffer.from(e.signSchnorr(ve("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),ve("c90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b14e5c9"),ve("c87aa53824b4d7ae2eb035a2b5bbbccc080e76cdc6d1692c4b0b62d798e6d906"))).equals(ve("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7"))),e.verifySchnorr&&ht(e.verifySchnorr(ve("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),ve("dd308afec5777e13121fa72b9cc1b7cc0139715309b086c960e18fd969774eb8"),ve("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")))}i(F2,"testEcc");uu.testEcc=F2;function ht(e){if(!e)throw new Error("ecc library invalid")}i(ht,"assert")});var iy=he(xs=>{"use strict";h();p();Object.defineProperty(xs,"__esModule",{value:!0});xs.ECPairFactory=xs.networks=void 0;var nd=ey();xs.networks=nd;var Yt=ty(),j2=H0(),ny=sA(),z2=ry(),rd=Yt.typeforce.maybe(Yt.typeforce.compile({compressed:Yt.maybe(Yt.Boolean),network:Yt.maybe(Yt.Network)})),q2=i(e=>e.length===32?e:e.slice(1,33),"toXOnly");function H2(e){(0,z2.testEcc)(e);function t(d){return e.isPoint(d)}i(t,"isPoint");function r(d,g){if(Yt.typeforce(Yt.Buffer256bit,d),!e.isPrivate(d))throw new TypeError("Private key not in range [1, n)");return Yt.typeforce(rd,g),new l(d,void 0,g)}i(r,"fromPrivateKey");function n(d,g){return Yt.typeforce(e.isPoint,d),Yt.typeforce(rd,g),new l(void 0,d,g)}i(n,"fromPublicKey");function o(d,g){let A=ny.decode(d),T=A.version;if(Yt.Array(g)){if(g=g.filter(I=>T===I.wif).pop(),!g)throw new Error("Unknown network version")}else if(g=g||nd.bitcoin,T!==g.wif)throw new Error("Invalid network version");return r(A.privateKey,{compressed:A.compressed,network:g})}i(o,"fromWIF");function a(d){Yt.typeforce(rd,d),d===void 0&&(d={});let g=d.rng||j2,A;do A=g(32),Yt.typeforce(Yt.Buffer256bit,A);while(!e.isPrivate(A));return r(A,d)}i(a,"makeRandom");class l{static{i(this,"ECPair")}__D;__Q;compressed;network;lowR;constructor(g,A,T){this.__D=g,this.__Q=A,this.lowR=!1,T===void 0&&(T={}),this.compressed=T.compressed===void 0?!0:T.compressed,this.network=T.network||nd.bitcoin,A!==void 0&&(this.__Q=Buffer.from(e.pointCompress(A,this.compressed)))}get privateKey(){return this.__D}get publicKey(){if(!this.__Q){let g=e.pointFromScalar(this.__D,this.compressed);this.__Q=Buffer.from(g)}return this.__Q}toWIF(){if(!this.__D)throw new Error("Missing private key");return ny.encode(this.network.wif,this.__D,this.compressed)}tweak(g){return this.privateKey?this.tweakFromPrivateKey(g):this.tweakFromPublicKey(g)}sign(g,A){if(!this.__D)throw new Error("Missing private key");if(A===void 0&&(A=this.lowR),A===!1)return Buffer.from(e.sign(g,this.__D));{let T=e.sign(g,this.__D),I=Buffer.alloc(32,0),k=0;for(;T[0]>127;)k++,I.writeUIntLE(k,0,6),T=e.sign(g,this.__D,I);return Buffer.from(T)}}signSchnorr(g){if(!this.privateKey)throw new Error("Missing private key");if(!e.signSchnorr)throw new Error("signSchnorr not supported by ecc library");return Buffer.from(e.signSchnorr(g,this.privateKey))}verify(g,A){return e.verify(g,this.publicKey,A)}verifySchnorr(g,A){if(!e.verifySchnorr)throw new Error("verifySchnorr not supported by ecc library");return e.verifySchnorr(g,this.publicKey.subarray(1,33),A)}tweakFromPublicKey(g){let A=q2(this.publicKey),T=e.xOnlyPointAddTweak(A,g);if(!T||T.xOnlyPubkey===null)throw new Error("Cannot tweak public key!");let I=Buffer.from([T.parity===0?2:3]);return n(Buffer.concat([I,T.xOnlyPubkey]),{network:this.network,compressed:this.compressed})}tweakFromPrivateKey(g){let T=this.publicKey[0]===3||this.publicKey[0]===4&&(this.publicKey[64]&1)===1?e.privateNegate(this.privateKey):this.privateKey,I=e.privateAdd(T,g);if(!I)throw new Error("Invalid tweaked private key!");return r(Buffer.from(I),{network:this.network,compressed:this.compressed})}}return{isPoint:t,fromPrivateKey:r,fromPublicKey:n,fromWIF:o,makeRandom:a}}i(H2,"ECPairFactory");xs.ECPairFactory=H2});var oy=he(ji=>{"use strict";h();p();Object.defineProperty(ji,"__esModule",{value:!0});ji.networks=ji.ECPairFactory=ji.default=void 0;var id=iy();Object.defineProperty(ji,"default",{enumerable:!0,get:i(function(){return id.ECPairFactory},"get")});Object.defineProperty(ji,"ECPairFactory",{enumerable:!0,get:i(function(){return id.ECPairFactory},"get")});Object.defineProperty(ji,"networks",{enumerable:!0,get:i(function(){return id.networks},"get")})});var cv=he((U9,av)=>{h();p();var st={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function Rr(e,t){if(!e)throw new Error(t)}i(Rr,"assert");function it(e,t,r){if(Rr(t instanceof Uint8Array,`Expected ${e} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){let n=r.join(", "),o=`Expected ${e} to be an Uint8Array with length [${n}]`;Rr(r.includes(t.length),o)}else{let n=`Expected ${e} to be an Uint8Array with length ${r}`;Rr(t.length===r,n)}}i(it,"isUint8Array");function Ko(e){Rr(Bs(e)==="Boolean","Expected compressed to be a Boolean")}i(Ko,"isCompressed");function fn(e=r=>new Uint8Array(r),t){return typeof e=="function"&&(e=e(t)),it("output",e,t),e}i(fn,"getAssertedOutput");function Bs(e){return Object.prototype.toString.call(e).slice(8,-1)}i(Bs,"toTypeString");av.exports=e=>({contextRandomize(t){switch(Rr(t===null||t instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),t!==null&&it("seed",t,32),e.contextRandomize(t)){case 1:throw new Error(st.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(t){return it("private key",t,32),e.privateKeyVerify(t)===0},privateKeyNegate(t){switch(it("private key",t,32),e.privateKeyNegate(t)){case 0:return t;case 1:throw new Error(st.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(t,r){switch(it("private key",t,32),it("tweak",r,32),e.privateKeyTweakAdd(t,r)){case 0:return t;case 1:throw new Error(st.TWEAK_ADD)}},privateKeyTweakMul(t,r){switch(it("private key",t,32),it("tweak",r,32),e.privateKeyTweakMul(t,r)){case 0:return t;case 1:throw new Error(st.TWEAK_MUL)}},publicKeyVerify(t){return it("public key",t,[33,65]),e.publicKeyVerify(t)===0},publicKeyCreate(t,r=!0,n){switch(it("private key",t,32),Ko(r),n=fn(n,r?33:65),e.publicKeyCreate(n,t)){case 0:return n;case 1:throw new Error(st.SECKEY_INVALID);case 2:throw new Error(st.PUBKEY_SERIALIZE)}},publicKeyConvert(t,r=!0,n){switch(it("public key",t,[33,65]),Ko(r),n=fn(n,r?33:65),e.publicKeyConvert(n,t)){case 0:return n;case 1:throw new Error(st.PUBKEY_PARSE);case 2:throw new Error(st.PUBKEY_SERIALIZE)}},publicKeyNegate(t,r=!0,n){switch(it("public key",t,[33,65]),Ko(r),n=fn(n,r?33:65),e.publicKeyNegate(n,t)){case 0:return n;case 1:throw new Error(st.PUBKEY_PARSE);case 2:throw new Error(st.IMPOSSIBLE_CASE);case 3:throw new Error(st.PUBKEY_SERIALIZE)}},publicKeyCombine(t,r=!0,n){Rr(Array.isArray(t),"Expected public keys to be an Array"),Rr(t.length>0,"Expected public keys array will have more than zero items");for(let o of t)it("public key",o,[33,65]);switch(Ko(r),n=fn(n,r?33:65),e.publicKeyCombine(n,t)){case 0:return n;case 1:throw new Error(st.PUBKEY_PARSE);case 2:throw new Error(st.PUBKEY_COMBINE);case 3:throw new Error(st.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(t,r,n=!0,o){switch(it("public key",t,[33,65]),it("tweak",r,32),Ko(n),o=fn(o,n?33:65),e.publicKeyTweakAdd(o,t,r)){case 0:return o;case 1:throw new Error(st.PUBKEY_PARSE);case 2:throw new Error(st.TWEAK_ADD)}},publicKeyTweakMul(t,r,n=!0,o){switch(it("public key",t,[33,65]),it("tweak",r,32),Ko(n),o=fn(o,n?33:65),e.publicKeyTweakMul(o,t,r)){case 0:return o;case 1:throw new Error(st.PUBKEY_PARSE);case 2:throw new Error(st.TWEAK_MUL)}},signatureNormalize(t){switch(it("signature",t,64),e.signatureNormalize(t)){case 0:return t;case 1:throw new Error(st.SIG_PARSE)}},signatureExport(t,r){it("signature",t,64),r=fn(r,72);let n={output:r,outputlen:72};switch(e.signatureExport(n,t)){case 0:return r.slice(0,n.outputlen);case 1:throw new Error(st.SIG_PARSE);case 2:throw new Error(st.IMPOSSIBLE_CASE)}},signatureImport(t,r){switch(it("signature",t),r=fn(r,64),e.signatureImport(r,t)){case 0:return r;case 1:throw new Error(st.SIG_PARSE);case 2:throw new Error(st.IMPOSSIBLE_CASE)}},ecdsaSign(t,r,n={},o){it("message",t,32),it("private key",r,32),Rr(Bs(n)==="Object","Expected options to be an Object"),n.data!==void 0&&it("options.data",n.data),n.noncefn!==void 0&&Rr(Bs(n.noncefn)==="Function","Expected options.noncefn to be a Function"),o=fn(o,64);let a={signature:o,recid:null};switch(e.ecdsaSign(a,t,r,n.data,n.noncefn)){case 0:return a;case 1:throw new Error(st.SIGN);case 2:throw new Error(st.IMPOSSIBLE_CASE)}},ecdsaVerify(t,r,n){switch(it("signature",t,64),it("message",r,32),it("public key",n,[33,65]),e.ecdsaVerify(t,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(st.SIG_PARSE);case 2:throw new Error(st.PUBKEY_PARSE)}},ecdsaRecover(t,r,n,o=!0,a){switch(it("signature",t,64),Rr(Bs(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),it("message",n,32),Ko(o),a=fn(a,o?33:65),e.ecdsaRecover(a,t,r,n)){case 0:return a;case 1:throw new Error(st.SIG_PARSE);case 2:throw new Error(st.RECOVER);case 3:throw new Error(st.IMPOSSIBLE_CASE)}},ecdh(t,r,n={},o){switch(it("public key",t,[33,65]),it("private key",r,32),Rr(Bs(n)==="Object","Expected options to be an Object"),n.data!==void 0&&it("options.data",n.data),n.hashfn!==void 0?(Rr(Bs(n.hashfn)==="Function","Expected options.hashfn to be a Function"),n.xbuf!==void 0&&it("options.xbuf",n.xbuf,32),n.ybuf!==void 0&&it("options.ybuf",n.ybuf,32),it("output",o)):o=fn(o,32),e.ecdh(o,t,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return o;case 1:throw new Error(st.PUBKEY_PARSE);case 2:throw new Error(st.ECDH)}}})});var lv=he((F9,uv)=>{h();p();var $E=$0().ec,kn=new $E("secp256k1"),nt=kn.curve,ft=nt.n.constructor;function GE(e,t){let r=new ft(t);if(r.cmp(nt.p)>=0)return null;r=r.toRed(nt.red);let n=r.redSqr().redIMul(r).redIAdd(nt.b).redSqrt();return e===3!==n.isOdd()&&(n=n.redNeg()),kn.keyPair({pub:{x:r,y:n}})}i(GE,"loadCompressedPublicKey");function ZE(e,t,r){let n=new ft(t),o=new ft(r);if(n.cmp(nt.p)>=0||o.cmp(nt.p)>=0||(n=n.toRed(nt.red),o=o.toRed(nt.red),(e===6||e===7)&&o.isOdd()!==(e===7)))return null;let a=n.redSqr().redIMul(n);return o.redSqr().redISub(a.redIAdd(nt.b)).isZero()?kn.keyPair({pub:{x:n,y:o}}):null}i(ZE,"loadUncompressedPublicKey");function Gi(e){let t=e[0];switch(t){case 2:case 3:return e.length!==33?null:GE(t,e.subarray(1,33));case 4:case 6:case 7:return e.length!==65?null:ZE(t,e.subarray(1,33),e.subarray(33,65));default:return null}}i(Gi,"loadPublicKey");function Co(e,t){let r=t.encode(null,e.length===33);for(let n=0;n<e.length;++n)e[n]=r[n]}i(Co,"savePublicKey");uv.exports={contextRandomize(){return 0},privateKeyVerify(e){let t=new ft(e);return t.cmp(nt.n)<0&&!t.isZero()?0:1},privateKeyNegate(e){let t=new ft(e),r=nt.n.sub(t).umod(nt.n).toArrayLike(Uint8Array,"be",32);return e.set(r),0},privateKeyTweakAdd(e,t){let r=new ft(t);if(r.cmp(nt.n)>=0||(r.iadd(new ft(e)),r.cmp(nt.n)>=0&&r.isub(nt.n),r.isZero()))return 1;let n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},privateKeyTweakMul(e,t){let r=new ft(t);if(r.cmp(nt.n)>=0||r.isZero())return 1;r.imul(new ft(e)),r.cmp(nt.n)>=0&&(r=r.umod(nt.n));let n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},publicKeyVerify(e){return Gi(e)===null?1:0},publicKeyCreate(e,t){let r=new ft(t);if(r.cmp(nt.n)>=0||r.isZero())return 1;let n=kn.keyFromPrivate(t).getPublic();return Co(e,n),0},publicKeyConvert(e,t){let r=Gi(t);if(r===null)return 1;let n=r.getPublic();return Co(e,n),0},publicKeyNegate(e,t){let r=Gi(t);if(r===null)return 1;let n=r.getPublic();return n.y=n.y.redNeg(),Co(e,n),0},publicKeyCombine(e,t){let r=new Array(t.length);for(let o=0;o<t.length;++o)if(r[o]=Gi(t[o]),r[o]===null)return 1;let n=r[0].getPublic();for(let o=1;o<r.length;++o)n=n.add(r[o].pub);return n.isInfinity()?2:(Co(e,n),0)},publicKeyTweakAdd(e,t,r){let n=Gi(t);if(n===null)return 1;if(r=new ft(r),r.cmp(nt.n)>=0)return 2;let o=n.getPublic().add(nt.g.mul(r));return o.isInfinity()?2:(Co(e,o),0)},publicKeyTweakMul(e,t,r){let n=Gi(t);if(n===null)return 1;if(r=new ft(r),r.cmp(nt.n)>=0||r.isZero())return 2;let o=n.getPublic().mul(r);return Co(e,o),0},signatureNormalize(e){let t=new ft(e.subarray(0,32)),r=new ft(e.subarray(32,64));return t.cmp(nt.n)>=0||r.cmp(nt.n)>=0?1:(r.cmp(kn.nh)===1&&e.set(nt.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(e,t){let r=t.subarray(0,32),n=t.subarray(32,64);if(new ft(r).cmp(nt.n)>=0||new ft(n).cmp(nt.n)>=0)return 1;let{output:o}=e,a=o.subarray(4,37);a[0]=0,a.set(r,1);let l=33,d=0;for(;l>1&&a[d]===0&&!(a[d+1]&128);--l,++d);if(a=a.subarray(d),a[0]&128||l>1&&a[0]===0&&!(a[1]&128))return 1;let g=o.subarray(39,72);g[0]=0,g.set(n,1);let A=33,T=0;for(;A>1&&g[T]===0&&!(g[T+1]&128);--A,++T);return g=g.subarray(T),g[0]&128||A>1&&g[0]===0&&!(g[1]&128)?1:(e.outputlen=6+l+A,o[0]=48,o[1]=e.outputlen-2,o[2]=2,o[3]=a.length,o.set(a,4),o[4+l]=2,o[5+l]=g.length,o.set(g,6+l),0)},signatureImport(e,t){if(t.length<8||t.length>72||t[0]!==48||t[1]!==t.length-2||t[2]!==2)return 1;let r=t[3];if(r===0||5+r>=t.length||t[4+r]!==2)return 1;let n=t[5+r];if(n===0||6+r+n!==t.length||t[4]&128||r>1&&t[4]===0&&!(t[5]&128)||t[r+6]&128||n>1&&t[r+6]===0&&!(t[r+7]&128))return 1;let o=t.subarray(4,4+r);if(o.length===33&&o[0]===0&&(o=o.subarray(1)),o.length>32)return 1;let a=t.subarray(6+r);if(a.length===33&&a[0]===0&&(a=a.slice(1)),a.length>32)throw new Error("S length is too long");let l=new ft(o);l.cmp(nt.n)>=0&&(l=new ft(0));let d=new ft(t.subarray(6+r));return d.cmp(nt.n)>=0&&(d=new ft(0)),e.set(l.toArrayLike(Uint8Array,"be",32),0),e.set(d.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(e,t,r,n,o){if(o){let d=o;o=i(g=>{let A=d(t,r,null,n,g);if(!(A instanceof Uint8Array&&A.length===32))throw new Error("This is the way");return new ft(A)},"noncefn")}let a=new ft(r);if(a.cmp(nt.n)>=0||a.isZero())return 1;let l;try{l=kn.sign(t,r,{canonical:!0,k:o,pers:n})}catch{return 1}return e.signature.set(l.r.toArrayLike(Uint8Array,"be",32),0),e.signature.set(l.s.toArrayLike(Uint8Array,"be",32),32),e.recid=l.recoveryParam,0},ecdsaVerify(e,t,r){let n={r:e.subarray(0,32),s:e.subarray(32,64)},o=new ft(n.r),a=new ft(n.s);if(o.cmp(nt.n)>=0||a.cmp(nt.n)>=0)return 1;if(a.cmp(kn.nh)===1||o.isZero()||a.isZero())return 3;let l=Gi(r);if(l===null)return 2;let d=l.getPublic();return kn.verify(t,n,d)?0:3},ecdsaRecover(e,t,r,n){let o={r:t.slice(0,32),s:t.slice(32,64)},a=new ft(o.r),l=new ft(o.s);if(a.cmp(nt.n)>=0||l.cmp(nt.n)>=0)return 1;if(a.isZero()||l.isZero())return 2;let d;try{d=kn.recoverPubKey(n,o,r)}catch{return 2}return Co(e,d),0},ecdh(e,t,r,n,o,a,l){let d=Gi(t);if(d===null)return 1;let g=new ft(r);if(g.cmp(nt.n)>=0||g.isZero())return 2;let A=d.getPublic().mul(g);if(o===void 0){let T=A.encode(null,!0),I=kn.hash().update(T).digest();for(let k=0;k<32;++k)e[k]=I[k]}else{a||(a=new Uint8Array(32));let T=A.getX().toArray("be",32);for(let C=0;C<32;++C)a[C]=T[C];l||(l=new Uint8Array(32));let I=A.getY().toArray("be",32);for(let C=0;C<32;++C)l[C]=I[C];let k=o(a,l,n);if(!(k instanceof Uint8Array&&k.length===e.length))return 2;e.set(k)}return 0}}});var Nd=he((H9,fv)=>{h();p();fv.exports=cv()(lv())});var hv=he(Bu=>{"use strict";h();p();Object.defineProperty(Bu,"__esModule",{value:!0});var dv=H0();function JE(e){return new Promise(function(t,r){dv(e,function(n,o){if(n){r(n);return}t(o)})})}i(JE,"getRandomBytes");Bu.getRandomBytes=JE;function YE(e){return dv(e)}i(YE,"getRandomBytesSync");Bu.getRandomBytesSync=YE});var yv=he(Pn=>{"use strict";h();p();var QE=Pn&&Pn.__awaiter||function(e,t,r,n){function o(a){return a instanceof r?a:new r(function(l){l(a)})}return i(o,"adopt"),new(r||(r=Promise))(function(a,l){function d(T){try{A(n.next(T))}catch(I){l(I)}}i(d,"fulfilled");function g(T){try{A(n.throw(T))}catch(I){l(I)}}i(g,"rejected");function A(T){T.done?a(T.value):o(T.value).then(d,g)}i(A,"step"),A((n=n.apply(e,t||[])).next())})},XE=Pn&&Pn.__generator||function(e,t){var r={label:0,sent:i(function(){if(a[0]&1)throw a[1];return a[1]},"sent"),trys:[],ops:[]},n,o,a,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(A){return function(T){return g([A,T])}}function g(A){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=A[0]&2?o.return:A[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,A[1])).done)return a;switch(o=0,a&&(A=[A[0]&2,a.value]),A[0]){case 0:case 1:a=A;break;case 4:return r.label++,{value:A[1],done:!1};case 5:r.label++,o=A[1],A=[0];continue;case 7:A=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(A[0]===6||A[0]===2)){r=0;continue}if(A[0]===3&&(!a||A[1]>a[0]&&A[1]<a[3])){r.label=A[1];break}if(A[0]===6&&r.label<a[1]){r.label=a[1],a=A;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(A);break}a[2]&&r.ops.pop(),r.trys.pop();continue}A=t.call(e,r)}catch(T){A=[6,T],o=0}finally{n=a=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}};function eM(e){for(var t in e)Pn.hasOwnProperty(t)||(Pn[t]=e[t])}i(eM,"__export");Object.defineProperty(Pn,"__esModule",{value:!0});var pv=Nd(),mv=hv(),gv=32;function tM(){return QE(this,void 0,void 0,function(){var e;return XE(this,function(t){switch(t.label){case 0:return[4,mv.getRandomBytes(gv)];case 1:return e=t.sent(),pv.privateKeyVerify(e)?[2,e]:[3,0];case 2:return[2]}})})}i(tM,"createPrivateKey");Pn.createPrivateKey=tM;function rM(){for(;;){var e=mv.getRandomBytesSync(gv);if(pv.privateKeyVerify(e))return e}}i(rM,"createPrivateKeySync");Pn.createPrivateKeySync=rM;eM(Nd())});var Ro=he((vv,Ud)=>{h();p();(function(e,t){"use strict";function r(x,s){if(!x)throw new Error(s||"Assertion failed")}i(r,"assert");function n(x,s){x.super_=s;var u=i(function(){},"TempCtor");u.prototype=s.prototype,x.prototype=new u,x.prototype.constructor=x}i(n,"inherits");function o(x,s,u){if(o.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,x!==null&&((s==="le"||s==="be")&&(u=s,s=10),this._init(x||0,s||10,u||"be"))}i(o,"BN"),typeof e=="object"?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var a;try{typeof self<"u"&&typeof self.Buffer<"u"?a=self.Buffer:a=D0().Buffer}catch{}o.isBN=i(function(s){return s instanceof o?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===o.wordSize&&Array.isArray(s.words)},"isBN"),o.max=i(function(s,u){return s.cmp(u)>0?s:u},"max"),o.min=i(function(s,u){return s.cmp(u)<0?s:u},"min"),o.prototype._init=i(function(s,u,m){if(typeof s=="number")return this._initNumber(s,u,m);if(typeof s=="object")return this._initArray(s,u,m);u==="hex"&&(u=16),r(u===(u|0)&&u>=2&&u<=36),s=s.toString().replace(/\s+/g,"");var y=0;s[0]==="-"&&(y++,this.negative=1),y<s.length&&(u===16?this._parseHex(s,y,m):(this._parseBase(s,u,y),m==="le"&&this._initArray(this.toArray(),u,m)))},"init"),o.prototype._initNumber=i(function(s,u,m){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(r(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),u,m)},"_initNumber"),o.prototype._initArray=i(function(s,u,m){if(r(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var v,S,E=0;if(m==="be")for(y=s.length-1,v=0;y>=0;y-=3)S=s[y]|s[y-1]<<8|s[y-2]<<16,this.words[v]|=S<<E&67108863,this.words[v+1]=S>>>26-E&67108863,E+=24,E>=26&&(E-=26,v++);else if(m==="le")for(y=0,v=0;y<s.length;y+=3)S=s[y]|s[y+1]<<8|s[y+2]<<16,this.words[v]|=S<<E&67108863,this.words[v+1]=S>>>26-E&67108863,E+=24,E>=26&&(E-=26,v++);return this.strip()},"_initArray");function l(x,s){var u=x.charCodeAt(s);return u>=65&&u<=70?u-55:u>=97&&u<=102?u-87:u-48&15}i(l,"parseHex4Bits");function d(x,s,u){var m=l(x,u);return u-1>=s&&(m|=l(x,u-1)<<4),m}i(d,"parseHexByte"),o.prototype._parseHex=i(function(s,u,m){this.length=Math.ceil((s.length-u)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var v=0,S=0,E;if(m==="be")for(y=s.length-1;y>=u;y-=2)E=d(s,u,y)<<v,this.words[S]|=E&67108863,v>=18?(v-=18,S+=1,this.words[S]|=E>>>26):v+=8;else{var b=s.length-u;for(y=b%2===0?u+1:u;y<s.length;y+=2)E=d(s,u,y)<<v,this.words[S]|=E&67108863,v>=18?(v-=18,S+=1,this.words[S]|=E>>>26):v+=8}this.strip()},"_parseHex");function g(x,s,u,m){for(var y=0,v=Math.min(x.length,u),S=s;S<v;S++){var E=x.charCodeAt(S)-48;y*=m,E>=49?y+=E-49+10:E>=17?y+=E-17+10:y+=E}return y}i(g,"parseBase"),o.prototype._parseBase=i(function(s,u,m){this.words=[0],this.length=1;for(var y=0,v=1;v<=67108863;v*=u)y++;y--,v=v/u|0;for(var S=s.length-m,E=S%y,b=Math.min(S,S-E)+m,c=0,w=m;w<b;w+=y)c=g(s,w,w+y,u),this.imuln(v),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(E!==0){var D=1;for(c=g(s,w,s.length,u),w=0;w<E;w++)D*=u;this.imuln(D),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},"_parseBase"),o.prototype.copy=i(function(s){s.words=new Array(this.length);for(var u=0;u<this.length;u++)s.words[u]=this.words[u];s.length=this.length,s.negative=this.negative,s.red=this.red},"copy"),o.prototype.clone=i(function(){var s=new o(null);return this.copy(s),s},"clone"),o.prototype._expand=i(function(s){for(;this.length<s;)this.words[this.length++]=0;return this},"_expand"),o.prototype.strip=i(function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},"strip"),o.prototype._normSign=i(function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},"_normSign"),o.prototype.inspect=i(function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"},"inspect");var A=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],T=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],I=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=i(function(s,u){s=s||10,u=u|0||1;var m;if(s===16||s==="hex"){m="";for(var y=0,v=0,S=0;S<this.length;S++){var E=this.words[S],b=((E<<y|v)&16777215).toString(16);v=E>>>24-y&16777215,v!==0||S!==this.length-1?m=A[6-b.length]+b+m:m=b+m,y+=2,y>=26&&(y-=26,S--)}for(v!==0&&(m=v.toString(16)+m);m.length%u!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(s===(s|0)&&s>=2&&s<=36){var c=T[s],w=I[s];m="";var D=this.clone();for(D.negative=0;!D.isZero();){var L=D.modn(w).toString(s);D=D.idivn(w),D.isZero()?m=L+m:m=A[c-L.length]+L+m}for(this.isZero()&&(m="0"+m);m.length%u!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}r(!1,"Base should be between 2 and 36")},"toString"),o.prototype.toNumber=i(function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},"toNumber"),o.prototype.toJSON=i(function(){return this.toString(16)},"toJSON"),o.prototype.toBuffer=i(function(s,u){return r(typeof a<"u"),this.toArrayLike(a,s,u)},"toBuffer"),o.prototype.toArray=i(function(s,u){return this.toArrayLike(Array,s,u)},"toArray"),o.prototype.toArrayLike=i(function(s,u,m){var y=this.byteLength(),v=m||Math.max(1,y);r(y<=v,"byte array longer than desired length"),r(v>0,"Requested array length <= 0"),this.strip();var S=u==="le",E=new s(v),b,c,w=this.clone();if(S){for(c=0;!w.isZero();c++)b=w.andln(255),w.iushrn(8),E[c]=b;for(;c<v;c++)E[c]=0}else{for(c=0;c<v-y;c++)E[c]=0;for(c=0;!w.isZero();c++)b=w.andln(255),w.iushrn(8),E[v-c-1]=b}return E},"toArrayLike"),Math.clz32?o.prototype._countBits=i(function(s){return 32-Math.clz32(s)},"_countBits"):o.prototype._countBits=i(function(s){var u=s,m=0;return u>=4096&&(m+=13,u>>>=13),u>=64&&(m+=7,u>>>=7),u>=8&&(m+=4,u>>>=4),u>=2&&(m+=2,u>>>=2),m+u},"_countBits"),o.prototype._zeroBits=i(function(s){if(s===0)return 26;var u=s,m=0;return u&8191||(m+=13,u>>>=13),u&127||(m+=7,u>>>=7),u&15||(m+=4,u>>>=4),u&3||(m+=2,u>>>=2),u&1||m++,m},"_zeroBits"),o.prototype.bitLength=i(function(){var s=this.words[this.length-1],u=this._countBits(s);return(this.length-1)*26+u},"bitLength");function k(x){for(var s=new Array(x.bitLength()),u=0;u<s.length;u++){var m=u/26|0,y=u%26;s[u]=(x.words[m]&1<<y)>>>y}return s}i(k,"toBitArray"),o.prototype.zeroBits=i(function(){if(this.isZero())return 0;for(var s=0,u=0;u<this.length;u++){var m=this._zeroBits(this.words[u]);if(s+=m,m!==26)break}return s},"zeroBits"),o.prototype.byteLength=i(function(){return Math.ceil(this.bitLength()/8)},"byteLength"),o.prototype.toTwos=i(function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},"toTwos"),o.prototype.fromTwos=i(function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},"fromTwos"),o.prototype.isNeg=i(function(){return this.negative!==0},"isNeg"),o.prototype.neg=i(function(){return this.clone().ineg()},"neg"),o.prototype.ineg=i(function(){return this.isZero()||(this.negative^=1),this},"ineg"),o.prototype.iuor=i(function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var u=0;u<s.length;u++)this.words[u]=this.words[u]|s.words[u];return this.strip()},"iuor"),o.prototype.ior=i(function(s){return r((this.negative|s.negative)===0),this.iuor(s)},"ior"),o.prototype.or=i(function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},"or"),o.prototype.uor=i(function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},"uor"),o.prototype.iuand=i(function(s){var u;this.length>s.length?u=s:u=this;for(var m=0;m<u.length;m++)this.words[m]=this.words[m]&s.words[m];return this.length=u.length,this.strip()},"iuand"),o.prototype.iand=i(function(s){return r((this.negative|s.negative)===0),this.iuand(s)},"iand"),o.prototype.and=i(function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},"and"),o.prototype.uand=i(function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},"uand"),o.prototype.iuxor=i(function(s){var u,m;this.length>s.length?(u=this,m=s):(u=s,m=this);for(var y=0;y<m.length;y++)this.words[y]=u.words[y]^m.words[y];if(this!==u)for(;y<u.length;y++)this.words[y]=u.words[y];return this.length=u.length,this.strip()},"iuxor"),o.prototype.ixor=i(function(s){return r((this.negative|s.negative)===0),this.iuxor(s)},"ixor"),o.prototype.xor=i(function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},"xor"),o.prototype.uxor=i(function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},"uxor"),o.prototype.inotn=i(function(s){r(typeof s=="number"&&s>=0);var u=Math.ceil(s/26)|0,m=s%26;this._expand(u),m>0&&u--;for(var y=0;y<u;y++)this.words[y]=~this.words[y]&67108863;return m>0&&(this.words[y]=~this.words[y]&67108863>>26-m),this.strip()},"inotn"),o.prototype.notn=i(function(s){return this.clone().inotn(s)},"notn"),o.prototype.setn=i(function(s,u){r(typeof s=="number"&&s>=0);var m=s/26|0,y=s%26;return this._expand(m+1),u?this.words[m]=this.words[m]|1<<y:this.words[m]=this.words[m]&~(1<<y),this.strip()},"setn"),o.prototype.iadd=i(function(s){var u;if(this.negative!==0&&s.negative===0)return this.negative=0,u=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,u=this.isub(s),s.negative=1,u._normSign();var m,y;this.length>s.length?(m=this,y=s):(m=s,y=this);for(var v=0,S=0;S<y.length;S++)u=(m.words[S]|0)+(y.words[S]|0)+v,this.words[S]=u&67108863,v=u>>>26;for(;v!==0&&S<m.length;S++)u=(m.words[S]|0)+v,this.words[S]=u&67108863,v=u>>>26;if(this.length=m.length,v!==0)this.words[this.length]=v,this.length++;else if(m!==this)for(;S<m.length;S++)this.words[S]=m.words[S];return this},"iadd"),o.prototype.add=i(function(s){var u;return s.negative!==0&&this.negative===0?(s.negative=0,u=this.sub(s),s.negative^=1,u):s.negative===0&&this.negative!==0?(this.negative=0,u=s.sub(this),this.negative=1,u):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},"add"),o.prototype.isub=i(function(s){if(s.negative!==0){s.negative=0;var u=this.iadd(s);return s.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var m=this.cmp(s);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,v;m>0?(y=this,v=s):(y=s,v=this);for(var S=0,E=0;E<v.length;E++)u=(y.words[E]|0)-(v.words[E]|0)+S,S=u>>26,this.words[E]=u&67108863;for(;S!==0&&E<y.length;E++)u=(y.words[E]|0)+S,S=u>>26,this.words[E]=u&67108863;if(S===0&&E<y.length&&y!==this)for(;E<y.length;E++)this.words[E]=y.words[E];return this.length=Math.max(this.length,E),y!==this&&(this.negative=1),this.strip()},"isub"),o.prototype.sub=i(function(s){return this.clone().isub(s)},"sub");function K(x,s,u){u.negative=s.negative^x.negative;var m=x.length+s.length|0;u.length=m,m=m-1|0;var y=x.words[0]|0,v=s.words[0]|0,S=y*v,E=S&67108863,b=S/67108864|0;u.words[0]=E;for(var c=1;c<m;c++){for(var w=b>>>26,D=b&67108863,L=Math.min(c,s.length-1),z=Math.max(0,c-x.length+1);z<=L;z++){var Y=c-z|0;y=x.words[Y]|0,v=s.words[z]|0,S=y*v+D,w+=S/67108864|0,D=S&67108863}u.words[c]=D|0,b=w|0}return b!==0?u.words[c]=b|0:u.length--,u.strip()}i(K,"smallMulTo");var C=i(function(s,u,m){var y=s.words,v=u.words,S=m.words,E=0,b,c,w,D=y[0]|0,L=D&8191,z=D>>>13,Y=y[1]|0,oe=Y&8191,le=Y>>>13,at=y[2]|0,de=at&8191,O=at>>>13,U=y[3]|0,N=U&8191,H=U>>>13,te=y[4]|0,j=te&8191,J=te>>>13,et=y[5]|0,ye=et&8191,we=et>>>13,_r=y[6]|0,Te=_r&8191,Se=_r>>>13,wn=y[7]|0,Ee=wn&8191,Ze=wn>>>13,ki=y[8]|0,Je=ki&8191,Ye=ki>>>13,Zn=y[9]|0,Ie=Zn&8191,_e=Zn>>>13,Jn=v[0]|0,ke=Jn&8191,Pe=Jn>>>13,Yn=v[1]|0,Be=Yn&8191,Oe=Yn>>>13,Qn=v[2]|0,Ke=Qn&8191,Ce=Qn>>>13,Xn=v[3]|0,Re=Xn&8191,Ne=Xn>>>13,ei=v[4]|0,Ue=ei&8191,De=ei>>>13,ti=v[5]|0,Ve=ti&8191,Le=ti>>>13,ri=v[6]|0,Fe=ri&8191,je=ri>>>13,ni=v[7]|0,ze=ni&8191,qe=ni>>>13,ii=v[8]|0,He=ii&8191,We=ii>>>13,oi=v[9]|0,$e=oi&8191,Ge=oi>>>13;m.negative=s.negative^u.negative,m.length=19,b=Math.imul(L,ke),c=Math.imul(L,Pe),c=c+Math.imul(z,ke)|0,w=Math.imul(z,Pe);var Lr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,b=Math.imul(oe,ke),c=Math.imul(oe,Pe),c=c+Math.imul(le,ke)|0,w=Math.imul(le,Pe),b=b+Math.imul(L,Be)|0,c=c+Math.imul(L,Oe)|0,c=c+Math.imul(z,Be)|0,w=w+Math.imul(z,Oe)|0;var Fr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,b=Math.imul(de,ke),c=Math.imul(de,Pe),c=c+Math.imul(O,ke)|0,w=Math.imul(O,Pe),b=b+Math.imul(oe,Be)|0,c=c+Math.imul(oe,Oe)|0,c=c+Math.imul(le,Be)|0,w=w+Math.imul(le,Oe)|0,b=b+Math.imul(L,Ke)|0,c=c+Math.imul(L,Ce)|0,c=c+Math.imul(z,Ke)|0,w=w+Math.imul(z,Ce)|0;var jr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(jr>>>26)|0,jr&=67108863,b=Math.imul(N,ke),c=Math.imul(N,Pe),c=c+Math.imul(H,ke)|0,w=Math.imul(H,Pe),b=b+Math.imul(de,Be)|0,c=c+Math.imul(de,Oe)|0,c=c+Math.imul(O,Be)|0,w=w+Math.imul(O,Oe)|0,b=b+Math.imul(oe,Ke)|0,c=c+Math.imul(oe,Ce)|0,c=c+Math.imul(le,Ke)|0,w=w+Math.imul(le,Ce)|0,b=b+Math.imul(L,Re)|0,c=c+Math.imul(L,Ne)|0,c=c+Math.imul(z,Re)|0,w=w+Math.imul(z,Ne)|0;var zr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(zr>>>26)|0,zr&=67108863,b=Math.imul(j,ke),c=Math.imul(j,Pe),c=c+Math.imul(J,ke)|0,w=Math.imul(J,Pe),b=b+Math.imul(N,Be)|0,c=c+Math.imul(N,Oe)|0,c=c+Math.imul(H,Be)|0,w=w+Math.imul(H,Oe)|0,b=b+Math.imul(de,Ke)|0,c=c+Math.imul(de,Ce)|0,c=c+Math.imul(O,Ke)|0,w=w+Math.imul(O,Ce)|0,b=b+Math.imul(oe,Re)|0,c=c+Math.imul(oe,Ne)|0,c=c+Math.imul(le,Re)|0,w=w+Math.imul(le,Ne)|0,b=b+Math.imul(L,Ue)|0,c=c+Math.imul(L,De)|0,c=c+Math.imul(z,Ue)|0,w=w+Math.imul(z,De)|0;var qr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(qr>>>26)|0,qr&=67108863,b=Math.imul(ye,ke),c=Math.imul(ye,Pe),c=c+Math.imul(we,ke)|0,w=Math.imul(we,Pe),b=b+Math.imul(j,Be)|0,c=c+Math.imul(j,Oe)|0,c=c+Math.imul(J,Be)|0,w=w+Math.imul(J,Oe)|0,b=b+Math.imul(N,Ke)|0,c=c+Math.imul(N,Ce)|0,c=c+Math.imul(H,Ke)|0,w=w+Math.imul(H,Ce)|0,b=b+Math.imul(de,Re)|0,c=c+Math.imul(de,Ne)|0,c=c+Math.imul(O,Re)|0,w=w+Math.imul(O,Ne)|0,b=b+Math.imul(oe,Ue)|0,c=c+Math.imul(oe,De)|0,c=c+Math.imul(le,Ue)|0,w=w+Math.imul(le,De)|0,b=b+Math.imul(L,Ve)|0,c=c+Math.imul(L,Le)|0,c=c+Math.imul(z,Ve)|0,w=w+Math.imul(z,Le)|0;var Hr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,b=Math.imul(Te,ke),c=Math.imul(Te,Pe),c=c+Math.imul(Se,ke)|0,w=Math.imul(Se,Pe),b=b+Math.imul(ye,Be)|0,c=c+Math.imul(ye,Oe)|0,c=c+Math.imul(we,Be)|0,w=w+Math.imul(we,Oe)|0,b=b+Math.imul(j,Ke)|0,c=c+Math.imul(j,Ce)|0,c=c+Math.imul(J,Ke)|0,w=w+Math.imul(J,Ce)|0,b=b+Math.imul(N,Re)|0,c=c+Math.imul(N,Ne)|0,c=c+Math.imul(H,Re)|0,w=w+Math.imul(H,Ne)|0,b=b+Math.imul(de,Ue)|0,c=c+Math.imul(de,De)|0,c=c+Math.imul(O,Ue)|0,w=w+Math.imul(O,De)|0,b=b+Math.imul(oe,Ve)|0,c=c+Math.imul(oe,Le)|0,c=c+Math.imul(le,Ve)|0,w=w+Math.imul(le,Le)|0,b=b+Math.imul(L,Fe)|0,c=c+Math.imul(L,je)|0,c=c+Math.imul(z,Fe)|0,w=w+Math.imul(z,je)|0;var Wr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,b=Math.imul(Ee,ke),c=Math.imul(Ee,Pe),c=c+Math.imul(Ze,ke)|0,w=Math.imul(Ze,Pe),b=b+Math.imul(Te,Be)|0,c=c+Math.imul(Te,Oe)|0,c=c+Math.imul(Se,Be)|0,w=w+Math.imul(Se,Oe)|0,b=b+Math.imul(ye,Ke)|0,c=c+Math.imul(ye,Ce)|0,c=c+Math.imul(we,Ke)|0,w=w+Math.imul(we,Ce)|0,b=b+Math.imul(j,Re)|0,c=c+Math.imul(j,Ne)|0,c=c+Math.imul(J,Re)|0,w=w+Math.imul(J,Ne)|0,b=b+Math.imul(N,Ue)|0,c=c+Math.imul(N,De)|0,c=c+Math.imul(H,Ue)|0,w=w+Math.imul(H,De)|0,b=b+Math.imul(de,Ve)|0,c=c+Math.imul(de,Le)|0,c=c+Math.imul(O,Ve)|0,w=w+Math.imul(O,Le)|0,b=b+Math.imul(oe,Fe)|0,c=c+Math.imul(oe,je)|0,c=c+Math.imul(le,Fe)|0,w=w+Math.imul(le,je)|0,b=b+Math.imul(L,ze)|0,c=c+Math.imul(L,qe)|0,c=c+Math.imul(z,ze)|0,w=w+Math.imul(z,qe)|0;var $r=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+($r>>>26)|0,$r&=67108863,b=Math.imul(Je,ke),c=Math.imul(Je,Pe),c=c+Math.imul(Ye,ke)|0,w=Math.imul(Ye,Pe),b=b+Math.imul(Ee,Be)|0,c=c+Math.imul(Ee,Oe)|0,c=c+Math.imul(Ze,Be)|0,w=w+Math.imul(Ze,Oe)|0,b=b+Math.imul(Te,Ke)|0,c=c+Math.imul(Te,Ce)|0,c=c+Math.imul(Se,Ke)|0,w=w+Math.imul(Se,Ce)|0,b=b+Math.imul(ye,Re)|0,c=c+Math.imul(ye,Ne)|0,c=c+Math.imul(we,Re)|0,w=w+Math.imul(we,Ne)|0,b=b+Math.imul(j,Ue)|0,c=c+Math.imul(j,De)|0,c=c+Math.imul(J,Ue)|0,w=w+Math.imul(J,De)|0,b=b+Math.imul(N,Ve)|0,c=c+Math.imul(N,Le)|0,c=c+Math.imul(H,Ve)|0,w=w+Math.imul(H,Le)|0,b=b+Math.imul(de,Fe)|0,c=c+Math.imul(de,je)|0,c=c+Math.imul(O,Fe)|0,w=w+Math.imul(O,je)|0,b=b+Math.imul(oe,ze)|0,c=c+Math.imul(oe,qe)|0,c=c+Math.imul(le,ze)|0,w=w+Math.imul(le,qe)|0,b=b+Math.imul(L,He)|0,c=c+Math.imul(L,We)|0,c=c+Math.imul(z,He)|0,w=w+Math.imul(z,We)|0;var Gr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,b=Math.imul(Ie,ke),c=Math.imul(Ie,Pe),c=c+Math.imul(_e,ke)|0,w=Math.imul(_e,Pe),b=b+Math.imul(Je,Be)|0,c=c+Math.imul(Je,Oe)|0,c=c+Math.imul(Ye,Be)|0,w=w+Math.imul(Ye,Oe)|0,b=b+Math.imul(Ee,Ke)|0,c=c+Math.imul(Ee,Ce)|0,c=c+Math.imul(Ze,Ke)|0,w=w+Math.imul(Ze,Ce)|0,b=b+Math.imul(Te,Re)|0,c=c+Math.imul(Te,Ne)|0,c=c+Math.imul(Se,Re)|0,w=w+Math.imul(Se,Ne)|0,b=b+Math.imul(ye,Ue)|0,c=c+Math.imul(ye,De)|0,c=c+Math.imul(we,Ue)|0,w=w+Math.imul(we,De)|0,b=b+Math.imul(j,Ve)|0,c=c+Math.imul(j,Le)|0,c=c+Math.imul(J,Ve)|0,w=w+Math.imul(J,Le)|0,b=b+Math.imul(N,Fe)|0,c=c+Math.imul(N,je)|0,c=c+Math.imul(H,Fe)|0,w=w+Math.imul(H,je)|0,b=b+Math.imul(de,ze)|0,c=c+Math.imul(de,qe)|0,c=c+Math.imul(O,ze)|0,w=w+Math.imul(O,qe)|0,b=b+Math.imul(oe,He)|0,c=c+Math.imul(oe,We)|0,c=c+Math.imul(le,He)|0,w=w+Math.imul(le,We)|0,b=b+Math.imul(L,$e)|0,c=c+Math.imul(L,Ge)|0,c=c+Math.imul(z,$e)|0,w=w+Math.imul(z,Ge)|0;var Zr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,b=Math.imul(Ie,Be),c=Math.imul(Ie,Oe),c=c+Math.imul(_e,Be)|0,w=Math.imul(_e,Oe),b=b+Math.imul(Je,Ke)|0,c=c+Math.imul(Je,Ce)|0,c=c+Math.imul(Ye,Ke)|0,w=w+Math.imul(Ye,Ce)|0,b=b+Math.imul(Ee,Re)|0,c=c+Math.imul(Ee,Ne)|0,c=c+Math.imul(Ze,Re)|0,w=w+Math.imul(Ze,Ne)|0,b=b+Math.imul(Te,Ue)|0,c=c+Math.imul(Te,De)|0,c=c+Math.imul(Se,Ue)|0,w=w+Math.imul(Se,De)|0,b=b+Math.imul(ye,Ve)|0,c=c+Math.imul(ye,Le)|0,c=c+Math.imul(we,Ve)|0,w=w+Math.imul(we,Le)|0,b=b+Math.imul(j,Fe)|0,c=c+Math.imul(j,je)|0,c=c+Math.imul(J,Fe)|0,w=w+Math.imul(J,je)|0,b=b+Math.imul(N,ze)|0,c=c+Math.imul(N,qe)|0,c=c+Math.imul(H,ze)|0,w=w+Math.imul(H,qe)|0,b=b+Math.imul(de,He)|0,c=c+Math.imul(de,We)|0,c=c+Math.imul(O,He)|0,w=w+Math.imul(O,We)|0,b=b+Math.imul(oe,$e)|0,c=c+Math.imul(oe,Ge)|0,c=c+Math.imul(le,$e)|0,w=w+Math.imul(le,Ge)|0;var Jr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,b=Math.imul(Ie,Ke),c=Math.imul(Ie,Ce),c=c+Math.imul(_e,Ke)|0,w=Math.imul(_e,Ce),b=b+Math.imul(Je,Re)|0,c=c+Math.imul(Je,Ne)|0,c=c+Math.imul(Ye,Re)|0,w=w+Math.imul(Ye,Ne)|0,b=b+Math.imul(Ee,Ue)|0,c=c+Math.imul(Ee,De)|0,c=c+Math.imul(Ze,Ue)|0,w=w+Math.imul(Ze,De)|0,b=b+Math.imul(Te,Ve)|0,c=c+Math.imul(Te,Le)|0,c=c+Math.imul(Se,Ve)|0,w=w+Math.imul(Se,Le)|0,b=b+Math.imul(ye,Fe)|0,c=c+Math.imul(ye,je)|0,c=c+Math.imul(we,Fe)|0,w=w+Math.imul(we,je)|0,b=b+Math.imul(j,ze)|0,c=c+Math.imul(j,qe)|0,c=c+Math.imul(J,ze)|0,w=w+Math.imul(J,qe)|0,b=b+Math.imul(N,He)|0,c=c+Math.imul(N,We)|0,c=c+Math.imul(H,He)|0,w=w+Math.imul(H,We)|0,b=b+Math.imul(de,$e)|0,c=c+Math.imul(de,Ge)|0,c=c+Math.imul(O,$e)|0,w=w+Math.imul(O,Ge)|0;var Yr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,b=Math.imul(Ie,Re),c=Math.imul(Ie,Ne),c=c+Math.imul(_e,Re)|0,w=Math.imul(_e,Ne),b=b+Math.imul(Je,Ue)|0,c=c+Math.imul(Je,De)|0,c=c+Math.imul(Ye,Ue)|0,w=w+Math.imul(Ye,De)|0,b=b+Math.imul(Ee,Ve)|0,c=c+Math.imul(Ee,Le)|0,c=c+Math.imul(Ze,Ve)|0,w=w+Math.imul(Ze,Le)|0,b=b+Math.imul(Te,Fe)|0,c=c+Math.imul(Te,je)|0,c=c+Math.imul(Se,Fe)|0,w=w+Math.imul(Se,je)|0,b=b+Math.imul(ye,ze)|0,c=c+Math.imul(ye,qe)|0,c=c+Math.imul(we,ze)|0,w=w+Math.imul(we,qe)|0,b=b+Math.imul(j,He)|0,c=c+Math.imul(j,We)|0,c=c+Math.imul(J,He)|0,w=w+Math.imul(J,We)|0,b=b+Math.imul(N,$e)|0,c=c+Math.imul(N,Ge)|0,c=c+Math.imul(H,$e)|0,w=w+Math.imul(H,Ge)|0;var Qr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,b=Math.imul(Ie,Ue),c=Math.imul(Ie,De),c=c+Math.imul(_e,Ue)|0,w=Math.imul(_e,De),b=b+Math.imul(Je,Ve)|0,c=c+Math.imul(Je,Le)|0,c=c+Math.imul(Ye,Ve)|0,w=w+Math.imul(Ye,Le)|0,b=b+Math.imul(Ee,Fe)|0,c=c+Math.imul(Ee,je)|0,c=c+Math.imul(Ze,Fe)|0,w=w+Math.imul(Ze,je)|0,b=b+Math.imul(Te,ze)|0,c=c+Math.imul(Te,qe)|0,c=c+Math.imul(Se,ze)|0,w=w+Math.imul(Se,qe)|0,b=b+Math.imul(ye,He)|0,c=c+Math.imul(ye,We)|0,c=c+Math.imul(we,He)|0,w=w+Math.imul(we,We)|0,b=b+Math.imul(j,$e)|0,c=c+Math.imul(j,Ge)|0,c=c+Math.imul(J,$e)|0,w=w+Math.imul(J,Ge)|0;var Xr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,b=Math.imul(Ie,Ve),c=Math.imul(Ie,Le),c=c+Math.imul(_e,Ve)|0,w=Math.imul(_e,Le),b=b+Math.imul(Je,Fe)|0,c=c+Math.imul(Je,je)|0,c=c+Math.imul(Ye,Fe)|0,w=w+Math.imul(Ye,je)|0,b=b+Math.imul(Ee,ze)|0,c=c+Math.imul(Ee,qe)|0,c=c+Math.imul(Ze,ze)|0,w=w+Math.imul(Ze,qe)|0,b=b+Math.imul(Te,He)|0,c=c+Math.imul(Te,We)|0,c=c+Math.imul(Se,He)|0,w=w+Math.imul(Se,We)|0,b=b+Math.imul(ye,$e)|0,c=c+Math.imul(ye,Ge)|0,c=c+Math.imul(we,$e)|0,w=w+Math.imul(we,Ge)|0;var en=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(en>>>26)|0,en&=67108863,b=Math.imul(Ie,Fe),c=Math.imul(Ie,je),c=c+Math.imul(_e,Fe)|0,w=Math.imul(_e,je),b=b+Math.imul(Je,ze)|0,c=c+Math.imul(Je,qe)|0,c=c+Math.imul(Ye,ze)|0,w=w+Math.imul(Ye,qe)|0,b=b+Math.imul(Ee,He)|0,c=c+Math.imul(Ee,We)|0,c=c+Math.imul(Ze,He)|0,w=w+Math.imul(Ze,We)|0,b=b+Math.imul(Te,$e)|0,c=c+Math.imul(Te,Ge)|0,c=c+Math.imul(Se,$e)|0,w=w+Math.imul(Se,Ge)|0;var tn=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(tn>>>26)|0,tn&=67108863,b=Math.imul(Ie,ze),c=Math.imul(Ie,qe),c=c+Math.imul(_e,ze)|0,w=Math.imul(_e,qe),b=b+Math.imul(Je,He)|0,c=c+Math.imul(Je,We)|0,c=c+Math.imul(Ye,He)|0,w=w+Math.imul(Ye,We)|0,b=b+Math.imul(Ee,$e)|0,c=c+Math.imul(Ee,Ge)|0,c=c+Math.imul(Ze,$e)|0,w=w+Math.imul(Ze,Ge)|0;var rn=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(rn>>>26)|0,rn&=67108863,b=Math.imul(Ie,He),c=Math.imul(Ie,We),c=c+Math.imul(_e,He)|0,w=Math.imul(_e,We),b=b+Math.imul(Je,$e)|0,c=c+Math.imul(Je,Ge)|0,c=c+Math.imul(Ye,$e)|0,w=w+Math.imul(Ye,Ge)|0;var fo=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(fo>>>26)|0,fo&=67108863,b=Math.imul(Ie,$e),c=Math.imul(Ie,Ge),c=c+Math.imul(_e,$e)|0,w=Math.imul(_e,Ge);var ho=(E+b|0)+((c&8191)<<13)|0;return E=(w+(c>>>13)|0)+(ho>>>26)|0,ho&=67108863,S[0]=Lr,S[1]=Fr,S[2]=jr,S[3]=zr,S[4]=qr,S[5]=Hr,S[6]=Wr,S[7]=$r,S[8]=Gr,S[9]=Zr,S[10]=Jr,S[11]=Yr,S[12]=Qr,S[13]=Xr,S[14]=en,S[15]=tn,S[16]=rn,S[17]=fo,S[18]=ho,E!==0&&(S[19]=E,m.length++),m},"comb10MulTo");Math.imul||(C=K);function R(x,s,u){u.negative=s.negative^x.negative,u.length=x.length+s.length;for(var m=0,y=0,v=0;v<u.length-1;v++){var S=y;y=0;for(var E=m&67108863,b=Math.min(v,s.length-1),c=Math.max(0,v-x.length+1);c<=b;c++){var w=v-c,D=x.words[w]|0,L=s.words[c]|0,z=D*L,Y=z&67108863;S=S+(z/67108864|0)|0,Y=Y+E|0,E=Y&67108863,S=S+(Y>>>26)|0,y+=S>>>26,S&=67108863}u.words[v]=E,m=S,S=y}return m!==0?u.words[v]=m:u.length--,u.strip()}i(R,"bigMulTo");function V(x,s,u){var m=new q;return m.mulp(x,s,u)}i(V,"jumboMulTo"),o.prototype.mulTo=i(function(s,u){var m,y=this.length+s.length;return this.length===10&&s.length===10?m=C(this,s,u):y<63?m=K(this,s,u):y<1024?m=R(this,s,u):m=V(this,s,u),m},"mulTo");function q(x,s){this.x=x,this.y=s}i(q,"FFTM"),q.prototype.makeRBT=i(function(s){for(var u=new Array(s),m=o.prototype._countBits(s)-1,y=0;y<s;y++)u[y]=this.revBin(y,m,s);return u},"makeRBT"),q.prototype.revBin=i(function(s,u,m){if(s===0||s===m-1)return s;for(var y=0,v=0;v<u;v++)y|=(s&1)<<u-v-1,s>>=1;return y},"revBin"),q.prototype.permute=i(function(s,u,m,y,v,S){for(var E=0;E<S;E++)y[E]=u[s[E]],v[E]=m[s[E]]},"permute"),q.prototype.transform=i(function(s,u,m,y,v,S){this.permute(S,s,u,m,y,v);for(var E=1;E<v;E<<=1)for(var b=E<<1,c=Math.cos(2*Math.PI/b),w=Math.sin(2*Math.PI/b),D=0;D<v;D+=b)for(var L=c,z=w,Y=0;Y<E;Y++){var oe=m[D+Y],le=y[D+Y],at=m[D+Y+E],de=y[D+Y+E],O=L*at-z*de;de=L*de+z*at,at=O,m[D+Y]=oe+at,y[D+Y]=le+de,m[D+Y+E]=oe-at,y[D+Y+E]=le-de,Y!==b&&(O=c*L-w*z,z=c*z+w*L,L=O)}},"transform"),q.prototype.guessLen13b=i(function(s,u){var m=Math.max(u,s)|1,y=m&1,v=0;for(m=m/2|0;m;m=m>>>1)v++;return 1<<v+1+y},"guessLen13b"),q.prototype.conjugate=i(function(s,u,m){if(!(m<=1))for(var y=0;y<m/2;y++){var v=s[y];s[y]=s[m-y-1],s[m-y-1]=v,v=u[y],u[y]=-u[m-y-1],u[m-y-1]=-v}},"conjugate"),q.prototype.normalize13b=i(function(s,u){for(var m=0,y=0;y<u/2;y++){var v=Math.round(s[2*y+1]/u)*8192+Math.round(s[2*y]/u)+m;s[y]=v&67108863,v<67108864?m=0:m=v/67108864|0}return s},"normalize13b"),q.prototype.convert13b=i(function(s,u,m,y){for(var v=0,S=0;S<u;S++)v=v+(s[S]|0),m[2*S]=v&8191,v=v>>>13,m[2*S+1]=v&8191,v=v>>>13;for(S=2*u;S<y;++S)m[S]=0;r(v===0),r((v&-8192)===0)},"convert13b"),q.prototype.stub=i(function(s){for(var u=new Array(s),m=0;m<s;m++)u[m]=0;return u},"stub"),q.prototype.mulp=i(function(s,u,m){var y=2*this.guessLen13b(s.length,u.length),v=this.makeRBT(y),S=this.stub(y),E=new Array(y),b=new Array(y),c=new Array(y),w=new Array(y),D=new Array(y),L=new Array(y),z=m.words;z.length=y,this.convert13b(s.words,s.length,E,y),this.convert13b(u.words,u.length,w,y),this.transform(E,S,b,c,y,v),this.transform(w,S,D,L,y,v);for(var Y=0;Y<y;Y++){var oe=b[Y]*D[Y]-c[Y]*L[Y];c[Y]=b[Y]*L[Y]+c[Y]*D[Y],b[Y]=oe}return this.conjugate(b,c,y),this.transform(b,c,z,S,y,v),this.conjugate(z,S,y),this.normalize13b(z,y),m.negative=s.negative^u.negative,m.length=s.length+u.length,m.strip()},"mulp"),o.prototype.mul=i(function(s){var u=new o(null);return u.words=new Array(this.length+s.length),this.mulTo(s,u)},"mul"),o.prototype.mulf=i(function(s){var u=new o(null);return u.words=new Array(this.length+s.length),V(this,s,u)},"mulf"),o.prototype.imul=i(function(s){return this.clone().mulTo(s,this)},"imul"),o.prototype.imuln=i(function(s){r(typeof s=="number"),r(s<67108864);for(var u=0,m=0;m<this.length;m++){var y=(this.words[m]|0)*s,v=(y&67108863)+(u&67108863);u>>=26,u+=y/67108864|0,u+=v>>>26,this.words[m]=v&67108863}return u!==0&&(this.words[m]=u,this.length++),this},"imuln"),o.prototype.muln=i(function(s){return this.clone().imuln(s)},"muln"),o.prototype.sqr=i(function(){return this.mul(this)},"sqr"),o.prototype.isqr=i(function(){return this.imul(this.clone())},"isqr"),o.prototype.pow=i(function(s){var u=k(s);if(u.length===0)return new o(1);for(var m=this,y=0;y<u.length&&u[y]===0;y++,m=m.sqr());if(++y<u.length)for(var v=m.sqr();y<u.length;y++,v=v.sqr())u[y]!==0&&(m=m.mul(v));return m},"pow"),o.prototype.iushln=i(function(s){r(typeof s=="number"&&s>=0);var u=s%26,m=(s-u)/26,y=67108863>>>26-u<<26-u,v;if(u!==0){var S=0;for(v=0;v<this.length;v++){var E=this.words[v]&y,b=(this.words[v]|0)-E<<u;this.words[v]=b|S,S=E>>>26-u}S&&(this.words[v]=S,this.length++)}if(m!==0){for(v=this.length-1;v>=0;v--)this.words[v+m]=this.words[v];for(v=0;v<m;v++)this.words[v]=0;this.length+=m}return this.strip()},"iushln"),o.prototype.ishln=i(function(s){return r(this.negative===0),this.iushln(s)},"ishln"),o.prototype.iushrn=i(function(s,u,m){r(typeof s=="number"&&s>=0);var y;u?y=(u-u%26)/26:y=0;var v=s%26,S=Math.min((s-v)/26,this.length),E=67108863^67108863>>>v<<v,b=m;if(y-=S,y=Math.max(0,y),b){for(var c=0;c<S;c++)b.words[c]=this.words[c];b.length=S}if(S!==0)if(this.length>S)for(this.length-=S,c=0;c<this.length;c++)this.words[c]=this.words[c+S];else this.words[0]=0,this.length=1;var w=0;for(c=this.length-1;c>=0&&(w!==0||c>=y);c--){var D=this.words[c]|0;this.words[c]=w<<26-v|D>>>v,w=D&E}return b&&w!==0&&(b.words[b.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},"iushrn"),o.prototype.ishrn=i(function(s,u,m){return r(this.negative===0),this.iushrn(s,u,m)},"ishrn"),o.prototype.shln=i(function(s){return this.clone().ishln(s)},"shln"),o.prototype.ushln=i(function(s){return this.clone().iushln(s)},"ushln"),o.prototype.shrn=i(function(s){return this.clone().ishrn(s)},"shrn"),o.prototype.ushrn=i(function(s){return this.clone().iushrn(s)},"ushrn"),o.prototype.testn=i(function(s){r(typeof s=="number"&&s>=0);var u=s%26,m=(s-u)/26,y=1<<u;if(this.length<=m)return!1;var v=this.words[m];return!!(v&y)},"testn"),o.prototype.imaskn=i(function(s){r(typeof s=="number"&&s>=0);var u=s%26,m=(s-u)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(u!==0&&m++,this.length=Math.min(m,this.length),u!==0){var y=67108863^67108863>>>u<<u;this.words[this.length-1]&=y}return this.strip()},"imaskn"),o.prototype.maskn=i(function(s){return this.clone().imaskn(s)},"maskn"),o.prototype.iaddn=i(function(s){return r(typeof s=="number"),r(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},"iaddn"),o.prototype._iaddn=i(function(s){this.words[0]+=s;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},"_iaddn"),o.prototype.isubn=i(function(s){if(r(typeof s=="number"),r(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this.strip()},"isubn"),o.prototype.addn=i(function(s){return this.clone().iaddn(s)},"addn"),o.prototype.subn=i(function(s){return this.clone().isubn(s)},"subn"),o.prototype.iabs=i(function(){return this.negative=0,this},"iabs"),o.prototype.abs=i(function(){return this.clone().iabs()},"abs"),o.prototype._ishlnsubmul=i(function(s,u,m){var y=s.length+m,v;this._expand(y);var S,E=0;for(v=0;v<s.length;v++){S=(this.words[v+m]|0)+E;var b=(s.words[v]|0)*u;S-=b&67108863,E=(S>>26)-(b/67108864|0),this.words[v+m]=S&67108863}for(;v<this.length-m;v++)S=(this.words[v+m]|0)+E,E=S>>26,this.words[v+m]=S&67108863;if(E===0)return this.strip();for(r(E===-1),E=0,v=0;v<this.length;v++)S=-(this.words[v]|0)+E,E=S>>26,this.words[v]=S&67108863;return this.negative=1,this.strip()},"_ishlnsubmul"),o.prototype._wordDiv=i(function(s,u){var m=this.length-s.length,y=this.clone(),v=s,S=v.words[v.length-1]|0,E=this._countBits(S);m=26-E,m!==0&&(v=v.ushln(m),y.iushln(m),S=v.words[v.length-1]|0);var b=y.length-v.length,c;if(u!=="mod"){c=new o(null),c.length=b+1,c.words=new Array(c.length);for(var w=0;w<c.length;w++)c.words[w]=0}var D=y.clone()._ishlnsubmul(v,1,b);D.negative===0&&(y=D,c&&(c.words[b]=1));for(var L=b-1;L>=0;L--){var z=(y.words[v.length+L]|0)*67108864+(y.words[v.length+L-1]|0);for(z=Math.min(z/S|0,67108863),y._ishlnsubmul(v,z,L);y.negative!==0;)z--,y.negative=0,y._ishlnsubmul(v,1,L),y.isZero()||(y.negative^=1);c&&(c.words[L]=z)}return c&&c.strip(),y.strip(),u!=="div"&&m!==0&&y.iushrn(m),{div:c||null,mod:y}},"_wordDiv"),o.prototype.divmod=i(function(s,u,m){if(r(!s.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var y,v,S;return this.negative!==0&&s.negative===0?(S=this.neg().divmod(s,u),u!=="mod"&&(y=S.div.neg()),u!=="div"&&(v=S.mod.neg(),m&&v.negative!==0&&v.iadd(s)),{div:y,mod:v}):this.negative===0&&s.negative!==0?(S=this.divmod(s.neg(),u),u!=="mod"&&(y=S.div.neg()),{div:y,mod:S.mod}):this.negative&s.negative?(S=this.neg().divmod(s.neg(),u),u!=="div"&&(v=S.mod.neg(),m&&v.negative!==0&&v.isub(s)),{div:S.div,mod:v}):s.length>this.length||this.cmp(s)<0?{div:new o(0),mod:this}:s.length===1?u==="div"?{div:this.divn(s.words[0]),mod:null}:u==="mod"?{div:null,mod:new o(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new o(this.modn(s.words[0]))}:this._wordDiv(s,u)},"divmod"),o.prototype.div=i(function(s){return this.divmod(s,"div",!1).div},"div"),o.prototype.mod=i(function(s){return this.divmod(s,"mod",!1).mod},"mod"),o.prototype.umod=i(function(s){return this.divmod(s,"mod",!0).mod},"umod"),o.prototype.divRound=i(function(s){var u=this.divmod(s);if(u.mod.isZero())return u.div;var m=u.div.negative!==0?u.mod.isub(s):u.mod,y=s.ushrn(1),v=s.andln(1),S=m.cmp(y);return S<0||v===1&&S===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},"divRound"),o.prototype.modn=i(function(s){r(s<=67108863);for(var u=(1<<26)%s,m=0,y=this.length-1;y>=0;y--)m=(u*m+(this.words[y]|0))%s;return m},"modn"),o.prototype.idivn=i(function(s){r(s<=67108863);for(var u=0,m=this.length-1;m>=0;m--){var y=(this.words[m]|0)+u*67108864;this.words[m]=y/s|0,u=y%s}return this.strip()},"idivn"),o.prototype.divn=i(function(s){return this.clone().idivn(s)},"divn"),o.prototype.egcd=i(function(s){r(s.negative===0),r(!s.isZero());var u=this,m=s.clone();u.negative!==0?u=u.umod(s):u=u.clone();for(var y=new o(1),v=new o(0),S=new o(0),E=new o(1),b=0;u.isEven()&&m.isEven();)u.iushrn(1),m.iushrn(1),++b;for(var c=m.clone(),w=u.clone();!u.isZero();){for(var D=0,L=1;!(u.words[0]&L)&&D<26;++D,L<<=1);if(D>0)for(u.iushrn(D);D-- >0;)(y.isOdd()||v.isOdd())&&(y.iadd(c),v.isub(w)),y.iushrn(1),v.iushrn(1);for(var z=0,Y=1;!(m.words[0]&Y)&&z<26;++z,Y<<=1);if(z>0)for(m.iushrn(z);z-- >0;)(S.isOdd()||E.isOdd())&&(S.iadd(c),E.isub(w)),S.iushrn(1),E.iushrn(1);u.cmp(m)>=0?(u.isub(m),y.isub(S),v.isub(E)):(m.isub(u),S.isub(y),E.isub(v))}return{a:S,b:E,gcd:m.iushln(b)}},"egcd"),o.prototype._invmp=i(function(s){r(s.negative===0),r(!s.isZero());var u=this,m=s.clone();u.negative!==0?u=u.umod(s):u=u.clone();for(var y=new o(1),v=new o(0),S=m.clone();u.cmpn(1)>0&&m.cmpn(1)>0;){for(var E=0,b=1;!(u.words[0]&b)&&E<26;++E,b<<=1);if(E>0)for(u.iushrn(E);E-- >0;)y.isOdd()&&y.iadd(S),y.iushrn(1);for(var c=0,w=1;!(m.words[0]&w)&&c<26;++c,w<<=1);if(c>0)for(m.iushrn(c);c-- >0;)v.isOdd()&&v.iadd(S),v.iushrn(1);u.cmp(m)>=0?(u.isub(m),y.isub(v)):(m.isub(u),v.isub(y))}var D;return u.cmpn(1)===0?D=y:D=v,D.cmpn(0)<0&&D.iadd(s),D},"_invmp"),o.prototype.gcd=i(function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var u=this.clone(),m=s.clone();u.negative=0,m.negative=0;for(var y=0;u.isEven()&&m.isEven();y++)u.iushrn(1),m.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;m.isEven();)m.iushrn(1);var v=u.cmp(m);if(v<0){var S=u;u=m,m=S}else if(v===0||m.cmpn(1)===0)break;u.isub(m)}while(!0);return m.iushln(y)},"gcd"),o.prototype.invm=i(function(s){return this.egcd(s).a.umod(s)},"invm"),o.prototype.isEven=i(function(){return(this.words[0]&1)===0},"isEven"),o.prototype.isOdd=i(function(){return(this.words[0]&1)===1},"isOdd"),o.prototype.andln=i(function(s){return this.words[0]&s},"andln"),o.prototype.bincn=i(function(s){r(typeof s=="number");var u=s%26,m=(s-u)/26,y=1<<u;if(this.length<=m)return this._expand(m+1),this.words[m]|=y,this;for(var v=y,S=m;v!==0&&S<this.length;S++){var E=this.words[S]|0;E+=v,v=E>>>26,E&=67108863,this.words[S]=E}return v!==0&&(this.words[S]=v,this.length++),this},"bincn"),o.prototype.isZero=i(function(){return this.length===1&&this.words[0]===0},"isZero"),o.prototype.cmpn=i(function(s){var u=s<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this.strip();var m;if(this.length>1)m=1;else{u&&(s=-s),r(s<=67108863,"Number is too big");var y=this.words[0]|0;m=y===s?0:y<s?-1:1}return this.negative!==0?-m|0:m},"cmpn"),o.prototype.cmp=i(function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var u=this.ucmp(s);return this.negative!==0?-u|0:u},"cmp"),o.prototype.ucmp=i(function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var u=0,m=this.length-1;m>=0;m--){var y=this.words[m]|0,v=s.words[m]|0;if(y!==v){y<v?u=-1:y>v&&(u=1);break}}return u},"ucmp"),o.prototype.gtn=i(function(s){return this.cmpn(s)===1},"gtn"),o.prototype.gt=i(function(s){return this.cmp(s)===1},"gt"),o.prototype.gten=i(function(s){return this.cmpn(s)>=0},"gten"),o.prototype.gte=i(function(s){return this.cmp(s)>=0},"gte"),o.prototype.ltn=i(function(s){return this.cmpn(s)===-1},"ltn"),o.prototype.lt=i(function(s){return this.cmp(s)===-1},"lt"),o.prototype.lten=i(function(s){return this.cmpn(s)<=0},"lten"),o.prototype.lte=i(function(s){return this.cmp(s)<=0},"lte"),o.prototype.eqn=i(function(s){return this.cmpn(s)===0},"eqn"),o.prototype.eq=i(function(s){return this.cmp(s)===0},"eq"),o.red=i(function(s){return new W(s)},"red"),o.prototype.toRed=i(function(s){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},"toRed"),o.prototype.fromRed=i(function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},"fromRed"),o.prototype._forceRed=i(function(s){return this.red=s,this},"_forceRed"),o.prototype.forceRed=i(function(s){return r(!this.red,"Already a number in reduction context"),this._forceRed(s)},"forceRed"),o.prototype.redAdd=i(function(s){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},"redAdd"),o.prototype.redIAdd=i(function(s){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},"redIAdd"),o.prototype.redSub=i(function(s){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},"redSub"),o.prototype.redISub=i(function(s){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},"redISub"),o.prototype.redShl=i(function(s){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},"redShl"),o.prototype.redMul=i(function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},"redMul"),o.prototype.redIMul=i(function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},"redIMul"),o.prototype.redSqr=i(function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},"redSqr"),o.prototype.redISqr=i(function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},"redISqr"),o.prototype.redSqrt=i(function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},"redSqrt"),o.prototype.redInvm=i(function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},"redInvm"),o.prototype.redNeg=i(function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},"redNeg"),o.prototype.redPow=i(function(s){return r(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)},"redPow");var Q={k256:null,p224:null,p192:null,p25519:null};function F(x,s){this.name=x,this.p=new o(s,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}i(F,"MPrime"),F.prototype._tmp=i(function(){var s=new o(null);return s.words=new Array(Math.ceil(this.n/13)),s},"_tmp"),F.prototype.ireduce=i(function(s){var u=s,m;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),m=u.bitLength();while(m>this.n);var y=m<this.n?-1:u.ucmp(this.p);return y===0?(u.words[0]=0,u.length=1):y>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},"ireduce"),F.prototype.split=i(function(s,u){s.iushrn(this.n,0,u)},"split"),F.prototype.imulK=i(function(s){return s.imul(this.k)},"imulK");function ce(){F.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(ce,"K256"),n(ce,F),ce.prototype.split=i(function(s,u){for(var m=4194303,y=Math.min(s.length,9),v=0;v<y;v++)u.words[v]=s.words[v];if(u.length=y,s.length<=9){s.words[0]=0,s.length=1;return}var S=s.words[9];for(u.words[u.length++]=S&m,v=10;v<s.length;v++){var E=s.words[v]|0;s.words[v-10]=(E&m)<<4|S>>>22,S=E}S>>>=22,s.words[v-10]=S,S===0&&s.length>10?s.length-=10:s.length-=9},"split"),ce.prototype.imulK=i(function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var u=0,m=0;m<s.length;m++){var y=s.words[m]|0;u+=y*977,s.words[m]=u&67108863,u=y*64+(u/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s},"imulK");function se(){F.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(se,"P224"),n(se,F);function ie(){F.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(ie,"P192"),n(ie,F);function ae(){F.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(ae,"P25519"),n(ae,F),ae.prototype.imulK=i(function(s){for(var u=0,m=0;m<s.length;m++){var y=(s.words[m]|0)*19+u,v=y&67108863;y>>>=26,s.words[m]=v,u=y}return u!==0&&(s.words[s.length++]=u),s},"imulK"),o._prime=i(function(s){if(Q[s])return Q[s];var u;if(s==="k256")u=new ce;else if(s==="p224")u=new se;else if(s==="p192")u=new ie;else if(s==="p25519")u=new ae;else throw new Error("Unknown prime "+s);return Q[s]=u,u},"prime");function W(x){if(typeof x=="string"){var s=o._prime(x);this.m=s.p,this.prime=s}else r(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}i(W,"Red"),W.prototype._verify1=i(function(s){r(s.negative===0,"red works only with positives"),r(s.red,"red works only with red numbers")},"_verify1"),W.prototype._verify2=i(function(s,u){r((s.negative|u.negative)===0,"red works only with positives"),r(s.red&&s.red===u.red,"red works only with red numbers")},"_verify2"),W.prototype.imod=i(function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},"imod"),W.prototype.neg=i(function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},"neg"),W.prototype.add=i(function(s,u){this._verify2(s,u);var m=s.add(u);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},"add"),W.prototype.iadd=i(function(s,u){this._verify2(s,u);var m=s.iadd(u);return m.cmp(this.m)>=0&&m.isub(this.m),m},"iadd"),W.prototype.sub=i(function(s,u){this._verify2(s,u);var m=s.sub(u);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},"sub"),W.prototype.isub=i(function(s,u){this._verify2(s,u);var m=s.isub(u);return m.cmpn(0)<0&&m.iadd(this.m),m},"isub"),W.prototype.shl=i(function(s,u){return this._verify1(s),this.imod(s.ushln(u))},"shl"),W.prototype.imul=i(function(s,u){return this._verify2(s,u),this.imod(s.imul(u))},"imul"),W.prototype.mul=i(function(s,u){return this._verify2(s,u),this.imod(s.mul(u))},"mul"),W.prototype.isqr=i(function(s){return this.imul(s,s.clone())},"isqr"),W.prototype.sqr=i(function(s){return this.mul(s,s)},"sqr"),W.prototype.sqrt=i(function(s){if(s.isZero())return s.clone();var u=this.m.andln(3);if(r(u%2===1),u===3){var m=this.m.add(new o(1)).iushrn(2);return this.pow(s,m)}for(var y=this.m.subn(1),v=0;!y.isZero()&&y.andln(1)===0;)v++,y.iushrn(1);r(!y.isZero());var S=new o(1).toRed(this),E=S.redNeg(),b=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);this.pow(c,b).cmp(E)!==0;)c.redIAdd(E);for(var w=this.pow(c,y),D=this.pow(s,y.addn(1).iushrn(1)),L=this.pow(s,y),z=v;L.cmp(S)!==0;){for(var Y=L,oe=0;Y.cmp(S)!==0;oe++)Y=Y.redSqr();r(oe<z);var le=this.pow(w,new o(1).iushln(z-oe-1));D=D.redMul(le),w=le.redSqr(),L=L.redMul(w),z=oe}return D},"sqrt"),W.prototype.invm=i(function(s){var u=s._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},"invm"),W.prototype.pow=i(function(s,u){if(u.isZero())return new o(1).toRed(this);if(u.cmpn(1)===0)return s.clone();var m=4,y=new Array(1<<m);y[0]=new o(1).toRed(this),y[1]=s;for(var v=2;v<y.length;v++)y[v]=this.mul(y[v-1],s);var S=y[0],E=0,b=0,c=u.bitLength()%26;for(c===0&&(c=26),v=u.length-1;v>=0;v--){for(var w=u.words[v],D=c-1;D>=0;D--){var L=w>>D&1;if(S!==y[0]&&(S=this.sqr(S)),L===0&&E===0){b=0;continue}E<<=1,E|=L,b++,!(b!==m&&(v!==0||D!==0))&&(S=this.mul(S,y[E]),b=0,E=0)}c=26}return S},"pow"),W.prototype.convertTo=i(function(s){var u=s.umod(this.m);return u===s?u.clone():u},"convertTo"),W.prototype.convertFrom=i(function(s){var u=s.clone();return u.red=null,u},"convertFrom"),o.mont=i(function(s){return new me(s)},"mont");function me(x){W.call(this,x),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(me,"Mont"),n(me,W),me.prototype.convertTo=i(function(s){return this.imod(s.ushln(this.shift))},"convertTo"),me.prototype.convertFrom=i(function(s){var u=this.imod(s.mul(this.rinv));return u.red=null,u},"convertFrom"),me.prototype.imul=i(function(s,u){if(s.isZero()||u.isZero())return s.words[0]=0,s.length=1,s;var m=s.imul(u),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=m.isub(y).iushrn(this.shift),S=v;return v.cmp(this.m)>=0?S=v.isub(this.m):v.cmpn(0)<0&&(S=v.iadd(this.m)),S._forceRed(this)},"imul"),me.prototype.mul=i(function(s,u){if(s.isZero()||u.isZero())return new o(0)._forceRed(this);var m=s.mul(u),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=m.isub(y).iushrn(this.shift),S=v;return v.cmp(this.m)>=0?S=v.isub(this.m):v.cmpn(0)<0&&(S=v.iadd(this.m)),S._forceRed(this)},"mul"),me.prototype.invm=i(function(s){var u=this.imod(s._invmp(this.m).mul(this.r2));return u._forceRed(this)},"invm")})(typeof Ud>"u"||Ud,vv)});var wv=he(Ks=>{"use strict";h();p();Object.defineProperty(Ks,"__esModule",{value:!0});var No=Ro(),nM=$0().ec,Dd=new nM("secp256k1"),Os=Dd.curve;Ks.privateKeyExport=function(e,t){t===void 0&&(t=!0);var r=new No(e);if(r.ucmp(Os.n)>=0)throw new Error("couldn't export to DER format");var n=Dd.g.mul(r);return bv(n.getX(),n.getY(),t)};Ks.privateKeyModInverse=function(e){var t=new No(e);if(t.ucmp(Os.n)>=0||t.isZero())throw new Error("private key range is invalid");return t.invm(Os.n).toArrayLike(Buffer,"be",32)};Ks.signatureImport=function(e){var t=new No(e.r);t.ucmp(Os.n)>=0&&(t=new No(0));var r=new No(e.s);return r.ucmp(Os.n)>=0&&(r=new No(0)),Buffer.concat([t.toArrayLike(Buffer,"be",32),r.toArrayLike(Buffer,"be",32)])};Ks.ecdhUnsafe=function(e,t,r){r===void 0&&(r=!0);var n=Dd.keyFromPublic(e),o=new No(t);if(o.ucmp(Os.n)>=0||o.isZero())throw new Error("scalar was invalid (zero or overflow)");var a=n.pub.mul(o);return bv(a.getX(),a.getY(),r)};var bv=i(function(e,t,r){var n;return r?(n=Buffer.alloc(33),n[0]=t.isOdd()?3:2,e.toArrayLike(Buffer,"be",32).copy(n,1)):(n=Buffer.alloc(65),n[0]=4,e.toArrayLike(Buffer,"be",32).copy(n,1),t.toArrayLike(Buffer,"be",32).copy(n,33)),n},"toPublicKey")});var xv=he(Oa=>{"use strict";h();p();Object.defineProperty(Oa,"__esModule",{value:!0});var{Buffer:Ba}=nn(),iM=Ba.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),oM=Ba.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);Oa.privateKeyExport=function(e,t,r){r===void 0&&(r=!0);var n=Ba.from(r?iM:oM);return e.copy(n,r?8:9),t.copy(n,r?181:214),n};Oa.privateKeyImport=function(e){var t=e.length,r=0;if(t<r+1||e[r]!==48||(r+=1,t<r+1||!(e[r]&128)))return null;var n=e[r]&127;if(r+=1,n<1||n>2||t<r+n)return null;var o=e[r+n-1]|(n>1?e[r+n-2]<<8:0);return r+=n,t<r+o||t<r+3||e[r]!==2||e[r+1]!==1||e[r+2]!==1||(r+=3,t<r+2||e[r]!==4||e[r+1]>32||t<r+2+e[r+1])?null:e.slice(r+2,r+2+e[r+1])};Oa.signatureImportLax=function(e){var t=Ba.alloc(32,0),r=Ba.alloc(32,0),n=e.length,o=0;if(e[o++]!==48)return null;var a=e[o++];if(a&128&&(o+=a-128,o>n)||e[o++]!==2)return null;var l=e[o++];if(l&128){if(a=l-128,o+a>n)return null;for(;a>0&&e[o]===0;o+=1,a-=1);for(l=0;a>0;o+=1,a-=1)l=(l<<8)+e[o]}if(l>n-o)return null;var d=o;if(o+=l,e[o++]!==2)return null;var g=e[o++];if(g&128){if(a=g-128,o+a>n)return null;for(;a>0&&e[o]===0;o+=1,a-=1);for(g=0;a>0;o+=1,a-=1)g=(g<<8)+e[o]}if(g>n-o)return null;var A=o;for(o+=g;l>0&&e[d]===0;l-=1,d+=1);if(l>32)return null;var T=e.slice(d,d+l);for(T.copy(t,32-T.length);g>0&&e[A]===0;g-=1,A+=1);if(g>32)return null;var I=e.slice(A,A+g);return I.copy(r,32-I.length),{r:t,s:r}}});var Ku=he(Me=>{"use strict";h();p();Object.defineProperty(Me,"__esModule",{value:!0});Me.ecdhUnsafe=Me.ecdh=Me.recover=Me.verify=Me.sign=Me.signatureImportLax=Me.signatureImport=Me.signatureExport=Me.signatureNormalize=Me.publicKeyCombine=Me.publicKeyTweakMul=Me.publicKeyTweakAdd=Me.publicKeyVerify=Me.publicKeyConvert=Me.publicKeyCreate=Me.privateKeyTweakMul=Me.privateKeyTweakAdd=Me.privateKeyModInverse=Me.privateKeyNegate=Me.privateKeyImport=Me.privateKeyExport=Me.privateKeyVerify=void 0;var zt=yv(),Ou=wv(),Vd=xv();Me.privateKeyVerify=function(e){return e.length!==32?!1:zt.privateKeyVerify(Uint8Array.from(e))};Me.privateKeyExport=function(e,t){if(e.length!==32)throw new RangeError("private key length is invalid");var r=Ou.privateKeyExport(e,t);return Vd.privateKeyExport(e,r,t)};Me.privateKeyImport=function(e){if(e=Vd.privateKeyImport(e),e!==null&&e.length===32&&Me.privateKeyVerify(e))return e;throw new Error("couldn't import from DER format")};Me.privateKeyNegate=function(e){return Buffer.from(zt.privateKeyNegate(Uint8Array.from(e)))};Me.privateKeyModInverse=function(e){if(e.length!==32)throw new Error("private key length is invalid");return Buffer.from(Ou.privateKeyModInverse(Uint8Array.from(e)))};Me.privateKeyTweakAdd=function(e,t){return Buffer.from(zt.privateKeyTweakAdd(Uint8Array.from(e),t))};Me.privateKeyTweakMul=function(e,t){return Buffer.from(zt.privateKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t)))};Me.publicKeyCreate=function(e,t){return Buffer.from(zt.publicKeyCreate(Uint8Array.from(e),t))};Me.publicKeyConvert=function(e,t){return Buffer.from(zt.publicKeyConvert(Uint8Array.from(e),t))};Me.publicKeyVerify=function(e){return e.length!==33&&e.length!==65?!1:zt.publicKeyVerify(Uint8Array.from(e))};Me.publicKeyTweakAdd=function(e,t,r){return Buffer.from(zt.publicKeyTweakAdd(Uint8Array.from(e),Uint8Array.from(t),r))};Me.publicKeyTweakMul=function(e,t,r){return Buffer.from(zt.publicKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t),r))};Me.publicKeyCombine=function(e,t){var r=[];return e.forEach(function(n){r.push(Uint8Array.from(n))}),Buffer.from(zt.publicKeyCombine(r,t))};Me.signatureNormalize=function(e){return Buffer.from(zt.signatureNormalize(Uint8Array.from(e)))};Me.signatureExport=function(e){return Buffer.from(zt.signatureExport(Uint8Array.from(e)))};Me.signatureImport=function(e){return Buffer.from(zt.signatureImport(Uint8Array.from(e)))};Me.signatureImportLax=function(e){if(e.length===0)throw new RangeError("signature length is invalid");var t=Vd.signatureImportLax(e);if(t===null)throw new Error("couldn't parse DER signature");return Ou.signatureImport(t)};Me.sign=function(e,t,r){if(r===null)throw new TypeError("options should be an Object");var n=void 0;if(r){if(n={},r.data===null)throw new TypeError("options.data should be a Buffer");if(r.data){if(r.data.length!=32)throw new RangeError("options.data length is invalid");n.data=new Uint8Array(r.data)}if(r.noncefn===null)throw new TypeError("options.noncefn should be a Function");r.noncefn&&(n.noncefn=function(a,l,d,g,A){var T=d!=null?Buffer.from(d):null,I=g!=null?Buffer.from(g):null,k=Buffer.from("");return r.noncefn&&(k=r.noncefn(Buffer.from(a),Buffer.from(l),T,I,A)),new Uint8Array(k)})}var o=zt.ecdsaSign(Uint8Array.from(e),Uint8Array.from(t),n);return{signature:Buffer.from(o.signature),recovery:o.recid}};Me.verify=function(e,t,r){return zt.ecdsaVerify(Uint8Array.from(t),Uint8Array.from(e),r)};Me.recover=function(e,t,r,n){return Buffer.from(zt.ecdsaRecover(Uint8Array.from(t),r,Uint8Array.from(e),n))};Me.ecdh=function(e,t){return Buffer.from(zt.ecdh(Uint8Array.from(e),Uint8Array.from(t),{}))};Me.ecdhUnsafe=function(e,t,r){if(e.length!==33&&e.length!==65)throw new RangeError("public key length is invalid");if(t.length!==32)throw new RangeError("private key length is invalid");return Buffer.from(Ou.ecdhUnsafe(Uint8Array.from(e),Uint8Array.from(t),r))}});var Ld=he((mF,Av)=>{h();p();Av.exports=i(function(t){if(typeof t!="string")throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.slice(0,2)==="0x"},"isHexPrefixed")});var Ev=he((bF,Sv)=>{h();p();var sM=Ld();Sv.exports=i(function(t){return typeof t!="string"?t:sM(t)?t.slice(2):t},"stripHexPrefix")});var Uo=he((SF,Iv)=>{"use strict";h();p();var aM=Ld(),Mv=Ev();function Cu(e){var t=e;if(typeof t!="string")throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}i(Cu,"padToEven");function Tv(e){var t=e.toString(16);return"0x"+t}i(Tv,"intToHex");function cM(e){var t=Tv(e);return new Buffer(Cu(t.slice(2)),"hex")}i(cM,"intToBuffer");function uM(e){if(typeof e!="string")throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return Buffer.byteLength(e,"utf8")}i(uM,"getBinarySize");function lM(e,t,r){if(Array.isArray(e)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(Array.isArray(t)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[!!r&&"some"||"every"](function(n){return e.indexOf(n)>=0})}i(lM,"arrayContainsArray");function fM(e){var t=new Buffer(Cu(Mv(e).replace(/^0+|0+$/g,"")),"hex");return t.toString("utf8")}i(fM,"toUtf8");function dM(e){var t="",r=0,n=e.length;for(e.substring(0,2)==="0x"&&(r=2);r<n;r+=2){var o=parseInt(e.substr(r,2),16);t+=String.fromCharCode(o)}return t}i(dM,"toAscii");function hM(e){var t=new Buffer(e,"utf8");return"0x"+Cu(t.toString("hex")).replace(/^0+|0+$/g,"")}i(hM,"fromUtf8");function pM(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r),o=n.toString(16);t+=o.length<2?"0"+o:o}return"0x"+t}i(pM,"fromAscii");function mM(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if(typeof t!="string")throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var n=[],o=0;o<e.length;o++){var a=e[o][t];if(r&&!a)a="";else if(typeof a!="string")throw new Error("invalid abi");n.push(a)}return n}i(mM,"getKeys");function gM(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}i(gM,"isHexString");Iv.exports={arrayContainsArray:lM,intToBuffer:cM,getBinarySize:uM,isHexPrefixed:aM,stripHexPrefix:Mv,padToEven:Cu,intToHex:Tv,fromAscii:pM,fromUtf8:hM,toAscii:dM,toUtf8:fM,getKeys:mM,isHexString:gM}});var Ru=he(Bn=>{"use strict";h();p();var yM=Bn&&Bn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.getLength=Bn.decode=Bn.encode=void 0;var vM=yM(eA());function kv(e){if(Array.isArray(e)){for(var t=[],r=0;r<e.length;r++)t.push(kv(e[r]));var n=Buffer.concat(t);return Buffer.concat([_v(n.length,192),n])}else{var o=qd(e);return o.length===1&&o[0]<128?o:Buffer.concat([_v(o.length,128),o])}}i(kv,"encode");Bn.encode=kv;function Fd(e,t){if(e[0]==="0"&&e[1]==="0")throw new Error("invalid RLP: extra zeros");return parseInt(e,t)}i(Fd,"safeParseInt");function _v(e,t){if(e<56)return Buffer.from([e+t]);var r=zd(e),n=r.length/2,o=zd(t+55+n);return Buffer.from(o+r,"hex")}i(_v,"encodeLength");function bM(e,t){if(t===void 0&&(t=!1),!e||e.length===0)return Buffer.from([]);var r=qd(e),n=jd(r);if(t)return n;if(n.remainder.length!==0)throw new Error("invalid remainder");return n.data}i(bM,"decode");Bn.decode=bM;function wM(e){if(!e||e.length===0)return Buffer.from([]);var t=qd(e),r=t[0];if(r<=127)return t.length;if(r<=183)return r-127;if(r<=191)return r-182;if(r<=247)return r-191;var n=r-246,o=Fd(t.slice(1,n).toString("hex"),16);return n+o}i(wM,"getLength");Bn.getLength=wM;function jd(e){var t,r,n,o,a,l=[],d=e[0];if(d<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(d<=183){if(t=d-127,d===128?n=Buffer.from([]):n=e.slice(1,t),t===2&&n[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:n,remainder:e.slice(t)}}else if(d<=191){if(r=d-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=Fd(e.slice(1,r).toString("hex"),16),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");if(n=e.slice(r,t+r),n.length<t)throw new Error("invalid RLP: not enough bytes for string");return{data:n,remainder:e.slice(t+r)}}else if(d<=247){for(t=d-191,o=e.slice(1,t);o.length;)a=jd(o),l.push(a.data),o=a.remainder;return{data:l,remainder:e.slice(t)}}else{r=d-246,t=Fd(e.slice(1,r).toString("hex"),16);var g=r+t;if(g>e.length)throw new Error("invalid rlp: total length is larger than the data");if(o=e.slice(r,g),o.length===0)throw new Error("invalid rlp, List has a invalid length");for(;o.length;)a=jd(o),l.push(a.data),o=a.remainder;return{data:l,remainder:e.slice(g)}}}i(jd,"_decode");function Pv(e){return e.slice(0,2)==="0x"}i(Pv,"isHexPrefixed");function xM(e){return typeof e!="string"?e:Pv(e)?e.slice(2):e}i(xM,"stripHexPrefix");function zd(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}i(zd,"intToHex");function AM(e){return e.length%2?"0"+e:e}i(AM,"padToEven");function SM(e){var t=zd(e);return Buffer.from(t,"hex")}i(SM,"intToBuffer");function qd(e){if(!Buffer.isBuffer(e)){if(typeof e=="string")return Pv(e)?Buffer.from(AM(xM(e)),"hex"):Buffer.from(e);if(typeof e=="number"||typeof e=="bigint")return e?SM(e):Buffer.from([]);if(e==null)return Buffer.from([]);if(e instanceof Uint8Array)return Buffer.from(e);if(vM.default.isBN(e))return Buffer.from(e.toArray());throw new Error("invalid type")}return e}i(qd,"toBuffer")});var Ov=he(Et=>{"use strict";h();p();Object.defineProperty(Et,"__esModule",{value:!0});Et.KECCAK256_RLP=Et.KECCAK256_RLP_S=Et.KECCAK256_RLP_ARRAY=Et.KECCAK256_RLP_ARRAY_S=Et.KECCAK256_NULL=Et.KECCAK256_NULL_S=Et.TWO_POW256=Et.MAX_INTEGER=void 0;var Bv=Ro(),{Buffer:Hd}=nn();Et.MAX_INTEGER=new Bv("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16);Et.TWO_POW256=new Bv("10000000000000000000000000000000000000000000000000000000000000000",16);Et.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";Et.KECCAK256_NULL=Hd.from(Et.KECCAK256_NULL_S,"hex");Et.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";Et.KECCAK256_RLP_ARRAY=Hd.from(Et.KECCAK256_RLP_ARRAY_S,"hex");Et.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";Et.KECCAK256_RLP=Hd.from(Et.KECCAK256_RLP_S,"hex")});var Rs=he(rt=>{"use strict";h();p();Object.defineProperty(rt,"__esModule",{value:!0});rt.baToJSON=rt.addHexPrefix=rt.toUnsigned=rt.fromSigned=rt.bufferToHex=rt.bufferToInt=rt.toBuffer=rt.stripZeros=rt.unpad=rt.setLengthRight=rt.setLength=rt.setLengthLeft=rt.zeros=void 0;var Cs=Uo(),Wd=Ro();rt.zeros=function(e){return Buffer.allocUnsafe(e).fill(0)};rt.setLengthLeft=function(e,t,r){r===void 0&&(r=!1);var n=rt.zeros(t);return e=rt.toBuffer(e),r?e.length<t?(e.copy(n),n):e.slice(0,t):e.length<t?(e.copy(n,t-e.length),n):e.slice(-t)};rt.setLength=rt.setLengthLeft;rt.setLengthRight=function(e,t){return rt.setLength(e,t,!0)};rt.unpad=function(e){e=Cs.stripHexPrefix(e);for(var t=e[0];e.length>0&&t.toString()==="0";)e=e.slice(1),t=e[0];return e};rt.stripZeros=rt.unpad;rt.toBuffer=function(e){if(!Buffer.isBuffer(e))if(Array.isArray(e))e=Buffer.from(e);else if(typeof e=="string")if(Cs.isHexString(e))e=Buffer.from(Cs.padToEven(Cs.stripHexPrefix(e)),"hex");else throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: "+e);else if(typeof e=="number")e=Cs.intToBuffer(e);else if(e==null)e=Buffer.allocUnsafe(0);else if(Wd.isBN(e))e=e.toArrayLike(Buffer);else if(e.toArray)e=Buffer.from(e.toArray());else throw new Error("invalid type");return e};rt.bufferToInt=function(e){return new Wd(rt.toBuffer(e)).toNumber()};rt.bufferToHex=function(e){return e=rt.toBuffer(e),"0x"+e.toString("hex")};rt.fromSigned=function(e){return new Wd(e).fromTwos(256)};rt.toUnsigned=function(e){return Buffer.from(e.toTwos(256).toArray())};rt.addHexPrefix=function(e){return typeof e!="string"||Cs.isHexPrefixed(e)?e:"0x"+e};rt.baToJSON=function(e){if(Buffer.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var t=[],r=0;r<e.length;r++)t.push(rt.baToJSON(e[r]));return t}}});var Kv=he($d=>{"use strict";h();p();Object.defineProperty($d,"__esModule",{value:!0});function EM(e){return function(t){var r=e();return r.update(t),Buffer.from(r.digest())}}i(EM,"createHashFunction");$d.createHashFunction=EM});var Nv=he((FF,Rv)=>{h();p();var{Transform:MM}=W0();Rv.exports=e=>class Cv extends MM{static{i(this,"Keccak")}constructor(r,n,o,a,l){super(l),this._rate=r,this._capacity=n,this._delimitedSuffix=o,this._hashBitLength=a,this._options=l,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,o){let a=null;try{this.update(r,n)}catch(l){a=l}o(a)}_flush(r){let n=null;try{this.push(this.digest())}catch(o){n=o}r(n)}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new Cv(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var Vv=he((HF,Dv)=>{h();p();var{Transform:TM}=W0();Dv.exports=e=>class Uv extends TM{static{i(this,"Shake")}constructor(r,n,o,a){super(a),this._rate=r,this._capacity=n,this._delimitedSuffix=o,this._options=a,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,o){let a=null;try{this.update(r,n)}catch(l){a=l}o(a)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let o=this._state.squeeze(r);return n!==void 0&&(o=o.toString(n)),o}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new Uv(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var Fv=he((ZF,Lv)=>{h();p();var IM=Nv(),_M=Vv();Lv.exports=function(e){let t=IM(e),r=_M(e);return function(n,o){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new t(1152,448,null,224,o);case"keccak256":return new t(1088,512,null,256,o);case"keccak384":return new t(832,768,null,384,o);case"keccak512":return new t(576,1024,null,512,o);case"sha3-224":return new t(1152,448,6,224,o);case"sha3-256":return new t(1088,512,6,256,o);case"sha3-384":return new t(832,768,6,384,o);case"sha3-512":return new t(576,1024,6,512,o);case"shake128":return new r(1344,256,31,o);case"shake256":return new r(1088,512,31,o);default:throw new Error("Invald algorithm: "+n)}}}});var qv=he(zv=>{h();p();var jv=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];zv.p1600=function(e){for(let t=0;t<24;++t){let r=e[0]^e[10]^e[20]^e[30]^e[40],n=e[1]^e[11]^e[21]^e[31]^e[41],o=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],l=e[4]^e[14]^e[24]^e[34]^e[44],d=e[5]^e[15]^e[25]^e[35]^e[45],g=e[6]^e[16]^e[26]^e[36]^e[46],A=e[7]^e[17]^e[27]^e[37]^e[47],T=e[8]^e[18]^e[28]^e[38]^e[48],I=e[9]^e[19]^e[29]^e[39]^e[49],k=T^(o<<1|a>>>31),K=I^(a<<1|o>>>31),C=e[0]^k,R=e[1]^K,V=e[10]^k,q=e[11]^K,Q=e[20]^k,F=e[21]^K,ce=e[30]^k,se=e[31]^K,ie=e[40]^k,ae=e[41]^K;k=r^(l<<1|d>>>31),K=n^(d<<1|l>>>31);let W=e[2]^k,me=e[3]^K,x=e[12]^k,s=e[13]^K,u=e[22]^k,m=e[23]^K,y=e[32]^k,v=e[33]^K,S=e[42]^k,E=e[43]^K;k=o^(g<<1|A>>>31),K=a^(A<<1|g>>>31);let b=e[4]^k,c=e[5]^K,w=e[14]^k,D=e[15]^K,L=e[24]^k,z=e[25]^K,Y=e[34]^k,oe=e[35]^K,le=e[44]^k,at=e[45]^K;k=l^(T<<1|I>>>31),K=d^(I<<1|T>>>31);let de=e[6]^k,O=e[7]^K,U=e[16]^k,N=e[17]^K,H=e[26]^k,te=e[27]^K,j=e[36]^k,J=e[37]^K,et=e[46]^k,ye=e[47]^K;k=g^(r<<1|n>>>31),K=A^(n<<1|r>>>31);let we=e[8]^k,_r=e[9]^K,Te=e[18]^k,Se=e[19]^K,wn=e[28]^k,Ee=e[29]^K,Ze=e[38]^k,ki=e[39]^K,Je=e[48]^k,Ye=e[49]^K,Zn=C,Ie=R,_e=q<<4|V>>>28,Jn=V<<4|q>>>28,ke=Q<<3|F>>>29,Pe=F<<3|Q>>>29,Yn=se<<9|ce>>>23,Be=ce<<9|se>>>23,Oe=ie<<18|ae>>>14,Qn=ae<<18|ie>>>14,Ke=W<<1|me>>>31,Ce=me<<1|W>>>31,Xn=s<<12|x>>>20,Re=x<<12|s>>>20,Ne=u<<10|m>>>22,ei=m<<10|u>>>22,Ue=v<<13|y>>>19,De=y<<13|v>>>19,ti=S<<2|E>>>30,Ve=E<<2|S>>>30,Le=c<<30|b>>>2,ri=b<<30|c>>>2,Fe=w<<6|D>>>26,je=D<<6|w>>>26,ni=z<<11|L>>>21,ze=L<<11|z>>>21,qe=Y<<15|oe>>>17,ii=oe<<15|Y>>>17,He=at<<29|le>>>3,We=le<<29|at>>>3,oi=de<<28|O>>>4,$e=O<<28|de>>>4,Ge=N<<23|U>>>9,Lr=U<<23|N>>>9,Fr=H<<25|te>>>7,jr=te<<25|H>>>7,zr=j<<21|J>>>11,qr=J<<21|j>>>11,Hr=ye<<24|et>>>8,Wr=et<<24|ye>>>8,$r=we<<27|_r>>>5,Gr=_r<<27|we>>>5,Zr=Te<<20|Se>>>12,Jr=Se<<20|Te>>>12,Yr=Ee<<7|wn>>>25,Qr=wn<<7|Ee>>>25,Xr=Ze<<8|ki>>>24,en=ki<<8|Ze>>>24,tn=Je<<14|Ye>>>18,rn=Ye<<14|Je>>>18;e[0]=Zn^~Xn&ni,e[1]=Ie^~Re&ze,e[10]=oi^~Zr&ke,e[11]=$e^~Jr&Pe,e[20]=Ke^~Fe&Fr,e[21]=Ce^~je&jr,e[30]=$r^~_e&Ne,e[31]=Gr^~Jn&ei,e[40]=Le^~Ge&Yr,e[41]=ri^~Lr&Qr,e[2]=Xn^~ni&zr,e[3]=Re^~ze&qr,e[12]=Zr^~ke&Ue,e[13]=Jr^~Pe&De,e[22]=Fe^~Fr&Xr,e[23]=je^~jr&en,e[32]=_e^~Ne&qe,e[33]=Jn^~ei&ii,e[42]=Ge^~Yr&Yn,e[43]=Lr^~Qr&Be,e[4]=ni^~zr&tn,e[5]=ze^~qr&rn,e[14]=ke^~Ue&He,e[15]=Pe^~De&We,e[24]=Fr^~Xr&Oe,e[25]=jr^~en&Qn,e[34]=Ne^~qe&Hr,e[35]=ei^~ii&Wr,e[44]=Yr^~Yn&ti,e[45]=Qr^~Be&Ve,e[6]=zr^~tn&Zn,e[7]=qr^~rn&Ie,e[16]=Ue^~He&oi,e[17]=De^~We&$e,e[26]=Xr^~Oe&Ke,e[27]=en^~Qn&Ce,e[36]=qe^~Hr&$r,e[37]=ii^~Wr&Gr,e[46]=Yn^~ti&Le,e[47]=Be^~Ve&ri,e[8]=tn^~Zn&Xn,e[9]=rn^~Ie&Re,e[18]=He^~oi&Zr,e[19]=We^~$e&Jr,e[28]=Oe^~Ke&Fe,e[29]=Qn^~Ce&je,e[38]=Hr^~$r&_e,e[39]=Wr^~Gr&Jn,e[48]=ti^~Le&Ge,e[49]=Ve^~ri&Lr,e[0]^=jv[t*2],e[1]^=jv[t*2+1]}}});var Wv=he((tj,Hv)=>{h();p();var Nu=qv();function Ns(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}i(Ns,"Keccak");Ns.prototype.initialize=function(e,t){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1};Ns.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(Nu.p1600(this.state),this.count=0)};Ns.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<8*(this.count%4),e&128&&this.count===this.blockSize-1&&Nu.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),Nu.p1600(this.state),this.count=0,this.squeezing=!0};Ns.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);let t=Buffer.alloc(e);for(let r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(Nu.p1600(this.state),this.count=0);return t};Ns.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing};Hv.exports=Ns});var Gv=he((oj,$v)=>{h();p();$v.exports=Fv()(Wv())});var Zv=he(Us=>{"use strict";h();p();Object.defineProperty(Us,"__esModule",{value:!0});var Uu=Kv(),Du=Gv();Us.keccak224=Uu.createHashFunction(function(){return Du("keccak224")});Us.keccak256=Uu.createHashFunction(function(){return Du("keccak256")});Us.keccak384=Uu.createHashFunction(function(){return Du("keccak384")});Us.keccak512=Uu.createHashFunction(function(){return Du("keccak512")})});var Fu=he(ar=>{"use strict";h();p();Object.defineProperty(ar,"__esModule",{value:!0});ar.rlphash=ar.ripemd160=ar.sha256=ar.keccak256=ar.keccak=void 0;var Lu=Zv(),kM=Lu.keccak224,PM=Lu.keccak384,BM=Lu.keccak256,OM=Lu.keccak512,Jv=nA(),KM=Uo(),CM=Ru(),Vu=Rs();ar.keccak=function(e,t){switch(t===void 0&&(t=256),typeof e=="string"&&!KM.isHexString(e)?e=Buffer.from(e,"utf8"):e=Vu.toBuffer(e),t||(t=256),t){case 224:return kM(e);case 256:return BM(e);case 384:return PM(e);case 512:return OM(e);default:throw new Error("Invald algorithm: keccak"+t)}};ar.keccak256=function(e){return ar.keccak(e)};ar.sha256=function(e){return e=Vu.toBuffer(e),Jv("sha256").update(e).digest()};ar.ripemd160=function(e,t){e=Vu.toBuffer(e);var r=Jv("rmd160").update(e).digest();return t===!0?Vu.setLength(r,32):r};ar.rlphash=function(e){return ar.keccak(CM.encode(e))}});var Yv=he(tt=>{"use strict";h();p();Object.defineProperty(tt,"__esModule",{value:!0});tt.importPublic=tt.privateToPublic=tt.privateToAddress=tt.publicToAddress=tt.pubToAddress=tt.isValidPublic=tt.isValidPrivate=tt.isPrecompiled=tt.generateAddress2=tt.generateAddress=tt.isValidChecksumAddress=tt.toChecksumAddress=tt.isZeroAddress=tt.isValidAddress=tt.zeroAddress=void 0;var Gd=_m(),RM=Uo(),Ds=Ku(),NM=Ro(),dn=Rs(),Vs=Fu();tt.zeroAddress=function(){var e=20,t=dn.zeros(e);return dn.bufferToHex(t)};tt.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)};tt.isZeroAddress=function(e){var t=tt.zeroAddress();return t===dn.addHexPrefix(e)};tt.toChecksumAddress=function(e,t){e=RM.stripHexPrefix(e).toLowerCase();for(var r=t!==void 0?t.toString()+"0x":"",n=Vs.keccak(r+e).toString("hex"),o="0x",a=0;a<e.length;a++)parseInt(n[a],16)>=8?o+=e[a].toUpperCase():o+=e[a];return o};tt.isValidChecksumAddress=function(e,t){return tt.isValidAddress(e)&&tt.toChecksumAddress(e,t)===e};tt.generateAddress=function(e,t){e=dn.toBuffer(e);var r=new NM(t);return r.isZero()?Vs.rlphash([e,null]).slice(-20):Vs.rlphash([e,Buffer.from(r.toArray())]).slice(-20)};tt.generateAddress2=function(e,t,r){var n=dn.toBuffer(e),o=dn.toBuffer(t),a=dn.toBuffer(r);Gd(n.length===20),Gd(o.length===32);var l=Vs.keccak256(Buffer.concat([Buffer.from("ff","hex"),n,o,Vs.keccak256(a)]));return l.slice(-20)};tt.isPrecompiled=function(e){var t=dn.unpad(e);return t.length===1&&t[0]>=1&&t[0]<=8};tt.isValidPrivate=function(e){return Ds.privateKeyVerify(e)};tt.isValidPublic=function(e,t){return t===void 0&&(t=!1),e.length===64?Ds.publicKeyVerify(Buffer.concat([Buffer.from([4]),e])):t?Ds.publicKeyVerify(e):!1};tt.pubToAddress=function(e,t){return t===void 0&&(t=!1),e=dn.toBuffer(e),t&&e.length!==64&&(e=Ds.publicKeyConvert(e,!1).slice(1)),Gd(e.length===64),Vs.keccak(e).slice(-20)};tt.publicToAddress=tt.pubToAddress;tt.privateToAddress=function(e){return tt.publicToAddress(tt.privateToPublic(e))};tt.privateToPublic=function(e){return e=dn.toBuffer(e),Ds.publicKeyCreate(e,!1).slice(1)};tt.importPublic=function(e){return e=dn.toBuffer(e),e.length!==64&&(e=Ds.publicKeyConvert(e,!1).slice(1)),e}});var Qv=he(cr=>{"use strict";h();p();Object.defineProperty(cr,"__esModule",{value:!0});cr.hashPersonalMessage=cr.isValidSignature=cr.fromRpcSig=cr.toRpcSig=cr.ecrecover=cr.ecsign=void 0;var Zd=Ku(),ju=Ro(),Do=Rs(),UM=Fu();cr.ecsign=function(e,t,r){var n=Zd.sign(e,t),o=n.recovery,a={r:n.signature.slice(0,32),s:n.signature.slice(32,64),v:r?o+(r*2+35):o+27};return a};cr.ecrecover=function(e,t,r,n,o){var a=Buffer.concat([Do.setLength(r,32),Do.setLength(n,32)],64),l=Jd(t,o);if(!Yd(l))throw new Error("Invalid signature v value");var d=Zd.recover(e,a,l);return Zd.publicKeyConvert(d,!1).slice(1)};cr.toRpcSig=function(e,t,r,n){var o=Jd(e,n);if(!Yd(o))throw new Error("Invalid signature v value");return Do.bufferToHex(Buffer.concat([Do.setLengthLeft(t,32),Do.setLengthLeft(r,32),Do.toBuffer(e)]))};cr.fromRpcSig=function(e){var t=Do.toBuffer(e);if(t.length!==65)throw new Error("Invalid signature length");var r=t[64];return r<27&&(r+=27),{v:r,r:t.slice(0,32),s:t.slice(32,64)}};cr.isValidSignature=function(e,t,r,n,o){n===void 0&&(n=!0);var a=new ju("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),l=new ju("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(t.length!==32||r.length!==32||!Yd(Jd(e,o)))return!1;var d=new ju(t),g=new ju(r);return!(d.isZero()||d.gt(l)||g.isZero()||g.gt(l)||n&&g.cmp(a)===1)};cr.hashPersonalMessage=function(e){var t=Buffer.from(`Ethereum Signed Message:
`+e.length.toString(),"utf-8");return UM.keccak(Buffer.concat([t,e]))};function Jd(e,t){return t?e-(2*t+35):e-27}i(Jd,"calculateSigRecovery");function Yd(e){return e===0||e===1}i(Yd,"isValidSigRecovery")});var tb=he(qu=>{"use strict";h();p();Object.defineProperty(qu,"__esModule",{value:!0});qu.defineProperties=void 0;var Xv=_m(),DM=Uo(),eb=Ru(),zu=Rs();qu.defineProperties=function(e,t,r){if(e.raw=[],e._fields=[],e.toJSON=function(o){if(o===void 0&&(o=!1),o){var a={};return e._fields.forEach(function(l){a[l]="0x"+e[l].toString("hex")}),a}return zu.baToJSON(e.raw)},e.serialize=i(function(){return eb.encode(e.raw)},"serialize"),t.forEach(function(o,a){e._fields.push(o.name);function l(){return e.raw[a]}i(l,"getter");function d(g){g=zu.toBuffer(g),g.toString("hex")==="00"&&!o.allowZero&&(g=Buffer.allocUnsafe(0)),o.allowLess&&o.length?(g=zu.stripZeros(g),Xv(o.length>=g.length,"The field "+o.name+" must not have more "+o.length+" bytes")):!(o.allowZero&&g.length===0)&&o.length&&Xv(o.length===g.length,"The field "+o.name+" must have byte length of "+o.length),e.raw[a]=g}i(d,"setter"),Object.defineProperty(e,o.name,{enumerable:!0,configurable:!0,get:l,set:d}),o.default&&(e[o.name]=o.default),o.alias&&Object.defineProperty(e,o.alias,{enumerable:!1,configurable:!0,set:d,get:l})}),r)if(typeof r=="string"&&(r=Buffer.from(DM.stripHexPrefix(r),"hex")),Buffer.isBuffer(r)&&(r=eb.decode(r)),Array.isArray(r)){if(r.length>e._fields.length)throw new Error("wrong number of fields in data");r.forEach(function(o,a){e[e._fields[a]]=zu.toBuffer(o)})}else if(typeof r=="object"){var n=Object.keys(r);t.forEach(function(o){n.indexOf(o.name)!==-1&&(e[o.name]=r[o.name]),n.indexOf(o.alias)!==-1&&(e[o.alias]=r[o.alias])})}else throw new Error("invalid data")}});var Ka=he(_t=>{"use strict";h();p();var VM=_t&&_t.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:i(function(){return t[r]},"get")})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ls=_t&&_t.__exportStar||function(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&VM(t,e,r)};Object.defineProperty(_t,"__esModule",{value:!0});_t.secp256k1=_t.rlp=_t.BN=void 0;var LM=Ku();_t.secp256k1=LM;var FM=Uo(),jM=Ro();_t.BN=jM;var zM=Ru();_t.rlp=zM;Object.assign(_t,FM);Ls(Ov(),_t);Ls(Yv(),_t);Ls(Fu(),_t);Ls(Qv(),_t);Ls(Rs(),_t);Ls(tb(),_t)});var Ca=he(ur=>{"use strict";h();p();Object.defineProperty(ur,"__esModule",{value:!0});ur.normalize=ur.recoverPublicKey=ur.concatSig=ur.legacyToBuffer=ur.isNullish=ur.padWithZeroes=void 0;var Nr=Ka(),Qd=Uo();function Xd(e,t){if(e!==""&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}i(Xd,"padWithZeroes");ur.padWithZeroes=Xd;function qM(e){return e==null}i(qM,"isNullish");ur.isNullish=qM;function HM(e){return typeof e=="string"&&!Qd.isHexString(e)?Buffer.from(e):Nr.toBuffer(e)}i(HM,"legacyToBuffer");ur.legacyToBuffer=HM;function WM(e,t,r){let n=Nr.fromSigned(t),o=Nr.fromSigned(r),a=Nr.bufferToInt(e),l=Xd(Nr.toUnsigned(n).toString("hex"),64),d=Xd(Nr.toUnsigned(o).toString("hex"),64),g=Qd.stripHexPrefix(Qd.intToHex(a));return Nr.addHexPrefix(l.concat(d,g))}i(WM,"concatSig");ur.concatSig=WM;function $M(e,t){let r=Nr.fromRpcSig(t);return Nr.ecrecover(e,r.v,r.r,r.s)}i($M,"recoverPublicKey");ur.recoverPublicKey=$M;function GM(e){if(e){if(typeof e=="number"){let t=Nr.toBuffer(e);e=Nr.bufferToHex(t)}if(typeof e!="string"){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return Nr.addHexPrefix(e.toLowerCase())}}i(GM,"normalize");ur.normalize=GM});var nb=he(Zi=>{"use strict";h();p();Object.defineProperty(Zi,"__esModule",{value:!0});Zi.extractPublicKey=Zi.recoverPersonalSignature=Zi.personalSign=void 0;var Fs=Ka(),On=Ca();function ZM({privateKey:e,data:t}){if(On.isNullish(t))throw new Error("Missing data parameter");if(On.isNullish(e))throw new Error("Missing privateKey parameter");let r=On.legacyToBuffer(t),n=Fs.hashPersonalMessage(r),o=Fs.ecsign(n,e);return On.concatSig(Fs.toBuffer(o.v),o.r,o.s)}i(ZM,"personalSign");Zi.personalSign=ZM;function JM({data:e,signature:t}){if(On.isNullish(e))throw new Error("Missing data parameter");if(On.isNullish(t))throw new Error("Missing signature parameter");let r=rb(e,t),n=Fs.publicToAddress(r);return Fs.bufferToHex(n)}i(JM,"recoverPersonalSignature");Zi.recoverPersonalSignature=JM;function YM({data:e,signature:t}){if(On.isNullish(e))throw new Error("Missing data parameter");if(On.isNullish(t))throw new Error("Missing signature parameter");return`0x${rb(e,t).toString("hex")}`}i(YM,"extractPublicKey");Zi.extractPublicKey=YM;function rb(e,t){let r=Fs.hashPersonalMessage(On.legacyToBuffer(e));return On.recoverPublicKey(r,t)}i(rb,"getPublicKeyFor")});var ob=he((ib,eh)=>{h();p();(function(e,t){"use strict";function r(x,s){if(!x)throw new Error(s||"Assertion failed")}i(r,"assert");function n(x,s){x.super_=s;var u=i(function(){},"TempCtor");u.prototype=s.prototype,x.prototype=new u,x.prototype.constructor=x}i(n,"inherits");function o(x,s,u){if(o.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,x!==null&&((s==="le"||s==="be")&&(u=s,s=10),this._init(x||0,s||10,u||"be"))}i(o,"BN"),typeof e=="object"?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var a;try{typeof self<"u"&&typeof self.Buffer<"u"?a=self.Buffer:a=D0().Buffer}catch{}o.isBN=i(function(s){return s instanceof o?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===o.wordSize&&Array.isArray(s.words)},"isBN"),o.max=i(function(s,u){return s.cmp(u)>0?s:u},"max"),o.min=i(function(s,u){return s.cmp(u)<0?s:u},"min"),o.prototype._init=i(function(s,u,m){if(typeof s=="number")return this._initNumber(s,u,m);if(typeof s=="object")return this._initArray(s,u,m);u==="hex"&&(u=16),r(u===(u|0)&&u>=2&&u<=36),s=s.toString().replace(/\s+/g,"");var y=0;s[0]==="-"&&(y++,this.negative=1),y<s.length&&(u===16?this._parseHex(s,y,m):(this._parseBase(s,u,y),m==="le"&&this._initArray(this.toArray(),u,m)))},"init"),o.prototype._initNumber=i(function(s,u,m){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(r(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),u,m)},"_initNumber"),o.prototype._initArray=i(function(s,u,m){if(r(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var v,S,E=0;if(m==="be")for(y=s.length-1,v=0;y>=0;y-=3)S=s[y]|s[y-1]<<8|s[y-2]<<16,this.words[v]|=S<<E&67108863,this.words[v+1]=S>>>26-E&67108863,E+=24,E>=26&&(E-=26,v++);else if(m==="le")for(y=0,v=0;y<s.length;y+=3)S=s[y]|s[y+1]<<8|s[y+2]<<16,this.words[v]|=S<<E&67108863,this.words[v+1]=S>>>26-E&67108863,E+=24,E>=26&&(E-=26,v++);return this.strip()},"_initArray");function l(x,s){var u=x.charCodeAt(s);return u>=65&&u<=70?u-55:u>=97&&u<=102?u-87:u-48&15}i(l,"parseHex4Bits");function d(x,s,u){var m=l(x,u);return u-1>=s&&(m|=l(x,u-1)<<4),m}i(d,"parseHexByte"),o.prototype._parseHex=i(function(s,u,m){this.length=Math.ceil((s.length-u)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var v=0,S=0,E;if(m==="be")for(y=s.length-1;y>=u;y-=2)E=d(s,u,y)<<v,this.words[S]|=E&67108863,v>=18?(v-=18,S+=1,this.words[S]|=E>>>26):v+=8;else{var b=s.length-u;for(y=b%2===0?u+1:u;y<s.length;y+=2)E=d(s,u,y)<<v,this.words[S]|=E&67108863,v>=18?(v-=18,S+=1,this.words[S]|=E>>>26):v+=8}this.strip()},"_parseHex");function g(x,s,u,m){for(var y=0,v=Math.min(x.length,u),S=s;S<v;S++){var E=x.charCodeAt(S)-48;y*=m,E>=49?y+=E-49+10:E>=17?y+=E-17+10:y+=E}return y}i(g,"parseBase"),o.prototype._parseBase=i(function(s,u,m){this.words=[0],this.length=1;for(var y=0,v=1;v<=67108863;v*=u)y++;y--,v=v/u|0;for(var S=s.length-m,E=S%y,b=Math.min(S,S-E)+m,c=0,w=m;w<b;w+=y)c=g(s,w,w+y,u),this.imuln(v),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(E!==0){var D=1;for(c=g(s,w,s.length,u),w=0;w<E;w++)D*=u;this.imuln(D),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},"_parseBase"),o.prototype.copy=i(function(s){s.words=new Array(this.length);for(var u=0;u<this.length;u++)s.words[u]=this.words[u];s.length=this.length,s.negative=this.negative,s.red=this.red},"copy"),o.prototype.clone=i(function(){var s=new o(null);return this.copy(s),s},"clone"),o.prototype._expand=i(function(s){for(;this.length<s;)this.words[this.length++]=0;return this},"_expand"),o.prototype.strip=i(function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},"strip"),o.prototype._normSign=i(function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},"_normSign"),o.prototype.inspect=i(function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"},"inspect");var A=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],T=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],I=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=i(function(s,u){s=s||10,u=u|0||1;var m;if(s===16||s==="hex"){m="";for(var y=0,v=0,S=0;S<this.length;S++){var E=this.words[S],b=((E<<y|v)&16777215).toString(16);v=E>>>24-y&16777215,v!==0||S!==this.length-1?m=A[6-b.length]+b+m:m=b+m,y+=2,y>=26&&(y-=26,S--)}for(v!==0&&(m=v.toString(16)+m);m.length%u!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(s===(s|0)&&s>=2&&s<=36){var c=T[s],w=I[s];m="";var D=this.clone();for(D.negative=0;!D.isZero();){var L=D.modn(w).toString(s);D=D.idivn(w),D.isZero()?m=L+m:m=A[c-L.length]+L+m}for(this.isZero()&&(m="0"+m);m.length%u!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}r(!1,"Base should be between 2 and 36")},"toString"),o.prototype.toNumber=i(function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},"toNumber"),o.prototype.toJSON=i(function(){return this.toString(16)},"toJSON"),o.prototype.toBuffer=i(function(s,u){return r(typeof a<"u"),this.toArrayLike(a,s,u)},"toBuffer"),o.prototype.toArray=i(function(s,u){return this.toArrayLike(Array,s,u)},"toArray"),o.prototype.toArrayLike=i(function(s,u,m){var y=this.byteLength(),v=m||Math.max(1,y);r(y<=v,"byte array longer than desired length"),r(v>0,"Requested array length <= 0"),this.strip();var S=u==="le",E=new s(v),b,c,w=this.clone();if(S){for(c=0;!w.isZero();c++)b=w.andln(255),w.iushrn(8),E[c]=b;for(;c<v;c++)E[c]=0}else{for(c=0;c<v-y;c++)E[c]=0;for(c=0;!w.isZero();c++)b=w.andln(255),w.iushrn(8),E[v-c-1]=b}return E},"toArrayLike"),Math.clz32?o.prototype._countBits=i(function(s){return 32-Math.clz32(s)},"_countBits"):o.prototype._countBits=i(function(s){var u=s,m=0;return u>=4096&&(m+=13,u>>>=13),u>=64&&(m+=7,u>>>=7),u>=8&&(m+=4,u>>>=4),u>=2&&(m+=2,u>>>=2),m+u},"_countBits"),o.prototype._zeroBits=i(function(s){if(s===0)return 26;var u=s,m=0;return u&8191||(m+=13,u>>>=13),u&127||(m+=7,u>>>=7),u&15||(m+=4,u>>>=4),u&3||(m+=2,u>>>=2),u&1||m++,m},"_zeroBits"),o.prototype.bitLength=i(function(){var s=this.words[this.length-1],u=this._countBits(s);return(this.length-1)*26+u},"bitLength");function k(x){for(var s=new Array(x.bitLength()),u=0;u<s.length;u++){var m=u/26|0,y=u%26;s[u]=(x.words[m]&1<<y)>>>y}return s}i(k,"toBitArray"),o.prototype.zeroBits=i(function(){if(this.isZero())return 0;for(var s=0,u=0;u<this.length;u++){var m=this._zeroBits(this.words[u]);if(s+=m,m!==26)break}return s},"zeroBits"),o.prototype.byteLength=i(function(){return Math.ceil(this.bitLength()/8)},"byteLength"),o.prototype.toTwos=i(function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},"toTwos"),o.prototype.fromTwos=i(function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},"fromTwos"),o.prototype.isNeg=i(function(){return this.negative!==0},"isNeg"),o.prototype.neg=i(function(){return this.clone().ineg()},"neg"),o.prototype.ineg=i(function(){return this.isZero()||(this.negative^=1),this},"ineg"),o.prototype.iuor=i(function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var u=0;u<s.length;u++)this.words[u]=this.words[u]|s.words[u];return this.strip()},"iuor"),o.prototype.ior=i(function(s){return r((this.negative|s.negative)===0),this.iuor(s)},"ior"),o.prototype.or=i(function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},"or"),o.prototype.uor=i(function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},"uor"),o.prototype.iuand=i(function(s){var u;this.length>s.length?u=s:u=this;for(var m=0;m<u.length;m++)this.words[m]=this.words[m]&s.words[m];return this.length=u.length,this.strip()},"iuand"),o.prototype.iand=i(function(s){return r((this.negative|s.negative)===0),this.iuand(s)},"iand"),o.prototype.and=i(function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},"and"),o.prototype.uand=i(function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},"uand"),o.prototype.iuxor=i(function(s){var u,m;this.length>s.length?(u=this,m=s):(u=s,m=this);for(var y=0;y<m.length;y++)this.words[y]=u.words[y]^m.words[y];if(this!==u)for(;y<u.length;y++)this.words[y]=u.words[y];return this.length=u.length,this.strip()},"iuxor"),o.prototype.ixor=i(function(s){return r((this.negative|s.negative)===0),this.iuxor(s)},"ixor"),o.prototype.xor=i(function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},"xor"),o.prototype.uxor=i(function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},"uxor"),o.prototype.inotn=i(function(s){r(typeof s=="number"&&s>=0);var u=Math.ceil(s/26)|0,m=s%26;this._expand(u),m>0&&u--;for(var y=0;y<u;y++)this.words[y]=~this.words[y]&67108863;return m>0&&(this.words[y]=~this.words[y]&67108863>>26-m),this.strip()},"inotn"),o.prototype.notn=i(function(s){return this.clone().inotn(s)},"notn"),o.prototype.setn=i(function(s,u){r(typeof s=="number"&&s>=0);var m=s/26|0,y=s%26;return this._expand(m+1),u?this.words[m]=this.words[m]|1<<y:this.words[m]=this.words[m]&~(1<<y),this.strip()},"setn"),o.prototype.iadd=i(function(s){var u;if(this.negative!==0&&s.negative===0)return this.negative=0,u=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,u=this.isub(s),s.negative=1,u._normSign();var m,y;this.length>s.length?(m=this,y=s):(m=s,y=this);for(var v=0,S=0;S<y.length;S++)u=(m.words[S]|0)+(y.words[S]|0)+v,this.words[S]=u&67108863,v=u>>>26;for(;v!==0&&S<m.length;S++)u=(m.words[S]|0)+v,this.words[S]=u&67108863,v=u>>>26;if(this.length=m.length,v!==0)this.words[this.length]=v,this.length++;else if(m!==this)for(;S<m.length;S++)this.words[S]=m.words[S];return this},"iadd"),o.prototype.add=i(function(s){var u;return s.negative!==0&&this.negative===0?(s.negative=0,u=this.sub(s),s.negative^=1,u):s.negative===0&&this.negative!==0?(this.negative=0,u=s.sub(this),this.negative=1,u):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},"add"),o.prototype.isub=i(function(s){if(s.negative!==0){s.negative=0;var u=this.iadd(s);return s.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var m=this.cmp(s);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,v;m>0?(y=this,v=s):(y=s,v=this);for(var S=0,E=0;E<v.length;E++)u=(y.words[E]|0)-(v.words[E]|0)+S,S=u>>26,this.words[E]=u&67108863;for(;S!==0&&E<y.length;E++)u=(y.words[E]|0)+S,S=u>>26,this.words[E]=u&67108863;if(S===0&&E<y.length&&y!==this)for(;E<y.length;E++)this.words[E]=y.words[E];return this.length=Math.max(this.length,E),y!==this&&(this.negative=1),this.strip()},"isub"),o.prototype.sub=i(function(s){return this.clone().isub(s)},"sub");function K(x,s,u){u.negative=s.negative^x.negative;var m=x.length+s.length|0;u.length=m,m=m-1|0;var y=x.words[0]|0,v=s.words[0]|0,S=y*v,E=S&67108863,b=S/67108864|0;u.words[0]=E;for(var c=1;c<m;c++){for(var w=b>>>26,D=b&67108863,L=Math.min(c,s.length-1),z=Math.max(0,c-x.length+1);z<=L;z++){var Y=c-z|0;y=x.words[Y]|0,v=s.words[z]|0,S=y*v+D,w+=S/67108864|0,D=S&67108863}u.words[c]=D|0,b=w|0}return b!==0?u.words[c]=b|0:u.length--,u.strip()}i(K,"smallMulTo");var C=i(function(s,u,m){var y=s.words,v=u.words,S=m.words,E=0,b,c,w,D=y[0]|0,L=D&8191,z=D>>>13,Y=y[1]|0,oe=Y&8191,le=Y>>>13,at=y[2]|0,de=at&8191,O=at>>>13,U=y[3]|0,N=U&8191,H=U>>>13,te=y[4]|0,j=te&8191,J=te>>>13,et=y[5]|0,ye=et&8191,we=et>>>13,_r=y[6]|0,Te=_r&8191,Se=_r>>>13,wn=y[7]|0,Ee=wn&8191,Ze=wn>>>13,ki=y[8]|0,Je=ki&8191,Ye=ki>>>13,Zn=y[9]|0,Ie=Zn&8191,_e=Zn>>>13,Jn=v[0]|0,ke=Jn&8191,Pe=Jn>>>13,Yn=v[1]|0,Be=Yn&8191,Oe=Yn>>>13,Qn=v[2]|0,Ke=Qn&8191,Ce=Qn>>>13,Xn=v[3]|0,Re=Xn&8191,Ne=Xn>>>13,ei=v[4]|0,Ue=ei&8191,De=ei>>>13,ti=v[5]|0,Ve=ti&8191,Le=ti>>>13,ri=v[6]|0,Fe=ri&8191,je=ri>>>13,ni=v[7]|0,ze=ni&8191,qe=ni>>>13,ii=v[8]|0,He=ii&8191,We=ii>>>13,oi=v[9]|0,$e=oi&8191,Ge=oi>>>13;m.negative=s.negative^u.negative,m.length=19,b=Math.imul(L,ke),c=Math.imul(L,Pe),c=c+Math.imul(z,ke)|0,w=Math.imul(z,Pe);var Lr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,b=Math.imul(oe,ke),c=Math.imul(oe,Pe),c=c+Math.imul(le,ke)|0,w=Math.imul(le,Pe),b=b+Math.imul(L,Be)|0,c=c+Math.imul(L,Oe)|0,c=c+Math.imul(z,Be)|0,w=w+Math.imul(z,Oe)|0;var Fr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,b=Math.imul(de,ke),c=Math.imul(de,Pe),c=c+Math.imul(O,ke)|0,w=Math.imul(O,Pe),b=b+Math.imul(oe,Be)|0,c=c+Math.imul(oe,Oe)|0,c=c+Math.imul(le,Be)|0,w=w+Math.imul(le,Oe)|0,b=b+Math.imul(L,Ke)|0,c=c+Math.imul(L,Ce)|0,c=c+Math.imul(z,Ke)|0,w=w+Math.imul(z,Ce)|0;var jr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(jr>>>26)|0,jr&=67108863,b=Math.imul(N,ke),c=Math.imul(N,Pe),c=c+Math.imul(H,ke)|0,w=Math.imul(H,Pe),b=b+Math.imul(de,Be)|0,c=c+Math.imul(de,Oe)|0,c=c+Math.imul(O,Be)|0,w=w+Math.imul(O,Oe)|0,b=b+Math.imul(oe,Ke)|0,c=c+Math.imul(oe,Ce)|0,c=c+Math.imul(le,Ke)|0,w=w+Math.imul(le,Ce)|0,b=b+Math.imul(L,Re)|0,c=c+Math.imul(L,Ne)|0,c=c+Math.imul(z,Re)|0,w=w+Math.imul(z,Ne)|0;var zr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(zr>>>26)|0,zr&=67108863,b=Math.imul(j,ke),c=Math.imul(j,Pe),c=c+Math.imul(J,ke)|0,w=Math.imul(J,Pe),b=b+Math.imul(N,Be)|0,c=c+Math.imul(N,Oe)|0,c=c+Math.imul(H,Be)|0,w=w+Math.imul(H,Oe)|0,b=b+Math.imul(de,Ke)|0,c=c+Math.imul(de,Ce)|0,c=c+Math.imul(O,Ke)|0,w=w+Math.imul(O,Ce)|0,b=b+Math.imul(oe,Re)|0,c=c+Math.imul(oe,Ne)|0,c=c+Math.imul(le,Re)|0,w=w+Math.imul(le,Ne)|0,b=b+Math.imul(L,Ue)|0,c=c+Math.imul(L,De)|0,c=c+Math.imul(z,Ue)|0,w=w+Math.imul(z,De)|0;var qr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(qr>>>26)|0,qr&=67108863,b=Math.imul(ye,ke),c=Math.imul(ye,Pe),c=c+Math.imul(we,ke)|0,w=Math.imul(we,Pe),b=b+Math.imul(j,Be)|0,c=c+Math.imul(j,Oe)|0,c=c+Math.imul(J,Be)|0,w=w+Math.imul(J,Oe)|0,b=b+Math.imul(N,Ke)|0,c=c+Math.imul(N,Ce)|0,c=c+Math.imul(H,Ke)|0,w=w+Math.imul(H,Ce)|0,b=b+Math.imul(de,Re)|0,c=c+Math.imul(de,Ne)|0,c=c+Math.imul(O,Re)|0,w=w+Math.imul(O,Ne)|0,b=b+Math.imul(oe,Ue)|0,c=c+Math.imul(oe,De)|0,c=c+Math.imul(le,Ue)|0,w=w+Math.imul(le,De)|0,b=b+Math.imul(L,Ve)|0,c=c+Math.imul(L,Le)|0,c=c+Math.imul(z,Ve)|0,w=w+Math.imul(z,Le)|0;var Hr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,b=Math.imul(Te,ke),c=Math.imul(Te,Pe),c=c+Math.imul(Se,ke)|0,w=Math.imul(Se,Pe),b=b+Math.imul(ye,Be)|0,c=c+Math.imul(ye,Oe)|0,c=c+Math.imul(we,Be)|0,w=w+Math.imul(we,Oe)|0,b=b+Math.imul(j,Ke)|0,c=c+Math.imul(j,Ce)|0,c=c+Math.imul(J,Ke)|0,w=w+Math.imul(J,Ce)|0,b=b+Math.imul(N,Re)|0,c=c+Math.imul(N,Ne)|0,c=c+Math.imul(H,Re)|0,w=w+Math.imul(H,Ne)|0,b=b+Math.imul(de,Ue)|0,c=c+Math.imul(de,De)|0,c=c+Math.imul(O,Ue)|0,w=w+Math.imul(O,De)|0,b=b+Math.imul(oe,Ve)|0,c=c+Math.imul(oe,Le)|0,c=c+Math.imul(le,Ve)|0,w=w+Math.imul(le,Le)|0,b=b+Math.imul(L,Fe)|0,c=c+Math.imul(L,je)|0,c=c+Math.imul(z,Fe)|0,w=w+Math.imul(z,je)|0;var Wr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,b=Math.imul(Ee,ke),c=Math.imul(Ee,Pe),c=c+Math.imul(Ze,ke)|0,w=Math.imul(Ze,Pe),b=b+Math.imul(Te,Be)|0,c=c+Math.imul(Te,Oe)|0,c=c+Math.imul(Se,Be)|0,w=w+Math.imul(Se,Oe)|0,b=b+Math.imul(ye,Ke)|0,c=c+Math.imul(ye,Ce)|0,c=c+Math.imul(we,Ke)|0,w=w+Math.imul(we,Ce)|0,b=b+Math.imul(j,Re)|0,c=c+Math.imul(j,Ne)|0,c=c+Math.imul(J,Re)|0,w=w+Math.imul(J,Ne)|0,b=b+Math.imul(N,Ue)|0,c=c+Math.imul(N,De)|0,c=c+Math.imul(H,Ue)|0,w=w+Math.imul(H,De)|0,b=b+Math.imul(de,Ve)|0,c=c+Math.imul(de,Le)|0,c=c+Math.imul(O,Ve)|0,w=w+Math.imul(O,Le)|0,b=b+Math.imul(oe,Fe)|0,c=c+Math.imul(oe,je)|0,c=c+Math.imul(le,Fe)|0,w=w+Math.imul(le,je)|0,b=b+Math.imul(L,ze)|0,c=c+Math.imul(L,qe)|0,c=c+Math.imul(z,ze)|0,w=w+Math.imul(z,qe)|0;var $r=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+($r>>>26)|0,$r&=67108863,b=Math.imul(Je,ke),c=Math.imul(Je,Pe),c=c+Math.imul(Ye,ke)|0,w=Math.imul(Ye,Pe),b=b+Math.imul(Ee,Be)|0,c=c+Math.imul(Ee,Oe)|0,c=c+Math.imul(Ze,Be)|0,w=w+Math.imul(Ze,Oe)|0,b=b+Math.imul(Te,Ke)|0,c=c+Math.imul(Te,Ce)|0,c=c+Math.imul(Se,Ke)|0,w=w+Math.imul(Se,Ce)|0,b=b+Math.imul(ye,Re)|0,c=c+Math.imul(ye,Ne)|0,c=c+Math.imul(we,Re)|0,w=w+Math.imul(we,Ne)|0,b=b+Math.imul(j,Ue)|0,c=c+Math.imul(j,De)|0,c=c+Math.imul(J,Ue)|0,w=w+Math.imul(J,De)|0,b=b+Math.imul(N,Ve)|0,c=c+Math.imul(N,Le)|0,c=c+Math.imul(H,Ve)|0,w=w+Math.imul(H,Le)|0,b=b+Math.imul(de,Fe)|0,c=c+Math.imul(de,je)|0,c=c+Math.imul(O,Fe)|0,w=w+Math.imul(O,je)|0,b=b+Math.imul(oe,ze)|0,c=c+Math.imul(oe,qe)|0,c=c+Math.imul(le,ze)|0,w=w+Math.imul(le,qe)|0,b=b+Math.imul(L,He)|0,c=c+Math.imul(L,We)|0,c=c+Math.imul(z,He)|0,w=w+Math.imul(z,We)|0;var Gr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,b=Math.imul(Ie,ke),c=Math.imul(Ie,Pe),c=c+Math.imul(_e,ke)|0,w=Math.imul(_e,Pe),b=b+Math.imul(Je,Be)|0,c=c+Math.imul(Je,Oe)|0,c=c+Math.imul(Ye,Be)|0,w=w+Math.imul(Ye,Oe)|0,b=b+Math.imul(Ee,Ke)|0,c=c+Math.imul(Ee,Ce)|0,c=c+Math.imul(Ze,Ke)|0,w=w+Math.imul(Ze,Ce)|0,b=b+Math.imul(Te,Re)|0,c=c+Math.imul(Te,Ne)|0,c=c+Math.imul(Se,Re)|0,w=w+Math.imul(Se,Ne)|0,b=b+Math.imul(ye,Ue)|0,c=c+Math.imul(ye,De)|0,c=c+Math.imul(we,Ue)|0,w=w+Math.imul(we,De)|0,b=b+Math.imul(j,Ve)|0,c=c+Math.imul(j,Le)|0,c=c+Math.imul(J,Ve)|0,w=w+Math.imul(J,Le)|0,b=b+Math.imul(N,Fe)|0,c=c+Math.imul(N,je)|0,c=c+Math.imul(H,Fe)|0,w=w+Math.imul(H,je)|0,b=b+Math.imul(de,ze)|0,c=c+Math.imul(de,qe)|0,c=c+Math.imul(O,ze)|0,w=w+Math.imul(O,qe)|0,b=b+Math.imul(oe,He)|0,c=c+Math.imul(oe,We)|0,c=c+Math.imul(le,He)|0,w=w+Math.imul(le,We)|0,b=b+Math.imul(L,$e)|0,c=c+Math.imul(L,Ge)|0,c=c+Math.imul(z,$e)|0,w=w+Math.imul(z,Ge)|0;var Zr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Zr>>>26)|0,Zr&=67108863,b=Math.imul(Ie,Be),c=Math.imul(Ie,Oe),c=c+Math.imul(_e,Be)|0,w=Math.imul(_e,Oe),b=b+Math.imul(Je,Ke)|0,c=c+Math.imul(Je,Ce)|0,c=c+Math.imul(Ye,Ke)|0,w=w+Math.imul(Ye,Ce)|0,b=b+Math.imul(Ee,Re)|0,c=c+Math.imul(Ee,Ne)|0,c=c+Math.imul(Ze,Re)|0,w=w+Math.imul(Ze,Ne)|0,b=b+Math.imul(Te,Ue)|0,c=c+Math.imul(Te,De)|0,c=c+Math.imul(Se,Ue)|0,w=w+Math.imul(Se,De)|0,b=b+Math.imul(ye,Ve)|0,c=c+Math.imul(ye,Le)|0,c=c+Math.imul(we,Ve)|0,w=w+Math.imul(we,Le)|0,b=b+Math.imul(j,Fe)|0,c=c+Math.imul(j,je)|0,c=c+Math.imul(J,Fe)|0,w=w+Math.imul(J,je)|0,b=b+Math.imul(N,ze)|0,c=c+Math.imul(N,qe)|0,c=c+Math.imul(H,ze)|0,w=w+Math.imul(H,qe)|0,b=b+Math.imul(de,He)|0,c=c+Math.imul(de,We)|0,c=c+Math.imul(O,He)|0,w=w+Math.imul(O,We)|0,b=b+Math.imul(oe,$e)|0,c=c+Math.imul(oe,Ge)|0,c=c+Math.imul(le,$e)|0,w=w+Math.imul(le,Ge)|0;var Jr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Jr>>>26)|0,Jr&=67108863,b=Math.imul(Ie,Ke),c=Math.imul(Ie,Ce),c=c+Math.imul(_e,Ke)|0,w=Math.imul(_e,Ce),b=b+Math.imul(Je,Re)|0,c=c+Math.imul(Je,Ne)|0,c=c+Math.imul(Ye,Re)|0,w=w+Math.imul(Ye,Ne)|0,b=b+Math.imul(Ee,Ue)|0,c=c+Math.imul(Ee,De)|0,c=c+Math.imul(Ze,Ue)|0,w=w+Math.imul(Ze,De)|0,b=b+Math.imul(Te,Ve)|0,c=c+Math.imul(Te,Le)|0,c=c+Math.imul(Se,Ve)|0,w=w+Math.imul(Se,Le)|0,b=b+Math.imul(ye,Fe)|0,c=c+Math.imul(ye,je)|0,c=c+Math.imul(we,Fe)|0,w=w+Math.imul(we,je)|0,b=b+Math.imul(j,ze)|0,c=c+Math.imul(j,qe)|0,c=c+Math.imul(J,ze)|0,w=w+Math.imul(J,qe)|0,b=b+Math.imul(N,He)|0,c=c+Math.imul(N,We)|0,c=c+Math.imul(H,He)|0,w=w+Math.imul(H,We)|0,b=b+Math.imul(de,$e)|0,c=c+Math.imul(de,Ge)|0,c=c+Math.imul(O,$e)|0,w=w+Math.imul(O,Ge)|0;var Yr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,b=Math.imul(Ie,Re),c=Math.imul(Ie,Ne),c=c+Math.imul(_e,Re)|0,w=Math.imul(_e,Ne),b=b+Math.imul(Je,Ue)|0,c=c+Math.imul(Je,De)|0,c=c+Math.imul(Ye,Ue)|0,w=w+Math.imul(Ye,De)|0,b=b+Math.imul(Ee,Ve)|0,c=c+Math.imul(Ee,Le)|0,c=c+Math.imul(Ze,Ve)|0,w=w+Math.imul(Ze,Le)|0,b=b+Math.imul(Te,Fe)|0,c=c+Math.imul(Te,je)|0,c=c+Math.imul(Se,Fe)|0,w=w+Math.imul(Se,je)|0,b=b+Math.imul(ye,ze)|0,c=c+Math.imul(ye,qe)|0,c=c+Math.imul(we,ze)|0,w=w+Math.imul(we,qe)|0,b=b+Math.imul(j,He)|0,c=c+Math.imul(j,We)|0,c=c+Math.imul(J,He)|0,w=w+Math.imul(J,We)|0,b=b+Math.imul(N,$e)|0,c=c+Math.imul(N,Ge)|0,c=c+Math.imul(H,$e)|0,w=w+Math.imul(H,Ge)|0;var Qr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,b=Math.imul(Ie,Ue),c=Math.imul(Ie,De),c=c+Math.imul(_e,Ue)|0,w=Math.imul(_e,De),b=b+Math.imul(Je,Ve)|0,c=c+Math.imul(Je,Le)|0,c=c+Math.imul(Ye,Ve)|0,w=w+Math.imul(Ye,Le)|0,b=b+Math.imul(Ee,Fe)|0,c=c+Math.imul(Ee,je)|0,c=c+Math.imul(Ze,Fe)|0,w=w+Math.imul(Ze,je)|0,b=b+Math.imul(Te,ze)|0,c=c+Math.imul(Te,qe)|0,c=c+Math.imul(Se,ze)|0,w=w+Math.imul(Se,qe)|0,b=b+Math.imul(ye,He)|0,c=c+Math.imul(ye,We)|0,c=c+Math.imul(we,He)|0,w=w+Math.imul(we,We)|0,b=b+Math.imul(j,$e)|0,c=c+Math.imul(j,Ge)|0,c=c+Math.imul(J,$e)|0,w=w+Math.imul(J,Ge)|0;var Xr=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,b=Math.imul(Ie,Ve),c=Math.imul(Ie,Le),c=c+Math.imul(_e,Ve)|0,w=Math.imul(_e,Le),b=b+Math.imul(Je,Fe)|0,c=c+Math.imul(Je,je)|0,c=c+Math.imul(Ye,Fe)|0,w=w+Math.imul(Ye,je)|0,b=b+Math.imul(Ee,ze)|0,c=c+Math.imul(Ee,qe)|0,c=c+Math.imul(Ze,ze)|0,w=w+Math.imul(Ze,qe)|0,b=b+Math.imul(Te,He)|0,c=c+Math.imul(Te,We)|0,c=c+Math.imul(Se,He)|0,w=w+Math.imul(Se,We)|0,b=b+Math.imul(ye,$e)|0,c=c+Math.imul(ye,Ge)|0,c=c+Math.imul(we,$e)|0,w=w+Math.imul(we,Ge)|0;var en=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(en>>>26)|0,en&=67108863,b=Math.imul(Ie,Fe),c=Math.imul(Ie,je),c=c+Math.imul(_e,Fe)|0,w=Math.imul(_e,je),b=b+Math.imul(Je,ze)|0,c=c+Math.imul(Je,qe)|0,c=c+Math.imul(Ye,ze)|0,w=w+Math.imul(Ye,qe)|0,b=b+Math.imul(Ee,He)|0,c=c+Math.imul(Ee,We)|0,c=c+Math.imul(Ze,He)|0,w=w+Math.imul(Ze,We)|0,b=b+Math.imul(Te,$e)|0,c=c+Math.imul(Te,Ge)|0,c=c+Math.imul(Se,$e)|0,w=w+Math.imul(Se,Ge)|0;var tn=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(tn>>>26)|0,tn&=67108863,b=Math.imul(Ie,ze),c=Math.imul(Ie,qe),c=c+Math.imul(_e,ze)|0,w=Math.imul(_e,qe),b=b+Math.imul(Je,He)|0,c=c+Math.imul(Je,We)|0,c=c+Math.imul(Ye,He)|0,w=w+Math.imul(Ye,We)|0,b=b+Math.imul(Ee,$e)|0,c=c+Math.imul(Ee,Ge)|0,c=c+Math.imul(Ze,$e)|0,w=w+Math.imul(Ze,Ge)|0;var rn=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(rn>>>26)|0,rn&=67108863,b=Math.imul(Ie,He),c=Math.imul(Ie,We),c=c+Math.imul(_e,He)|0,w=Math.imul(_e,We),b=b+Math.imul(Je,$e)|0,c=c+Math.imul(Je,Ge)|0,c=c+Math.imul(Ye,$e)|0,w=w+Math.imul(Ye,Ge)|0;var fo=(E+b|0)+((c&8191)<<13)|0;E=(w+(c>>>13)|0)+(fo>>>26)|0,fo&=67108863,b=Math.imul(Ie,$e),c=Math.imul(Ie,Ge),c=c+Math.imul(_e,$e)|0,w=Math.imul(_e,Ge);var ho=(E+b|0)+((c&8191)<<13)|0;return E=(w+(c>>>13)|0)+(ho>>>26)|0,ho&=67108863,S[0]=Lr,S[1]=Fr,S[2]=jr,S[3]=zr,S[4]=qr,S[5]=Hr,S[6]=Wr,S[7]=$r,S[8]=Gr,S[9]=Zr,S[10]=Jr,S[11]=Yr,S[12]=Qr,S[13]=Xr,S[14]=en,S[15]=tn,S[16]=rn,S[17]=fo,S[18]=ho,E!==0&&(S[19]=E,m.length++),m},"comb10MulTo");Math.imul||(C=K);function R(x,s,u){u.negative=s.negative^x.negative,u.length=x.length+s.length;for(var m=0,y=0,v=0;v<u.length-1;v++){var S=y;y=0;for(var E=m&67108863,b=Math.min(v,s.length-1),c=Math.max(0,v-x.length+1);c<=b;c++){var w=v-c,D=x.words[w]|0,L=s.words[c]|0,z=D*L,Y=z&67108863;S=S+(z/67108864|0)|0,Y=Y+E|0,E=Y&67108863,S=S+(Y>>>26)|0,y+=S>>>26,S&=67108863}u.words[v]=E,m=S,S=y}return m!==0?u.words[v]=m:u.length--,u.strip()}i(R,"bigMulTo");function V(x,s,u){var m=new q;return m.mulp(x,s,u)}i(V,"jumboMulTo"),o.prototype.mulTo=i(function(s,u){var m,y=this.length+s.length;return this.length===10&&s.length===10?m=C(this,s,u):y<63?m=K(this,s,u):y<1024?m=R(this,s,u):m=V(this,s,u),m},"mulTo");function q(x,s){this.x=x,this.y=s}i(q,"FFTM"),q.prototype.makeRBT=i(function(s){for(var u=new Array(s),m=o.prototype._countBits(s)-1,y=0;y<s;y++)u[y]=this.revBin(y,m,s);return u},"makeRBT"),q.prototype.revBin=i(function(s,u,m){if(s===0||s===m-1)return s;for(var y=0,v=0;v<u;v++)y|=(s&1)<<u-v-1,s>>=1;return y},"revBin"),q.prototype.permute=i(function(s,u,m,y,v,S){for(var E=0;E<S;E++)y[E]=u[s[E]],v[E]=m[s[E]]},"permute"),q.prototype.transform=i(function(s,u,m,y,v,S){this.permute(S,s,u,m,y,v);for(var E=1;E<v;E<<=1)for(var b=E<<1,c=Math.cos(2*Math.PI/b),w=Math.sin(2*Math.PI/b),D=0;D<v;D+=b)for(var L=c,z=w,Y=0;Y<E;Y++){var oe=m[D+Y],le=y[D+Y],at=m[D+Y+E],de=y[D+Y+E],O=L*at-z*de;de=L*de+z*at,at=O,m[D+Y]=oe+at,y[D+Y]=le+de,m[D+Y+E]=oe-at,y[D+Y+E]=le-de,Y!==b&&(O=c*L-w*z,z=c*z+w*L,L=O)}},"transform"),q.prototype.guessLen13b=i(function(s,u){var m=Math.max(u,s)|1,y=m&1,v=0;for(m=m/2|0;m;m=m>>>1)v++;return 1<<v+1+y},"guessLen13b"),q.prototype.conjugate=i(function(s,u,m){if(!(m<=1))for(var y=0;y<m/2;y++){var v=s[y];s[y]=s[m-y-1],s[m-y-1]=v,v=u[y],u[y]=-u[m-y-1],u[m-y-1]=-v}},"conjugate"),q.prototype.normalize13b=i(function(s,u){for(var m=0,y=0;y<u/2;y++){var v=Math.round(s[2*y+1]/u)*8192+Math.round(s[2*y]/u)+m;s[y]=v&67108863,v<67108864?m=0:m=v/67108864|0}return s},"normalize13b"),q.prototype.convert13b=i(function(s,u,m,y){for(var v=0,S=0;S<u;S++)v=v+(s[S]|0),m[2*S]=v&8191,v=v>>>13,m[2*S+1]=v&8191,v=v>>>13;for(S=2*u;S<y;++S)m[S]=0;r(v===0),r((v&-8192)===0)},"convert13b"),q.prototype.stub=i(function(s){for(var u=new Array(s),m=0;m<s;m++)u[m]=0;return u},"stub"),q.prototype.mulp=i(function(s,u,m){var y=2*this.guessLen13b(s.length,u.length),v=this.makeRBT(y),S=this.stub(y),E=new Array(y),b=new Array(y),c=new Array(y),w=new Array(y),D=new Array(y),L=new Array(y),z=m.words;z.length=y,this.convert13b(s.words,s.length,E,y),this.convert13b(u.words,u.length,w,y),this.transform(E,S,b,c,y,v),this.transform(w,S,D,L,y,v);for(var Y=0;Y<y;Y++){var oe=b[Y]*D[Y]-c[Y]*L[Y];c[Y]=b[Y]*L[Y]+c[Y]*D[Y],b[Y]=oe}return this.conjugate(b,c,y),this.transform(b,c,z,S,y,v),this.conjugate(z,S,y),this.normalize13b(z,y),m.negative=s.negative^u.negative,m.length=s.length+u.length,m.strip()},"mulp"),o.prototype.mul=i(function(s){var u=new o(null);return u.words=new Array(this.length+s.length),this.mulTo(s,u)},"mul"),o.prototype.mulf=i(function(s){var u=new o(null);return u.words=new Array(this.length+s.length),V(this,s,u)},"mulf"),o.prototype.imul=i(function(s){return this.clone().mulTo(s,this)},"imul"),o.prototype.imuln=i(function(s){r(typeof s=="number"),r(s<67108864);for(var u=0,m=0;m<this.length;m++){var y=(this.words[m]|0)*s,v=(y&67108863)+(u&67108863);u>>=26,u+=y/67108864|0,u+=v>>>26,this.words[m]=v&67108863}return u!==0&&(this.words[m]=u,this.length++),this},"imuln"),o.prototype.muln=i(function(s){return this.clone().imuln(s)},"muln"),o.prototype.sqr=i(function(){return this.mul(this)},"sqr"),o.prototype.isqr=i(function(){return this.imul(this.clone())},"isqr"),o.prototype.pow=i(function(s){var u=k(s);if(u.length===0)return new o(1);for(var m=this,y=0;y<u.length&&u[y]===0;y++,m=m.sqr());if(++y<u.length)for(var v=m.sqr();y<u.length;y++,v=v.sqr())u[y]!==0&&(m=m.mul(v));return m},"pow"),o.prototype.iushln=i(function(s){r(typeof s=="number"&&s>=0);var u=s%26,m=(s-u)/26,y=67108863>>>26-u<<26-u,v;if(u!==0){var S=0;for(v=0;v<this.length;v++){var E=this.words[v]&y,b=(this.words[v]|0)-E<<u;this.words[v]=b|S,S=E>>>26-u}S&&(this.words[v]=S,this.length++)}if(m!==0){for(v=this.length-1;v>=0;v--)this.words[v+m]=this.words[v];for(v=0;v<m;v++)this.words[v]=0;this.length+=m}return this.strip()},"iushln"),o.prototype.ishln=i(function(s){return r(this.negative===0),this.iushln(s)},"ishln"),o.prototype.iushrn=i(function(s,u,m){r(typeof s=="number"&&s>=0);var y;u?y=(u-u%26)/26:y=0;var v=s%26,S=Math.min((s-v)/26,this.length),E=67108863^67108863>>>v<<v,b=m;if(y-=S,y=Math.max(0,y),b){for(var c=0;c<S;c++)b.words[c]=this.words[c];b.length=S}if(S!==0)if(this.length>S)for(this.length-=S,c=0;c<this.length;c++)this.words[c]=this.words[c+S];else this.words[0]=0,this.length=1;var w=0;for(c=this.length-1;c>=0&&(w!==0||c>=y);c--){var D=this.words[c]|0;this.words[c]=w<<26-v|D>>>v,w=D&E}return b&&w!==0&&(b.words[b.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},"iushrn"),o.prototype.ishrn=i(function(s,u,m){return r(this.negative===0),this.iushrn(s,u,m)},"ishrn"),o.prototype.shln=i(function(s){return this.clone().ishln(s)},"shln"),o.prototype.ushln=i(function(s){return this.clone().iushln(s)},"ushln"),o.prototype.shrn=i(function(s){return this.clone().ishrn(s)},"shrn"),o.prototype.ushrn=i(function(s){return this.clone().iushrn(s)},"ushrn"),o.prototype.testn=i(function(s){r(typeof s=="number"&&s>=0);var u=s%26,m=(s-u)/26,y=1<<u;if(this.length<=m)return!1;var v=this.words[m];return!!(v&y)},"testn"),o.prototype.imaskn=i(function(s){r(typeof s=="number"&&s>=0);var u=s%26,m=(s-u)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(u!==0&&m++,this.length=Math.min(m,this.length),u!==0){var y=67108863^67108863>>>u<<u;this.words[this.length-1]&=y}return this.strip()},"imaskn"),o.prototype.maskn=i(function(s){return this.clone().imaskn(s)},"maskn"),o.prototype.iaddn=i(function(s){return r(typeof s=="number"),r(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},"iaddn"),o.prototype._iaddn=i(function(s){this.words[0]+=s;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},"_iaddn"),o.prototype.isubn=i(function(s){if(r(typeof s=="number"),r(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this.strip()},"isubn"),o.prototype.addn=i(function(s){return this.clone().iaddn(s)},"addn"),o.prototype.subn=i(function(s){return this.clone().isubn(s)},"subn"),o.prototype.iabs=i(function(){return this.negative=0,this},"iabs"),o.prototype.abs=i(function(){return this.clone().iabs()},"abs"),o.prototype._ishlnsubmul=i(function(s,u,m){var y=s.length+m,v;this._expand(y);var S,E=0;for(v=0;v<s.length;v++){S=(this.words[v+m]|0)+E;var b=(s.words[v]|0)*u;S-=b&67108863,E=(S>>26)-(b/67108864|0),this.words[v+m]=S&67108863}for(;v<this.length-m;v++)S=(this.words[v+m]|0)+E,E=S>>26,this.words[v+m]=S&67108863;if(E===0)return this.strip();for(r(E===-1),E=0,v=0;v<this.length;v++)S=-(this.words[v]|0)+E,E=S>>26,this.words[v]=S&67108863;return this.negative=1,this.strip()},"_ishlnsubmul"),o.prototype._wordDiv=i(function(s,u){var m=this.length-s.length,y=this.clone(),v=s,S=v.words[v.length-1]|0,E=this._countBits(S);m=26-E,m!==0&&(v=v.ushln(m),y.iushln(m),S=v.words[v.length-1]|0);var b=y.length-v.length,c;if(u!=="mod"){c=new o(null),c.length=b+1,c.words=new Array(c.length);for(var w=0;w<c.length;w++)c.words[w]=0}var D=y.clone()._ishlnsubmul(v,1,b);D.negative===0&&(y=D,c&&(c.words[b]=1));for(var L=b-1;L>=0;L--){var z=(y.words[v.length+L]|0)*67108864+(y.words[v.length+L-1]|0);for(z=Math.min(z/S|0,67108863),y._ishlnsubmul(v,z,L);y.negative!==0;)z--,y.negative=0,y._ishlnsubmul(v,1,L),y.isZero()||(y.negative^=1);c&&(c.words[L]=z)}return c&&c.strip(),y.strip(),u!=="div"&&m!==0&&y.iushrn(m),{div:c||null,mod:y}},"_wordDiv"),o.prototype.divmod=i(function(s,u,m){if(r(!s.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var y,v,S;return this.negative!==0&&s.negative===0?(S=this.neg().divmod(s,u),u!=="mod"&&(y=S.div.neg()),u!=="div"&&(v=S.mod.neg(),m&&v.negative!==0&&v.iadd(s)),{div:y,mod:v}):this.negative===0&&s.negative!==0?(S=this.divmod(s.neg(),u),u!=="mod"&&(y=S.div.neg()),{div:y,mod:S.mod}):this.negative&s.negative?(S=this.neg().divmod(s.neg(),u),u!=="div"&&(v=S.mod.neg(),m&&v.negative!==0&&v.isub(s)),{div:S.div,mod:v}):s.length>this.length||this.cmp(s)<0?{div:new o(0),mod:this}:s.length===1?u==="div"?{div:this.divn(s.words[0]),mod:null}:u==="mod"?{div:null,mod:new o(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new o(this.modn(s.words[0]))}:this._wordDiv(s,u)},"divmod"),o.prototype.div=i(function(s){return this.divmod(s,"div",!1).div},"div"),o.prototype.mod=i(function(s){return this.divmod(s,"mod",!1).mod},"mod"),o.prototype.umod=i(function(s){return this.divmod(s,"mod",!0).mod},"umod"),o.prototype.divRound=i(function(s){var u=this.divmod(s);if(u.mod.isZero())return u.div;var m=u.div.negative!==0?u.mod.isub(s):u.mod,y=s.ushrn(1),v=s.andln(1),S=m.cmp(y);return S<0||v===1&&S===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},"divRound"),o.prototype.modn=i(function(s){r(s<=67108863);for(var u=(1<<26)%s,m=0,y=this.length-1;y>=0;y--)m=(u*m+(this.words[y]|0))%s;return m},"modn"),o.prototype.idivn=i(function(s){r(s<=67108863);for(var u=0,m=this.length-1;m>=0;m--){var y=(this.words[m]|0)+u*67108864;this.words[m]=y/s|0,u=y%s}return this.strip()},"idivn"),o.prototype.divn=i(function(s){return this.clone().idivn(s)},"divn"),o.prototype.egcd=i(function(s){r(s.negative===0),r(!s.isZero());var u=this,m=s.clone();u.negative!==0?u=u.umod(s):u=u.clone();for(var y=new o(1),v=new o(0),S=new o(0),E=new o(1),b=0;u.isEven()&&m.isEven();)u.iushrn(1),m.iushrn(1),++b;for(var c=m.clone(),w=u.clone();!u.isZero();){for(var D=0,L=1;!(u.words[0]&L)&&D<26;++D,L<<=1);if(D>0)for(u.iushrn(D);D-- >0;)(y.isOdd()||v.isOdd())&&(y.iadd(c),v.isub(w)),y.iushrn(1),v.iushrn(1);for(var z=0,Y=1;!(m.words[0]&Y)&&z<26;++z,Y<<=1);if(z>0)for(m.iushrn(z);z-- >0;)(S.isOdd()||E.isOdd())&&(S.iadd(c),E.isub(w)),S.iushrn(1),E.iushrn(1);u.cmp(m)>=0?(u.isub(m),y.isub(S),v.isub(E)):(m.isub(u),S.isub(y),E.isub(v))}return{a:S,b:E,gcd:m.iushln(b)}},"egcd"),o.prototype._invmp=i(function(s){r(s.negative===0),r(!s.isZero());var u=this,m=s.clone();u.negative!==0?u=u.umod(s):u=u.clone();for(var y=new o(1),v=new o(0),S=m.clone();u.cmpn(1)>0&&m.cmpn(1)>0;){for(var E=0,b=1;!(u.words[0]&b)&&E<26;++E,b<<=1);if(E>0)for(u.iushrn(E);E-- >0;)y.isOdd()&&y.iadd(S),y.iushrn(1);for(var c=0,w=1;!(m.words[0]&w)&&c<26;++c,w<<=1);if(c>0)for(m.iushrn(c);c-- >0;)v.isOdd()&&v.iadd(S),v.iushrn(1);u.cmp(m)>=0?(u.isub(m),y.isub(v)):(m.isub(u),v.isub(y))}var D;return u.cmpn(1)===0?D=y:D=v,D.cmpn(0)<0&&D.iadd(s),D},"_invmp"),o.prototype.gcd=i(function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var u=this.clone(),m=s.clone();u.negative=0,m.negative=0;for(var y=0;u.isEven()&&m.isEven();y++)u.iushrn(1),m.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;m.isEven();)m.iushrn(1);var v=u.cmp(m);if(v<0){var S=u;u=m,m=S}else if(v===0||m.cmpn(1)===0)break;u.isub(m)}while(!0);return m.iushln(y)},"gcd"),o.prototype.invm=i(function(s){return this.egcd(s).a.umod(s)},"invm"),o.prototype.isEven=i(function(){return(this.words[0]&1)===0},"isEven"),o.prototype.isOdd=i(function(){return(this.words[0]&1)===1},"isOdd"),o.prototype.andln=i(function(s){return this.words[0]&s},"andln"),o.prototype.bincn=i(function(s){r(typeof s=="number");var u=s%26,m=(s-u)/26,y=1<<u;if(this.length<=m)return this._expand(m+1),this.words[m]|=y,this;for(var v=y,S=m;v!==0&&S<this.length;S++){var E=this.words[S]|0;E+=v,v=E>>>26,E&=67108863,this.words[S]=E}return v!==0&&(this.words[S]=v,this.length++),this},"bincn"),o.prototype.isZero=i(function(){return this.length===1&&this.words[0]===0},"isZero"),o.prototype.cmpn=i(function(s){var u=s<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this.strip();var m;if(this.length>1)m=1;else{u&&(s=-s),r(s<=67108863,"Number is too big");var y=this.words[0]|0;m=y===s?0:y<s?-1:1}return this.negative!==0?-m|0:m},"cmpn"),o.prototype.cmp=i(function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var u=this.ucmp(s);return this.negative!==0?-u|0:u},"cmp"),o.prototype.ucmp=i(function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var u=0,m=this.length-1;m>=0;m--){var y=this.words[m]|0,v=s.words[m]|0;if(y!==v){y<v?u=-1:y>v&&(u=1);break}}return u},"ucmp"),o.prototype.gtn=i(function(s){return this.cmpn(s)===1},"gtn"),o.prototype.gt=i(function(s){return this.cmp(s)===1},"gt"),o.prototype.gten=i(function(s){return this.cmpn(s)>=0},"gten"),o.prototype.gte=i(function(s){return this.cmp(s)>=0},"gte"),o.prototype.ltn=i(function(s){return this.cmpn(s)===-1},"ltn"),o.prototype.lt=i(function(s){return this.cmp(s)===-1},"lt"),o.prototype.lten=i(function(s){return this.cmpn(s)<=0},"lten"),o.prototype.lte=i(function(s){return this.cmp(s)<=0},"lte"),o.prototype.eqn=i(function(s){return this.cmpn(s)===0},"eqn"),o.prototype.eq=i(function(s){return this.cmp(s)===0},"eq"),o.red=i(function(s){return new W(s)},"red"),o.prototype.toRed=i(function(s){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},"toRed"),o.prototype.fromRed=i(function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},"fromRed"),o.prototype._forceRed=i(function(s){return this.red=s,this},"_forceRed"),o.prototype.forceRed=i(function(s){return r(!this.red,"Already a number in reduction context"),this._forceRed(s)},"forceRed"),o.prototype.redAdd=i(function(s){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},"redAdd"),o.prototype.redIAdd=i(function(s){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},"redIAdd"),o.prototype.redSub=i(function(s){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},"redSub"),o.prototype.redISub=i(function(s){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},"redISub"),o.prototype.redShl=i(function(s){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},"redShl"),o.prototype.redMul=i(function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},"redMul"),o.prototype.redIMul=i(function(s){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},"redIMul"),o.prototype.redSqr=i(function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},"redSqr"),o.prototype.redISqr=i(function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},"redISqr"),o.prototype.redSqrt=i(function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},"redSqrt"),o.prototype.redInvm=i(function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},"redInvm"),o.prototype.redNeg=i(function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},"redNeg"),o.prototype.redPow=i(function(s){return r(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)},"redPow");var Q={k256:null,p224:null,p192:null,p25519:null};function F(x,s){this.name=x,this.p=new o(s,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}i(F,"MPrime"),F.prototype._tmp=i(function(){var s=new o(null);return s.words=new Array(Math.ceil(this.n/13)),s},"_tmp"),F.prototype.ireduce=i(function(s){var u=s,m;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),m=u.bitLength();while(m>this.n);var y=m<this.n?-1:u.ucmp(this.p);return y===0?(u.words[0]=0,u.length=1):y>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},"ireduce"),F.prototype.split=i(function(s,u){s.iushrn(this.n,0,u)},"split"),F.prototype.imulK=i(function(s){return s.imul(this.k)},"imulK");function ce(){F.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(ce,"K256"),n(ce,F),ce.prototype.split=i(function(s,u){for(var m=4194303,y=Math.min(s.length,9),v=0;v<y;v++)u.words[v]=s.words[v];if(u.length=y,s.length<=9){s.words[0]=0,s.length=1;return}var S=s.words[9];for(u.words[u.length++]=S&m,v=10;v<s.length;v++){var E=s.words[v]|0;s.words[v-10]=(E&m)<<4|S>>>22,S=E}S>>>=22,s.words[v-10]=S,S===0&&s.length>10?s.length-=10:s.length-=9},"split"),ce.prototype.imulK=i(function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var u=0,m=0;m<s.length;m++){var y=s.words[m]|0;u+=y*977,s.words[m]=u&67108863,u=y*64+(u/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s},"imulK");function se(){F.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(se,"P224"),n(se,F);function ie(){F.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(ie,"P192"),n(ie,F);function ae(){F.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(ae,"P25519"),n(ae,F),ae.prototype.imulK=i(function(s){for(var u=0,m=0;m<s.length;m++){var y=(s.words[m]|0)*19+u,v=y&67108863;y>>>=26,s.words[m]=v,u=y}return u!==0&&(s.words[s.length++]=u),s},"imulK"),o._prime=i(function(s){if(Q[s])return Q[s];var u;if(s==="k256")u=new ce;else if(s==="p224")u=new se;else if(s==="p192")u=new ie;else if(s==="p25519")u=new ae;else throw new Error("Unknown prime "+s);return Q[s]=u,u},"prime");function W(x){if(typeof x=="string"){var s=o._prime(x);this.m=s.p,this.prime=s}else r(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}i(W,"Red"),W.prototype._verify1=i(function(s){r(s.negative===0,"red works only with positives"),r(s.red,"red works only with red numbers")},"_verify1"),W.prototype._verify2=i(function(s,u){r((s.negative|u.negative)===0,"red works only with positives"),r(s.red&&s.red===u.red,"red works only with red numbers")},"_verify2"),W.prototype.imod=i(function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},"imod"),W.prototype.neg=i(function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},"neg"),W.prototype.add=i(function(s,u){this._verify2(s,u);var m=s.add(u);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},"add"),W.prototype.iadd=i(function(s,u){this._verify2(s,u);var m=s.iadd(u);return m.cmp(this.m)>=0&&m.isub(this.m),m},"iadd"),W.prototype.sub=i(function(s,u){this._verify2(s,u);var m=s.sub(u);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},"sub"),W.prototype.isub=i(function(s,u){this._verify2(s,u);var m=s.isub(u);return m.cmpn(0)<0&&m.iadd(this.m),m},"isub"),W.prototype.shl=i(function(s,u){return this._verify1(s),this.imod(s.ushln(u))},"shl"),W.prototype.imul=i(function(s,u){return this._verify2(s,u),this.imod(s.imul(u))},"imul"),W.prototype.mul=i(function(s,u){return this._verify2(s,u),this.imod(s.mul(u))},"mul"),W.prototype.isqr=i(function(s){return this.imul(s,s.clone())},"isqr"),W.prototype.sqr=i(function(s){return this.mul(s,s)},"sqr"),W.prototype.sqrt=i(function(s){if(s.isZero())return s.clone();var u=this.m.andln(3);if(r(u%2===1),u===3){var m=this.m.add(new o(1)).iushrn(2);return this.pow(s,m)}for(var y=this.m.subn(1),v=0;!y.isZero()&&y.andln(1)===0;)v++,y.iushrn(1);r(!y.isZero());var S=new o(1).toRed(this),E=S.redNeg(),b=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);this.pow(c,b).cmp(E)!==0;)c.redIAdd(E);for(var w=this.pow(c,y),D=this.pow(s,y.addn(1).iushrn(1)),L=this.pow(s,y),z=v;L.cmp(S)!==0;){for(var Y=L,oe=0;Y.cmp(S)!==0;oe++)Y=Y.redSqr();r(oe<z);var le=this.pow(w,new o(1).iushln(z-oe-1));D=D.redMul(le),w=le.redSqr(),L=L.redMul(w),z=oe}return D},"sqrt"),W.prototype.invm=i(function(s){var u=s._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},"invm"),W.prototype.pow=i(function(s,u){if(u.isZero())return new o(1).toRed(this);if(u.cmpn(1)===0)return s.clone();var m=4,y=new Array(1<<m);y[0]=new o(1).toRed(this),y[1]=s;for(var v=2;v<y.length;v++)y[v]=this.mul(y[v-1],s);var S=y[0],E=0,b=0,c=u.bitLength()%26;for(c===0&&(c=26),v=u.length-1;v>=0;v--){for(var w=u.words[v],D=c-1;D>=0;D--){var L=w>>D&1;if(S!==y[0]&&(S=this.sqr(S)),L===0&&E===0){b=0;continue}E<<=1,E|=L,b++,!(b!==m&&(v!==0||D!==0))&&(S=this.mul(S,y[E]),b=0,E=0)}c=26}return S},"pow"),W.prototype.convertTo=i(function(s){var u=s.umod(this.m);return u===s?u.clone():u},"convertTo"),W.prototype.convertFrom=i(function(s){var u=s.clone();return u.red=null,u},"convertFrom"),o.mont=i(function(s){return new me(s)},"mont");function me(x){W.call(this,x),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(me,"Mont"),n(me,W),me.prototype.convertTo=i(function(s){return this.imod(s.ushln(this.shift))},"convertTo"),me.prototype.convertFrom=i(function(s){var u=this.imod(s.mul(this.rinv));return u.red=null,u},"convertFrom"),me.prototype.imul=i(function(s,u){if(s.isZero()||u.isZero())return s.words[0]=0,s.length=1,s;var m=s.imul(u),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=m.isub(y).iushrn(this.shift),S=v;return v.cmp(this.m)>=0?S=v.isub(this.m):v.cmpn(0)<0&&(S=v.iadd(this.m)),S._forceRed(this)},"imul"),me.prototype.mul=i(function(s,u){if(s.isZero()||u.isZero())return new o(0)._forceRed(this);var m=s.mul(u),y=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=m.isub(y).iushrn(this.shift),S=v;return v.cmp(this.m)>=0?S=v.isub(this.m):v.cmpn(0)<0&&(S=v.iadd(this.m)),S._forceRed(this)},"mul"),me.prototype.invm=i(function(s){var u=this.imod(s._invmp(this.m).mul(this.r2));return u._forceRed(this)},"invm")})(typeof eh>"u"||eh,ib)});var ub=he((Lj,cb)=>{h();p();var Cn=Ka(),lr=ob(),gt=i(function(){},"ABI");function Hu(e){return e.startsWith("int[")?"int256"+e.slice(3):e==="int"?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):e==="uint"?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):e==="fixed"?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):e==="ufixed"?"ufixed128x128":e}i(Hu,"elementaryName");gt.eventID=function(e,t){var r=e+"("+t.map(Hu).join(",")+")";return Cn.keccak256(Buffer.from(r))};gt.methodID=function(e,t){return gt.eventID(e,t).slice(0,4)};function Ji(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}i(Ji,"parseTypeN");function th(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}i(th,"parseTypeNxM");function Na(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?t[2]===""?"dynamic":parseInt(t[2],10):null}i(Na,"parseTypeArray");function Vo(e){var t=typeof e;if(t==="string")return Cn.isHexPrefixed(e)?new lr(Cn.stripHexPrefix(e),16):new lr(e,10);if(t==="number")return new lr(e);if(e.toArray)return e;throw new Error("Argument is not a number")}i(Vo,"parseNumber");function ab(e){var t=/^(\w+)\((.*)\)$/.exec(e);if(t.length!==3)throw new Error("Invalid method signature");var r=/^(.+)\):\((.+)$/.exec(t[2]);if(r!==null&&r.length===3)return{method:t[1],args:r[1].split(","),retargs:r[2].split(",")};var n=t[2].split(",");return n.length===1&&n[0]===""&&(n=[]),{method:t[1],args:n}}i(ab,"parseSignature");function Kn(e,t){var r,n,o,a;if(e==="address")return Kn("uint160",Vo(t));if(e==="bool")return Kn("uint8",t?1:0);if(e==="string")return Kn("bytes",Buffer.from(t,"utf8"));if(Ra(e)){if(typeof t.length>"u")throw new Error("Not an array?");if(r=Na(e),r!=="dynamic"&&r!==0&&t.length>r)throw new Error("Elements exceed array size: "+r);o=[],e=e.slice(0,e.lastIndexOf("[")),typeof t=="string"&&(t=JSON.parse(t));for(a in t)o.push(Kn(e,t[a]));if(r==="dynamic"){var l=Kn("uint256",t.length);o.unshift(l)}return Buffer.concat(o)}else{if(e==="bytes")return t=Buffer.from(t),o=Buffer.concat([Kn("uint256",t.length),t]),t.length%32!==0&&(o=Buffer.concat([o,Cn.zeros(32-t.length%32)])),o;if(e.startsWith("bytes")){if(r=Ji(e),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return Cn.setLengthRight(t,32)}else if(e.startsWith("uint")){if(r=Ji(e),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(n=Vo(t),n.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+n.bitLength());if(n<0)throw new Error("Supplied uint is negative");return n.toArrayLike(Buffer,"be",32)}else if(e.startsWith("int")){if(r=Ji(e),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(n=Vo(t),n.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+n.bitLength());return n.toTwos(256).toArrayLike(Buffer,"be",32)}else if(e.startsWith("ufixed")){if(r=th(e),n=Vo(t),n<0)throw new Error("Supplied ufixed is negative");return Kn("uint256",n.mul(new lr(2).pow(new lr(r[1]))))}else if(e.startsWith("fixed"))return r=th(e),Kn("int256",Vo(t).mul(new lr(2).pow(new lr(r[1]))))}throw new Error("Unsupported or invalid type: "+e)}i(Kn,"encodeSingle");function hn(e,t,r){typeof e=="string"&&(e=rh(e));var n,o,a,l;if(e.name==="address")return hn(e.rawType,t,r).toArrayLike(Buffer,"be",20).toString("hex");if(e.name==="bool")return hn(e.rawType,t,r).toString()===new lr(1).toString();if(e.name==="string"){var d=hn(e.rawType,t,r);return Buffer.from(d,"utf8").toString()}else if(e.isArray){for(a=[],n=e.size,e.size==="dynamic"&&(r=hn("uint256",t,r).toNumber(),n=hn("uint256",t,r).toNumber(),r=r+32),l=0;l<n;l++){var g=hn(e.subArray,t,r);a.push(g),r+=e.subArray.memoryUsage}return a}else{if(e.name==="bytes")return r=hn("uint256",t,r).toNumber(),n=hn("uint256",t,r).toNumber(),t.slice(r+32,r+32+n);if(e.name.startsWith("bytes"))return t.slice(r,r+e.size);if(e.name.startsWith("uint")){if(o=new lr(t.slice(r,r+32),16,"be"),o.bitLength()>e.size)throw new Error("Decoded int exceeds width: "+e.size+" vs "+o.bitLength());return o}else if(e.name.startsWith("int")){if(o=new lr(t.slice(r,r+32),16,"be").fromTwos(256),o.bitLength()>e.size)throw new Error("Decoded uint exceeds width: "+e.size+" vs "+o.bitLength());return o}else if(e.name.startsWith("ufixed")){if(n=new lr(2).pow(new lr(e.size[1])),o=hn("uint256",t,r),!o.mod(n).isZero())throw new Error("Decimals not supported yet");return o.div(n)}else if(e.name.startsWith("fixed")){if(n=new lr(2).pow(new lr(e.size[1])),o=hn("int256",t,r),!o.mod(n).isZero())throw new Error("Decimals not supported yet");return o.div(n)}}throw new Error("Unsupported or invalid type: "+e.name)}i(hn,"decodeSingle");function rh(e){var t,r;if(Ra(e)){t=Na(e);var n=e.slice(0,e.lastIndexOf("["));return n=rh(n),r={isArray:!0,name:e,size:t,memoryUsage:t==="dynamic"?32:n.memoryUsage*t,subArray:n},r}else{var o;switch(e){case"address":o="uint160";break;case"bool":o="uint8";break;case"string":o="bytes";break}if(r={rawType:o,name:e,memoryUsage:32},e.startsWith("bytes")&&e!=="bytes"||e.startsWith("uint")||e.startsWith("int")?r.size=Ji(e):(e.startsWith("ufixed")||e.startsWith("fixed"))&&(r.size=th(e)),e.startsWith("bytes")&&e!=="bytes"&&(r.size<1||r.size>32))throw new Error("Invalid bytes<N> width: "+r.size);if((e.startsWith("uint")||e.startsWith("int"))&&(r.size%8||r.size<8||r.size>256))throw new Error("Invalid int/uint<N> width: "+r.size);return r}}i(rh,"parseType");function QM(e){return e==="string"||e==="bytes"||Na(e)==="dynamic"}i(QM,"isDynamic");function Ra(e){return e.lastIndexOf("]")===e.length-1}i(Ra,"isArray");gt.rawEncode=function(e,t){var r=[],n=[],o=0;e.forEach(function(A){if(Ra(A)){var T=Na(A);T!=="dynamic"?o+=32*T:o+=32}else o+=32});for(var a=0;a<e.length;a++){var l=Hu(e[a]),d=t[a],g=Kn(l,d);QM(l)?(r.push(Kn("uint256",o)),n.push(g),o+=g.length):r.push(g)}return Buffer.concat(r.concat(n))};gt.rawDecode=function(e,t){var r=[];t=Buffer.from(t);for(var n=0,o=0;o<e.length;o++){var a=Hu(e[o]),l=rh(a,t,n),d=hn(l,t,n);n+=l.memoryUsage,r.push(d)}return r};gt.simpleEncode=function(e){var t=Array.prototype.slice.call(arguments).slice(1),r=ab(e);if(t.length!==r.args.length)throw new Error("Argument count mismatch");return Buffer.concat([gt.methodID(r.method,r.args),gt.rawEncode(r.args,t)])};gt.simpleDecode=function(e,t){var r=ab(e);if(!r.retargs)throw new Error("No return values in method");return gt.rawDecode(r.retargs,t)};function sb(e,t){return e.startsWith("address")||e.startsWith("bytes")?"0x"+t.toString("hex"):t.toString()}i(sb,"stringify");gt.stringify=function(e,t){var r=[];for(var n in e){var o=e[n],a=t[n];/^[^\[]+\[.*\]$/.test(o)?a=a.map(function(l){return sb(o,l)}).join(", "):a=sb(o,a),r.push(a)}return r};gt.solidityHexValue=function(e,t,r){var n,o;if(Ra(e)){var a=e.replace(/\[.*?\]/,"");if(!Ra(a)){var l=Na(e);if(l!=="dynamic"&&l!==0&&t.length>l)throw new Error("Elements exceed array size: "+l)}var d=t.map(function(T){return gt.solidityHexValue(a,T,256)});return Buffer.concat(d)}else{if(e==="bytes")return t;if(e==="string")return Buffer.from(t,"utf8");if(e==="bool"){r=r||8;var g=Array(r/4).join("0");return Buffer.from(t?g+"1":g+"0","hex")}else if(e==="address"){var A=20;return r&&(A=r/8),Cn.setLengthLeft(t,A)}else if(e.startsWith("bytes")){if(n=Ji(e),n<1||n>32)throw new Error("Invalid bytes<N> width: "+n);return Cn.setLengthRight(t,n)}else if(e.startsWith("uint")){if(n=Ji(e),n%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);if(o=Vo(t),o.bitLength()>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+o.bitLength());return r=r||n,o.toArrayLike(Buffer,"be",r/8)}else if(e.startsWith("int")){if(n=Ji(e),n%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);if(o=Vo(t),o.bitLength()>n)throw new Error("Supplied int exceeds width: "+n+" vs "+o.bitLength());return r=r||n,o.toTwos(n).toArrayLike(Buffer,"be",r/8)}else throw new Error("Unsupported or invalid type: "+e)}};gt.solidityPack=function(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var r=[],n=0;n<e.length;n++){var o=Hu(e[n]),a=t[n];r.push(gt.solidityHexValue(o,a,null))}return Buffer.concat(r)};gt.soliditySHA3=function(e,t){return Cn.keccak256(gt.solidityPack(e,t))};gt.soliditySHA256=function(e,t){return Cn.sha256(gt.solidityPack(e,t))};gt.solidityRIPEMD160=function(e,t){return Cn.ripemd160(gt.solidityPack(e,t),!0)};function XM(e){return e>="0"&&e<="9"}i(XM,"isNumeric");gt.fromSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="s")t.push("bytes");else if(n==="b"){for(var o="bytes",a=r+1;a<e.length&&XM(e[a]);)o+=e[a]-"0",a++;r=a-1,t.push(o)}else if(n==="i")t.push("int256");else if(n==="a")t.push("int256[]");else throw new Error("Unsupported or invalid type: "+n)}return t};gt.toSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="bytes")t.push("s");else if(n.startsWith("bytes"))t.push("b"+Ji(n));else if(n==="int256")t.push("i");else if(n==="int256[]")t.push("a");else throw new Error("Unsupported or invalid type: "+n)}return t.join("")};cb.exports=gt});var fb=he((qj,lb)=>{h();p();lb.exports=ub()});var gb=he(Dt=>{"use strict";h();p();Object.defineProperty(Dt,"__esModule",{value:!0});Dt.recoverTypedSignature=Dt.signTypedData=Dt.typedSignatureHash=Dt.TypedDataUtils=Dt.TYPED_MESSAGE_SCHEMA=Dt.SignTypedDataVersion=void 0;var Ur=Ka(),Ua=fb(),Lo=Ca(),Qt;(function(e){e.V1="V1",e.V3="V3",e.V4="V4"})(Qt=Dt.SignTypedDataVersion||(Dt.SignTypedDataVersion={}));Dt.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};function js(e,t){if(Object.keys(Qt).includes(e)){if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}else throw new Error(`Invalid version: '${e}'`)}i(js,"validateVersion");function db(e,t,r,n,o){if(js(o,[Qt.V3,Qt.V4]),e[r]!==void 0)return["bytes32",o===Qt.V4&&n==null?"0x0000000000000000000000000000000000000000000000000000000000000000":Ur.keccak(ih(r,n,e,o))];if(n===void 0)throw new Error(`missing value for field ${t} of type ${r}`);if(r==="bytes")return["bytes32",Ur.keccak(n)];if(r==="string")return typeof n=="string"&&(n=Buffer.from(n,"utf8")),["bytes32",Ur.keccak(n)];if(r.lastIndexOf("]")===r.length-1){if(o===Qt.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");let a=r.slice(0,r.lastIndexOf("[")),l=n.map(d=>db(e,t,a,d,o));return["bytes32",Ur.keccak(Ua.rawEncode(l.map(([d])=>d),l.map(([,d])=>d)))]}return[r,n]}i(db,"encodeField");function ih(e,t,r,n){js(n,[Qt.V3,Qt.V4]);let o=["bytes32"],a=[pb(e,r)];for(let l of r[e]){if(n===Qt.V3&&t[l.name]===void 0)continue;let[d,g]=db(r,l.name,l.type,t[l.name],n);o.push(d),a.push(g)}return Ua.rawEncode(o,a)}i(ih,"encodeData");function hb(e,t){let r="",n=oh(e,t);n.delete(e);let o=[e,...Array.from(n).sort()];for(let a of o){if(!t[a])throw new Error(`No type definition specified: ${a}`);r+=`${a}(${t[a].map(({name:d,type:g})=>`${g} ${d}`).join(",")})`}return r}i(hb,"encodeType");function oh(e,t,r=new Set){if([e]=e.match(/^\w*/u),r.has(e)||t[e]===void 0)return r;r.add(e);for(let n of t[e])oh(n.type,t,r);return r}i(oh,"findTypeDependencies");function nh(e,t,r,n){return js(n,[Qt.V3,Qt.V4]),Ur.keccak(ih(e,t,r,n))}i(nh,"hashStruct");function pb(e,t){return Ur.keccak(hb(e,t))}i(pb,"hashType");function mb(e){let t={};for(let r in Dt.TYPED_MESSAGE_SCHEMA.properties)e[r]&&(t[r]=e[r]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}i(mb,"sanitizeData");function eT(e,t){js(t,[Qt.V3,Qt.V4]);let r=mb(e),n=[Buffer.from("1901","hex")];return n.push(nh("EIP712Domain",r.domain,r.types,t)),r.primaryType!=="EIP712Domain"&&n.push(nh(r.primaryType,r.message,r.types,t)),Ur.keccak(Buffer.concat(n))}i(eT,"eip712Hash");Dt.TypedDataUtils={encodeData:ih,encodeType:hb,findTypeDependencies:oh,hashStruct:nh,hashType:pb,sanitizeData:mb,eip712Hash:eT};function tT(e){let t=sh(e);return Ur.bufferToHex(t)}i(tT,"typedSignatureHash");Dt.typedSignatureHash=tT;function sh(e){let t=new Error("Expect argument to be non-empty array");if(typeof e!="object"||!("length"in e)||!e.length)throw t;let r=e.map(function(a){return a.type!=="bytes"?a.value:Lo.legacyToBuffer(a.value)}),n=e.map(function(a){return a.type}),o=e.map(function(a){if(!a.name)throw t;return`${a.type} ${a.name}`});return Ua.soliditySHA3(["bytes32","bytes32"],[Ua.soliditySHA3(new Array(e.length).fill("string"),o),Ua.soliditySHA3(n,r)])}i(sh,"_typedSignatureHash");function rT({privateKey:e,data:t,version:r}){if(js(r),Lo.isNullish(t))throw new Error("Missing data parameter");if(Lo.isNullish(e))throw new Error("Missing private key parameter");let n=r===Qt.V1?sh(t):Dt.TypedDataUtils.eip712Hash(t,r),o=Ur.ecsign(n,e);return Lo.concatSig(Ur.toBuffer(o.v),o.r,o.s)}i(rT,"signTypedData");Dt.signTypedData=rT;function nT({data:e,signature:t,version:r}){if(js(r),Lo.isNullish(e))throw new Error("Missing data parameter");if(Lo.isNullish(t))throw new Error("Missing signature parameter");let n=r===Qt.V1?sh(e):Dt.TypedDataUtils.eip712Hash(e,r),o=Lo.recoverPublicKey(n,t),a=Ur.publicToAddress(o);return Ur.bufferToHex(a)}i(nT,"recoverTypedSignature");Dt.recoverTypedSignature=nT});var vb=he((yb,Wu)=>{h();p();(function(e,t){"use strict";typeof Wu<"u"&&Wu.exports?Wu.exports=t():(e.nacl||(e.nacl={}),e.nacl.util=t())})(yb,function(){"use strict";var e={};function t(r){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(r))throw new TypeError("invalid encoding")}return i(t,"validateBase64"),e.decodeUTF8=function(r){if(typeof r!="string")throw new TypeError("expected string");var n,o=unescape(encodeURIComponent(r)),a=new Uint8Array(o.length);for(n=0;n<o.length;n++)a[n]=o.charCodeAt(n);return a},e.encodeUTF8=function(r){var n,o=[];for(n=0;n<r.length;n++)o.push(String.fromCharCode(r[n]));return decodeURIComponent(escape(o.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(e.encodeBase64=function(r){return Buffer.from(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(Buffer.from(r,"base64"),0))}):(e.encodeBase64=function(r){return new Buffer(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(new Buffer(r,"base64"),0))}):(e.encodeBase64=function(r){var n,o=[],a=r.length;for(n=0;n<a;n++)o.push(String.fromCharCode(r[n]));return btoa(o.join(""))},e.decodeBase64=function(r){t(r);var n,o=atob(r),a=new Uint8Array(o.length);for(n=0;n<o.length;n++)a[n]=o.charCodeAt(n);return a}),e})});var Sb=he(Vt=>{"use strict";h();p();var iT=Vt&&Vt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:i(function(){return t[r]},"get")})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),oT=Vt&&Vt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),bb=Vt&&Vt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&iT(t,e,r);return oT(t,e),t};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.getEncryptionPublicKey=Vt.decryptSafely=Vt.decrypt=Vt.encryptSafely=Vt.encrypt=void 0;var Fo=bb(Pi()),pn=bb(vb()),Rn=Ca();function wb({publicKey:e,data:t,version:r}){if(Rn.isNullish(e))throw new Error("Missing publicKey parameter");if(Rn.isNullish(t))throw new Error("Missing data parameter");if(Rn.isNullish(r))throw new Error("Missing version parameter");switch(r){case"x25519-xsalsa20-poly1305":{if(typeof t!="string")throw new Error("Message data must be given as a string");let n=Fo.box.keyPair(),o;try{o=pn.decodeBase64(e)}catch{throw new Error("Bad public key")}let a=pn.decodeUTF8(t),l=Fo.randomBytes(Fo.box.nonceLength),d=Fo.box(a,l,o,n.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:pn.encodeBase64(l),ephemPublicKey:pn.encodeBase64(n.publicKey),ciphertext:pn.encodeBase64(d)}}default:throw new Error("Encryption type/version not supported")}}i(wb,"encrypt");Vt.encrypt=wb;function sT({publicKey:e,data:t,version:r}){if(Rn.isNullish(e))throw new Error("Missing publicKey parameter");if(Rn.isNullish(t))throw new Error("Missing data parameter");if(Rn.isNullish(r))throw new Error("Missing version parameter");let n=2**11,o=16;if(typeof t=="object"&&"toJSON"in t)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");let a={data:t,padding:""},d=Buffer.byteLength(JSON.stringify(a),"utf-8")%n,g=0;d>0&&(g=n-d-o),a.padding="0".repeat(g);let A=JSON.stringify(a);return wb({publicKey:e,data:A,version:r})}i(sT,"encryptSafely");Vt.encryptSafely=sT;function xb({encryptedData:e,privateKey:t}){if(Rn.isNullish(e))throw new Error("Missing encryptedData parameter");if(Rn.isNullish(t))throw new Error("Missing privateKey parameter");switch(e.version){case"x25519-xsalsa20-poly1305":{let r=Ab(t),n=Fo.box.keyPair.fromSecretKey(r).secretKey,o=pn.decodeBase64(e.nonce),a=pn.decodeBase64(e.ciphertext),l=pn.decodeBase64(e.ephemPublicKey),d=Fo.box.open(a,o,l,n),g;try{g=pn.encodeUTF8(d)}catch{throw new Error("Decryption failed.")}if(g)return g;throw new Error("Decryption failed.")}default:throw new Error("Encryption type/version not supported.")}}i(xb,"decrypt");Vt.decrypt=xb;function aT({encryptedData:e,privateKey:t}){if(Rn.isNullish(e))throw new Error("Missing encryptedData parameter");if(Rn.isNullish(t))throw new Error("Missing privateKey parameter");return JSON.parse(xb({encryptedData:e,privateKey:t})).data}i(aT,"decryptSafely");Vt.decryptSafely=aT;function cT(e){let t=Ab(e),r=Fo.box.keyPair.fromSecretKey(t).publicKey;return pn.encodeBase64(r)}i(cT,"getEncryptionPublicKey");Vt.getEncryptionPublicKey=cT;function Ab(e){let t=Buffer.from(e,"hex").toString("base64");return pn.decodeBase64(t)}i(Ab,"nacl_decodeHex")});var ch=he(wr=>{"use strict";h();p();var uT=wr&&wr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:i(function(){return t[r]},"get")})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ah=wr&&wr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&uT(t,e,r)};Object.defineProperty(wr,"__esModule",{value:!0});wr.normalize=wr.concatSig=void 0;ah(nb(),wr);ah(gb(),wr);ah(Sb(),wr);var Eb=Ca();Object.defineProperty(wr,"concatSig",{enumerable:!0,get:i(function(){return Eb.concatSig},"get")});Object.defineProperty(wr,"normalize",{enumerable:!0,get:i(function(){return Eb.normalize},"get")})});h();p();h();p();var is;(function(e){e.Image="image",e.Emoji="emoji",e.ReadOnlyDefault="read-only-default",e.Default="default"})(is||(is={}));var Km=f.object({type:f.nativeEnum(is),imageUrl:f.string().optional(),unicode:f.string().optional()}),os;(function(e){e.Ledger="ledger"})(os||(os={}));var ss;(function(e){e.BLE="ble"})(ss||(ss={}));var dA=f.object({version:f.literal(1),connectionType:f.nativeEnum(ss),deviceType:f.nativeEnum(os),id:f.string().min(1),name:f.string().optional(),model:f.string().optional()}),hA=f.object({value:f.number(),timestamp:f.number()}),pA=f.object({name:f.string(),icon:Km.optional(),connectedDevices:dA.array().optional()}),mA=f.object({balance:hA.optional()});var gA=100,yA={unicode:void 0,imageUrl:void 0,type:is.Default},vA={version:1,isDeveloperMode:!1};var as=on.Solana.Devnet,cs=on.Ethereum.Sepolia,ff=on.Sui.Testnet;function aa(){return{version:1,setting:{[_.Solana]:as,[_.EVM]:cs,[_.Sui]:ff}}}i(aa,"getDefaultNetworkSetting");function Jt(e){return e.map(t=>sn[t].defaultDerivationPathType)}i(Jt,"getDefaultDerivationPathTypesForAddressTypes");var bA={[X.Bip44RootSolana]:X.Bip44RootEthereum,[X.Bip44ChangeSolana]:X.Bip44Ethereum,[X.Bip44Solana]:X.Bip44EthereumSecondary,[X.DeprecatedSolana]:X.Bip44EthereumTertiary,[X.Bip44RootEthereum]:null,[X.Bip44Ethereum]:null,[X.Bip44EthereumSecondary]:null,[X.Bip44EthereumTertiary]:null,[X.BitcoinTaproot]:null,[X.BitcoinNativeSegwit]:null,[X.BitcoinNestedSegwit]:null,[X.BitcoinLegacy]:null,[X.Bip44Sui]:null},ai={[X.Bip44RootSolana]:-1,[X.Bip44RootEthereum]:-1,[X.BitcoinTaproot]:0,[X.BitcoinNativeSegwit]:0,[X.BitcoinNestedSegwit]:0,[X.BitcoinLegacy]:0,[X.Bip44ChangeSolana]:0,[X.Bip44Ethereum]:0,[X.Bip44Solana]:1,[X.Bip44EthereumSecondary]:1,[X.DeprecatedSolana]:2,[X.Bip44EthereumTertiary]:2,[X.Bip44Sui]:0},wA="https://help.phantom.com/hc/en-us/articles/4406563212819";var xA="https://help.phantom.com/hc/en-us/articles/21872962238355";h();p();var Dm=ue(dc());h();p();h();p();var Cm=ue(dc()),Tc=ue(At());var Rm=(0,Tc.createContext)(null);function AA({children:e,vault:t}){return(0,Cm.jsx)(Rm.Provider,{value:t,children:e})}i(AA,"VaultProxyProvider");function yt(){let e=(0,Tc.useContext)(Rm);if(!e)throw new Error("useVaultProxy must be used within a VaultProxyProvider");return e}i(yt,"useVaultProxy");h();p();h();p();h();p();var Ic=i((e,t)=>{try{let r=rs(e,t);switch(r){case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return sn.getDisplayName(r);default:return}}catch(r){Z.addBreadcrumb(G.Account,"Failed to get address badge",ee.Error,{...r instanceof Error&&{error:r.message},networkId:e,address:t});return}},"getAddressBadge");var Nm={badge:i((e,t,r)=>t.filter(wc).length<=1?"":Ic(e,r)??"","badge"),showAddressTypeExplainer:i(e=>e.filter(wc).length>1,"showAddressTypeExplainer"),addressTooltipNetworkName:i((e,t,r)=>r.filter(wc).length>=2?Ic(e,t)??pe.getChainName(e):pe.getChainName(e),"addressTooltipNetworkName")};h();p();var Um={badge:i(()=>"Lite","badge")};var SA=new xc({[pr.Solana]:{},[pr.Ethereum]:{},[pr.Polygon]:{},[pr.Base]:{},[pr.Arbitrum]:{},[pr.Monad]:{},[pr.Bitcoin]:Nm,[pr.Sui]:{},[pr.Hypercore]:{},[pr.Hyperevm]:Um}),Ci=bm(SA);function EA({children:e}){let t=yt(),r=Ci.supportedChains.map(o=>[o,Ci.get(o)]),n=new xc(Object.fromEntries(r));return(0,Dm.jsx)(Im,{effects:{deriveAddresses:i(async()=>{await t.deriveAddresses()},"deriveAddresses")},registry:n,children:e})}i(EA,"AccountsChainDependencyProvider");h();p();var P;(function(e){e.Seed="seed",e.PrivateKey="privateKey",e.Ledger="ledger",e.SeedVault="seedVault",e.ReadOnly="readOnly",e.Seedless="seedless",e.KMSVault="kmsVault"})(P||(P={}));var MA=f.object({derivationIndex:f.number(),addresses:f.array(f.object({pathType:f.union([X0,em]),value:f.string()})),publicKeys:f.array(f.object({pathType:Q0,value:f.string()}))}),An=class extends Error{static{i(this,"VaultFetchAccountInvalidIdentifier")}message="No account exists in storage for identifier"},Ri=class extends Error{static{i(this,"VaultFetchAccountUndefinedBitcoinAddressError")}message="No account exists in storage for identifier"},Ni=class extends Error{static{i(this,"VaultExportSecretsInvalidAddressType")}message="Address type not found or incompatible with account"},ca=class extends Error{static{i(this,"VaultExportSecretsHardwareWallet")}message="Hardware wallet account does not have known secr*ts"},ua=class extends Error{static{i(this,"VaultExportSecretsReadOnlyAccount")}message="Read only account does not have known secr*ts"},la=class extends Error{static{i(this,"VaultImportReadOnlyAccount")}message="Invalid configuration for read only account"},go=class extends Error{static{i(this,"VaultImportSeedDuplicate")}message="Seed already exists in storage"},ci=class extends Error{static{i(this,"VaultFetchSeedInvalidIdentifier")}message="No seed exists in storage for identifier"},fa=class extends Error{static{i(this,"VaultImportSeedInvalidDerivationIndex")}message="The derivation index is missing or invalid"},da=class extends Error{static{i(this,"VaultImportPrivateKeyDuplicate")}message="Private key already exists in storage"},yo=class extends Error{static{i(this,"VaultFetchPrivateKeyInvalidIdentifier")}message="No private key exists in storage for identifier"};var Sn=class extends Error{static{i(this,"VaultImportAccountDuplicate")}message;constructor(t,r){super(),this.message=`Account of type ${t} found in Vault, while trying to add ${r} account`}},_c=class extends Error{static{i(this,"VaultSeedlessAccountAlreadyExists")}message="Vault already stores a seedless account"},TA=f.union([f.literal("unonboarded"),f.literal("unable-to-load-accounts")]),IA=f.union([f.literal("invalid-identifier"),f.literal("fetch-integrity-storage-error"),f.literal("fetch-entropy-storage-error"),f.literal("fetch-pk-storage-error"),f.literal("invalid-entropy"),f.literal("invalid-entropy-bip-39"),f.literal("invalid-checksum-bits"),f.literal("invalid-entropy-bits"),f.literal("invalid-checksum"),f.literal("invalid-entropy-length-less-than-twelve"),f.literal("invalid-entropy-length-more-than-twenty-four"),f.literal("invalid-entropy-length-wrong-word"),f.literal("invalid-pk-address-type"),f.literal("invalid-pk-identifier"),f.literal("invalid-pk"),f.literal("internal-error")]),_A=f.literal("safely-onboarded"),kA=f.union([f.object({status:TA,isOnboarded:f.literal(!1),reonboardingNeeded:f.literal(!1)}),f.object({status:IA,isOnboarded:f.literal(!0),reonboardingNeeded:f.literal(!0)}),f.object({status:_A,isOnboarded:f.literal(!0),reonboardingNeeded:f.literal(!1)})]);h();p();var ha=i((e,t=5)=>{let r=e.length,n=e.startsWith("0x")?t+2:t;return`${e.substring(0,n)}...${e.substring(r-t,r)}`},"formatHashMedium");h();p();h();p();var PA=i(e=>e.includes(".")||e.includes("@")?!1:L0.safeParse(e).success||V0.safeParse(e).success||mm.safeParse(e).success||F0.safeParse(e).success,"isAddress"),Vm=i((e,t=5)=>PA(e)?ha(e,t):e,"formatIfNotHandle");var BA=i((e,t,r,n=4)=>{let o=t?t.name:r,a=Vm(e,n);return o?`${o} (${a})`:a},"formatAddress");h();p();var OA=i(e=>`${e.substring(0,5)}...`,"formatAddressShort");h();p();var Lm=ue(dc()),kc=ue(At());var Fm=(0,kc.createContext)(null);function KA({children:e,authRepository:t}){return(0,Lm.jsx)(Fm.Provider,{value:t,children:e})}i(KA,"AuthProvider");function Pr(){let e=(0,kc.useContext)(Fm);if(!e)throw new Error("useAuthRepository must be used within an AuthProvider");return e}i(Pr,"useAuthRepository");function vo(){return Pr().useUser()}i(vo,"useUser");h();p();h();p();var mf=ue(nn());h();p();h();p();var CA="https://time.phantom.app/utc",RA=f.number().int().positive();async function bo(){let e=await Pc();return Math.floor(e/1e3)}i(bo,"time");async function Pc(){let e;try{let t=await dt.noBearer().get(CA);if(t.status!==200)throw new Error("Failed to fetch time from server");e=RA.parse(t.data)}catch{e=Date.now()}return e}i(Pc,"timeMs");h();p();var pa="https://phantom.app",ma="https://api.phantom.app/oauth2/auth",Bc={prod:"a61bc25e-0c4f-4ab3-aa54-b50ec746eea2",staging:"fe26708b-7db7-4146-9fbb-9a9736acfb2b"},jm="/login/start",zm="/oauth2/token";var df;(function(e){e.Apple="apple",e.Google="google"})(df||(df={}));var hf=Ki({minutes:60}),pf=hf-Ki({minutes:15}),wo="/v1/authentication-keys";var NA=60,UA=i(()=>Math.floor(Date.now()/1e3),"clientTime");async function us(e=!0){let t={alg:"ES256",type:"JWT"},r=e?await bo():UA(),n={iss:pa,aud:ma,nbf:r,exp:r+NA,iat:r};return{header:t,payload:n}}i(us,"generateUnsignedClientJWT");function ls(e){let t=ot(mf.Buffer.from(JSON.stringify(e.header))),r=ot(mf.Buffer.from(JSON.stringify(e.payload)));return[t,r,e.signature].join(".")}i(ls,"encodeSignedJwt");h();p();var qm=f.object({alg:f.string(),type:f.string(),kid:f.string()}),Hm=f.object({sub:f.string(),iss:f.string(),aud:f.string(),nbf:f.number(),exp:f.number(),iat:f.number()}),gf=f.object({header:qm,payload:Hm,signature:f.string()}),Wm=f.object({alg:f.string(),type:f.string()}),$m=f.object({iss:f.string(),aud:f.string(),nbf:f.number(),exp:f.number(),iat:f.number()}),yf=f.object({header:Wm,payload:$m}),vf=f.object({id_token:f.string(),access_token:f.string(),refresh_token:f.string(),scope:f.string(),token_type:f.string(),expires_in:f.number().gte(0)}),DA=f.object({redirectTo:f.string()}),Gm=f.object({at_hash:f.string(),aud:f.array(f.string()),auth_time:f.number(),exp:f.number(),iat:f.number(),iss:f.string(),jti:f.string(),rat:f.number(),sid:f.string(),sub:f.string(),email:f.string().optional()}),Oc=f.object({authenticationKeys:f.array(f.object({createdAt:f.string().datetime().nullish().default(null),updatedAt:f.string().datetime().nullish().default(null),id:f.string().uuid(),publicKey:f.string(),userId:f.string().uuid()})).optional()}),ui;(function(e){e.User="user",e.UserID="userID",e.AccessToken="accessToken",e.Email="email",e.LoggedOut="loggedOut"})(ui||(ui={}));h();p();var xo=ue(Kf());h();p();var ps=ue(Kf()),hg=ue(Pi());var pg={generateRandom:i(e=>{let t=(0,hg.randomBytes)(e);return(0,ps.bufferToString)(t)},"generateRandom"),async deriveChallenge(e){let t=an((0,ps.textEncodeLite)(e));return(0,ps.urlSafe)(t)}};h();p();var Or=i(()=>{let e=rr();return e===Pt.Staging?Xo.staging:e===Pt.Production?Xo.prod:M.BASE_AUTH_ENDPOINT||Xo.staging},"getAuthBaseEndpoint"),Cf=i(()=>`${Or()}${jm}`,"getAuthLoginEndpoint"),Hc=i(()=>`${Or()}${zm}`,"getAuthTokenEndpoint");var mg=new xo.BasicQueryStringUtils;async function Wc(e,t){let{url:r,codeVerifier:n}=await KS(e.getClientID(),e.redirectURL,t),o=t.type==="email",a=await e.fetchAuthorizationCode(e.redirectURL,r,o);return await gg({grantType:"authorization_code",clientID:e.getClientID(),redirectURI:e.redirectURL,tokenEndpoint:Hc(),code:a,codeVerifier:n})}i(Wc,"authenticate");async function KS(e,t,r){let n=Cf(),o,a=["openid","offline_access","user","incognito","seedless"],l;switch(r.type){case"key":{o={type:"key",jwt:ls(r.clientJWT)};break}case"email":{o={type:"email",provider:r.provider,existingAccessToken:r.existingAccessToken},l=r.prompt,a.push("email");break}case"session":{o={type:"session",existingAccessToken:r.existingAccessToken};break}}let g=await new xo.AuthorizationRequest({client_id:e,redirect_uri:t,scope:a.join(" "),response_type:"code"},pg).toJson(),A;switch(o.type){case"key":A=`jwt:${ot(Buffer.from(o.jwt,"utf8"))}`;break;case"email":A=`sso:${o.provider}`,o.existingAccessToken&&(A=`${A}:${o.existingAccessToken}`);break;case"session":A=`session:${o.existingAccessToken}`;break}let T={redirect_uri:g.redirect_uri,client_id:g.client_id,response_type:g.response_type,state:g.state??"",scope:g.scope,login_hint:A};l&&(T.prompt=l);let I=g.extras?.code_challenge,k=g.extras?.code_challenge_method,K=g.internal?.code_verifier;if(I&&k&&(T.code_challenge=I,T.code_challenge_method=k),!I||!k||!K)throw new Error("Missing code challenge or code verifier for PKCE.");let C=mg.stringify(T);return{url:`${n}?${C}`,codeVerifier:K}}i(KS,"createAuthorizationCodeRequest");async function gg(e){let{grantType:t,tokenEndpoint:r,clientID:n,redirectURI:o}=e,a;t==="authorization_code"?a=new xo.TokenRequest({client_id:n,redirect_uri:o,grant_type:t,code:e.code,extras:{code_verifier:e.codeVerifier}}):a=new xo.TokenRequest({client_id:n,redirect_uri:o,grant_type:t,refresh_token:e.refreshToken});let l=await dt.headers({"Content-Type":"application/x-www-form-urlencoded"},{mergeHeaders:!1}).auth(j0()).noBearer().post(r,mg.stringify(a.toStringMap()));CS(l,t);let d=vf.safeParse(l.data);if(!d.success)throw new Error("Invalid OAuth2Token response.");let{data:g}=d,A=await bo();return{idToken:g.id_token,accessToken:g.access_token,refreshToken:g.refresh_token,scope:g.scope,tokenType:g.token_type,expiresAt:(A+g.expires_in)*1e3}}i(gg,"performTokenRequest");async function $c(e,t){return await gg({clientID:e.getClientID(),redirectURI:e.redirectURL,grantType:"refresh_token",tokenEndpoint:Hc(),refreshToken:t})}i($c,"refresh");function CS(e,t){if([401,400].includes(e.status)){let r="";if(e.status===401)switch(r="Token Request Unauthorized (401): ",t){case"authorization_code":r+="Authorization code is expired or invalid.";break;case"refresh_token":r+="Refresh token is expired or invalid.";break;default:r+=`Unknown grant type [${t}]. `}if(e.status===400)switch(r="Bad Token Request (400): ",t){case"authorization_code":r="for [authorization_code]. Possible causes: 1. The authorization code is expired or invalid. 2. Redirect URI mismatch. 3. Code verifier mismatch (if using PKCE).";break;case"refresh_token":r="for [refresh_token]. Possible causes: 1. The refresh token is expired, invalid, or revoked. 2. Client ID mismatch. 3. Missing or malformed refresh token in the request.";break;default:r=`for unknown grant type [${t}]. Check the payload and OAuth provider documentation.`}throw new Error(r)}}i(CS,"handleBadRequest");h();p();h();p();h();p();var ya=class{static{i(this,"BaseEventEmitter")}subscribers={};subscribe(t,r){return this.subscribers[t]||(this.subscribers[t]=[]),this.subscribers[t].push(r),()=>{this.subscribers[t].splice(this.subscribers[t].indexOf(r),1)}}emitEvent(t,...r){(this.subscribers[t]??[]).forEach(o=>o(...r))}};var Gc=class extends ya{static{i(this,"AuthEventEmitter")}emit(t){t&&(this.emitEvent(ui.User,t),this.emitEvent(ui.UserID,t.userID),this.emitEvent(ui.AccessToken,t.accessToken),t.email&&this.emitEvent(ui.Email,t.email))}emitLoggedOut(){this.emitEvent(ui.LoggedOut)}};h();p();h();p();function fi(e,t="expected value not found"){if(e==null)throw new Error(t);return e}i(fi,"expect");function yg(e,t="expected value not found"){if(!e)throw new Error(t)}i(yg,"assert");var Zc=i(async(e,t)=>{let r=Or(),n=fi(e.signer,"Signer is required for key-based auth."),o=await n.getAuthenticationPublicKey(t),a=await us(e.isServerTimeEnabled()),l=await n.sign(a,t),d=await dt.noBearer().get(`${r}${wo}`,{params:{token:ls(l)}});if(!es(d))throw new Error(`Failed to get authentication keys: response is not okay (status ${d.status})`);let g=d.data;return(Oc.parse(g).authenticationKeys??[]).some(T=>T.publicKey===o)},"isExistingAuthFactor");h();p();h();p();var vg=i(async e=>{try{let t=await dt.headers({"Content-Type":"application/x-www-form-urlencoded"},{mergeHeaders:!1}).bearer(e).get(`${Or()}/userinfo`);return es(t)}catch{return!1}},"isValidToken");h();p();h();p();var va=".phantom.auth",Jc=`${va}.tokens`,Yc=`${va}.tokens.staging`,ba=`${va}.custom-environments`,bg=`${va}.authentication-factors`,RS=`${va}.email-provider`;async function Qc(e){let t=rr();return t===Pt.Production?await e.get(Jc):t===Pt.Staging?await e.get(Yc):(await e.get(ba))?.[t]??null}i(Qc,"getAuthTokens");async function ms(e,t){let r=rr();r===Pt.Production?await e.set(Jc,t):r===Pt.Staging?await e.set(Yc,t):await e.update(ba,n=>({...n,[r]:t}))}i(ms,"setAuthTokens");async function wg(e){let t=rr();if(t===Pt.Production)await e.remove(Jc);else if(t===Pt.Staging)await e.remove(Yc);else{let r=!1;await e.update(ba,n=>{if(!n||!(t in n))return n??null;let o={...n};return delete o[t],Object.keys(o).length===0&&(r=!0),o}),r&&await e.remove(ba)}}i(wg,"clearAuthTokens");h();p();var Ao=i(e=>{let t=e.idToken.split(".");if(t.length!==3)throw new Error("Malformed ID token. Expected 3 period-delimited parts to ID token.");let r;try{let n=ir(t[1]).toString("utf-8"),o=JSON.parse(n);r=Gm.parse(o)}catch{throw new Error("Unable to parse ID token payload.")}return{accessToken:e.accessToken,userID:r.sub,email:r.email}},"authTokensToUser");h();p();var xg="@phantom/auth",gr={user:["auth",`${xg}:user`],authFactors:["auth",`${xg}:user-auth-factors`]};h();p();var Xc=i(async(e,t,r)=>{let{storage:n,authConfig:o}=e,a,{type:l}=r;switch(l){case"key":{let g=fi(e.signer,"Signer is required for key-based auth."),A=await us(e.isServerTimeEnabled()),T=await g.sign(A,r.secretIdentifier);a=await Wc(o,{type:l,clientJWT:T});break}case"email":{a=await Wc(o,{type:l,prompt:r.prompt,provider:r.provider});break}case"session":{a=await Wc(o,{type:l,existingAccessToken:r.accessToken});break}}Z.addBreadcrumb(G.Auth,"\u2705 Login succeeded!",ee.Debug),await ms(n,a);let d=Ao(a);return await e.queryClient.setQueryData(gr.user,d),t.emit(d),d},"logIn");var Ag={queryKey:gr.user,gcTime:pf,staleTime:Ki({minutes:5})},gs=i(async(e,t,r)=>{let n=r?.skipAutoLogin??!1;return await e.queryClient.fetchQuery({...Ag,queryFn:i(()=>Eg(e,t,n),"queryFn")})},"getUser"),Sg=i((e,t)=>or({...Ag,queryFn:i(async()=>{let r=await Eg(e,t,!1);if(!r)throw new Error("Unable to log in.");return r},"queryFn"),retryOnMount:!1}),"useUser"),Eg=i(async(e,t,r)=>e.runExclusive(async()=>{let n=await NS(e);if(n)return t.emit(n),n;if(r||!e.signer)return null;let o=await US(e,t);return t.emit(o),o}),"queryFn");async function NS({storage:e,authConfig:t,isLocalTokenValidityCheckEnabled:r,isServerTimeEnabled:n}){let o=await Qc(e);if(!o)return null;let a=n()?await bo():Math.floor(Date.now()/1e3),l=Math.floor(o.expiresAt/1e3),d=(hf-pf)/1e3,g=l-d,A=a<g;if(A&&!r()&&(A=await vg(o.accessToken)),A)return Z.addBreadcrumb(G.Auth,`\u267B\uFE0F Access token still valid => Expires at ${o.expiresAt}`,ee.Debug),Ao(o);if(o.refreshToken)try{let T=await $c(t,o.refreshToken);return Z.addBreadcrumb(G.Auth,`\u2705 Refreshed auth token => Expires at ${T.expiresAt}`,ee.Debug),await ms(e,T),Ao(T)}catch(T){return Z.addBreadcrumb("Error refreshing auth token.",G.Auth,ee.Error),Z.captureError(T,G.Auth),null}return null}i(NS,"getOrRefreshUser");async function US(e,t){let n=await fi(e.signer,"Unable to log in with key-based auth. Signer is not available.").getAllSecretIdentifiers();if(n.length===0)return Z.addBreadcrumb(G.Auth,"Unable to log in with key-based auth. Vault is not yet onboarded or has no secrets that can perform key-based auth.",ee.Info),null;let o;try{for(let a of n)if(await Zc(e,a)){o=a;break}}catch(a){throw Z.addBreadcrumb(G.Auth,"Unable to log in with key-based auth. Error checking auth factors.",ee.Error),a}o||(o=n[0],Z.addBreadcrumb(G.Auth,"No auth factor found, creating new user with first secret identifier.",ee.Debug));try{return await Xc(e,t,{type:"key",secretIdentifier:o})}catch(a){throw Z.addBreadcrumb(G.Auth,"Unable to log in with key-based auth. Error performing auth.",ee.Error),a}}i(US,"autoLoginWithKeyBasedAuth");h();p();var Rf=i(async e=>{await e.removeQueries({queryKey:gr.user})},"removeUser"),Nf=i(async e=>{await e.resetQueries({queryKey:gr.user})},"resetUser"),So=i(async e=>{await e.invalidateQueries({queryKey:gr.user})},"invalidateUser"),di=i(async e=>{await e.invalidateQueries({queryKey:gr.authFactors})},"invalidateUserAuthFactors");var DS=i(e=>{let t=new Gc,r={getUser:i(n=>gs(e,t,n),"getUser"),useUser:i(()=>Sg(e,t),"useUser"),refreshTokens:i(()=>VS(e),"refreshTokens"),logIn:i(n=>Xc(e,t,n),"logIn"),isExistingAuthFactor:i(n=>Zc(e,n),"isExistingAuthFactor"),getAuthenticationKeys:i(()=>LS(e,t),"getAuthenticationKeys"),getLocalAuthenticationPublicKeys:i(()=>jS(e),"getLocalAuthenticationPublicKeys"),addAuthFactor:i(n=>zS(e,t,n),"addAuthFactor"),deleteAuthFactor:i(n=>qS(e,t,n),"deleteAuthFactor"),deleteAllAuthFactors:i(()=>HS(e,t),"deleteAllAuthFactors"),subscribe:i((n,o)=>t.subscribe(n,o),"subscribe"),logOut:i(()=>WS(e,t),"logOut")};return z0(async(n={})=>{let{refresh:o=!1,skipAutoLogin:a=!1}=n;return o&&await So(e.queryClient),(await r.getUser({skipAutoLogin:a}))?.accessToken??null}),r},"createAuthRepository"),VS=i(async e=>{let t=await Qc(e.storage);if(!t)return!1;let r=await $c(e.authConfig,t.refreshToken);return await ms(e.storage,r),await e.queryClient.setQueryData(gr.user,Ao(r)),!0},"refreshTokens"),LS=i(async(e,t)=>({authenticationPublicKeys:(await FS(e,t)).map(n=>n.publicKey)}),"getAuthenticationKeys"),FS=i(async(e,t)=>{let r=Or(),n=await gs(e,t);if(!n)throw new Error("User not authenticated.");let{data:o}=await dt.bearer(n.accessToken).get(`${r}${wo}`),a=Oc.safeParse(o);if(!a.success)throw new Error("Unable to parse auth factors response.");return a.data.authenticationKeys??[]},"getAuthenticationKeysInternal"),jS=i(async e=>{try{let t=fi(e.signer,"Signer is required for key-based auth."),r=await t.getAllSecretIdentifiers(),n={};for(let o of r)n[o]=await t.getAuthenticationPublicKey(o);return n}catch{return{}}},"getLocalAuthenticationPublicKeys"),zS=i(async(e,t,{secretIdentifier:r})=>{let n=Or(),o=fi(e.signer,"Signer is required for key-based auth."),a=await gs(e,t);if(!a)throw new Error("User not authenticated.");Z.addBreadcrumb(G.Auth,`Adding auth factor: ${r}`,ee.Info);let l=await us(e.isServerTimeEnabled()),d=await o.sign(l,r);await dt.bearer(a.accessToken).post(`${n}${wo}`,{jwt:ls(d)})},"addAuthFactor"),qS=i(async(e,t,{authenticationPublicKey:r})=>{let n=Or(),o=await gs(e,t);if(!o)throw new Error("User not authenticated.");Z.addBreadcrumb(G.Auth,`Deleting auth factor: ${r}`,ee.Info),await dt.bearer(o.accessToken).delete(`${n}${wo}/${encodeURIComponent(r)}`)},"deleteAuthFactor"),HS=i(async(e,t)=>{let r=Or(),n=e.storage,o=await gs(e,t);if(!o)throw new Error("User not authenticated.");Z.addBreadcrumb(G.Auth,"Deleting all auth factors",ee.Info),await dt.bearer(o.accessToken).delete(`${r}${wo}`),await n.remove(bg)},"deleteAllAuthFactors"),WS=i(async({storage:e},t)=>{await wg(e),t.emitLoggedOut()},"logOut");h();p();var $S=i((e,t)=>{let r=new URL(t);if(!r.toString().startsWith(e))throw new Error("Unexpected redirectURL. RedirectURL from auth flow must match local redirect URL.");let n=r.searchParams.get("code");if(!n)throw new Error("No authorization code");return n},"parseAuthCode");h();p();var GS=i((e,t)=>{let r=new URL(t);if(!r.toString().startsWith(e))throw new Error("Unexpected redirectURL. RedirectURL from auth flow must match local redirect URL.");let n=r.searchParams.get("error"),o=r.searchParams.get("error_description");if(n)throw new Error(`${n}: ${o}`,{cause:n});return!1},"redirectHasErrorParam");h();p();var ZS=i(()=>rr()===Pt.Production?Bc.prod:Bc.staging,"getAuthClientID");h();p();var JS=i(()=>{let e=Pr(),{data:t}=vo(),r=gr.authFactors;return or({queryKey:r,queryFn:i(async()=>{let o=await e.getLocalAuthenticationPublicKeys();if(Object.keys(o).length===0)return{};let a=[];try{if(t){let{authenticationPublicKeys:d=[]}=await e.getAuthenticationKeys();a=d}}catch(d){t&&d instanceof Error&&Z.addBreadcrumb(G.Auth,`Unable to fetch existing AuthFactors for user (${t?.userID}): ${d.message}`,ee.Error)}let l={};for(let[d,g]of Object.entries(o)){let A=a.includes(g);!A&&await e.isExistingAuthFactor(d)||(l[d]={authenticationPublicKey:g,isExistingAuthFactor:A})}return t&&Object.keys(l).length===0&&Z.addBreadcrumb(G.Auth,`Unable to build AuthFactors map: 
- user: ${t?.userID}
- locally available auth factors: ${Object.keys(o).length}
- auth factors registered with user: ${a.length}`,ee.Error),l},"queryFn"),retryOnMount:!1})},"useEligibleAuthFactors");h();p();h();p();var wa=i(()=>{let{data:e}=vo();return!!e},"useIsLoggedIn");function YS(e,t){let r=wa(),n;return e.enabled===void 0?n=r:typeof e.enabled=="function"?n=i(o=>(yg(typeof e.enabled=="function","expected enabled to be a function"),r&&e.enabled(o)),"enabled"):typeof e.enabled=="boolean"?n=r&&e.enabled:xe(e.enabled),or({...e,enabled:n},t)}i(YS,"useAuthQuery");h();p();var QS=i(()=>{let e=Ct(),t=Pr(),r=i(async({secretIdentifier:n})=>{await t.addAuthFactor({secretIdentifier:n}),await di(e)},"mutationFn");return Qe({mutationFn:i(async n=>{try{return await r(n)}catch(o){Z.addBreadcrumb(G.Auth,`Could not add auth factor: ${n.secretIdentifier}`,ee.Error);let a;throw o instanceof Error?a=o:a=new Error(`Could not add auth factor: ${n.secretIdentifier}`),Z.captureError(a,G.Auth),a}},"mutationFn")})},"useAddAuthFactor");h();p();var XS=i(()=>{let e=Ct(),t=Pr(),r=i(async({authenticationPublicKey:n})=>{await t.deleteAuthFactor({authenticationPublicKey:n}),await di(e)},"mutationFn");return Qe({mutationFn:i(async n=>{try{return await r(n)}catch(o){Z.addBreadcrumb(G.Auth,"Could not remove auth factor!",ee.Error);let a;throw o instanceof Error?a=o:a=new Error("Could not remove auth factor!"),Z.captureError(a,G.Auth),a}},"mutationFn")})},"useRemoveAuthFactor");h();p();var e2=i(()=>{let{data:e}=vo();return e?.accessToken},"useAccessToken");h();p();var t2=ue(At());h();p();var Uf=class{static{i(this,"AccountAnalytics")}#e;#t;#r;constructor(t,r,n){this.#e=t,this.#t=r,this.#r=n}identifyAccount=i(async(t,r,n)=>{let o=!!r.addresses.find(C=>pe.isSolanaNetworkID(C.networkID)),a=!!r.addresses.find(C=>pe.isEthereumNetworkID(C.networkID)),l=!!r.addresses.find(C=>pe.isBitcoinNetworkID(C.networkID)),d=!!r.addresses.find(C=>pe.isSuiNetworkID(C.networkID)),g={hasSolanaAddress:o,hasEthereumAddress:a,hasBitcoinAddress:l,hasSuiAddress:d},A=n.enabledChainIDs.map(C=>pe[C].name).join(", "),T=new Set;for(let C of t)switch(C.type){case P.Seed:case P.Seedless:T.add(C.seedIdentifier);break;case P.ReadOnly:case P.PrivateKey:case P.Ledger:case P.SeedVault:case P.KMSVault:break;default:xe(C);break}let{id:I,type:k}=await this.getIdentifyID(r),K=await this.getUsername();switch(r.type){case P.Seed:case P.Seedless:this.#e.identify(I,{...g,accountType:r.type,rootID:r.seedIdentifier,rootIds:Array.from(T),accountID:r.identifier,isReadOnly:!1,enabledChains:A,idType:k,username:K});break;case P.ReadOnly:this.#e.identify(I,{...g,accountType:r.type,isReadOnly:!0,enabledChains:A,idType:k,username:K});break;case P.PrivateKey:case P.Ledger:case P.SeedVault:case P.KMSVault:this.#e.identify(I,{...g,accountType:r.type,rootIds:Array.from(T),accountID:r.identifier,isReadOnly:!1,enabledChains:A,idType:k,username:K});break;default:xe(r)}},"identifyAccount");getIdentifyID=i(async t=>{let r=await this.#t.getUser().catch(()=>{});return r?{type:"userID",id:r.userID}:{type:"accountID",id:t.identifier}},"getIdentifyID");getUsername=i(async()=>{let t=await this.#r.getUserProfile().catch(()=>{});if(t)return t.username},"getUsername");onAppSessionStart=i(t=>{let r=new Map;for(let n of t){if(n.type===P.ReadOnly)continue;let{addresses:o,identifier:a}=n;for(let l of o){let d=pe.getChainName(l.networkID),g={type:n.type,accountId:a,id:l.address};if(!r.get(d))r.set(d,[g]);else{let A=r.get(d)??[];r.set(d,[...A,g])}}}this.#e.capture("appSessionStart",{data:{ids:Object.fromEntries(r)}})},"onAppSessionStart")};var Df=wm(null);h();p();h();p();var SC=f.string().regex(/^(root-derivation-path-group|(recommended|secondary|tertiary)-group:index-[0-9]+)$/,{message:"Invalid derivation path group."}),Vf;(function(e){e.UnableToCreateBip39Dependency="Unable to create bip39 dependency",e.FailedToFetchBip39Mnemonic="Failed to fetch bip39 mn*monic from storage",e.FailedToParseBip39Mnemonic="Failed to parse bip39 mn*monic as JSON object",e.FailedToDecryptBip39Mnemonic="Failed to decrypt bip39 mn*monic",e.FailedToConstructBip39Entropy="Failed to construct bip39 mn*monic from entropy",e.FailedToFetchDeprecatedMnemonic="Failed to fetch deprecated mn*monic from storage",e.FailedToParseDeprecatedMnemonic="Failed to parse deprecated mn*monic as JSON object",e.FailedToDecryptDeprecatedMnemonic="Failed to decrypt deprecated mn*monic",e.FailedToParseRawDeprecatedMnemonic="Failed to parse deprecated mn*monic from raw JSON",e.FailedToCreateDeprecatedMnemonicString="Failed to create deprecated m*monic from a string",e.FailedToCreateDeprecatedMnemonicStringArray="Failed to create deprecated mn*monic from a string array",e.FailedToCreateDeprecatedMnemonicObjectUint8Array="Failed to create deprecated mn*monic from an object or uint8array",e.FailedToFetchAccountMetas="Failed to fetch account metas from storage",e.NoSeed="No legacy se*d available"})(Vf||(Vf={}));var Lf;(function(e){e.InvalidChecksum="Se*d has invalid checksum",e.InvalidEntropy="Se*d has invalid entropy",e.LessThan12Words="Se*d has less than twelve words",e.InvalidWordCount="Se*d has invalid world count",e.InvalidWords="Se*d has invalid words",e.InternalError="Unknown error fetching se*d"})(Lf||(Lf={}));var Ff;(function(e){e.PrivateKey="privateKey",e.Mnemonic="mnemonic",e.Seedless="seedless"})(Ff||(Ff={}));h();p();var r2=i((e,t,r,n)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(n.includes(l))for(let d of pe[l].addressTypes){if(!r.includes(d))continue;let g=e.chains[d];if(g)switch(g.chainType){case _.EVM:case _.Solana:{o.push({networkID:a,addressType:d,address:g.address});break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{o.push({networkID:a,addressType:d,publicKey:g.publicKey,address:g.addresses[a]});break}case _.Sui:{o.push({networkID:a,addressType:d,publicKey:g.publicKey,address:g.address});break}default:xe(g)}}}return o},"getSeedAccountAddresses"),n2=i((e,t,r,n)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(n.includes(l))for(let d of pe[l].addressTypes){if(!r.includes(d))continue;let g=e.chains[d];if(g)switch(g.chainType){case _.EVM:case _.Solana:{o.push({networkID:a,addressType:d,address:g.address});break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{o.push({networkID:a,addressType:d,publicKey:g.publicKey,address:g.addresses[a]});break}case _.Sui:{o.push({networkID:a,addressType:d,publicKey:g.publicKey,address:g.address});break}default:xe(g)}}}return o},"getLedgerAccountAddresses"),i2=i((e,t,r,n)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(n.includes(l))for(let d of pe[l].addressTypes)r.includes(d)&&e.chainType===d&&o.push({networkID:a,addressType:d,address:e.address})}return o},"getSolanaSeedVaultAccountAddresses"),o2=i((e,t,r,n)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(n.includes(l))for(let d of pe[l].addressTypes){if(!r.includes(d))continue;let g=e.chains[d];if(g)switch(g.chainType){case _.EVM:case _.Solana:{o.push({networkID:a,addressType:d,address:g.address});break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{o.push({networkID:a,addressType:d,publicKey:g.publicKey,address:g.addresses[a]});break}case _.Sui:{o.push({networkID:a,addressType:d,publicKey:g.publicKey,address:g.address});break}default:xe(g)}}}return o},"getKMSVaultAccountAddresses"),s2=i((e,t,r,n)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(n.includes(l)){for(let d of pe[l].addressTypes)if(r.includes(d)&&e.chainType===d)switch(e.chainType){case _.EVM:case _.Solana:{o.push({networkID:a,addressType:d,address:e.address});break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{o.push({networkID:a,addressType:d,publicKey:e.publicKey,address:e.addresses[a]});break}case _.Sui:{o.push({networkID:a,addressType:d,publicKey:e.publicKey,address:e.address});break}default:xe(e)}}}return o},"getPrivateKeyAccountAddresses"),a2=i((e,t,r,n)=>{let o=[];for(let a of t){let l=pe.getChainID(a);if(n.includes(l)){for(let d of pe[l].addressTypes)if(r.includes(d))for(let[g,A]of Object.entries(e.addresses))g===d&&o.push({networkID:a,addressType:d,address:A})}}return o},"getReadOnlyAccountAddresses"),eu=i((e,t,r,n,o,a)=>{let l;switch(a?l=Object.values(o.setting):l=t,l=l.sort((d,g)=>pe.compareNetworkID(d,g)),e.type){case P.Seedless:case P.Seed:return r2(e,l,r,n);case P.Ledger:return n2(e,l,r,n);case P.SeedVault:return i2(e,l,r,n);case P.KMSVault:return o2(e,l,r,n);case P.PrivateKey:return s2(e,l,r,n);case P.ReadOnly:return a2(e,l,r,n)}},"convertVaultAccountToChainAddresses");h();p();var Mg=ue(nn());var jf=i(()=>({addresses:new Set,publicKeys:new Set}),"createEmptyIdentifiers"),ys=i((e,t)=>{t&&(t instanceof Uint8Array?e.publicKeys.add(Mg.Buffer.from(t).toString("base64")):typeof t=="string"&&e.publicKeys.add(t))},"addPublicKey"),c2=i((e,t)=>{if(!e||typeof e!="object")return;let r=e,{chainType:n}=r;if(n)switch(n){case _.Solana:case _.EVM:{let o=r,a;typeof o.address=="string"?a=o.address:typeof o.publicKey=="string"&&(a=o.publicKey),a&&t.addresses.add(a);break}case _.Sui:{let o=r.address;typeof o=="string"&&t.addresses.add(o),ys(t,r.publicKey);break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let o=r.addresses??{};Object.values(o).forEach(a=>{a&&t.addresses.add(a)}),ys(t,r.publicKey);break}default:break}},"addChainAddressToSnapshot"),Tg=i((e,t)=>{t.addresses.forEach(r=>e.addresses.add(r)),t.publicKeys.forEach(r=>e.publicKeys.add(r))},"mergeSnapshots"),tu=i(e=>{let t=jf();return e&&Object.values(e).forEach(r=>{c2(r,t)}),t},"collectIdentifiersFromChains"),Ig=i(e=>{let t=jf();switch(e.type){case P.Seed:case P.Seedless:case P.Ledger:case P.KMSVault:{Tg(t,tu(e.chains));break}case P.PrivateKey:{"addresses"in e?(Object.values(e.addresses??{}).forEach(r=>{r&&t.addresses.add(r)}),ys(t,e.publicKey)):"address"in e&&"publicKey"in e&&e.chainType===_.Sui?(t.addresses.add(e.address),ys(t,e.publicKey)):"address"in e&&t.addresses.add(e.address);break}case P.SeedVault:{t.addresses.add(e.address);break}case P.ReadOnly:{Object.values(e.addresses).forEach(r=>{r&&t.addresses.add(r)});break}}return t},"collectIdentifiersFromVaultAccount"),zf=i(e=>{let t=jf();switch(e.type){case P.Seed:case P.Seedless:case P.Ledger:case P.KMSVault:{Tg(t,tu(e.chains));break}case P.PrivateKey:{switch(e.chainType){case _.Solana:case _.EVM:{t.addresses.add(e.publicKey);break}case _.Sui:{t.addresses.add(e.address),ys(t,e.publicKey);break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{Object.values(e.addresses??{}).forEach(r=>{r&&t.addresses.add(r)}),ys(t,e.publicKey);break}}break}case P.SeedVault:{t.addresses.add(e.publicKey);break}case P.ReadOnly:{Object.values(e.addresses).forEach(r=>{r&&t.addresses.add(r)});break}}return t},"collectIdentifiersFromVaultStorageAccount");h();p();var u2=i(({index:e,offsetIndex:t})=>({name:xn.t("onboardingImportAccountsAccountName",{walletIndex:t+e+1})}),"createAccountMetadata");h();p();var qf=i(e=>{switch(e){case X.BitcoinTaproot:case X.BitcoinNativeSegwit:case X.BitcoinNestedSegwit:case X.BitcoinLegacy:case X.Bip44ChangeSolana:case X.Bip44Ethereum:return!0;case X.Bip44Solana:case X.DeprecatedSolana:case X.Bip44RootSolana:case X.Bip44RootEthereum:case X.Bip44EthereumSecondary:case X.Bip44EthereumTertiary:case X.Bip44Sui:return!1}},"isRecommendedDerivationPathType");h();p();var l2=i(({pathType:e,index:t})=>{switch(e){case X.Bip44RootEthereum:case X.Bip44RootSolana:return"root-derivation-path-group";case X.Bip44ChangeSolana:case X.Bip44Ethereum:case X.Bip44Sui:case X.BitcoinTaproot:case X.BitcoinNativeSegwit:case X.BitcoinNestedSegwit:case X.BitcoinLegacy:return`recommended-group:index-${t}`;case X.Bip44EthereumSecondary:case X.Bip44Solana:return`secondary-group:index-${t}`;case X.Bip44EthereumTertiary:case X.DeprecatedSolana:return`tertiary-group:index-${t}`}},"getDerivationPathGroupKey");h();p();var f2=i(e=>e==null?!1:[P.Ledger,P.SeedVault].includes(e),"isHardwareWalletAccountType");h();p();h();p();var _g="Trying to find a selected account, but there no accounts in the vault.",d2="Missing ChainAvailability.",kg=i((e,t)=>`No account found! Num accounts: ${e} | Identifier used: ${t}`,"NoAccountFoundFromIdentifierErrorMsg"),Hf=new Error("The current account group has no valid bitcoin address"),Wf=new Error("The current account group has no valid EIP-155 address"),$f=new Error("The current account group has no valid solana address"),Gf=new Error("The current account group has no valid sui address"),Pg=new Error("The current account group has no valid address or the the chain type was unsupported"),c5=new Error("[Legacy Mn*monic Fetch] no legacy mn*monic in storage"),u5=new Error("[Legacy Mn*monic Fetch] internal error fetching legacy mn*monic");function Bg(e,t){let n=(e?.addresses??[]).find(({addressType:o})=>o===t);if(!e?.addresses||!n)switch(t){case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:throw Hf;case _.EVM:throw Wf;case _.Solana:throw $f;case _.Sui:throw Gf;default:throw Pg}return n}i(Bg,"getChainAddressByAccount");function h2(e,t){return Bg(e,t)?.address}i(h2,"getAddressByAccount");function p2(e){switch(e.type){case P.Seed:case P.Seedless:case P.Ledger:return e.chains?Object.entries(e.chains).map(([t,r])=>({addressType:t,address:"address"in r?r.address:Object.values(r.addresses)[0]})):[];case P.PrivateKey:return e.chainType===_.BitcoinTaproot||e.chainType===_.BitcoinNativeSegwit||e.chainType===_.BitcoinNestedSegwit||e.chainType===_.BitcoinLegacy?Object.entries(e.addresses).map(([t,r])=>({addressType:e.chainType,address:r})):[{addressType:e.chainType,address:"address"in e?e.address:""}];case P.ReadOnly:return Object.entries(e.addresses).map(([t,r])=>({addressType:t,address:r||""}));case P.SeedVault:return[{addressType:"solana",address:e.address}];default:return[]}}i(p2,"getAddressesFromAccount");function hi(e){return e?p2(e).filter(r=>r.address):[]}i(hi,"getWalletAddressesFromAccount");h();p();var m2=i(e=>{let t=e.toString();return ha(t)},"formatAddressValue");h();p();function g2(e){let t=e.endsWith(".sol"),r=e==="@",n=e.startsWith("@")&&e.length>1;return[t,r,n]}i(g2,"parseBonfidaHandle");h();p();function y2(e){return[e.endsWith(".eth")]}i(y2,"parseENSHandle");h();p();var v2=i(async(e,t,r)=>{let o=(await e.fetchAllAccounts()).find(l=>{switch(l.type){case P.Seed:case P.Seedless:return l.seedIdentifier===r;case P.PrivateKey:return l.privateKeyIdentifier===r;case P.Ledger:case P.SeedVault:case P.ReadOnly:case P.KMSVault:return!1;default:xe(l)}});if(!o)throw new Error("Unable to find account to sign client JWT with.");let a=await e.sign(o.identifier,{isJWT:!0,data:t});if(a.status==="error")throw new Error("Error signing over clientJWT.");if(!("signedJWT"in a)||!a.signedJWT)throw new Error("No JWT from vault signing.");return a.signedJWT},"signClientJWT");h();p();h();p();h();p();h();p();var Rt="vault";function Eo(e,t=Rt){return`kms:${e}:${t}`}i(Eo,"getKMSVaultIdentifier");h();p();function b2(e){switch(e.chainType){case _.Solana:case _.EVM:case _.Sui:case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return;default:xe(e)}}i(b2,"assertSupportedKMSChain");function Zf(e){switch(b2(e),e.chainType){case _.Solana:case _.EVM:return{chainType:e.chainType,publicKey:e.address,pathType:e.pathType};case _.Sui:return{chainType:e.chainType,publicKey:e.publicKey,address:e.address,pathType:e.pathType};case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let{addresses:t,...r}=e;return{...r,addresses:{...t}}}default:return xe(e)}}i(Zf,"buildVaultStorageKMSChainAddress");function Og(e){let t={};for(let[,r]of Object.entries(e)){let n=Zf(r);t[r.chainType]=n}return t}i(Og,"buildVaultStorageKMSChainAddresses");h();p();h();p();h();p();function Jf(e,t){return e in t}i(Jf,"hasKey");var xa=ue(lA());function w2(e){return e=(0,xa.default)(e),e.accounts.forEach(t=>{switch(t.type){case P.PrivateKey:{switch(t.chainType){case _.EVM:case _.Solana:break;case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:case _.Sui:{Mo(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}default:xe(t)}break}case P.ReadOnly:break;case P.Ledger:case P.Seedless:case P.Seed:case P.KMSVault:for(let r of Object.keys(t.chains)){let n=t.chains[r];if(n)switch(n.chainType){case _.EVM:case _.Solana:break;case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:case _.Sui:{Mo(n.publicKey)&&(n.publicKey=new Uint8Array(Buffer.from(n.publicKey)));break}default:xe(n)}}break;case P.SeedVault:break;default:xe(t)}}),e}i(w2,"deserializeVaultAccount");function x2(e){return e=(0,xa.default)(e),e.accounts.forEach(t=>{switch(t.type){case P.PrivateKey:{switch(t.chainType){case _.EVM:case _.Solana:break;case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:case _.Sui:{t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}default:xe(t)}break}case P.ReadOnly:break;case P.Ledger:case P.Seedless:case P.Seed:case P.KMSVault:for(let r of Object.keys(t.chains)){let n=t.chains[r];if(n)switch(n.chainType){case _.EVM:case _.Solana:break;case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:case _.Sui:{n.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(n.publicKey).toJSON());break}default:xe(n)}}break;case P.SeedVault:break;default:xe(t)}}),e}i(x2,"serializeVaultAccount");function Kg(e){return e=(0,xa.default)(e),e.accounts.forEach(t=>{switch(t.type){case P.PrivateKey:{t.version===1&&Mo(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}case P.ReadOnly:break;case P.KMSVault:case P.Ledger:case P.Seed:case P.Seedless:for(let r of Object.keys(t.chains))if(t.version===1&&Mo(t.chains[r]?.publicKey)){let n=t.chains[r];n&&(n.publicKey=new Uint8Array(Buffer.from(n.publicKey)))}break;case P.SeedVault:break;default:xe(t)}}),e}i(Kg,"deserializeVaultStorageAccount");function Cg(e){return e=(0,xa.default)(e),e.accounts.forEach(t=>{switch(t.type){case P.PrivateKey:{t.version===1&&t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}case P.ReadOnly:break;case P.KMSVault:case P.Ledger:case P.Seed:case P.Seedless:for(let r of Object.keys(t.chains))t.version===1&&t.chains[r]?.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(t.chains[r]?.publicKey).toJSON());break;case P.SeedVault:break;default:xe(t)}}),e}i(Cg,"serializeVaultStorageAccount");function Mo(e){return!!e&&typeof e=="object"&&Jf("type",e)&&typeof e.type=="string"&&Jf("data",e)&&Array.isArray(e.data)&&e.data.every(t=>!Number.isNaN(parseInt(t)))}i(Mo,"isSerializedBuffer");h();p();var yr=".phantom-labs.vault";var vs=`${yr}.accounts`,pi=`${yr}.secrets`,nu=i(e=>`${yr}.privateKey.${e}`,"privateKeyStorageKey"),iu=i(e=>`${yr}.seed.${e}`,"seedStorageKey"),ou=i(e=>`${yr}.seedless.${e}`,"seedlessStorageKey"),ru=`${yr}.integrityCheck`,ct=Xe(function*(){return(yield jg())?.accounts??[]}),su=Xe(function*(){let e=yield cn(),t=new Set(e.seedIdentifiers),r=yield ct();for(let o of r)o.type===P.Seed&&t.add(o.seedIdentifier);let n=[];for(let o of t)n.push({identifier:o});return n}),au=Xe(function*(){let e=yield cn(),t=new Set(e.seedlessIdentifiers),r=yield ct();for(let o of r)o.type===P.Seedless&&t.add(o.seedIdentifier);let n=[];for(let o of t)n.push({identifier:o});return n}),cn=Xe(function*(){let e=zg(pi);return{privateKeyIdentifiers:e?.privateKeyIdentifiers??[],seedIdentifiers:e?.seedIdentifiers??[],seedlessIdentifiers:e?.seedlessIdentifiers??[]}});async function Ug(e,t){let r=iu(t),n=await e.secretsStorage.getSecureValue(r);if(n===null){let o=ou(t);n=await e.secretsStorage.getSecureValue(o)}if(n==null)throw new ci;return Mo(n.entropy)?n.entropy=new Uint8Array(Buffer.from(n.entropy)):n.entropy=new Uint8Array(Object.values(n.entropy)),n}i(Ug,"fetchEntropy");async function Li(e,t){let r=nu(t),n=await e.secretsStorage.getSecureValue(r);if(n==null)throw new yo;return Mo(n.privateKey)?n.privateKey=new Uint8Array(Buffer.from(n.privateKey)):n.privateKey=new Uint8Array(Object.values(n.privateKey)),n}i(Li,"fetchPrivateKey");async function Nt(e,t,r=!0){let n=await jg();if(!n)n={version:1,accounts:[t]};else{let o=n.accounts,a=S2(o,t);if(a.length>0){if(!r)throw new Sn(a[0].type,t.type);let l=Ng(t.type);for(let g of a)if(Ng(g.type)>=l)throw new Sn(g.type,t.type);let d=a.map(g=>g.identifier);return o=o.filter(g=>!d.includes(g.identifier)),o.push(t),await Tn(o),await Yf(e)}else o.push(t);n.accounts=o}return Tn(n.accounts)}i(Nt,"storeAccount");async function Tn(e){let t={version:1,accounts:e};return To(vs)(Cg(t))}i(Tn,"storeAccounts");async function Dg(e,t){let r=nu(t.identifier);await e.secretsStorage.setSecureValue(r,t),await T2(t.identifier)}i(Dg,"storePrivateKey");async function Vg(e,t){let r=iu(t.identifier);await e.secretsStorage.setSecureValue(r,t),await E2(t.identifier)}i(Vg,"storeSeed");async function Lg(e,t){let r=ou(t.identifier);await e.secretsStorage.setSecureValue(r,t),await M2(t.identifier)}i(Lg,"storeSeedlessSeed");async function Yf(e){let t=await ct(),r=new Set,n=new Set;for(let g of t)switch(g.type){case P.Seed:case P.Seedless:r.add(g.seedIdentifier);break;case P.PrivateKey:n.add(g.privateKeyIdentifier);break;case P.Ledger:case P.ReadOnly:case P.SeedVault:case P.KMSVault:break;default:xe(g)}let o=await cn(),a={seedIdentifiers:o.seedIdentifiers.filter(g=>r.has(g)),seedlessIdentifiers:o.seedlessIdentifiers.filter(g=>r.has(g)),privateKeyIdentifiers:o.privateKeyIdentifiers.filter(g=>n.has(g))},l={seedIdentifiers:o.seedIdentifiers.filter(g=>!r.has(g)),seedlessIdentifiers:o.seedlessIdentifiers.filter(g=>!r.has(g)),privateKeyIdentifiers:o.privateKeyIdentifiers.filter(g=>!n.has(g))};await e.generalStorage.set(pi,{version:1,...a}),To(pi)({version:1,...a}),await e.secretsStorage.removeSecureValue([...l.seedIdentifiers.map(g=>iu(g)),...l.seedlessIdentifiers.map(g=>ou(g)),...l.privateKeyIdentifiers.map(g=>nu(g))])}i(Yf,"removeDanglingSecrets");async function Qf(e,t){t?await e.secretsStorage.setSecureValue(ru,t):await e.secretsStorage.removeSecureValue(ru)}i(Qf,"storeIntegrityCheck");async function Xf(e){return e.secretsStorage.getSecureValue(ru)}i(Xf,"fetchIntegrityCheck");async function Fg(e){await e.secureCache.clear(),await e.generalStorage.remove(vs);let t=await cn(),r=t.privateKeyIdentifiers.map(d=>nu(d)),n=t.seedIdentifiers.map(d=>iu(d)),o=t.seedlessIdentifiers.map(d=>ou(d));await e.secretsStorage.removeSecureValue([...r,...o,...n]),await e.generalStorage.remove(pi),await e.secretsStorage.removeSecureValue(ru);let a=To(vs),l=To(pi);a(null),l(null)}i(Fg,"clearVault");var jg=Xe(function*(){let e=zg(vs);return e?(e=Kg(e),e=yield A2(e),e):null});async function A2(e){let t=!1;return e.accounts.forEach(r=>{switch(r.type){case P.PrivateKey:{t=Rg(r)||t;break}case P.ReadOnly:break;case P.Ledger:case P.Seed:case P.Seedless:Object.values(r.chains).forEach(n=>{t=Rg(n)||t});break;case P.SeedVault:case P.KMSVault:break;default:xe(r)}}),e}i(A2,"computeBitcoinAddressesIfNeeded");function Rg(e){let t=!1;switch(e.chainType){case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{Object.values(Bt).forEach(r=>{if(e.addresses&&e.addresses[r])return;let n=Kt({publicKey:e.publicKey,addressType:e.chainType,networkID:r});e.addresses={...e.addresses,[r]:n},t=!0});break}default:}return t}i(Rg,"computeBitcoinAddressesForChain");function S2(e,t){let r=zf(t),n=[];for(let o of e){let a=zf(o),l=Array.from(r.addresses).some(g=>a.addresses.has(g)),d=Array.from(r.publicKeys).some(g=>a.publicKeys.has(g));(l||d)&&n.push(o)}return n}i(S2,"existingAccountsMatchingAccount");async function E2(e){let t=await cn();return t.seedIdentifiers=[...new Set([...t.seedIdentifiers,e])],To(pi)({version:1,...t})}i(E2,"storeSecretIdentifierForSeed");async function M2(e){let t=await cn();return t.seedlessIdentifiers=[...new Set([...t.seedlessIdentifiers,e])],To(pi)({version:1,...t})}i(M2,"storeSecretIdentifierForSeedless");async function T2(e){let t=await cn();return t.privateKeyIdentifiers=[...new Set([...t.privateKeyIdentifiers,e])],To(pi)({version:1,...t})}i(T2,"storeSecretIdentifierForPrivateKey");function Ng(e){switch(e){case P.ReadOnly:return 1;case P.PrivateKey:return 2;case P.Seedless:case P.Seed:return 3;case P.Ledger:return 4;case P.SeedVault:return 5;case P.KMSVault:return 6;default:return 0}}i(Ng,"accountTypeOverridePriority");var I2=f.object({version:f.literal(1),accounts:f.array(f.any())}),_2=f.object({version:f.literal(1),seedIdentifiers:f.array(f.string()),seedlessIdentifiers:f.array(f.string()),privateKeyIdentifiers:f.array(f.string())}),[zg,To,SR]=Sc("vault",[{key:vs,type:"object",validator:I2,nullable:!0},{key:pi,type:"object",validator:_2,nullable:!0}]);async function qg(e,{organizationId:t,walletId:r,tag:n,derivationIndex:o,chains:a,apiEnvironment:l}){if(Z.addBreadcrumb(G.Account,`[addKMSVaultAccount] ENTRY: walletId=${r}`,ee.Info),n!==Rt)throw new Error(`KMS vault accounts must use tag "${Rt}", received "${n}".`);let d=Og(a),g=Eo(r,n),A={version:1,type:P.KMSVault,identifier:g,derivationIndex:o,kms:{organizationId:t,walletId:r,tag:n},chains:d,...l&&{apiEnvironment:l}};return await Nt(e,A),A}i(qg,"addKMSVaultAccount");h();p();h();p();var cu=Object.values(Bt);function Hg(e){switch(e.chainType){case _.Solana:case _.EVM:{let t=k2(e.chainType,e.address,e.publicKey);return{chainType:e.chainType,pathType:e.pathType,address:t}}case _.Sui:{let t=e.address??Kt({publicKey:e.publicKey,addressType:e.chainType});return{chainType:e.chainType,pathType:e.pathType,publicKey:e.publicKey,address:t}}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return{chainType:e.chainType,pathType:e.pathType,publicKey:e.publicKey,addresses:P2(e.chainType,e.publicKey,e.addresses)};default:return xe(e)}}i(Hg,"normalizeChainAddress");function k2(e,t,r){if(t)return t;if(r)return Kt({publicKey:r,addressType:e});throw new Error(`Expected address or publicKey for chain type ${e}`)}i(k2,"getAddressForEvmOrSolana");function P2(e,t,r){return r?B2(e,t,r):O2(e,t)}i(P2,"getBitcoinAddresses");function B2(e,t,r){let n={...r};for(let o of cu)n[o]||(n[o]=Kt({publicKey:t,addressType:e,networkID:o}));return n}i(B2,"fillMissingBitcoinAddresses");function O2(e,t){return cu.reduce((r,n)=>(r[n]=Kt({publicKey:t,addressType:e,networkID:n}),r),{})}i(O2,"deriveAllBitcoinAddresses");function Wg(e){let t=Hg(e);switch(t.chainType){case _.Solana:case _.EVM:return t;case _.Sui:return t;case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return t;default:return xe(t)}}i(Wg,"buildVaultChainAddress");function $g(e){let t=Hg(e);switch(t.chainType){case _.Solana:case _.EVM:return{chainType:t.chainType,publicKey:t.address,pathType:t.pathType};case _.Sui:return{chainType:t.chainType,publicKey:t.publicKey,address:t.address,pathType:t.pathType};case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return{chainType:t.chainType,publicKey:t.publicKey,addresses:t.addresses,pathType:t.pathType};default:return xe(t)}}i($g,"buildVaultStorageChainAddress");function K2(e,t){let r=!1,n={...e};for(let[o,a]of Object.entries(t)){let l=o,d=Zf(a),g=e[l];if(!g){n[l]=d,r=!0;continue}switch(d.chainType){case _.Solana:case _.EVM:case _.Sui:continue;case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let A=g,T=d,I=A.addresses?{...A.addresses}:{};for(let k of cu){let K=T.addresses?.[k];K&&I[k]!==K&&(I[k]=K,r=!0)}n[l]={...A,addresses:I};break}default:xe(d)}}return{merged:n,changed:r}}i(K2,"deepMergeChains");async function Gg(e,{organizationId:t,walletId:r,tag:n,derivationIndex:o,chains:a}){if(n!==Rt)throw new Error(`KMS vault accounts must use tag "${Rt}", received "${n}".`);let l=Eo(r,n),d=await ct(),g=d.findIndex(C=>C.type===P.KMSVault&&C.identifier===l);if(g===-1)throw new Error(`KMSVault account not found for identifier ${l}`);let A=d[g];if(A.kms.organizationId!==t||A.kms.walletId!==r||A.kms.tag!==n||A.derivationIndex!==o)throw new Error(`KMS vault metadata mismatch for identifier ${l} (existing data retained, incoming rejected).`);let{merged:T,changed:I}=K2(A.chains,a);if(!I)return A;let k={...A,chains:T},K=[...d];return K[g]=k,await Tn(K),k}i(Gg,"upsertKMSVaultChains");h();p();h();p();h();p();h();p();async function Zg(e){let t=new Uint8Array(Array.from("mnemonic"+(e.passphrase??"")).map(r=>r.charCodeAt(0)));return e.pbkdf2(e.mnemonic,t,2048,64,"sha512")}i(Zg,"mnemonicToSeed");h();p();var Jg=ue(nn());var C2=ue(Pi());h();p();var ed=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"],oN=new Set(ed);var R2=i((e,t,r,n,o)=>{let a;switch(o){case"rmd160":case"md5":case"sha":throw new Error(`${o} is unsupported by noble`);case"ripemd160":case"sha1":case"sha224":case"sha384":throw new Error(`${o} is supported by noble, but we don't need it for bip39`);case"sha256":a=an;break;case"sha512":a=J0;break}return ns(a,e,t,{c:r,dkLen:n})},"pbkdf2Noble"),N2=i((e,t,r)=>{for(;e.length<r;)e=t+e;return e},"lpad"),Yg=i(e=>e.map(t=>N2(t.toString(2),"0",8)).join(""),"bytesToBinary"),U2=i(e=>parseInt(e,2),"binaryToByte"),D2=i(e=>{let r=e.length*8/32,n=an(e);return Yg(Array.from(n)).slice(0,r)},"deriveChecksumBits"),mi;(function(e){e.InvalidChecksum="InvalidChecksum",e.InvalidChecksumBits="InvalidChecksumBits",e.InvalidEntropy="InvalidEntropy",e.InvalidEntropyBits="InvalidEntropyBits",e.LessThanTwelve="LessThanTwelve",e.ExactlyTwelveOrTwentyFour="ExactlyTwelveOrTwentyFour",e.MoreThanTwentyFour="MoreThanTwentyFour",e.WrongWord="WrongWord"})(mi||(mi={}));var Aa=i(async e=>{let t=ed;if(e.length<16)throw new Error(mi.LessThanTwelve);if(e.length>32)throw new Error(mi.MoreThanTwentyFour);if(e.length%4!==0)throw new Error(mi.WrongWord);let r,n;try{r=Yg(Array.from(e))}catch{throw new Error(mi.InvalidEntropyBits)}try{n=D2(e)}catch{throw new Error(mi.InvalidChecksumBits)}let a=(r+n).match(/(.{1,11})/g);if(!a)throw new Error(mi.InvalidChecksum);let l=a.map(A=>{let T=U2(A);return t[T]}),d=Jg.Buffer.from(l.join(" "));return{seed:await Zg({mnemonic:d,pbkdf2:R2}),mnemonic:d}},"entropyToSeedAndMnemonic");h();p();async function In(e,t){let r=await Ug(e,t);if(!r)throw new ci;let n=kr.from(r.entropy);return r.entropy.fill(0),n}i(In,"exportEntropy");async function Ut(e,t){let r,n=await e.secureCache.getSeed(t);if(n)r=n;else{let a=await In(e,t),{seed:l}=await a.foldAsync(Aa);r=l,await e.secureCache.setSeed(t,r)}let o=kr.from(r);return r.fill(0),o}i(Ut,"exportSeed");h();p();var td=ue(Qo());function bs(e){return e.fold(td.keccak256)}i(bs,"identifierForSeed");function Fi(e,t,r){let n=ai[r];return td.keccak256(`${e}:${t}:${n}`)}i(Fi,"identifierForSeedAccount");function _n(e,t,r,n){let o={};for(let a of n){let{publicKey:l}=e.keypairGenerator.generateKeypairFromSeed(t,r,a),d=sn.getAddressType(a),g=V2({addressType:d,derivationPathType:a,publicKey:l});o[d]=$g(g)}return o}i(_n,"storageChainAddresses");function V2({addressType:e,derivationPathType:t,publicKey:r}){switch(e){case _.Solana:case _.EVM:case _.Sui:case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return{chainType:e,pathType:t,publicKey:r};default:return xe(e)}}i(V2,"toChainAddressInput");async function Qg(e,t){let r=new Set,n=await ct();for(let a of n)a.type===P.Seed&&a.seedIdentifier===t&&ai[Object.values(a.chains)[0].pathType]===0&&r.add(a.derivationIndex);let o=0;for(let a=0;a<=r.size;a++)if(!r.has(a)){o=a;break}return Xg(e,t,o)}i(Qg,"addAccountForExistingSeed");async function Xg(e,t,r){try{return await L2(e,t,r)}catch(n){if(n instanceof Sn)return await Xg(e,t,r+1);throw n}}i(Xg,"addAccountForSeedWithDerivationIndex");async function L2(e,t,r){let n=await Ut(e,t),o=(await e.fetchChainAvailability()).enabledAddressTypes,a=Jt(o),l=await Fi(t,r,a[0]),d={version:1,type:P.Seed,identifier:l,seedIdentifier:t,derivationIndex:r,chains:_n(e,n,r,a)};return await Nt(e,d,!1),d}i(L2,"_addAccountForExistingSeed");h();p();var sy=ue(aA());var ay=ue(pm()),cy=ue(oy()),uy=ue(Qo());function W2(e,t,r){let n=ai[r];return uy.keccak256(`${e}:${t}:${n}`)}i(W2,"_identifierForLedgerAccount");async function ly(e,t,r){let n=[];for(let o of r){if(o.addresses.length===0&&o.publicKeys.length===0)throw new Error("Must have at least 1 address or public key in account to add Ledger account.");let a=o.addresses[0]?.pathType||o.publicKeys[0]?.pathType,l=W2(t,o.derivationIndex,a);ay.initEccLib(sy);let d=(0,cy.ECPairFactory)(sy),g={...o.addresses.reduce((T,I)=>{let k=sn.getAddressType(I.pathType);switch(k){case _.EVM:case _.Solana:{T[k]={chainType:k,pathType:I.pathType,publicKey:I.value};break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:throw new Error("Bitcoin accounts should be using public key not computed addresses");case _.Sui:throw new af("add ledger account");default:xe(k)}return T},{}),...o.publicKeys.reduce((T,I)=>{let k=sn.getAddressType(I.pathType);switch(k){case _.EVM:case _.Solana:throw new Error("EVM or Solana accounts should be using addreses directly, not public keys");case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let K=d.fromPublicKey(Buffer.from(I.value,"hex")),C=new Uint8Array(K.publicKey);T[k]={chainType:k,pathType:I.pathType,publicKey:C,addresses:Object.values(Bt).reduce((R,V)=>({...R,[V]:Kt({publicKey:C,addressType:k,networkID:V})}),{})};break}case _.Sui:throw new af("add ledger account");default:xe(k)}return T},{})},A={version:1,type:P.Ledger,identifier:l,ledgerGroupIdentifier:t,derivationIndex:o.derivationIndex,chains:g};n.push(A),await Nt(e,A)}return n}i(ly,"addLedgerAccounts");h();p();var fy=ue(Qo());function $2(e){return fy.keccak256(e)}i($2,"_identifierForPrivateKey");async function dy(e,t,r,n){let o=await e.keypairGenerator.generateKeypairFromPrivateKey(r,t),a=await cn(),l=$2(o.publicKey);if((a?.privateKeyIdentifiers??[]).includes(l))throw new da;let A={version:1,identifier:l,name:n,chainType:t,privateKey:Buffer.from(o.privateKey)},T=l,I;switch(t){case _.EVM:case _.Solana:{I={version:1,type:P.PrivateKey,identifier:T,privateKeyIdentifier:l,publicKey:Kt({publicKey:o.publicKey,addressType:t}),chainType:t};break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{I={version:1,type:P.PrivateKey,identifier:T,privateKeyIdentifier:l,publicKey:o.publicKey,addresses:Object.values(Bt).reduce((k,K)=>({...k,[K]:Kt({publicKey:o.publicKey,addressType:t,networkID:K})}),{}),chainType:t};break}case _.Sui:{I={version:1,type:P.PrivateKey,identifier:T,privateKeyIdentifier:l,publicKey:o.publicKey,address:Kt({publicKey:o.publicKey,addressType:t}),chainType:t};break}default:xe(t)}if(!I)throw new Error("unable to create a private key account based on the address type");return await Nt(e,I),await Dg(e,A),I}i(dy,"addPrivateKeyAccount");h();p();var hy=ue(Qo());function G2(e){return hy.keccak256(e)}i(G2,"_identifierForReadOnlyAccount");async function py(e,t){let r=Object.values(t).find(Boolean);if(!r)throw new la;let n=G2(r),o={version:1,type:P.ReadOnly,identifier:n,addresses:t};return await Nt(e,o),o}i(py,"addReadonlyAccount");h();p();async function my(e,t){let r=new Set,n=await ct();for(let a of n)a.type===P.Seedless&&a.seedIdentifier===t&&ai[Object.values(a.chains)[0].pathType]===0&&r.add(a.derivationIndex);let o=0;for(let a=0;a<=r.size;a++)if(!r.has(a)){o=a;break}return gy(e,t,o)}i(my,"addAccountForExistingSeedless");async function gy(e,t,r){try{return await Z2(e,t,r)}catch(n){if(n instanceof Sn)return await gy(e,t,r+1);throw n}}i(gy,"addAccountForSeedWithDerivationIndex");async function Z2(e,t,r){let n=await Ut(e,t),o=(await e.fetchChainAvailability()).enabledAddressTypes,a=Jt(o),l=await Fi(t,r,a[0]),d={version:1,type:P.Seedless,identifier:l,seedIdentifier:t,derivationIndex:r,chains:_n(e,n,r,a)};return await Nt(e,d,!1),d}i(Z2,"_addAccountForExistingSeed");h();p();h();p();h();p();async function As(e,t){let r=await cn(),n=bs(t),o=r?.seedIdentifiers??[],a=r?.seedlessIdentifiers??[];return o.concat(a).includes(n)}i(As,"isExistingSeed");async function lu(e,t,r,n){if((await au()).length>0)throw new _c;if(n.length===0)throw new fa;if(await As(e,t))throw new go;let l=bs(t),d=t.fold(T=>({version:1,identifier:l,name:r,entropy:new Uint8Array(T)}));await Lg(e,d);let g=[],A=await Ut(e,l);for(let T of n){let I=Fi(l,T.derivationIndex,T.derivationPathTypes[0]),k=_n(e,A,T.derivationIndex,T.derivationPathTypes),K={version:1,type:P.Seedless,identifier:I,seedIdentifier:l,derivationIndex:T.derivationIndex,chains:k};await Nt(e,K),g.push(K)}return g}i(lu,"addSeedlessWithMultipleAccounts");async function yy(e,t,r){let n=(await e.fetchChainAvailability()).enabledAddressTypes,o=0,a=Jt(n);return(await lu(e,t,r,[{name:r,derivationIndex:o,derivationPathTypes:a}]))[0]}i(yy,"addSeedlessWithDefaultAccount");h();p();h();p();async function fu(e,t,r,n,o=!1){let a=await As(e,t);if(!o&&a)throw new go;let l=bs(t),d=t.fold(T=>({version:1,identifier:l,name:r,entropy:new Uint8Array(T)}));await Vg(e,d);let g=[],A=await Ut(e,l);for(let T of n){let I=await Fi(l,T.derivationIndex,T.derivationPathTypes[0]),k=_n(e,A,T.derivationIndex,T.derivationPathTypes),K={version:1,type:P.Seed,identifier:I,seedIdentifier:l,derivationIndex:T.derivationIndex,chains:k};await Nt(e,K),g.push(K)}return g}i(fu,"addSeedWithMultipleAccounts");async function vy(e,t,r){let n=(await e.fetchChainAvailability()).enabledAddressTypes,o=0,a=Jt(n);return(await fu(e,t,r,[{name:r,derivationIndex:o,derivationPathTypes:a}]))[0]}i(vy,"addSeedWithDefaultAccount");h();p();var by=ue(Qo());function J2(e){return by.keccak256(e)}i(J2,"_identifierForSolanaSeedVaultAccount");async function wy(e,t){let r=[];for(let{publicKey:n,derivationPath:o,authToken:a}of t){let l=J2(n),d={version:1,type:P.SeedVault,identifier:l,derivationPath:o,authToken:a,publicKey:n,chainType:_.Solana};r.push(d),await Nt(e,d)}return r}i(wy,"addSolanaSeedVaultAccounts");h();p();h();p();async function du(e,t,r){let o=(await ct()).find(a=>a.identifier===t);if(!o)throw new An;switch(o.type){case P.Seed:case P.Seedless:{let a=o.chains[r]?.pathType;if(!a)throw new Ni;let l=await Ut(e,o.seedIdentifier),d=e.keypairGenerator.generateKeypairFromSeed(l,o.derivationIndex,a);return kr.from(d.privateKey)}case P.PrivateKey:{let a=await Li(e,o.privateKeyIdentifier);if(a.chainType!==r)throw new Ni;let l=e.keypairGenerator.generateKeypairFromPrivateKey(kr.from(a.privateKey),r);return kr.from(l.privateKey)}case P.Ledger:case P.SeedVault:case P.KMSVault:throw new ca;case P.ReadOnly:throw new ua;default:(a=>{throw new Error("invalid account type")})(o)}}i(du,"exportPrivateKey");h();p();h();p();h();p();var Ea=new Error("Unknown error"),hu=new Error("Invalid entropy length"),Sa=new Error("Invalid mn*monic sentence length"),ad=new Error("Invalid checksum"),xy=new RangeError("Invalid mn*monic word"),sd=new RangeError("Invalid wordlist"),cd=new RangeError("Invalid wordlist index"),Kr=i((e,t)=>{if(!e)throw t},"assert");function zi(e){Kr(e>=128,hu),Kr(e<=256,hu),Kr(e%32===0,hu)}i(zi,"assertEntropyLengthIsValid");function Ma(e){Kr(e>=12,Sa),Kr(e<=24,Sa),Kr(e%3===0,Sa)}i(Ma,"assertMnemonicSentenceLengthIsValid");function Ss(e){Kr(e.length===2048,sd),Kr(e.every(t=>typeof t=="string"),sd)}i(Ss,"assertWordlistIsValid");function ud(e,t){return Ma(e),t(e*4/3)}i(ud,"generateEntropy");async function pu(e,t){let r=e.length*8;zi(r);let n=r/32,o=await t(e),[a]=o,l=8-n,d=a>>>l<<l>>>0,g=new Uint8Array(e.length+1);return g.set(e,0),g[g.length-1]=d,g}i(pu,"deriveBits");function mu(e){let t=(e.length-1)*8;zi(t);let r=t/32,n=(t+r)/11,o=new ArrayBuffer(n*4),a=new DataView(o),l=0,d=0,g=0;for(let A of e)if(g+=8,d|=A<<32-g,d>>>=0,g>=11){let T=d>>>21;Kr(T>=0&&T<=2047,cd),a.setUint32(l*4,T,!0),l++,d<<=11,d>>>=0,g-=11}return Kr(l===n,Sa),new Uint32Array(o)}i(mu,"mapBitsToIndexes");function Ay(e){let t=e.length;Ma(t);let r=11,n=e.length*r,o=new ArrayBuffer(Math.ceil(n/8)),a=new DataView(o),l=new DataView(e.buffer),d=e.length,g=0,A=0,T=0,I=8;for(let k=0;k<d;k++){let K=l.getUint32(k*4,!0);Kr(K<2048,cd);let C=r;for(;C>0;){let R=32-C,V=C>=I?I:C;g|=K>>32-R-V&(1<<V)-1,A+=V,g<<=I-V,g>>>=0,C-=V,I-=V,I<=0&&(I=8),A%8===0&&(a.setUint8(T,g),T++,g=0)}}return d%8!==0&&a.setUint8(T,g),new Uint8Array(o)}i(Ay,"mapIndexesToBits");function ld(e){Ma(e.length);let t=Ay(e),r=t.slice(0,t.length-1);return t.fill(0),r}i(ld,"indexesToEntropy");async function Es(e,t){let r=e.length*8;zi(r);let n=await pu(e,t),o=mu(n);return n.fill(0),o}i(Es,"entropyToIndexes");function fd(e,t){Ss(t);let r=new Set(t),n=new Uint32Array(24),o=0,a="";for(let d=0;d<e.length;d++){let g=e[d],A=g===32,T=d===e.length-1;if(T&&(a+=String.fromCharCode(g)),A||T){Kr(r.has(a),xy);let I=0;for(let k of t){if(a===k)break;I++}n[o++]=I,a=""}else a+=String.fromCharCode(g)}Ma(o);let l=n.slice(0,o);return n.fill(0),l}i(fd,"mnemonicToIndexes");async function Ms(e,t,r){let n=await Es(e,r),o=new Uint8Array(n.reduce((l,d)=>l+t[d].length+1,-1)),a=0;for(let l of n){a>0&&(o[a++]=32);let d=t[l];for(let g of d)o[a++]=g.charCodeAt(0)}return n.fill(0),o}i(Ms,"entropyToMnemonic");var od=Uint8Array.of(109,110,101,109,111,110,105,99);async function gi(e,t,r,n,o){let a=await Ms(e,r,n),l=new Uint8Array(od.length+t.length);l.set(od,0),l.set(t,od.length);let d=await o(a,l,2048,64,"sha512");return l.fill(0),a.fill(0),d}i(gi,"entropyToSeed");h();p();var Ts=ue(iA(),1);h();p();var Io=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"];async function dd(e){switch(e){case"english":return Io}}i(dd,"getWordlist");function hd(e){return t=>new e(t)}i(hd,"createFromEntropy");function pd(e,t){return async r=>{let n=null,o=null,a=null,l=null,d=null;try{o=ld(r),a=await pu(o,t),l=mu(a);let g=r[r.length-1],A=l[l.length-1];if(g!==A)throw ad;d=e.fromEntropy(o)}catch(g){g instanceof Error?n=g:(console.error(g),n=Ea)}finally{if(o?.fill(0),a?.fill(0),l?.fill(0),n)throw n;return d}}}i(pd,"createFromIndexes");function md(e,t){return async r=>{let n=null,o=null,a=null;try{o=fd(r,t),a=await e.fromIndexes(o)}catch(l){l instanceof Error?n=l:(console.error(l),n=Ea)}finally{if(o?.fill(0),n)throw n;return a}}}i(md,"createFromMnemonic");function gd(e,t){return r=>{let n=null,o=null,a=null;try{o=ud(r,t),a=e.fromEntropy(o)}catch(l){l instanceof Error?n=l:(console.error(l),n=Ea)}finally{if(o?.fill(0),n)throw n;return a}}}i(gd,"createFromSentenceLength");var yd=class{static{i(this,"Bip39Factory")}static async webCrypto(t){let r=typeof t=="string"?await dd(t):t;Ss(r);let n=i(l=>self.crypto.getRandomValues(new Uint8Array(l)),"random"),o=i(async l=>new Uint8Array(await self.crypto.subtle.digest("SHA-256",l)),"sha256"),a=i(async(l,d,g,A,T)=>{let I="SHA-"+T.substring(3),k=await self.crypto.subtle.importKey("raw",l,"PBKDF2",!1,["deriveBits"]),K=await self.crypto.subtle.deriveBits({name:"PBKDF2",salt:d,iterations:g,hash:I},k,A*8);return new Uint8Array(K)},"pbkdf2");return class Ta{static{i(this,"WebCryptoBip39")}static fromEntropy=hd(Ta);static fromIndexes=pd(Ta,o);static fromMnemonic=md(Ta,r);static fromSentenceLength=gd(Ta,n);static wordlist=r;#e;constructor(d){zi(d.length*8),this.#e=d.slice()}deriveSeed=i((d=new Uint8Array)=>gi(this.#e,d,r,o,a),"deriveSeed");getEntropy=i(()=>this.#e.slice(),"getEntropy");getIndexes=i(()=>Es(this.#e,o),"getIndexes");getMnemonic=i(()=>Ms(this.#e,r,o),"getMnemonic");getSentenceLength=i(()=>{let d=this.#e.length*8,g=d/32;return(d+g)/11},"getSentenceLength")}}static async nodeCrypto(t){let r=typeof t=="string"?await dd(t):t;Ss(r);let n=i(l=>new Uint8Array((0,Ts.randomBytes)(l).buffer),"random"),o=i(l=>new Uint8Array((0,Ts.createHash)("sha256").update(l).digest().buffer),"sha256"),a=i((...l)=>new Promise((d,g)=>{(0,Ts.pbkdf2)(...l,(A,T)=>{if(A)return g(A);d(new Uint8Array(T.buffer))})}),"pbkdf2");return class Ia{static{i(this,"NodeCryptoBip39")}static fromEntropy=hd(Ia);static fromIndexes=pd(Ia,o);static fromMnemonic=md(Ia,r);static fromSentenceLength=gd(Ia,n);static wordlist=r;#e;constructor(d){zi(d.length*8),this.#e=d.slice()}deriveSeed=i((d=new Uint8Array)=>gi(this.#e,d,r,o,a),"deriveSeed");getEntropy=i(()=>this.#e.slice(),"getEntropy");getIndexes=i(()=>Es(this.#e,o),"getIndexes");getMnemonic=i(()=>Ms(this.#e,r,o),"getMnemonic");getSentenceLength=i(()=>{let d=this.#e.length*8,g=d/32;return(d+g)/11},"getSentenceLength")}}static async customCrypto(t,r){let n=typeof t=="string"?await dd(t):t;Ss(n);let{random:o,sha256:a,pbkdf2:l}=r;return class _a{static{i(this,"CustomCryptoBip39")}static fromEntropy=hd(_a);static fromIndexes=pd(_a,a);static fromMnemonic=md(_a,n);static fromSentenceLength=gd(_a,o);static wordlist=n;#e;constructor(g){zi(g.length*8),this.#e=g.slice()}deriveSeed=i((g=new Uint8Array)=>gi(this.#e,g,n,a,l),"deriveSeed");getEntropy=i(()=>this.#e.slice(),"getEntropy");getIndexes=i(()=>Es(this.#e,a),"getIndexes");getMnemonic=i(()=>Ms(this.#e,n,a),"getMnemonic");getSentenceLength=i(()=>{let g=this.#e.length*8,A=g/32;return(g+A)/11},"getSentenceLength")}}};async function Sy(e,t){let r,n=await e.secureCache.getSeed(t);if(n)r=n;else{let a=await In(e,t);try{r=await a.foldAsync(async d=>gi(d,new Uint8Array,Io,an,(g,A,T,I)=>ns(an,g,A,{c:T,dkLen:I})))}catch{throw new Error("InvalidEntropyBip39")}await e.secureCache.setSeed(t,r)}let o=kr.from(r);return r.fill(0),o}i(Sy,"exportSeedV2");var Y2=new ci,Q2=new Ni,X2=new yo,ut={unableToLoadAccounts:{status:"unable-to-load-accounts",isOnboarded:!1,reonboardingNeeded:!1},unonboarded:{status:"unonboarded",isOnboarded:!1,reonboardingNeeded:!1},invalidIdentifier:{status:"invalid-identifier",isOnboarded:!0,reonboardingNeeded:!0},fetchIntegrityStorageError:{status:"fetch-integrity-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchEntropyStorageError:{status:"fetch-entropy-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchPkStorageError:{status:"fetch-pk-storage-error",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropy:{status:"invalid-entropy",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyBip39:{status:"invalid-entropy-bip-39",isOnboarded:!0,reonboardingNeeded:!0},invalidChecksumBits:{status:"invalid-checksum-bits",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyBits:{status:"invalid-entropy-bits",isOnboarded:!0,reonboardingNeeded:!0},invalidChecksum:{status:"invalid-checksum",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthLessThanTwelve:{status:"invalid-entropy-length-less-than-twelve",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthMoreThanTwentyFour:{status:"invalid-entropy-length-more-than-twenty-four",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthWrongWord:{status:"invalid-entropy-length-wrong-word",isOnboarded:!0,reonboardingNeeded:!0},invalidPkAddressType:{status:"invalid-pk-address-type",isOnboarded:!0,reonboardingNeeded:!0},invalidPkIdentifier:{status:"invalid-pk-identifier",isOnboarded:!0,reonboardingNeeded:!0},invalidPk:{status:"invalid-pk",isOnboarded:!0,reonboardingNeeded:!0},internalError:{status:"internal-error",isOnboarded:!0,reonboardingNeeded:!0},safelyOnboarded:{status:"safely-onboarded",isOnboarded:!0,reonboardingNeeded:!1}};async function Ty(e){let t;try{if(t=await ct(),t.length===0)return ut.unonboarded}catch{return ut.unableToLoadAccounts}return eE(e,t)}i(Ty,"checkVaultIntegrity");var eE=i(async(e,t)=>{let r=await tE(e,t);if(r.status!=="safely-onboarded")return r;try{let l=await Xf(e);if(l?.version===3&&l?.isSafelyOnboarded)return ut.safelyOnboarded}catch{return ut.fetchIntegrityStorageError}let n=await My(e,t,P.Seed),o=await My(e,t,P.Seedless),a=await nE(e,t);return n.status!=="safely-onboarded"?n:o.status!=="safely-onboarded"?o:a.status!=="safely-onboarded"?a:(await Qf(e,{version:3,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()}),ut.safelyOnboarded)},"checkAndValidateAllSecrets"),tE=i(async(e,t)=>{try{if((await Xf(e))?.isSafelyOnboarded)return ut.safelyOnboarded}catch{return ut.fetchIntegrityStorageError}let r=await Ey(e,t,P.Seed),n=await Ey(e,t,P.Seedless);return r.status!=="safely-onboarded"?r:n.status!=="safely-onboarded"?n:(await Qf(e,{version:1,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()}),ut.safelyOnboarded)},"checkForExistingEntropy"),Ey=i(async(e,t,r)=>{let n=new Set;for(let o of t)o.type===r&&n.add(o.seedIdentifier);for(let o of n)try{await In(e,o)}catch(a){if(a instanceof Error){if(a.message===Y2.message)return ut.invalidIdentifier;if(a.message.match(/ExpoSecureStorage/))return ut.fetchEntropyStorageError}return ut.internalError}return ut.safelyOnboarded},"checkExistingEntropy"),rE=i(e=>{if(!(e instanceof Error))return ut.invalidEntropy;let t=[[/ExpoSecureStorage/,ut.fetchEntropyStorageError],[/InvalidEntropyBip39/,ut.invalidEntropyBip39],[/LessThanTwelve/,ut.invalidEntropyLengthLessThanTwelve],[/MoreThanTwentyFour/,ut.invalidEntropyLengthMoreThanTwentyFour],[/WrongWord/,ut.invalidEntropyLengthWrongWord],[/InvalidChecksumBits/,ut.invalidChecksumBits],[/InvalidEntropyBits/,ut.invalidEntropyBits],[/InvalidChecksum/,ut.invalidChecksum]];for(let[r,n]of t)if(e.message.match(r))return n;return ut.invalidEntropy},"getCheckValidEntropyErrorResult"),My=i(async(e,t,r)=>{let n=new Set;for(let o of t)o.type===r&&n.add(o.seedIdentifier);for(let o of n)try{await Sy(e,o)}catch(a){return rE(a)}return ut.safelyOnboarded},"checkValidEntropy"),nE=i(async(e,t)=>{for(let r of t)if(r.type===P.PrivateKey)try{await du(e,r.identifier,r.chainType)}catch(n){if(n instanceof Error){if(n.message===Q2.message)return ut.invalidPkAddressType;if(n.message===X2.message)return ut.invalidPkIdentifier;if(n.message.match(/ExpoSecureStorage/))return ut.fetchPkStorageError}return ut.invalidPk}return ut.safelyOnboarded},"checkValidPrivateKeys");h();p();async function Iy(e){let t=(await e.fetchChainAvailability()).enabledAddressTypes,r=!1,n=await ct();if(n.length===0)return r;let o=new Map;for(let a of n){if(a.type!==P.Seed&&a.type!==P.Seedless)continue;let l=o.get(a.seedIdentifier);l?l.push(a):o.set(a.seedIdentifier,[a])}for(let[a,l]of o){let d;for(let g of l)if(!(g.chains&&!qf(Object.values(g.chains)[0].pathType)))for(let A of t){if(g.chains[A])continue;d||(d=await Ut(e,a));let I=Jt([A]),k=_n(e,d,g.derivationIndex,I);g.chains={...g.chains,...k},r=!0}}return r&&await Tn(n),r}i(Iy,"deriveAddresses");h();p();var vd=class extends Error{static{i(this,"SeedCacheCorruptionError")}sha256Count;mismatchCount;totalSeeds;constructor(t,r,n){super(`IDPLAT-295: Seed cache corruption detected - SHA256: ${t}, Mismatch: ${r}`),this.sha256Count=t,this.mismatchCount=r,this.totalSeeds=n}};async function ky(e){let t=await su(),r=[];for(let{identifier:a}of t){let l=null,d=null,g=null;try{g=await e.secureCache.getSeed(a);let A=await In(e,a);if(l=await A.foldAsync(async T=>{let{seed:I}=await Aa(T);return I}),!g){r.push({seedIdentifier:a,digest:"uncached"});continue}if(_y(g,l)){r.push({seedIdentifier:a,digest:"sha512"});continue}if(d=await A.foldAsync(async T=>gi(T,new Uint8Array,Io,an,(I,k,K,C)=>ns(an,I,k,{c:K,dkLen:C}))),_y(g,d)){r.push({seedIdentifier:a,digest:"sha256"});continue}r.push({seedIdentifier:a,digest:"mismatch"})}catch(A){r.push({seedIdentifier:a,digest:"error",error:A instanceof Error?A.message:String(A)})}finally{l&&l.fill(0),d&&d.fill(0),g&&g.fill(0)}}let n=r.filter(a=>a.digest==="sha256").length,o=r.filter(a=>a.digest==="mismatch").length;if(n>0||o>0){let a=new vd(n,o,r.length);Z.captureError(a,G.Account)}return r}i(ky,"DO_NOT_USE_diagnoseSeedCacheDigests");var _y=i((e,t)=>{if(!e||!t||e.length!==t.length)return!1;for(let r=0;r<e.length;r+=1)if(e[r]!==t[r])return!1;return!0},"buffersEqual");h();p();h();p();h();p();h();p();h();p();h();p();h();p();function Py(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}i(Py,"number");function iE(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}i(iE,"isBytes");function bd(e,...t){if(!iE(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}i(bd,"bytes");function By(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Py(e.outputLen),Py(e.blockLen)}i(By,"hash");function Is(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}i(Is,"exists");function Oy(e,t){bd(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}i(Oy,"output");h();p();h();p();var gu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Ky(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}i(Ky,"isBytes");var yu=i(e=>new DataView(e.buffer,e.byteOffset,e.byteLength),"createView"),un=i((e,t)=>e<<32-t|e>>>t,"rotr"),oE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!oE)throw new Error("Non little-endian hardware is not supported");function sE(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}i(sE,"utf8ToBytes");function ka(e){if(typeof e=="string"&&(e=sE(e)),!Ky(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}i(ka,"toBytes");function Cy(...e){let t=0;for(let n=0;n<e.length;n++){let o=e[n];if(!Ky(o))throw new Error("Uint8Array expected");t+=o.length}let r=new Uint8Array(t);for(let n=0,o=0;n<e.length;n++){let a=e[n];r.set(a,o),o+=a.length}return r}i(Cy,"concatBytes");var _s=class{static{i(this,"Hash")}clone(){return this._cloneInto()}},hL={}.toString;function Ry(e){let t=i(n=>e().update(ka(n)).digest(),"hashC"),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}i(Ry,"wrapConstructor");function Ny(e=32){if(gu&&typeof gu.getRandomValues=="function")return gu.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}i(Ny,"randomBytes");function aE(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let o=BigInt(32),a=BigInt(4294967295),l=Number(r>>o&a),d=Number(r&a),g=n?4:0,A=n?0:4;e.setUint32(t+g,l,n),e.setUint32(t+A,d,n)}i(aE,"setBigUint64");var vu=class extends _s{static{i(this,"SHA2")}constructor(t,r,n,o){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=yu(this.buffer)}update(t){Is(this);let{view:r,buffer:n,blockLen:o}=this;t=ka(t);let a=t.length;for(let l=0;l<a;){let d=Math.min(o-this.pos,a-l);if(d===o){let g=yu(t);for(;o<=a-l;l+=o)this.process(g,l);continue}n.set(t.subarray(l,l+d),this.pos),this.pos+=d,l+=d,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Is(this),Oy(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:o,isLE:a}=this,{pos:l}=this;r[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>o-l&&(this.process(n,0),l=0);for(let I=l;I<o;I++)r[I]=0;aE(n,o-8,BigInt(this.length*8),a),this.process(n,0);let d=yu(t),g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let A=g/4,T=this.get();if(A>T.length)throw new Error("_sha2: outputLen bigger than state");for(let I=0;I<A;I++)d.setUint32(4*I,T[I],a)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:o,finished:a,destroyed:l,pos:d}=this;return t.length=o,t.pos=d,t.finished=a,t.destroyed=l,o%r&&t.buffer.set(n),t}};var cE=i((e,t,r)=>e&t^~e&r,"Chi"),uE=i((e,t,r)=>e&t^e&r^t&r,"Maj"),lE=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),qi=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Hi=new Uint32Array(64),wd=class extends vu{static{i(this,"SHA256")}constructor(){super(64,32,8,!1),this.A=qi[0]|0,this.B=qi[1]|0,this.C=qi[2]|0,this.D=qi[3]|0,this.E=qi[4]|0,this.F=qi[5]|0,this.G=qi[6]|0,this.H=qi[7]|0}get(){let{A:t,B:r,C:n,D:o,E:a,F:l,G:d,H:g}=this;return[t,r,n,o,a,l,d,g]}set(t,r,n,o,a,l,d,g){this.A=t|0,this.B=r|0,this.C=n|0,this.D=o|0,this.E=a|0,this.F=l|0,this.G=d|0,this.H=g|0}process(t,r){for(let I=0;I<16;I++,r+=4)Hi[I]=t.getUint32(r,!1);for(let I=16;I<64;I++){let k=Hi[I-15],K=Hi[I-2],C=un(k,7)^un(k,18)^k>>>3,R=un(K,17)^un(K,19)^K>>>10;Hi[I]=R+Hi[I-7]+C+Hi[I-16]|0}let{A:n,B:o,C:a,D:l,E:d,F:g,G:A,H:T}=this;for(let I=0;I<64;I++){let k=un(d,6)^un(d,11)^un(d,25),K=T+k+cE(d,g,A)+lE[I]+Hi[I]|0,R=(un(n,2)^un(n,13)^un(n,22))+uE(n,o,a)|0;T=A,A=g,g=d,d=l+K|0,l=a,a=o,o=n,n=K+R|0}n=n+this.A|0,o=o+this.B|0,a=a+this.C|0,l=l+this.D|0,d=d+this.E|0,g=g+this.F|0,A=A+this.G|0,T=T+this.H|0,this.set(n,o,a,l,d,g,A,T)}roundClean(){Hi.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var bu=Ry(()=>new wd);h();p();var Ed={};Q1(Ed,{bitGet:()=>yE,bitLen:()=>gE,bitMask:()=>Pa,bitSet:()=>vE,bytesToHex:()=>_o,bytesToNumberBE:()=>vi,bytesToNumberLE:()=>xu,concatBytes:()=>ks,createHmacDrbg:()=>Sd,ensureBytes:()=>vr,equalBytes:()=>pE,hexToBytes:()=>ko,hexToNumber:()=>Ad,isBytes:()=>ln,numberToBytesBE:()=>Wi,numberToBytesLE:()=>Au,numberToHexUnpadded:()=>Ly,numberToVarBytesBE:()=>hE,utf8ToBytes:()=>mE,validateObject:()=>$i});h();p();var Vy=BigInt(0),wu=BigInt(1),fE=BigInt(2);function ln(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}i(ln,"isBytes");var dE=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function _o(e){if(!ln(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=dE[e[r]];return t}i(_o,"bytesToHex");function Ly(e){let t=e.toString(16);return t.length&1?`0${t}`:t}i(Ly,"numberToHexUnpadded");function Ad(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}i(Ad,"hexToNumber");var yi={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Uy(e){if(e>=yi._0&&e<=yi._9)return e-yi._0;if(e>=yi._A&&e<=yi._F)return e-(yi._A-10);if(e>=yi._a&&e<=yi._f)return e-(yi._a-10)}i(Uy,"asciiToBase16");function ko(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let o=0,a=0;o<r;o++,a+=2){let l=Uy(e.charCodeAt(a)),d=Uy(e.charCodeAt(a+1));if(l===void 0||d===void 0){let g=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+g+'" at index '+a)}n[o]=l*16+d}return n}i(ko,"hexToBytes");function vi(e){return Ad(_o(e))}i(vi,"bytesToNumberBE");function xu(e){if(!ln(e))throw new Error("Uint8Array expected");return Ad(_o(Uint8Array.from(e).reverse()))}i(xu,"bytesToNumberLE");function Wi(e,t){return ko(e.toString(16).padStart(t*2,"0"))}i(Wi,"numberToBytesBE");function Au(e,t){return Wi(e,t).reverse()}i(Au,"numberToBytesLE");function hE(e){return ko(Ly(e))}i(hE,"numberToVarBytesBE");function vr(e,t,r){let n;if(typeof t=="string")try{n=ko(t)}catch(a){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${a}`)}else if(ln(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let o=n.length;if(typeof r=="number"&&o!==r)throw new Error(`${e} expected ${r} bytes, got ${o}`);return n}i(vr,"ensureBytes");function ks(...e){let t=0;for(let o=0;o<e.length;o++){let a=e[o];if(!ln(a))throw new Error("Uint8Array expected");t+=a.length}let r=new Uint8Array(t),n=0;for(let o=0;o<e.length;o++){let a=e[o];r.set(a,n),n+=a.length}return r}i(ks,"concatBytes");function pE(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}i(pE,"equalBytes");function mE(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}i(mE,"utf8ToBytes");function gE(e){let t;for(t=0;e>Vy;e>>=wu,t+=1);return t}i(gE,"bitLen");function yE(e,t){return e>>BigInt(t)&wu}i(yE,"bitGet");var vE=i((e,t,r)=>e|(r?wu:Vy)<<BigInt(t),"bitSet"),Pa=i(e=>(fE<<BigInt(e-1))-wu,"bitMask"),xd=i(e=>new Uint8Array(e),"u8n"),Dy=i(e=>Uint8Array.from(e),"u8fr");function Sd(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=xd(e),o=xd(e),a=0,l=i(()=>{n.fill(1),o.fill(0),a=0},"reset"),d=i((...I)=>r(o,n,...I),"h"),g=i((I=xd())=>{o=d(Dy([0]),I),n=d(),I.length!==0&&(o=d(Dy([1]),I),n=d())},"reseed"),A=i(()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let I=0,k=[];for(;I<t;){n=d();let K=n.slice();k.push(K),I+=n.length}return ks(...k)},"gen");return i((I,k)=>{l(),g(I);let K;for(;!(K=k(A()));)g();return l(),K},"genUntil")}i(Sd,"createHmacDrbg");var bE={bigint:i(e=>typeof e=="bigint","bigint"),function:i(e=>typeof e=="function","function"),boolean:i(e=>typeof e=="boolean","boolean"),string:i(e=>typeof e=="string","string"),stringOrUint8Array:i(e=>typeof e=="string"||ln(e),"stringOrUint8Array"),isSafeInteger:i(e=>Number.isSafeInteger(e),"isSafeInteger"),array:i(e=>Array.isArray(e),"array"),field:i((e,t)=>t.Fp.isValid(e),"field"),hash:i(e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen),"hash")};function $i(e,t,r={}){let n=i((o,a,l)=>{let d=bE[a];if(typeof d!="function")throw new Error(`Invalid validator "${a}", expected function`);let g=e[o];if(!(l&&g===void 0)&&!d(g,e))throw new Error(`Invalid param ${String(o)}=${g} (${typeof g}), expected ${a}`)},"checkField");for(let[o,a]of Object.entries(t))n(o,a,!1);for(let[o,a]of Object.entries(r))n(o,a,!0);return e}i($i,"validateObject");var It=BigInt(0),bt=BigInt(1),Po=BigInt(2),wE=BigInt(3),Md=BigInt(4),Fy=BigInt(5),jy=BigInt(8),xE=BigInt(9),AE=BigInt(16);function Gt(e,t){let r=e%t;return r>=It?r:t+r}i(Gt,"mod");function SE(e,t,r){if(r<=It||t<It)throw new Error("Expected power/modulo > 0");if(r===bt)return It;let n=bt;for(;t>It;)t&bt&&(n=n*e%r),e=e*e%r,t>>=bt;return n}i(SE,"pow");function br(e,t,r){let n=e;for(;t-- >It;)n*=n,n%=r;return n}i(br,"pow2");function Su(e,t){if(e===It||t<=It)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Gt(e,t),n=t,o=It,a=bt,l=bt,d=It;for(;r!==It;){let A=n/r,T=n%r,I=o-l*A,k=a-d*A;n=r,r=T,o=l,a=d,l=I,d=k}if(n!==bt)throw new Error("invert: does not exist");return Gt(o,t)}i(Su,"invert");function EE(e){let t=(e-bt)/Po,r,n,o;for(r=e-bt,n=0;r%Po===It;r/=Po,n++);for(o=Po;o<e&&SE(o,t,e)!==e-bt;o++);if(n===1){let l=(e+bt)/Md;return i(function(g,A){let T=g.pow(A,l);if(!g.eql(g.sqr(T),A))throw new Error("Cannot find square root");return T},"tonelliFast")}let a=(r+bt)/Po;return i(function(d,g){if(d.pow(g,t)===d.neg(d.ONE))throw new Error("Cannot find square root");let A=n,T=d.pow(d.mul(d.ONE,o),r),I=d.pow(g,a),k=d.pow(g,r);for(;!d.eql(k,d.ONE);){if(d.eql(k,d.ZERO))return d.ZERO;let K=1;for(let R=d.sqr(k);K<A&&!d.eql(R,d.ONE);K++)R=d.sqr(R);let C=d.pow(T,bt<<BigInt(A-K-1));T=d.sqr(C),I=d.mul(I,C),k=d.mul(k,T),A=K}return I},"tonelliSlow")}i(EE,"tonelliShanks");function ME(e){if(e%Md===wE){let t=(e+bt)/Md;return i(function(n,o){let a=n.pow(o,t);if(!n.eql(n.sqr(a),o))throw new Error("Cannot find square root");return a},"sqrt3mod4")}if(e%jy===Fy){let t=(e-Fy)/jy;return i(function(n,o){let a=n.mul(o,Po),l=n.pow(a,t),d=n.mul(o,l),g=n.mul(n.mul(d,Po),l),A=n.mul(d,n.sub(g,n.ONE));if(!n.eql(n.sqr(A),o))throw new Error("Cannot find square root");return A},"sqrt5mod8")}return e%AE,EE(e)}i(ME,"FpSqrt");var TE=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Td(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=TE.reduce((n,o)=>(n[o]="function",n),t);return $i(e,r)}i(Td,"validateField");function IE(e,t,r){if(r<It)throw new Error("Expected power > 0");if(r===It)return e.ONE;if(r===bt)return t;let n=e.ONE,o=t;for(;r>It;)r&bt&&(n=e.mul(n,o)),o=e.sqr(o),r>>=bt;return n}i(IE,"FpPow");function _E(e,t){let r=new Array(t.length),n=t.reduce((a,l,d)=>e.is0(l)?a:(r[d]=a,e.mul(a,l)),e.ONE),o=e.inv(n);return t.reduceRight((a,l,d)=>e.is0(l)?a:(r[d]=e.mul(a,r[d]),e.mul(a,l)),o),r}i(_E,"FpInvertBatch");function Id(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}i(Id,"nLength");function Eu(e,t,r=!1,n={}){if(e<=It)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:o,nByteLength:a}=Id(e,t);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");let l=ME(e),d=Object.freeze({ORDER:e,BITS:o,BYTES:a,MASK:Pa(o),ZERO:It,ONE:bt,create:i(g=>Gt(g,e),"create"),isValid:i(g=>{if(typeof g!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof g}`);return It<=g&&g<e},"isValid"),is0:i(g=>g===It,"is0"),isOdd:i(g=>(g&bt)===bt,"isOdd"),neg:i(g=>Gt(-g,e),"neg"),eql:i((g,A)=>g===A,"eql"),sqr:i(g=>Gt(g*g,e),"sqr"),add:i((g,A)=>Gt(g+A,e),"add"),sub:i((g,A)=>Gt(g-A,e),"sub"),mul:i((g,A)=>Gt(g*A,e),"mul"),pow:i((g,A)=>IE(d,g,A),"pow"),div:i((g,A)=>Gt(g*Su(A,e),e),"div"),sqrN:i(g=>g*g,"sqrN"),addN:i((g,A)=>g+A,"addN"),subN:i((g,A)=>g-A,"subN"),mulN:i((g,A)=>g*A,"mulN"),inv:i(g=>Su(g,e),"inv"),sqrt:n.sqrt||(g=>l(d,g)),invertBatch:i(g=>_E(d,g),"invertBatch"),cmov:i((g,A,T)=>T?A:g,"cmov"),toBytes:i(g=>r?Au(g,a):Wi(g,a),"toBytes"),fromBytes:i(g=>{if(g.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${g.length}`);return r?xu(g):vi(g)},"fromBytes")});return Object.freeze(d)}i(Eu,"Field");function zy(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}i(zy,"getFieldBytesLength");function _d(e){let t=zy(e);return t+Math.ceil(t/2)}i(_d,"getMinHashLength");function Mu(e,t,r=!1){let n=e.length,o=zy(t),a=_d(t);if(n<16||n<a||n>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${n}`);let l=r?vi(e):xu(e),d=Gt(l,t-bt)+bt;return r?Au(d,o):Wi(d,o)}i(Mu,"mapHashToField");h();p();h();p();var kE=BigInt(0),kd=BigInt(1);function Hy(e,t){let r=i((o,a)=>{let l=a.negate();return o?l:a},"constTimeNegate"),n=i(o=>{let a=Math.ceil(t/o)+1,l=2**(o-1);return{windows:a,windowSize:l}},"opts");return{constTimeNegate:r,unsafeLadder(o,a){let l=e.ZERO,d=o;for(;a>kE;)a&kd&&(l=l.add(d)),d=d.double(),a>>=kd;return l},precomputeWindow(o,a){let{windows:l,windowSize:d}=n(a),g=[],A=o,T=A;for(let I=0;I<l;I++){T=A,g.push(T);for(let k=1;k<d;k++)T=T.add(A),g.push(T);A=T.double()}return g},wNAF(o,a,l){let{windows:d,windowSize:g}=n(o),A=e.ZERO,T=e.BASE,I=BigInt(2**o-1),k=2**o,K=BigInt(o);for(let C=0;C<d;C++){let R=C*g,V=Number(l&I);l>>=K,V>g&&(V-=k,l+=kd);let q=R,Q=R+Math.abs(V)-1,F=C%2!==0,ce=V<0;V===0?T=T.add(r(F,a[q])):A=A.add(r(ce,a[Q]))}return{p:A,f:T}},wNAFCached(o,a,l,d){let g=o._WINDOW_SIZE||1,A=a.get(o);return A||(A=this.precomputeWindow(o,g),g!==1&&a.set(o,d(A))),this.wNAF(g,A,l)}}}i(Hy,"wNAF");function Pd(e){return Td(e.Fp),$i(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Id(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}i(Pd,"validateBasic");function PE(e){let t=Pd(e);$i(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:o}=t;if(r){if(!n.eql(o,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}i(PE,"validatePointOpts");var{bytesToNumberBE:BE,hexToBytes:OE}=Ed,Bo={Err:class extends Error{static{i(this,"DERErr")}constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=Bo;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:BE(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=Bo,r=typeof e=="string"?OE(e):e;if(!ln(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:o,l:a}=Bo._parseInt(r.subarray(2)),{d:l,l:d}=Bo._parseInt(a);if(d.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:l}},hexFromSig(e){let t=i(A=>Number.parseInt(A[0],16)&8?"00"+A:A,"slice"),r=i(A=>{let T=A.toString(16);return T.length&1?`0${T}`:T},"h"),n=t(r(e.s)),o=t(r(e.r)),a=n.length/2,l=o.length/2,d=r(a),g=r(l);return`30${r(l+a+4)}02${g}${o}02${d}${n}`}},bi=BigInt(0),Cr=BigInt(1),WL=BigInt(2),Wy=BigInt(3),$L=BigInt(4);function KE(e){let t=PE(e),{Fp:r}=t,n=t.toBytes||((C,R,V)=>{let q=R.toAffine();return ks(Uint8Array.from([4]),r.toBytes(q.x),r.toBytes(q.y))}),o=t.fromBytes||(C=>{let R=C.subarray(1),V=r.fromBytes(R.subarray(0,r.BYTES)),q=r.fromBytes(R.subarray(r.BYTES,2*r.BYTES));return{x:V,y:q}});function a(C){let{a:R,b:V}=t,q=r.sqr(C),Q=r.mul(q,C);return r.add(r.add(Q,r.mul(C,R)),V)}if(i(a,"weierstrassEquation"),!r.eql(r.sqr(t.Gy),a(t.Gx)))throw new Error("bad generator point: equation left != right");function l(C){return typeof C=="bigint"&&bi<C&&C<t.n}i(l,"isWithinCurveOrder");function d(C){if(!l(C))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}i(d,"assertGE");function g(C){let{allowedPrivateKeyLengths:R,nByteLength:V,wrapPrivateKey:q,n:Q}=t;if(R&&typeof C!="bigint"){if(ln(C)&&(C=_o(C)),typeof C!="string"||!R.includes(C.length))throw new Error("Invalid key");C=C.padStart(V*2,"0")}let F;try{F=typeof C=="bigint"?C:vi(vr("private key",C,V))}catch{throw new Error(`private key must be ${V} bytes, hex or bigint, not ${typeof C}`)}return q&&(F=Gt(F,Q)),d(F),F}i(g,"normPrivateKeyToScalar");let A=new Map;function T(C){if(!(C instanceof I))throw new Error("ProjectivePoint expected")}i(T,"assertPrjPoint");class I{static{i(this,"Point")}constructor(R,V,q){if(this.px=R,this.py=V,this.pz=q,R==null||!r.isValid(R))throw new Error("x required");if(V==null||!r.isValid(V))throw new Error("y required");if(q==null||!r.isValid(q))throw new Error("z required")}static fromAffine(R){let{x:V,y:q}=R||{};if(!R||!r.isValid(V)||!r.isValid(q))throw new Error("invalid affine point");if(R instanceof I)throw new Error("projective point not allowed");let Q=i(F=>r.eql(F,r.ZERO),"is0");return Q(V)&&Q(q)?I.ZERO:new I(V,q,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(R){let V=r.invertBatch(R.map(q=>q.pz));return R.map((q,Q)=>q.toAffine(V[Q])).map(I.fromAffine)}static fromHex(R){let V=I.fromAffine(o(vr("pointHex",R)));return V.assertValidity(),V}static fromPrivateKey(R){return I.BASE.multiply(g(R))}_setWindowSize(R){this._WINDOW_SIZE=R,A.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:R,y:V}=this.toAffine();if(!r.isValid(R)||!r.isValid(V))throw new Error("bad point: x or y not FE");let q=r.sqr(V),Q=a(R);if(!r.eql(q,Q))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:R}=this.toAffine();if(r.isOdd)return!r.isOdd(R);throw new Error("Field doesn't support isOdd")}equals(R){T(R);let{px:V,py:q,pz:Q}=this,{px:F,py:ce,pz:se}=R,ie=r.eql(r.mul(V,se),r.mul(F,Q)),ae=r.eql(r.mul(q,se),r.mul(ce,Q));return ie&&ae}negate(){return new I(this.px,r.neg(this.py),this.pz)}double(){let{a:R,b:V}=t,q=r.mul(V,Wy),{px:Q,py:F,pz:ce}=this,se=r.ZERO,ie=r.ZERO,ae=r.ZERO,W=r.mul(Q,Q),me=r.mul(F,F),x=r.mul(ce,ce),s=r.mul(Q,F);return s=r.add(s,s),ae=r.mul(Q,ce),ae=r.add(ae,ae),se=r.mul(R,ae),ie=r.mul(q,x),ie=r.add(se,ie),se=r.sub(me,ie),ie=r.add(me,ie),ie=r.mul(se,ie),se=r.mul(s,se),ae=r.mul(q,ae),x=r.mul(R,x),s=r.sub(W,x),s=r.mul(R,s),s=r.add(s,ae),ae=r.add(W,W),W=r.add(ae,W),W=r.add(W,x),W=r.mul(W,s),ie=r.add(ie,W),x=r.mul(F,ce),x=r.add(x,x),W=r.mul(x,s),se=r.sub(se,W),ae=r.mul(x,me),ae=r.add(ae,ae),ae=r.add(ae,ae),new I(se,ie,ae)}add(R){T(R);let{px:V,py:q,pz:Q}=this,{px:F,py:ce,pz:se}=R,ie=r.ZERO,ae=r.ZERO,W=r.ZERO,me=t.a,x=r.mul(t.b,Wy),s=r.mul(V,F),u=r.mul(q,ce),m=r.mul(Q,se),y=r.add(V,q),v=r.add(F,ce);y=r.mul(y,v),v=r.add(s,u),y=r.sub(y,v),v=r.add(V,Q);let S=r.add(F,se);return v=r.mul(v,S),S=r.add(s,m),v=r.sub(v,S),S=r.add(q,Q),ie=r.add(ce,se),S=r.mul(S,ie),ie=r.add(u,m),S=r.sub(S,ie),W=r.mul(me,v),ie=r.mul(x,m),W=r.add(ie,W),ie=r.sub(u,W),W=r.add(u,W),ae=r.mul(ie,W),u=r.add(s,s),u=r.add(u,s),m=r.mul(me,m),v=r.mul(x,v),u=r.add(u,m),m=r.sub(s,m),m=r.mul(me,m),v=r.add(v,m),s=r.mul(u,v),ae=r.add(ae,s),s=r.mul(S,v),ie=r.mul(y,ie),ie=r.sub(ie,s),s=r.mul(y,u),W=r.mul(S,W),W=r.add(W,s),new I(ie,ae,W)}subtract(R){return this.add(R.negate())}is0(){return this.equals(I.ZERO)}wNAF(R){return K.wNAFCached(this,A,R,V=>{let q=r.invertBatch(V.map(Q=>Q.pz));return V.map((Q,F)=>Q.toAffine(q[F])).map(I.fromAffine)})}multiplyUnsafe(R){let V=I.ZERO;if(R===bi)return V;if(d(R),R===Cr)return this;let{endo:q}=t;if(!q)return K.unsafeLadder(this,R);let{k1neg:Q,k1:F,k2neg:ce,k2:se}=q.splitScalar(R),ie=V,ae=V,W=this;for(;F>bi||se>bi;)F&Cr&&(ie=ie.add(W)),se&Cr&&(ae=ae.add(W)),W=W.double(),F>>=Cr,se>>=Cr;return Q&&(ie=ie.negate()),ce&&(ae=ae.negate()),ae=new I(r.mul(ae.px,q.beta),ae.py,ae.pz),ie.add(ae)}multiply(R){d(R);let V=R,q,Q,{endo:F}=t;if(F){let{k1neg:ce,k1:se,k2neg:ie,k2:ae}=F.splitScalar(V),{p:W,f:me}=this.wNAF(se),{p:x,f:s}=this.wNAF(ae);W=K.constTimeNegate(ce,W),x=K.constTimeNegate(ie,x),x=new I(r.mul(x.px,F.beta),x.py,x.pz),q=W.add(x),Q=me.add(s)}else{let{p:ce,f:se}=this.wNAF(V);q=ce,Q=se}return I.normalizeZ([q,Q])[0]}multiplyAndAddUnsafe(R,V,q){let Q=I.BASE,F=i((se,ie)=>ie===bi||ie===Cr||!se.equals(Q)?se.multiplyUnsafe(ie):se.multiply(ie),"mul"),ce=F(this,V).add(F(R,q));return ce.is0()?void 0:ce}toAffine(R){let{px:V,py:q,pz:Q}=this,F=this.is0();R==null&&(R=F?r.ONE:r.inv(Q));let ce=r.mul(V,R),se=r.mul(q,R),ie=r.mul(Q,R);if(F)return{x:r.ZERO,y:r.ZERO};if(!r.eql(ie,r.ONE))throw new Error("invZ was invalid");return{x:ce,y:se}}isTorsionFree(){let{h:R,isTorsionFree:V}=t;if(R===Cr)return!0;if(V)return V(I,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:R,clearCofactor:V}=t;return R===Cr?this:V?V(I,this):this.multiplyUnsafe(t.h)}toRawBytes(R=!0){return this.assertValidity(),n(I,this,R)}toHex(R=!0){return _o(this.toRawBytes(R))}}I.BASE=new I(t.Gx,t.Gy,r.ONE),I.ZERO=new I(r.ZERO,r.ONE,r.ZERO);let k=t.nBitLength,K=Hy(I,t.endo?Math.ceil(k/2):k);return{CURVE:t,ProjectivePoint:I,normPrivateKeyToScalar:g,weierstrassEquation:a,isWithinCurveOrder:l}}i(KE,"weierstrassPoints");function CE(e){let t=Pd(e);return $i(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}i(CE,"validateOpts");function $y(e){let t=CE(e),{Fp:r,n}=t,o=r.BYTES+1,a=2*r.BYTES+1;function l(v){return bi<v&&v<r.ORDER}i(l,"isValidFieldElement");function d(v){return Gt(v,n)}i(d,"modN");function g(v){return Su(v,n)}i(g,"invN");let{ProjectivePoint:A,normPrivateKeyToScalar:T,weierstrassEquation:I,isWithinCurveOrder:k}=KE({...t,toBytes(v,S,E){let b=S.toAffine(),c=r.toBytes(b.x),w=ks;return E?w(Uint8Array.from([S.hasEvenY()?2:3]),c):w(Uint8Array.from([4]),c,r.toBytes(b.y))},fromBytes(v){let S=v.length,E=v[0],b=v.subarray(1);if(S===o&&(E===2||E===3)){let c=vi(b);if(!l(c))throw new Error("Point is not on curve");let w=I(c),D=r.sqrt(w),L=(D&Cr)===Cr;return(E&1)===1!==L&&(D=r.neg(D)),{x:c,y:D}}else if(S===a&&E===4){let c=r.fromBytes(b.subarray(0,r.BYTES)),w=r.fromBytes(b.subarray(r.BYTES,2*r.BYTES));return{x:c,y:w}}else throw new Error(`Point of length ${S} was invalid. Expected ${o} compressed bytes or ${a} uncompressed bytes`)}}),K=i(v=>_o(Wi(v,t.nByteLength)),"numToNByteStr");function C(v){let S=n>>Cr;return v>S}i(C,"isBiggerThanHalfOrder");function R(v){return C(v)?d(-v):v}i(R,"normalizeS");let V=i((v,S,E)=>vi(v.slice(S,E)),"slcNum");class q{static{i(this,"Signature")}constructor(S,E,b){this.r=S,this.s=E,this.recovery=b,this.assertValidity()}static fromCompact(S){let E=t.nByteLength;return S=vr("compactSignature",S,E*2),new q(V(S,0,E),V(S,E,2*E))}static fromDER(S){let{r:E,s:b}=Bo.toSig(vr("DER",S));return new q(E,b)}assertValidity(){if(!k(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!k(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(S){return new q(this.r,this.s,S)}recoverPublicKey(S){let{r:E,s:b,recovery:c}=this,w=ae(vr("msgHash",S));if(c==null||![0,1,2,3].includes(c))throw new Error("recovery id invalid");let D=c===2||c===3?E+t.n:E;if(D>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let L=c&1?"03":"02",z=A.fromHex(L+K(D)),Y=g(D),oe=d(-w*Y),le=d(b*Y),at=A.BASE.multiplyAndAddUnsafe(z,oe,le);if(!at)throw new Error("point at infinify");return at.assertValidity(),at}hasHighS(){return C(this.s)}normalizeS(){return this.hasHighS()?new q(this.r,d(-this.s),this.recovery):this}toDERRawBytes(){return ko(this.toDERHex())}toDERHex(){return Bo.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ko(this.toCompactHex())}toCompactHex(){return K(this.r)+K(this.s)}}let Q={isValidPrivateKey(v){try{return T(v),!0}catch{return!1}},normPrivateKeyToScalar:T,randomPrivateKey:i(()=>{let v=_d(t.n);return Mu(t.randomBytes(v),t.n)},"randomPrivateKey"),precompute(v=8,S=A.BASE){return S._setWindowSize(v),S.multiply(BigInt(3)),S}};function F(v,S=!0){return A.fromPrivateKey(v).toRawBytes(S)}i(F,"getPublicKey");function ce(v){let S=ln(v),E=typeof v=="string",b=(S||E)&&v.length;return S?b===o||b===a:E?b===2*o||b===2*a:v instanceof A}i(ce,"isProbPub");function se(v,S,E=!0){if(ce(v))throw new Error("first arg must be private key");if(!ce(S))throw new Error("second arg must be public key");return A.fromHex(S).multiply(T(v)).toRawBytes(E)}i(se,"getSharedSecret");let ie=t.bits2int||function(v){let S=vi(v),E=v.length*8-t.nBitLength;return E>0?S>>BigInt(E):S},ae=t.bits2int_modN||function(v){return d(ie(v))},W=Pa(t.nBitLength);function me(v){if(typeof v!="bigint")throw new Error("bigint expected");if(!(bi<=v&&v<W))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Wi(v,t.nByteLength)}i(me,"int2octets");function x(v,S,E=s){if(["recovered","canonical"].some(O=>O in E))throw new Error("sign() legacy options not supported");let{hash:b,randomBytes:c}=t,{lowS:w,prehash:D,extraEntropy:L}=E;w==null&&(w=!0),v=vr("msgHash",v),D&&(v=vr("prehashed msgHash",b(v)));let z=ae(v),Y=T(S),oe=[me(Y),me(z)];if(L!=null){let O=L===!0?c(r.BYTES):L;oe.push(vr("extraEntropy",O))}let le=ks(...oe),at=z;function de(O){let U=ie(O);if(!k(U))return;let N=g(U),H=A.BASE.multiply(U).toAffine(),te=d(H.x);if(te===bi)return;let j=d(N*d(at+te*Y));if(j===bi)return;let J=(H.x===te?0:2)|Number(H.y&Cr),et=j;return w&&C(j)&&(et=R(j),J^=1),new q(te,et,J)}return i(de,"k2sig"),{seed:le,k2sig:de}}i(x,"prepSig");let s={lowS:t.lowS,prehash:!1},u={lowS:t.lowS,prehash:!1};function m(v,S,E=s){let{seed:b,k2sig:c}=x(v,S,E),w=t;return Sd(w.hash.outputLen,w.nByteLength,w.hmac)(b,c)}i(m,"sign"),A.BASE._setWindowSize(8);function y(v,S,E,b=u){let c=v;if(S=vr("msgHash",S),E=vr("publicKey",E),"strict"in b)throw new Error("options.strict was renamed to lowS");let{lowS:w,prehash:D}=b,L,z;try{if(typeof c=="string"||ln(c))try{L=q.fromDER(c)}catch(H){if(!(H instanceof Bo.Err))throw H;L=q.fromCompact(c)}else if(typeof c=="object"&&typeof c.r=="bigint"&&typeof c.s=="bigint"){let{r:H,s:te}=c;L=new q(H,te)}else throw new Error("PARSE");z=A.fromHex(E)}catch(H){if(H.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(w&&L.hasHighS())return!1;D&&(S=t.hash(S));let{r:Y,s:oe}=L,le=ae(S),at=g(oe),de=d(le*at),O=d(Y*at),U=A.BASE.multiplyAndAddUnsafe(z,de,O)?.toAffine();return U?d(U.x)===Y:!1}return i(y,"verify"),{CURVE:t,getPublicKey:F,getSharedSecret:se,sign:m,verify:y,ProjectivePoint:A,Signature:q,utils:Q}}i($y,"weierstrass");h();p();h();p();var Tu=class extends _s{static{i(this,"HMAC")}constructor(t,r){super(),this.finished=!1,this.destroyed=!1,By(t);let n=ka(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,a=new Uint8Array(o);a.set(n.length>o?t.create().update(n).digest():n);for(let l=0;l<a.length;l++)a[l]^=54;this.iHash.update(a),this.oHash=t.create();for(let l=0;l<a.length;l++)a[l]^=106;this.oHash.update(a),a.fill(0)}update(t){return Is(this),this.iHash.update(t),this}digestInto(t){Is(this),bd(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:o,destroyed:a,blockLen:l,outputLen:d}=this;return t=t,t.finished=o,t.destroyed=a,t.blockLen=l,t.outputLen=d,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Bd=i((e,t,r)=>new Tu(e,t).update(r).digest(),"hmac");Bd.create=(e,t)=>new Tu(e,t);function RE(e){return{hash:e,hmac:i((t,...r)=>Bd(e,t,Cy(...r)),"hmac"),randomBytes:Ny}}i(RE,"getHash");function Iu(e,t){let r=i(n=>$y({...e,...RE(n)}),"create");return Object.freeze({...r(t),create:r})}i(Iu,"createCurve");var Jy=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Gy=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),NE=BigInt(1),Od=BigInt(2),Zy=i((e,t)=>(e+t/Od)/t,"divNearest");function UE(e){let t=Jy,r=BigInt(3),n=BigInt(6),o=BigInt(11),a=BigInt(22),l=BigInt(23),d=BigInt(44),g=BigInt(88),A=e*e*e%t,T=A*A*e%t,I=br(T,r,t)*T%t,k=br(I,r,t)*T%t,K=br(k,Od,t)*A%t,C=br(K,o,t)*K%t,R=br(C,a,t)*C%t,V=br(R,d,t)*R%t,q=br(V,g,t)*V%t,Q=br(q,d,t)*R%t,F=br(Q,r,t)*T%t,ce=br(F,l,t)*C%t,se=br(ce,n,t)*A%t,ie=br(se,Od,t);if(!Kd.eql(Kd.sqr(ie),e))throw new Error("Cannot find square root");return ie}i(UE,"sqrtMod");var Kd=Eu(Jy,void 0,void 0,{sqrt:UE}),_u=Iu({a:BigInt(0),b:BigInt(7),Fp:Kd,n:Gy,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:i(e=>{let t=Gy,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-NE*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=r,l=BigInt("0x100000000000000000000000000000000"),d=Zy(a*e,t),g=Zy(-n*e,t),A=Gt(e-d*r-g*o,t),T=Gt(-d*n-g*a,t),I=A>l,k=T>l;if(I&&(A=t-A),k&&(T=t-T),A>l||T>l)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:I,k1:A,k2neg:k,k2:T}},"splitScalar")}},bu),p7=BigInt(0);var m7=_u.ProjectivePoint;async function Yy(){let e=_u.utils.randomPrivateKey();return{publicKey:_u.getPublicKey(e),privateKey:e}}i(Yy,"deriveAgentKeypair");var Qy=i(e=>`${yr}.perps.agent.keypair.${e}`,"agentWalletStorageKey"),ku=i(async(e,t,r=!1)=>{let n=await DE(e,t);if(n&&!r)return n;let o=await Yy();return await VE(e,o,t),o},"exportAgentWalletKeypair"),DE=i(async(e,t)=>{let r=Qy(t),n=null;try{n=await e.secretsStorage.getSecureValue(r)}catch{}if(!n)return null;let o=n.keyPair,a=new Uint8Array(Buffer.from(o.publicKey.bytes,o.publicKey.encoding)),l=new Uint8Array(Buffer.from(o.privateKey.bytes,o.privateKey.encoding));return{publicKey:a,privateKey:l}},"getAgentWalletFromStorage"),VE=i(async(e,t,r)=>{let n=Qy(r),o={publicKey:{bytes:Buffer.from(t.publicKey).toString("base64"),encoding:"base64"},privateKey:{bytes:Buffer.from(t.privateKey).toString("base64"),encoding:"base64"}},a={version:1,identifier:r,keyPair:o};await e.secretsStorage.setSecureValue(n,a)},"setAgentWalletInStorage");var Xy=i(async(e,t,r=!1)=>{let{publicKey:n}=await ku(e,t,r);return Kt({publicKey:n,addressType:_.EVM})},"getAgentAddress");h();p();h();p();h();p();var ev=Eu(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),LE=ev.create(BigInt("-3")),FE=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Oo=Iu({a:LE,b:FE,Fp:ev,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},bu);var Cd="m/23001'/0'";async function Ps(e,t){let r;switch(t.type){case P.Seedless:case P.Seed:r=t.seedIdentifier;break;case P.PrivateKey:r=t.privateKeyIdentifier;break}let n=await e.secureCache.getClientJWTSigner(r,Cd);if(n)return{publicKey:n.p256pubkey,privateKey:n.p256privkey};let o;switch(t.type){case P.Seedless:case P.Seed:{o=(await Ut(e,t.seedIdentifier)).fold(l=>new ts(l));break}case P.PrivateKey:{let a=await Li(e,t.privateKeyIdentifier);o=new ts(a.privateKey);break}}try{let a=o.derivePath({ellipticCurve:"ed25519",derivationPath:Cd,bytesInPrivateKey:64}),l=Mu(a.secretKey,Oo.CURVE.n),d=Oo.getPublicKey(l);return await e.secureCache.setClientJWTSigner(r,Cd,{p256pubkey:d,p256privkey:l}),{publicKey:d,privateKey:l}}finally{o.cleanup()}}i(Ps,"deriveClientJWTKeypair");var jE=i(e=>e.type===P.Seed||e.type===P.Seedless||e.type===P.PrivateKey,"isAccountWithKey"),tv=i(async(e,t)=>{let r=await ct();if(r.length===0)throw new Error("No accounts, unable to get authentication public key.");let o=r.filter(jE).find(l=>l.type===P.PrivateKey?l.privateKeyIdentifier===t:l.seedIdentifier===t);if(!o)throw new Error("Unable to derive authentication public key for given secret identifier.");let a=await Ps(e,o);return ot(a.publicKey)},"getAuthenticationPublicKey");h();p();var rv=ue(Yo());h();p();var zE="m/24001'/0'",Pu=i(async e=>{let t=await ct();if(t.length===0)throw new Error("No accounts, unable to derive cash key.");let r=t[0],n;switch(r.type){case P.Seed:case P.Seedless:{n=(await Ut(e,r.seedIdentifier)).fold(a=>new ts(a));break}case P.PrivateKey:{let o=await Li(e,r.privateKeyIdentifier);n=new ts(o.privateKey);break}default:throw new Error(`Account type ${r.type} is not supported, unable to derive cash key.`)}try{let o=n.derivePath({ellipticCurve:"ed25519",derivationPath:zE,bytesInPrivateKey:64});return{publicKey:o.publicKey,privateKey:o.secretKey}}finally{n.cleanup()}},"deriveCashKeypair");var nv=i(async e=>{let{publicKey:t}=await Pu(e);return rv.default.encode(t)},"getCashAddress");h();p();async function iv(e,t){let r=await ct();if(r.length===0)throw new An;let n=r.filter(o=>o.identifier!==t);await Tn(n),await Yf(e)}i(iv,"removeAccount");h();p();async function ov(e,t,r){let n=await ct();if(r<0||r>=n.length)throw new An;let o=n.map(l=>l.identifier).indexOf(t);if(o<0)throw new An;if(o===r)return;let a=n[o];n.splice(o,1),n.splice(r,0,a),await Tn(n)}i(ov,"reorderAccount");h();p();h();p();var qE="cash",HE="cash",WE={pathType:X.Bip44ChangeSolana,index:0};async function sv(e){Z.addBreadcrumb(G.Cash,"Getting user's Cash account from KMS",ee.Info);let t;try{let{result:r}=await e.getOrCreatePhantomOrganization();Z.addBreadcrumb(G.Cash,`Successfully got user's Phantom Org (orgId: ${Rd(r.organizationId)})`,ee.Info),t=r.organizationId}catch(r){Z.addBreadcrumb(G.Cash,"[KMS] Error getting user's Phantom Org",ee.Error);let n=r instanceof Error?r:new Error("[KMS] Failed to get user's Phantom Org");throw Z.captureError(n,G.Cash),n}try{let{result:{walletId:r,walletName:n,accounts:o}}=await e.getOrCreateWalletWithTag({organizationId:t,walletName:qE,tag:HE,mnemonicLength:24,accounts:[{derivationPath:si(WE),curve:"Ed25519",addressFormat:"Solana"}]});if(o.length===0)throw new Error("No Cash account found");return Z.addBreadcrumb(G.Cash,`Successfully got user's Cash wallet (walletId: ${Rd(r)}, walletName: ${n}, orgId: ${Rd(t)})`,ee.Info),{organizationId:t,walletId:r,walletName:n,account:o[0]}}catch(r){Z.addBreadcrumb(G.Cash,"[KMS] Error getting user's Cash wallet",ee.Error);let n=r instanceof Error?r:new Error("[KMS] Failed to get user's Cash wallet");throw Z.captureError(n,G.Cash),n}}i(sv,"getCashKMSAccount");var Rd=i(e=>e?.slice(0,5)??"","sanitizeString");h();p();h();p();var Da=ue(nn()),Un=ue(ch());h();p();h();p();var lT=f.array(f.object({address:f.string(),signingIndexes:f.array(f.number()),sigHash:f.number().optional(),isScriptSpend:f.boolean().optional()})),Mb=f.object({chainType:oa,signingType:f.literal("transaction"),message:f.string().min(1),inputsToSign:lT.optional(),finalize:f.boolean()}),fT=f.object({chainType:oa,signingType:f.literal("message"),message:f.instanceof(Uint8Array)}),dT=Mb.or(fT),Tb=f.object({chainType:f.literal(_.Sui),signingType:f.literal("transaction"),transaction:f.instanceof(Uint8Array)}),Ib=f.object({chainType:f.literal(_.Sui),signingType:f.literal("personalMessage"),message:f.instanceof(Uint8Array)}),hT=Tb.or(Ib),_b=f.object({chainType:f.literal(_.Solana),signingType:f.literal("transaction"),message:f.union([f.string().min(1),f.instanceof(Uint8Array)])}),kb=f.object({chainType:f.literal(_.Solana),signingType:f.literal("message"),message:f.string().min(1)}),Pb=_b.or(kb),Bb=f.object({chainType:f.literal(_.EVM),signingType:f.literal("transaction"),message:f.string().min(1)}),uh=f.object({chainType:f.literal(_.EVM),signingType:f.literal("message"),message:f.string().min(1)}),lh=f.object({chainType:f.literal(_.EVM),signingType:f.literal("typedData"),version:f.literal(1),data:hc}),fh=f.object({chainType:f.literal(_.EVM),signingType:f.literal("typedData"),version:f.literal(3),data:pc}),dh=f.object({chainType:f.literal(_.EVM),signingType:f.literal("typedData"),version:f.literal(4),data:mc}),pT=Bb.or(uh).or(lh).or(fh).or(dh),mT=f.object({isJWT:f.literal(!0),data:yf}),Nn=f.object({policyName:f.string().optional()}),gT=_b.merge(Nn),yT=kb.merge(Nn),dz=gT.or(yT),vT=Bb.merge(Nn),bT=uh.merge(Nn),wT=lh.merge(Nn),xT=fh.merge(Nn),AT=dh.merge(Nn),hz=vT.or(bT).or(wT).or(xT).or(AT),pz=Mb.merge(Nn),mz=f.union([Tb.merge(Nn),Ib.merge(Nn)]),ST=f.object({isKMSPKIAuthenticator:f.literal(!0),payload:f.custom()}),gz=f.object({organizationId:f.string(),walletId:f.string(),derivationPath:f.string()}),Ob=f.object({isCash:f.literal(!0),data:Pb}),ET=Ob.extend({isCashKMS:f.literal(!0)}),MT=uh.extend({isAgentWallet:f.literal(!0)}),TT=lh.extend({isAgentWallet:f.literal(!0)}),IT=fh.extend({isAgentWallet:f.literal(!0)}),_T=dh.extend({isAgentWallet:f.literal(!0)}),kT=f.union([MT,TT,IT,_T]),PT=f.object({status:f.literal("success"),signature:f.string()}),Kb=f.object({status:f.literal("success"),signature:f.string()}),BT=f.object({status:f.literal("success"),signature:f.string(),message:f.instanceof(Uint8Array).optional()}),OT=f.object({status:f.literal("success"),signature:f.string()}),KT=f.object({status:f.literal("success"),signature:f.string(),signedJWT:gf.optional()}),CT=f.object({status:f.literal("success"),signature:f.string()}),RT=Kb;var hh=Pb.or(pT).or(dT).or(hT).or(mT).or(ST).or(kT).or(Ob).or(ET),re;(function(e){e.InvalidInput="invalidInput",e.InvalidAccountId="invalidAccountId",e.InvalidAddressType="invalidAddressType",e.InvalidMessageEncoding="invalidMessageEncoding",e.InvalidDerivationPath="invalidDerivationPath",e.InvalidRpcPayload="invalidRpcPayload",e.LedgerAppNotOpen="ledgerAppNotOpen",e.LedgerNotConnected="ledgerNotConnected",e.LedgerNeedPermission="ledgerNeedPermission",e.LedgerRejectAction="ledgerRejectAction",e.LedgerUnknownSignError="ledgerUnknownSignError",e.UnsupportedOperation="unsupportedOperation",e.InternalError="internalError",e.ExpiredTokenError="expiredToken",e.BeforeIATError="beforeTimeOfIssuance",e.InvalidClaimError="invalidClaim"})(re||(re={}));var NT=f.object({status:f.literal("error"),type:f.nativeEnum(re),message:f.string()}),UT=f.union([KT,CT,RT,BT,PT,Kb,OT,NT]),wt;(function(e){e.KeyPair="keyPair",e.Ledger="ledger",e.SeedVault="seedVault",e.KMS="kms"})(wt||(wt={}));var DT={[re.InvalidInput]:{message:"Invalid input"},[re.InvalidAccountId]:{message:"Invalid account identifier."},[re.InvalidAddressType]:{message:"Invalid chain type."},[re.InvalidMessageEncoding]:{message:"Invalid message encoding."},[re.InvalidDerivationPath]:{message:"Invalid derivation path."},[re.InvalidRpcPayload]:{message:"Invalid KMS RPC payload."},[re.LedgerAppNotOpen]:{message:"Ledger App not open."},[re.LedgerNotConnected]:{message:"Ledger not connected."},[re.LedgerNeedPermission]:{message:"Need permission to connect to Ledger."},[re.LedgerRejectAction]:{message:"Ledger user rejected action."},[re.LedgerUnknownSignError]:{message:"Ledger unknown sign error."},[re.UnsupportedOperation]:{message:"Unsupported operation."},[re.InternalError]:{message:"Internal error."},[re.ExpiredTokenError]:{message:"Token is expired"},[re.BeforeIATError]:{message:"Received token before issuance time"},[re.InvalidClaimError]:{message:"Claim is invalid"}},ge=i((e,t)=>({status:"error",type:e,message:t??DT[e].message}),"createVaultSignerError");var Cb=i(()=>({type:wt.KeyPair,sign:i((e,t)=>{try{switch(t.signingType){case"typedData":{switch(t.version){case 1:{let r=Da.Buffer.from(e.privateKey.slice()),n=Un.SignTypedDataVersion.V1,{data:o}=t,a=(0,Un.signTypedData)({privateKey:r,version:n,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}case 3:{let r=Da.Buffer.from(e.privateKey.slice()),n=Un.SignTypedDataVersion.V3,o=t.data,a=(0,Un.signTypedData)({privateKey:r,version:n,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}case 4:{let r=Da.Buffer.from(e.privateKey.slice()),n=Un.SignTypedDataVersion.V4,o=t.data,a=(0,Un.signTypedData)({privateKey:r,version:n,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}}break}case"message":{let r=t.message,n=Da.Buffer.from(e.privateKey);try{let o=(0,Un.personalSign)({privateKey:n,data:r});return Promise.resolve({status:"success",signature:o})}finally{n.fill(0)}}}}catch(r){return console.error(r),Promise.resolve(ge(re.InvalidMessageEncoding))}},"sign")}),"createAgentWalletKeypairSigner");h();p();var fr=ue(nn());var Rb=ue(pm()),ph=ue(uA());var mh=i(e=>e.length===32?e:e.slice(1,33),"toXOnly");function VT(e){return fr.Buffer.concat([(0,ph.encode)(e.byteLength),e])}i(VT,"encodeVarString");function LT(e){let{sha256:t}=Rb.crypto,n=t(fr.Buffer.from("BIP0322-signed-message"));return t(fr.Buffer.concat([n,n,fr.Buffer.from(e)])).toString("hex")}i(LT,"bip0322Hash");var FT=i((e,t)=>{switch(e){case _.BitcoinTaproot:return Y0.getPublicKey(t);case _.BitcoinNestedSegwit:return of(t,!0);case _.BitcoinNativeSegwit:return of(t,!0);default:throw new Error("Unsupported Address Type")}},"getSigningPk"),jT=i((e,t)=>{let r=km;switch(e){case _.BitcoinTaproot:return Bm(t,void 0,r);case _.BitcoinNativeSegwit:return lf(t,r);case _.BitcoinNestedSegwit:{let n=lf(t,r);return Pm(n,r)}default:throw new Error("Unsupported Address Type")}},"getSignerScript");function zT(e,t,r,n){let o=Mc.fromPSBT(r,{allowUnknownInputs:!0});try{t.forEach(a=>{let l=rs(Bt.Mainnet,a.address),d=e[l];if(!d)throw new Error("missing private key for ("+l+")");let{publicKey:g,privateKey:A}=d;a.signingIndexes.forEach(T=>{let I=o.getInput(T),k=I.witnessUtxo?.script&&Om.decode(I.witnessUtxo.script);if(!a.isScriptSpend&&!I.tapInternalKey&&k?.type==="tr"&&o.updateInput(T,{tapInternalKey:mh(fr.Buffer.from(g))}),a.sigHash)try{o.signIdx(A,T,[a.sigHash],ia(32))}catch{o.signIdx(A,T,void 0,ia(32))}else o.signIdx(A,T,void 0,ia(32));if(n)try{o.finalizeIdx(T)}catch{}})})}catch(a){throw console.error(a),new Error(`Error signing PSBT ${a.toString()}`)}return Promise.resolve(o.toPSBT(0))}i(zT,"signPsbt");var Nb=i(()=>({type:wt.KeyPair,sign:i(async(e,t)=>{try{switch(t.signingType){case"message":{let r=t.chainType,n=fr.Buffer.from(t.message).toString("utf8"),o=e[t.chainType]?.privateKey;if(!o)throw new Error("missing private key for ("+t.chainType+")");let a=fr.Buffer.from(o).toString("hex"),l=FT(r,a),d=jT(r,l),g=fr.Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),A=0,T=4294967295,I=0,k=uf.encode(["OP_0",fr.Buffer.from(LT(n),"hex")]),K=new Mc({allowUnknownOutputs:!0,version:A});K.addOutput({amount:BigInt(0),script:d.script}),K.addInput({txid:g,index:T,sequence:I,finalScriptSig:k});let C=new Mc({allowUnknownOutputs:!0,version:A});C.addInput({txid:K.id,index:0,sequence:I,tapInternalKey:r===_.BitcoinTaproot?l:void 0,witnessUtxo:{script:d.script,amount:BigInt(0)},redeemScript:d.redeemScript}),C.addOutput({script:uf.encode(["RETURN"]),amount:BigInt(0)}),C.sign(fr.Buffer.from(a,"hex"),void 0,ia(32)),C.finalize();let R,V=C.getInput(0);if(V.finalScriptWitness?.length){let q=(0,ph.encode)(V.finalScriptWitness?.length);R=fr.Buffer.concat([q,...V.finalScriptWitness.map(Q=>VT(Q))])}else throw new Error("couldnt produce a signature");return{status:"success",signature:R.toString("hex"),message:C.toBytes()}}case"transaction":{let r=await zT(e,t.inputsToSign??[],fr.Buffer.from(t.message??"","hex"),t.finalize??!1);return{status:"success",signature:fr.Buffer.from(r).toString("hex")}}}}catch{return ge(re.InternalError)}},"sign")}),"createBitcoinKeyPairSigner");h();p();var Db=ue(Yo()),Vb=ue(Pi());h();p();var Ub=ue(Yo());function $u(e,t,r){if(r!==_.Solana)return ge(re.InvalidAddressType);if(e instanceof Uint8Array)return e;try{return t==="transaction"?Ub.default.decode(e):Buffer.from(e,"utf8")}catch(n){return ge(re.InvalidMessageEncoding,`Failed to decode message: ${n instanceof Error?n.message:"Unknown error"}`)}}i($u,"decodeSolanaMessage");var Lb=i(()=>({type:wt.KeyPair,sign:i((e,t)=>{let r=t.data,n=$u(r.message,r.signingType,r.chainType);if("status"in n)return Promise.resolve(n);let o=Db.default.encode(Vb.default.sign.detached(n,e.privateKey));return Promise.resolve({status:"success",signature:o})},"sign")}),"createCashVaultSigner");h();p();var zs=ue(nn()),Fb=ue(tA());var Dn=ue(ch()),jb=ue(Qo());var zb=i(()=>({type:wt.KeyPair,sign:i((e,t)=>{try{switch(t.signingType){case"typedData":{switch(t.version){case 1:{let r=zs.Buffer.from(e.privateKey.slice()),n=Dn.SignTypedDataVersion.V1,{data:o}=t,a=(0,Dn.signTypedData)({privateKey:r,version:n,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}case 3:{let r=zs.Buffer.from(e.privateKey.slice()),n=Dn.SignTypedDataVersion.V3,o=t.data,a=(0,Dn.signTypedData)({privateKey:r,version:n,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}case 4:{let r=zs.Buffer.from(e.privateKey.slice()),n=Dn.SignTypedDataVersion.V4,o=t.data,a=(0,Dn.signTypedData)({privateKey:r,version:n,data:o});return r.fill(0),Promise.resolve({status:"success",signature:a})}}break}case"message":{let r=t.message,n=(0,Dn.personalSign)({privateKey:zs.Buffer.from(e.privateKey),data:r});return Promise.resolve({status:"success",signature:n})}case"transaction":{let r=zs.Buffer.from(t.message.replace("0x",""),"hex"),n=new im(e.privateKey),o=`0x${(0,jb.keccak256)(r)}`,a=(0,Fb.joinSignature)(n.signDigest(o));return Promise.resolve({status:"success",signature:a})}}}catch(r){return console.error(r),Promise.resolve(ge(re.InvalidMessageEncoding))}},"sign")}),"createEthereumKeyPairSigner");h();p();var jo=ue(nn());var qb=i(()=>({type:wt.KeyPair,sign:i((e,t)=>{if(!t.isJWT)return Promise.resolve(ge(re.InvalidAddressType));if(t.data.payload.iss!==pa)return Promise.resolve(ge(re.InvalidClaimError));if(t.data.payload.aud!==ma)return Promise.resolve(ge(re.InvalidClaimError));let r={...t.data.header,kid:ot(jo.Buffer.from(e.publicKey))},n={...t.data.payload,sub:ot(jo.Buffer.from(e.publicKey))},o=ot(jo.Buffer.from(JSON.stringify(r)))+"."+ot(jo.Buffer.from(JSON.stringify(n))),l=Oo.sign(jo.Buffer.from(o).toString("hex"),e.privateKey,{prehash:!0}).toCompactRawBytes(),d=ot(jo.Buffer.from(l)),g={header:r,payload:n,signature:d};return Promise.resolve({status:"success",signature:d,signedJWT:g})},"sign")}),"createJWTKeypairSigner");h();p();h();p();h();p();var Hb=ue(Yo());async function gh(e,t,r){let n=$u(r.message,r.signingType,r.chainType);if("status"in n)return n;try{let o={curve:"Ed25519",derivationPath:t.derivationPath,addressFormat:"Solana"};if(r.signingType==="transaction"){let a=na.VersionedMessage.deserialize(n),d=new na.VersionedTransaction(a).serialize(),g=ot(d),{result:{transaction:A}}=await e.signTransaction({transaction:g,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:o,policyName:r.policyName??null}),T;if(typeof A=="string")T=new Uint8Array(ir(A));else if(Array.isArray(A))T=new Uint8Array(A);else throw new Error("Unexpected transaction format from KMS");let I=na.VersionedTransaction.deserialize(T);if(!I.signatures||I.signatures.length===0)throw new Error("Signed transaction has no signatures");return{status:"success",signature:Hb.default.encode(I.signatures[0])}}else{let a=new TextDecoder().decode(n),{result:{signature:l}}=await e.signUtf8Message({message:a,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:o,algorithm:"Ed25519",policyName:r.policyName});return{status:"success",signature:vc(l)}}}catch(o){return ge(re.InternalError,`KMS Solana signing failed: ${o instanceof Error?o.message:"Unknown error"}`)}}i(gh,"signSolana");h();p();var Qu=ue(nn());h();p();h();p();h();p();h();p();h();p();var Wb="2025-11-24";h();p();h();p();var vh=f.enum(["Ed25519","Secp256k1"]),bh=f.enum(["Ethereum","Solana","BitcoinSegwit","Sui","BitcoinTaproot"]),xt=f.object({curve:vh,derivationPath:f.string(),addressFormat:bh}),Yi=xt.extend({address:f.string(),publicKey:f.string().regex(yc)}),$b=f.object({walletId:f.string(),walletName:f.string(),tags:f.array(f.string())});var qT=f.object({code:f.number(),message:f.string()}),Gb=f.object({error:qT,requestId:f.string().optional()}),HT=f.object({kind:f.literal("RLP_ENCODED"),bytes:f.string()}),WT=f.object({kind:f.literal("PSBT"),bytes:f.string()}),$T=f.object({kind:f.literal("SUI_BCS_ENCODED_TRANSACTION_DATA"),bytes:f.string()}),wh=f.union([f.array(f.number().int().min(0)),f.string(),HT,WT,$T]),Zu=f.object({envelope:f.string(),publicKey:f.string(),proof:f.string().optional()}),Vn=f.enum(["Ed25519","Secp256r1","Secp256k1","Secp256k1Keccak256"]),Bq=f.object({publicKey:f.array(f.number().int().min(0)),algorithm:Vn}),Oq=f.discriminatedUnion("authenticatorKind",[f.object({authenticatorKind:f.literal("keypair"),publicKey:f.array(f.number().int().min(0)),algorithm:Vn}),f.object({authenticatorKind:f.literal("passkey")}),f.object({authenticatorKind:f.literal("oidc")})]),xh=f.discriminatedUnion("authenticatorKind",[f.object({authenticatorKind:f.literal("keypair"),publicKey:f.string(),algorithm:Vn,authenticatorName:f.string()}),f.object({authenticatorKind:f.literal("passkey"),authenticatorName:f.string()}),f.object({authenticatorKind:f.literal("oidc"),authenticatorName:f.string(),jwksUrl:f.string().url(),idTokenClaims:f.object({sub:f.string(),iss:f.string(),aud:f.string().nullish().default(null)})})]),GT=f.discriminatedUnion("authenticatorKind",[f.object({authenticatorKind:f.literal("keypair"),publicKey:f.string(),algorithm:Vn,authenticatorName:f.string(),id:f.string(),createdAtMs:f.number()}),f.object({authenticatorKind:f.literal("passkey"),authenticatorName:f.string(),id:f.string(),createdAtMs:f.number()}),f.object({authenticatorKind:f.literal("oidc"),authenticatorName:f.string(),jwksUrl:f.string().url(),idTokenClaims:f.object({sub:f.string(),iss:f.string(),aud:f.string().nullish().default(null)}),id:f.string(),createdAtMs:f.number()})]),ZT=f.object({type:f.literal("CEL"),preset:f.literal("LEGACY_USER_ROLE")}),JT=f.enum(["ALLOW","DENY"]),YT=f.object({expression:f.string().min(1).max(4096),outcome:JT,comment:f.string().min(0).max(200)}),yh=f.lazy(()=>f.union([f.null(),f.boolean(),f.string(),f.number().finite(),f.array(yh),f.record(yh)])),QT=f.object({name:f.string().min(1).max(50),value:yh,comment:f.string().min(0).max(200)}),XT=f.object({type:f.literal("CEL"),rules:f.array(YT),constants:f.array(QT)}),eI=f.object({usdCentsLimitPerDay:f.number(),memoryAccount:f.string(),memoryId:f.number(),memoryBump:f.number()}),tI=f.object({ethereumMessage:f.boolean(),ethereumTx:f.boolean(),ethereumTypedData:f.boolean(),rawPayload:f.boolean(),solanaTx:f.boolean(),utf8Message:f.boolean()}),rI=f.object({type:f.literal("CEL"),preset:f.literal("DAPP_CONNECTION_USER"),walletId:f.string(),usdLimit:eI.nullish().default(null),allowedMethods:tI.nullish().default(null),solanaProgramAllowlist:f.array(f.string()).nullish().default(null)}),nI=f.union([XT,ZT,rI]),iI=f.object({type:f.literal("ROOT")}),Va=f.union([iI,nI]),Zb=f.enum(["ADMIN","USER"]),Ju=f.object({username:f.string(),role:Zb.or(Va).optional(),traits:f.object({appId:f.string().optional()}).optional(),authenticators:f.array(xh),policy:Va.optional(),expiresInMs:f.number().optional()}),Jb=f.object({username:f.string(),role:Zb.optional(),authenticators:f.array(GT),traits:f.record(f.string()).optional().default({}),expiresAtMs:f.number().nullish().default(null),createdAtMs:f.number().nullish().default(null)}),oI=Jb.extend({policy:Va.optional()}),sI=f.union([oI,Jb]),Zt=f.object({organizationId:f.string(),organizationName:f.string(),parentOrganizationId:f.string().nullish().default(null),tags:f.array(f.string()),users:f.array(sI)}),aI=f.discriminatedUnion("rule",[f.object({rule:f.literal("SystemInstructionLamportsThreshold"),min:f.number().int().min(0).nullish().default(null),max:f.number().int().min(0).nullish().default(null)}),f.object({rule:f.literal("SystemInstructionRecipientAllowlist"),allowlist:f.array(f.string())})]),cI=f.union([f.object({In:f.array(f.number().int().min(0))}),f.object({Exact:f.number().int().min(0)}),f.literal("Any")]),Gu=f.object({programId:f.string(),discriminator:cI,validate:f.array(aI).optional()}),Kq=f.object({max:f.number().int().min(0)}),Cq=f.object({maxComputeUnitPrice:f.number().int().min(0).nullish().default(null),maxComputeUnits:f.number().int().min(0).nullish().default(null)}),Rq=f.object({allowlist:f.array(Gu)}),Nq=f.object({allowlist:f.array(Gu).optional()}),Uq=f.null().default(null),uI=f.discriminatedUnion("rule",[f.object({rule:f.literal("NoSignerAccountUsage"),allowlist:f.array(Gu).optional()}),f.object({rule:f.literal("BundleSizeLimit"),max:f.number().int().min(0)}),f.object({rule:f.literal("ComputeBudgetLimit"),maxComputeUnitPrice:f.number().int().min(0).nullish().default(null),maxComputeUnits:f.number().int().min(0).nullish().default(null)}),f.object({rule:f.literal("NoAddressLookupTables")}),f.object({rule:f.literal("InstructionAllowlist"),allowlist:f.array(Gu)}),f.object({rule:f.literal("AllowAll")})]),lI=f.object({rules:f.array(uI)}),fI=f.object({version:f.literal("v0"),solana:lI.nullish().default(null)}),La=fI,dI=f.enum(["owner","signaturePayload","signatureTransaction"]),hI=f.object({version:f.literal("v0"),scopes:f.array(dI),derivationAllowlist:f.array(xt).nullish().default(null)}),Fa=hI;var Yu=class e extends Error{static{i(this,"KMSRpcError")}response;method;errorCode;requestId;constructor(t,r){let{message:n,requestId:o,code:a}=pI(r.data),l=`KMS RPC call failed: ${t} returned ${r.status} ${r.statusText} - ${n}${o?` (requestId: ${o})`:""}`;super(l),this.name="KMSRpcError",this.response=r,this.method=t,this.requestId=o,this.errorCode=a,Object.setPrototypeOf(this,e.prototype)}};function pI(e){let t=Gb.safeParse(e);if(!t.success)return{message:"Unknown error"};let{error:r,requestId:n}=t.data;return{message:r.message,requestId:n,code:r.code}}i(pI,"extractErrorInfo");var mI="00000000-0000-0000-0000-000000000000",gI="/v1/wallets/kms/rpc";async function Ae(e,t,r,n){let o={method:t,params:r,timestampMs:await Pc()},a=JSON.stringify(o),l;try{let k=await e.getPublicKey(),K=await e.signRpcPayload(o);l=ot(Buffer.from(JSON.stringify({publicKey:k,signature:K,kind:"PKI"}),"utf-8"))}catch(k){throw new Error(`[KMS] Failed to authenticate rpc call: ${k instanceof Error?k.message:"Unknown error"}`)}let d=M.WALLET_SERVICE_API_URL,A=await(d?dt.api("custom",d):dt.api()).noBearer().post(gI,a,{headers:{"Content-Type":"application/json","X-Phantom-Stamp":l,"X-App-Id":mI,"x-api-version":Wb},validateStatus:!1}),T=!es(A),I=A.data&&typeof A.data=="object"&&"error"in A.data;if(T||I)throw new Yu(t,A);return n.parse(A.data)}i(Ae,"rpcCall");h();p();h();p();function Qi(e,t){return e.users.find(r=>r.authenticators.some(n=>n.authenticatorKind!=="keypair"?!1:vc(n.publicKey)===t))}i(Qi,"getByPublicKey");var yI=f.object({organizationName:f.string(),tags:f.array(f.string()).optional(),users:f.array(Ju)}),Yb=f.object({result:Zt}).transform(e=>({result:e.result,getByPublicKey:i(t=>Qi(e.result,t),"getByPublicKey")}));function Ah(e,t){return Ae(e.authenticator,"createOrganization",t,Yb)}i(Ah,"createOrganization");h();p();var vI=f.object({organizationId:f.string()}),Qb=f.object({result:Zt}).transform(e=>({result:e.result,getByPublicKey:i(t=>Qi(e.result,t),"getByPublicKey")}));function Sh(e,t){return Ae(e.authenticator,"getOrganization",t,Qb)}i(Sh,"getOrganization");h();p();var bI=f.object({organizationId:f.string(),user:Ju,replaceExpirable:f.boolean().optional()}),Xb=f.object({result:Zt}).transform(e=>({result:e.result,getByPublicKey:i(t=>Qi(e.result,t),"getByPublicKey")}));function Eh(e,t){return Ae(e.authenticator,"addUserToOrganization",t,Xb)}i(Eh,"addUserToOrganization");h();p();var wI=f.object({organizationId:f.string(),username:f.string()}),ew=f.object({result:Zt});function Mh(e,t){return Ae(e.authenticator,"deleteUserFromOrganization",t,ew)}i(Mh,"deleteUserFromOrganization");h();p();var xI=f.object({organizationId:f.string(),username:f.string(),newPolicy:Va.optional(),addTraits:f.record(f.string()).optional(),removeTraits:f.record(f.string()).optional()}),tw=f.object({result:Zt});function Th(e,t){return Ae(e.authenticator,"updateUserInOrganization",t,tw)}i(Th,"updateUserInOrganization");h();p();var AI=f.object({organizationId:f.string(),username:f.string(),authenticator:xh}),rw=f.object({result:f.discriminatedUnion("authenticatorKind",[f.object({authenticatorKind:f.literal("keypair"),publicKey:f.string(),algorithm:Vn,authenticatorName:f.string(),id:f.string(),createdAtMs:f.number()}),f.object({authenticatorKind:f.literal("passkey"),authenticatorName:f.string(),id:f.string(),createdAtMs:f.number()}),f.object({authenticatorKind:f.literal("oidc"),authenticatorName:f.string(),jwksUrl:f.string().url(),idTokenClaims:f.object({sub:f.string(),iss:f.string(),aud:f.string().nullish().default(null)}),id:f.string(),createdAtMs:f.number()})])});function Ih(e,t){return Ae(e.authenticator,"createAuthenticator",t,rw)}i(Ih,"createAuthenticator");h();p();var SI=f.object({organizationId:f.string(),username:f.string(),authenticatorId:f.string()}),nw=f.object({result:Zt}).transform(e=>({result:e.result,getByPublicKey:i(t=>Qi(e.result,t),"getByPublicKey")}));function _h(e,t){return Ae(e.authenticator,"deleteAuthenticator",t,nw)}i(_h,"deleteAuthenticator");h();p();var EI=f.object({walletName:f.string(),organizationId:f.string(),mnemonicLength:f.number().int().min(0).default(24).optional(),accounts:f.array(xt).optional()}),iw=f.object({result:f.object({walletId:f.string(),walletName:f.string(),accounts:f.array(f.object({curve:vh,derivationPath:f.string(),addressFormat:bh,publicKey:f.string()}))})});function kh(e,t){return Ae(e.authenticator,"createWallet",t,iw)}i(kh,"createWallet");h();p();var MI=f.object({organizationId:f.string(),limit:f.number().int().min(0).optional(),offset:f.number().int().min(0).optional()}),ow=f.object({result:f.object({wallets:f.array($b),totalCount:f.number().int().min(0),limit:f.number().int().min(0),offset:f.number().int().min(0)})});function Ph(e,t){return Ae(e.authenticator,"getOrganizationWallets",t,ow)}i(Ph,"getOrganizationWallets");h();p();var TI=f.object({walletName:f.string(),organizationId:f.string(),tag:f.string(),mnemonicLength:f.number().int().min(0).default(24).optional(),accounts:f.array(xt).optional()}),sw=f.object({result:f.object({walletId:f.string(),walletName:f.string(),accounts:f.array(Yi)})});function Bh(e,t){return Ae(e.authenticator,"getOrCreateWalletWithTag",t,sw)}i(Bh,"getOrCreateWalletWithTag");h();p();var II=f.object({organizationId:f.string(),tag:f.string(),accounts:f.array(xt).optional()}),aw=f.object({result:f.object({walletId:f.string(),walletName:f.string(),accounts:f.array(Yi)}).nullish()});function Oh(e,t){return Ae(e.authenticator,"getWalletWithTag",t,aw)}i(Oh,"getWalletWithTag");h();p();var _I=f.object({organizationId:f.string(),walletId:f.string(),publicKey:f.string()}),cw=f.object({result:f.object({encrypted_bundle:f.string()})});function Kh(e,t){return Ae(e.authenticator,"exportWallet",t,cw)}i(Kh,"exportWallet");h();p();var kI=f.object({ownerOrganizationId:f.string(),targetOrganizationId:f.string(),walletId:f.string(),policy:Fa,transactionPolicy:La.nullish().default(null)}),uw=f.object({result:f.object({organizationId:f.string(),walletId:f.string(),organizationPolicy:Fa,transactionPolicy:La.nullish().default(null)})});function Ch(e,t){return Ae(e.authenticator,"grantOrganizationAccess",t,uw)}i(Ch,"grantOrganizationAccess");h();p();var PI=f.object({ownerOrganizationId:f.string(),targetOrganizationId:f.string(),walletId:f.string()}),lw=f.object({result:f.object({organizationId:f.string(),walletId:f.string(),organizationPolicy:Fa,transactionPolicy:La.nullish().default(null)})});function Rh(e,t){return Ae(e.authenticator,"revokeOrganizationAccess",t,lw)}i(Rh,"revokeOrganizationAccess");h();p();var BI=f.object({organizationId:f.string()}),fw=f.object({result:Zu,signature:f.string().optional()});function Nh(e,t){return Ae(e.authenticator,"initWalletImport",t,fw)}i(Nh,"initWalletImport");h();p();var OI=f.object({organizationId:f.string(),importEnvelope:Zu,encryptedSecret:f.string().regex(yc),walletName:f.string(),accounts:f.array(xt),mnemonicLength:f.number().int().min(0).default(24).optional(),tags:f.array(f.string()).optional()}),dw=f.object({result:f.object({walletId:f.string(),walletName:f.string(),accounts:f.array(Yi)})});function Uh(e,t){return Ae(e.authenticator,"completeImportWallet",t,dw)}i(Uh,"completeImportWallet");h();p();var KI=f.object({publicKey:f.string()}),hw=f.object({result:Zt});function Dh(e,t){return Ae(e.authenticator,"getOrCreatePhantomOrganization",t,hw)}i(Dh,"getOrCreatePhantomOrganization");h();p();var CI=f.object({}),pw=f.object({result:Zt.nullish()});function Vh(e,t){return Ae(e.authenticator,"getPhantomOrganization",t,pw)}i(Vh,"getPhantomOrganization");h();p();var RI=f.object({payload:f.union([f.array(f.number().int().min(0)),f.string()]),organizationId:f.string(),walletId:f.string(),derivationInfo:xt,algorithm:Vn}),mw=f.object({result:f.object({signature:f.string(),address:f.string(),publicKey:f.string()})});function Lh(e,t){let r=Array.isArray(t.payload)?ot(Buffer.from(t.payload)):t.payload;return Ae(e.authenticator,"signRawPayload",{...t,payload:r},mw)}i(Lh,"signRawPayload");h();p();var NI=f.object({transaction:wh,organizationId:f.string(),walletId:f.string(),derivationInfo:xt.nullish().default(null),policyName:f.string().nullish().default(null)}),gw=f.object({result:f.object({transaction:wh,address:f.string(),publicKey:f.string(),signature:f.string().optional()})});function Fh(e,t){return Ae(e.authenticator,"signTransaction",t,gw)}i(Fh,"signTransaction");h();p();var UI=f.object({message:f.string(),organizationId:f.string(),walletId:f.string(),derivationInfo:xt,algorithm:Vn,policyName:f.string().optional()}),yw=f.object({result:f.object({signature:f.string(),address:f.string(),publicKey:f.string()})});function jh(e,t){return Ae(e.authenticator,"signUtf8Message",t,yw)}i(jh,"signUtf8Message");h();p();var DI=f.object({message:f.string(),organizationId:f.string(),walletId:f.string(),derivationInfo:xt.nullish().default(null),policyName:f.string().optional()}),vw=f.object({result:f.object({signature:f.string(),address:f.string(),publicKey:f.string()})});function zh(e,t){return Ae(e.authenticator,"ethereumSignMessage",t,vw)}i(zh,"ethereumSignMessage");h();p();var bw=f.union([hc,pc,mc]),VI=f.object({typedData:bw,organizationId:f.string(),walletId:f.string(),derivationInfo:xt.nullish().default(null),policyName:f.string().optional()}),ww=f.object({result:f.object({signature:f.string(),address:f.string(),publicKey:f.string()})});function qh(e,t){return Ae(e.authenticator,"ethereumSignTypedData",t,ww)}i(qh,"ethereumSignTypedData");h();p();var LI=f.object({organizationId:f.string(),walletId:f.string(),accounts:f.array(xt)}),xw=f.object({result:f.array(Yi)});function Hh(e,t){return Ae(e.authenticator,"getAccounts",t,xw)}i(Hh,"getAccounts");var wi;(function(e){e.RLP_ENCODED="RLP_ENCODED",e.PSBT="PSBT",e.EIP_1559="EIP_1559",e.SUI_BCS_ENCODED_TRANSACTION_DATA="SUI_BCS_ENCODED_TRANSACTION_DATA"})(wi||(wi={}));function Wh(e){return{createOrganization:i(t=>Ah(e,t),"createOrganization"),getOrganization:i(t=>Sh(e,t),"getOrganization"),createAuthenticator:i(t=>Ih(e,t),"createAuthenticator"),deleteAuthenticator:i(t=>_h(e,t),"deleteAuthenticator"),deleteUserFromOrganization:i(t=>Mh(e,t),"deleteUserFromOrganization"),createWallet:i(t=>kh(e,t),"createWallet"),getOrganizationWallets:i(t=>Ph(e,t),"getOrganizationWallets"),getOrCreateWalletWithTag:i(t=>Bh(e,t),"getOrCreateWalletWithTag"),getWalletWithTag:i(t=>Oh(e,t),"getWalletWithTag"),exportWallet:i(t=>Kh(e,t),"exportWallet"),grantOrganizationAccess:i(t=>Ch(e,t),"grantOrganizationAccess"),revokeOrganizationAccess:i(t=>Rh(e,t),"revokeOrganizationAccess"),initWalletImport:i(t=>Nh(e,t),"initWalletImport"),completeImportWallet:i(t=>Uh(e,t),"completeImportWallet"),getOrCreatePhantomOrganization:i(async()=>{let t=await e.authenticator.getPublicKey();return Dh(e,{publicKey:t})},"getOrCreatePhantomOrganization"),getPhantomOrganization:i(t=>Vh(e,t),"getPhantomOrganization"),getAuthenticatorPublicKey:i(()=>e.authenticator.getPublicKey(),"getAuthenticatorPublicKey"),signRawPayload:i(t=>Lh(e,t),"signRawPayload"),signTransaction:i(t=>Fh(e,t),"signTransaction"),signUtf8Message:i(t=>jh(e,t),"signUtf8Message"),ethereumSignMessage:i(t=>zh(e,t),"ethereumSignMessage"),ethereumSignTypedData:i(t=>qh(e,t),"ethereumSignTypedData"),getAccounts:i(t=>Hh(e,t),"getAccounts"),addUserToOrganization:i(t=>Eh(e,t),"addUserToOrganization"),updateUserInOrganization:i(t=>Th(e,t),"updateUserInOrganization")}}i(Wh,"createKMS");h();p();var jI=["createOrganization","getOrganization","getOrCreatePhantomOrganization","getPhantomOrganization","addUserToOrganization","deleteUserFromOrganization","updateUserInOrganization","createAuthenticator","deleteAuthenticator","createWallet","getOrganizationWallets","getOrCreateWalletWithTag","getWalletWithTag","exportWallet","grantOrganizationAccess","revokeOrganizationAccess","initWalletImport","completeImportWallet","signRawPayload","signTransaction","signUtf8Message","ethereumSignMessage","ethereumSignTypedData","getAccounts"],Aw=f.enum(jI),zI=f.object({method:Aw,params:f.record(f.unknown()),timestampMs:f.number().int().positive()});function $h(e){return zI.parse(e)}i($h,"validateKMSRpcPayload");h();p();function qI(e){switch(e){case"Solana":case"Sui":return"Ed25519";case"Ethereum":case"BitcoinSegwit":case"BitcoinTaproot":return"Secp256k1";default:return xe(e)}}i(qI,"getExpectedCurve");function HI(e,t){for(let{curve:r,addressFormat:n}of e){let o=qI(n);if(r!==o)throw new Error(`KMS ${t} request expected curve ${o} for address format ${n}, received ${r}.`)}}i(HI,"validateRequestedAccounts");async function Gh(e,t,r){HI(r,"getWalletWithTag");let{result:n}=await e.getPhantomOrganization({});if(!n)return null;let{result:o}=await e.getWalletWithTag({organizationId:n.organizationId,tag:t,accounts:r});return o?{organizationId:n.organizationId,walletId:o.walletId,walletName:o.walletName,accounts:o.accounts}:null}i(Gh,"getKMSWalletByTagIfExists");async function Zh(e,t,r){try{let n={curve:"Secp256k1",derivationPath:t.derivationPath,addressFormat:"Ethereum"};switch(r.signingType){case"transaction":{let{result:{signature:o}}=await e.signTransaction({transaction:{kind:wi.RLP_ENCODED,bytes:r.message},organizationId:t.organizationId,walletId:t.walletId,derivationInfo:n,policyName:r.policyName});return typeof o!="string"||!Ew(o)?ge(re.InternalError,"KMS returned invalid Ethereum signature"):{status:"success",signature:o}}case"message":{let o=WI(r.message),a=ot(o),{result:{signature:l}}=await e.ethereumSignMessage({message:a,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:n,policyName:r.policyName});return{status:"success",signature:Sw(l)}}case"typedData":{let{result:{signature:o}}=await e.ethereumSignTypedData({typedData:r.data,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:n,policyName:r.policyName});return{status:"success",signature:Sw(o)}}}}catch(n){return ge(re.InternalError,`KMS EVM signing failed: ${n instanceof Error?n.message:"Unknown error"}`)}}i(Zh,"signEVM");function Sw(e){let t=ir(e);return`0x${Qu.Buffer.from(t).toString("hex")}`}i(Sw,"base64UrlSignatureToHex");function WI(e){if(Ew(e)){let t=e.slice(2),r=t.length%2===0?t:`0${t}`;return Qu.Buffer.from(r,"hex")}return Qu.Buffer.from(e,"utf8")}i(WI,"normalizePersonalSignPayload");function Ew(e){return e.length<3||!(e.startsWith("0x")||e.startsWith("0X"))||e.length%2!==0?!1:/^[0-9a-fA-F]+$/.test(e.slice(2))}i(Ew,"looksLikeHex");h();p();function Mw(e,t){let r=ir(e),n=ir(t);return Buffer.concat([Buffer.from([0]),r,n]).toString("base64")}i(Mw,"serializeSuiSignature");async function Jh(e,t,r){try{let n={curve:"Ed25519",derivationPath:t.derivationPath,addressFormat:"Sui"};switch(r.signingType){case"transaction":{let o=ot(r.transaction),{result:{signature:a,publicKey:l}}=await e.signTransaction({transaction:{kind:wi.SUI_BCS_ENCODED_TRANSACTION_DATA,bytes:o},organizationId:t.organizationId,walletId:t.walletId,derivationInfo:n,policyName:r.policyName??null});return!a||!l?ge(re.InternalError,"KMS Sui signing failed: signature or public key not returned in response"):{status:"success",signature:Mw(a,l)}}case"personalMessage":{let o=new TextDecoder().decode(r.message),{result:{signature:a,publicKey:l}}=await e.signUtf8Message({message:o,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:n,algorithm:"Ed25519",policyName:r.policyName});return!a||!l?ge(re.InternalError,"KMS Sui signing failed: signature or public key not returned in response"):{status:"success",signature:Mw(a,l)}}}return ge(re.UnsupportedOperation,`Unsupported Sui signingType: ${r.signingType}`)}catch(n){return ge(re.InternalError,`KMS Sui signing failed: ${n instanceof Error?n.message:"Unknown error"}`)}}i(Jh,"signSui");h();p();async function Yh(e,t,r){try{if(r.signingType!=="transaction")return ge(re.UnsupportedOperation,"KMS does not support Bitcoin message signing");let n=null;switch(r.chainType){case _.BitcoinTaproot:n="BitcoinTaproot";break;case _.BitcoinNativeSegwit:n="BitcoinSegwit";break}if(!n)return ge(re.UnsupportedOperation,`KMS does not yet support Bitcoin address type: ${r.chainType}`);let o={curve:"Secp256k1",derivationPath:t.derivationPath,addressFormat:n},a=r.message,l=hm(a),d=l.length%2===0?l:`0${l}`,g=Z0(d),A=ot(g),{result:{transaction:T}}=await e.signTransaction({transaction:{kind:wi.PSBT,bytes:A},organizationId:t.organizationId,walletId:t.walletId,derivationInfo:o,policyName:void 0}),I;if(typeof T=="string")I=ir(T);else if(Array.isArray(T))I=new Uint8Array(T);else return ge(re.InternalError,"Unexpected Bitcoin transaction response format from KMS");return{status:"success",signature:G0(I)}}catch(n){return ge(re.InternalError,`KMS Bitcoin signing failed: ${n instanceof Error?n.message:"Unknown error"}`)}}i(Yh,"signBitcoin");var Tw=i(()=>({type:wt.KMS,sign:i(async(e,t,r)=>{switch(r.chainType){case _.Solana:return gh(e,t,r);case _.EVM:return Zh(e,t,r);case _.Sui:return Jh(e,t,r);case _.BitcoinTaproot:case _.BitcoinNativeSegwit:return Yh(e,t,r);default:return ge(re.UnsupportedOperation,`KMS signer does not support chain type: ${r.chainType}`)}},"sign")}),"createKMSSigner");h();p();var Iw=i(()=>({type:wt.KeyPair,sign:i(async(e,t)=>{if(!t.isKMSPKIAuthenticator)return ge(re.InvalidAddressType);try{let r=$h(t.payload),n=JSON.stringify(r),o=Buffer.from(n).toString("hex"),l=Oo.sign(o,e.privateKey,{prehash:!0}).toCompactRawBytes();return{status:"success",signature:ot(l)}}catch(r){if(r instanceof f.ZodError)return ge(re.InvalidRpcPayload,`Invalid KMS RPC payload: ${r.message}`);let n=r instanceof Error?r.message:"Failed to authenticate KMS RPC request";return ge(re.InternalError,n)}},"sign")}),"createKMSPKIAuthenticatorSigner");h();p();var _w=ue(nn());var Qh=ue(Yo()),kw=ue(Pi());var Pw=i(()=>({type:wt.KeyPair,sign:i((e,t)=>{if(t.chainType!==_.Solana)return Promise.resolve(ge(re.InvalidAddressType));let r;try{typeof t.message=="string"?t.signingType==="transaction"?r=Qh.default.decode(t.message):r=_w.Buffer.from(t.message,"utf8"):r=t.message}catch{return Promise.resolve(ge(re.InvalidMessageEncoding))}let n=Qh.default.encode(kw.default.sign.detached(r,e.privateKey));return Promise.resolve({status:"success",signature:n})},"sign")}),"createSolanaKeyPairSigner");h();p();h();p();h();p();var $o=ue(Pi(),1);h();p();h();p();h();p();h();p();h();p();function $I(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}i($I,"isBytes");function qs(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}i(qs,"anumber");function Ai(e,...t){if(!$I(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}i(Ai,"abytes");function Ow(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");qs(e.outputLen),qs(e.blockLen)}i(Ow,"ahash");function Si(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}i(Si,"aexists");function Xu(e,t){Ai(e);let r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}i(Xu,"aoutput");function ja(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}i(ja,"u32");function mn(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}i(mn,"clean");function el(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}i(el,"createView");var Kw=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Cw(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}i(Cw,"byteSwap");var Ln=Kw?e=>e:e=>Cw(e);function GI(e){for(let t=0;t<e.length;t++)e[t]=Cw(e[t]);return e}i(GI,"byteSwap32");var zo=Kw?e=>e:GI,Rw=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",ZI=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function tl(e){if(Ai(e),Rw)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=ZI[e[r]];return t}i(tl,"bytesToHex");var xi={_0:48,_9:57,A:65,F:70,a:97,f:102};function Bw(e){if(e>=xi._0&&e<=xi._9)return e-xi._0;if(e>=xi.A&&e<=xi.F)return e-(xi.A-10);if(e>=xi.a&&e<=xi.f)return e-(xi.a-10)}i(Bw,"asciiToBase16");function Nw(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Rw)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let o=0,a=0;o<r;o++,a+=2){let l=Bw(e.charCodeAt(a)),d=Bw(e.charCodeAt(a+1));if(l===void 0||d===void 0){let g=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+g+'" at index '+a)}n[o]=l*16+d}return n}i(Nw,"hexToBytes");function JI(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}i(JI,"utf8ToBytes");function gn(e){return typeof e=="string"&&(e=JI(e)),Ai(e),e}i(gn,"toBytes");var Xi=class{static{i(this,"Hash")}};function Uw(e){let t=i(n=>e().update(gn(n)).digest(),"hashC"),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}i(Uw,"createHasher");function Dw(e){let t=i((n,o)=>e(o).update(gn(n)).digest(),"hashC"),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}i(Dw,"createOptHasher");var Vw=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]);h();p();function YI(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let o=BigInt(32),a=BigInt(4294967295),l=Number(r>>o&a),d=Number(r&a),g=n?4:0,A=n?0:4;e.setUint32(t+g,l,n),e.setUint32(t+A,d,n)}i(YI,"setBigUint64");var rl=class extends Xi{static{i(this,"HashMD")}constructor(t,r,n,o){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=o,this.buffer=new Uint8Array(t),this.view=el(this.buffer)}update(t){Si(this),t=gn(t),Ai(t);let{view:r,buffer:n,blockLen:o}=this,a=t.length;for(let l=0;l<a;){let d=Math.min(o-this.pos,a-l);if(d===o){let g=el(t);for(;o<=a-l;l+=o)this.process(g,l);continue}n.set(t.subarray(l,l+d),this.pos),this.pos+=d,l+=d,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Si(this),Xu(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:o,isLE:a}=this,{pos:l}=this;r[l++]=128,mn(this.buffer.subarray(l)),this.padOffset>o-l&&(this.process(n,0),l=0);for(let I=l;I<o;I++)r[I]=0;YI(n,o-8,BigInt(this.length*8),a),this.process(n,0);let d=el(t),g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let A=g/4,T=this.get();if(A>T.length)throw new Error("_sha2: outputLen bigger than state");for(let I=0;I<A;I++)d.setUint32(4*I,T[I],a)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:o,finished:a,destroyed:l,pos:d}=this;return t.destroyed=l,t.finished=a,t.length=o,t.pos=d,o%r&&t.buffer.set(n),t}clone(){return this._cloneInto()}};var qt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);h();p();var nl=BigInt(4294967295),Lw=BigInt(32);function Xh(e,t=!1){return t?{h:Number(e&nl),l:Number(e>>Lw&nl)}:{h:Number(e>>Lw&nl)|0,l:Number(e&nl)|0}}i(Xh,"fromBig");function Fw(e,t=!1){let r=e.length,n=new Uint32Array(r),o=new Uint32Array(r);for(let a=0;a<r;a++){let{h:l,l:d}=Xh(e[a],t);[n[a],o[a]]=[l,d]}return[n,o]}i(Fw,"split");var ep=i((e,t,r)=>e>>>r,"shrSH"),tp=i((e,t,r)=>e<<32-r|t>>>r,"shrSL"),Fn=i((e,t,r)=>e>>>r|t<<32-r,"rotrSH"),jn=i((e,t,r)=>e<<32-r|t>>>r,"rotrSL"),qo=i((e,t,r)=>e<<64-r|t>>>r-32,"rotrBH"),Ho=i((e,t,r)=>e>>>r-32|t<<64-r,"rotrBL"),jw=i((e,t)=>t,"rotr32H"),zw=i((e,t)=>e,"rotr32L");function xr(e,t,r,n){let o=(t>>>0)+(n>>>0);return{h:e+r+(o/2**32|0)|0,l:o|0}}i(xr,"add");var za=i((e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),"add3L"),qa=i((e,t,r,n)=>t+r+n+(e/2**32|0)|0,"add3H"),qw=i((e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),"add4L"),Hw=i((e,t,r,n,o)=>t+r+n+o+(e/2**32|0)|0,"add4H"),Ww=i((e,t,r,n,o)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(o>>>0),"add5L"),$w=i((e,t,r,n,o,a)=>t+r+n+o+a+(e/2**32|0)|0,"add5H");var kt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ne=new Uint32Array(32);function eo(e,t,r,n,o,a){let l=o[a],d=o[a+1],g=ne[2*e],A=ne[2*e+1],T=ne[2*t],I=ne[2*t+1],k=ne[2*r],K=ne[2*r+1],C=ne[2*n],R=ne[2*n+1],V=za(g,T,l);A=qa(V,A,I,d),g=V|0,{Dh:R,Dl:C}={Dh:R^A,Dl:C^g},{Dh:R,Dl:C}={Dh:jw(R,C),Dl:zw(R,C)},{h:K,l:k}=xr(K,k,R,C),{Bh:I,Bl:T}={Bh:I^K,Bl:T^k},{Bh:I,Bl:T}={Bh:Fn(I,T,24),Bl:jn(I,T,24)},ne[2*e]=g,ne[2*e+1]=A,ne[2*t]=T,ne[2*t+1]=I,ne[2*r]=k,ne[2*r+1]=K,ne[2*n]=C,ne[2*n+1]=R}i(eo,"G1b");function to(e,t,r,n,o,a){let l=o[a],d=o[a+1],g=ne[2*e],A=ne[2*e+1],T=ne[2*t],I=ne[2*t+1],k=ne[2*r],K=ne[2*r+1],C=ne[2*n],R=ne[2*n+1],V=za(g,T,l);A=qa(V,A,I,d),g=V|0,{Dh:R,Dl:C}={Dh:R^A,Dl:C^g},{Dh:R,Dl:C}={Dh:Fn(R,C,16),Dl:jn(R,C,16)},{h:K,l:k}=xr(K,k,R,C),{Bh:I,Bl:T}={Bh:I^K,Bl:T^k},{Bh:I,Bl:T}={Bh:qo(I,T,63),Bl:Ho(I,T,63)},ne[2*e]=g,ne[2*e+1]=A,ne[2*t]=T,ne[2*t+1]=I,ne[2*r]=k,ne[2*r+1]=K,ne[2*n]=C,ne[2*n+1]=R}i(to,"G2b");function QI(e,t={},r,n,o){if(qs(r),e<0||e>r)throw new Error("outputLen bigger than keyLen");let{key:a,salt:l,personalization:d}=t;if(a!==void 0&&(a.length<1||a.length>r))throw new Error("key length must be undefined or 1.."+r);if(l!==void 0&&l.length!==n)throw new Error("salt must be undefined or "+n);if(d!==void 0&&d.length!==o)throw new Error("personalization must be undefined or "+o)}i(QI,"checkBlake2Opts");var rp=class extends Xi{static{i(this,"BLAKE2")}constructor(t,r){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,qs(t),qs(r),this.blockLen=t,this.outputLen=r,this.buffer=new Uint8Array(t),this.buffer32=ja(this.buffer)}update(t){Si(this),t=gn(t),Ai(t);let{blockLen:r,buffer:n,buffer32:o}=this,a=t.length,l=t.byteOffset,d=t.buffer;for(let g=0;g<a;){this.pos===r&&(zo(o),this.compress(o,0,!1),zo(o),this.pos=0);let A=Math.min(r-this.pos,a-g),T=l+g;if(A===r&&!(T%4)&&g+A<a){let I=new Uint32Array(d,T,Math.floor((a-g)/4));zo(I);for(let k=0;g+r<a;k+=o.length,g+=r)this.length+=r,this.compress(I,k,!1);zo(I);continue}n.set(t.subarray(g,g+A),this.pos),this.pos+=A,this.length+=A,g+=A}return this}digestInto(t){Si(this),Xu(t,this);let{pos:r,buffer32:n}=this;this.finished=!0,mn(this.buffer.subarray(r)),zo(n),this.compress(n,0,!0),zo(n);let o=ja(t);this.get().forEach((a,l)=>o[l]=Ln(a))}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){let{buffer:r,length:n,finished:o,destroyed:a,outputLen:l,pos:d}=this;return t||(t=new this.constructor({dkLen:l})),t.set(...this.get()),t.buffer.set(r),t.destroyed=a,t.finished=o,t.length=n,t.pos=d,t.outputLen=l,t}clone(){return this._cloneInto()}},il=class extends rp{static{i(this,"BLAKE2b")}constructor(t={}){let r=t.dkLen===void 0?64:t.dkLen;super(128,r),this.v0l=kt[0]|0,this.v0h=kt[1]|0,this.v1l=kt[2]|0,this.v1h=kt[3]|0,this.v2l=kt[4]|0,this.v2h=kt[5]|0,this.v3l=kt[6]|0,this.v3h=kt[7]|0,this.v4l=kt[8]|0,this.v4h=kt[9]|0,this.v5l=kt[10]|0,this.v5h=kt[11]|0,this.v6l=kt[12]|0,this.v6h=kt[13]|0,this.v7l=kt[14]|0,this.v7h=kt[15]|0,QI(r,t,64,16,16);let{key:n,personalization:o,salt:a}=t,l=0;if(n!==void 0&&(n=gn(n),l=n.length),this.v0l^=this.outputLen|l<<8|65536|1<<24,a!==void 0){a=gn(a);let d=ja(a);this.v4l^=Ln(d[0]),this.v4h^=Ln(d[1]),this.v5l^=Ln(d[2]),this.v5h^=Ln(d[3])}if(o!==void 0){o=gn(o);let d=ja(o);this.v6l^=Ln(d[0]),this.v6h^=Ln(d[1]),this.v7l^=Ln(d[2]),this.v7h^=Ln(d[3])}if(n!==void 0){let d=new Uint8Array(this.blockLen);d.set(n),this.update(d)}}get(){let{v0l:t,v0h:r,v1l:n,v1h:o,v2l:a,v2h:l,v3l:d,v3h:g,v4l:A,v4h:T,v5l:I,v5h:k,v6l:K,v6h:C,v7l:R,v7h:V}=this;return[t,r,n,o,a,l,d,g,A,T,I,k,K,C,R,V]}set(t,r,n,o,a,l,d,g,A,T,I,k,K,C,R,V){this.v0l=t|0,this.v0h=r|0,this.v1l=n|0,this.v1h=o|0,this.v2l=a|0,this.v2h=l|0,this.v3l=d|0,this.v3h=g|0,this.v4l=A|0,this.v4h=T|0,this.v5l=I|0,this.v5h=k|0,this.v6l=K|0,this.v6h=C|0,this.v7l=R|0,this.v7h=V|0}compress(t,r,n){this.get().forEach((g,A)=>ne[A]=g),ne.set(kt,16);let{h:o,l:a}=Xh(BigInt(this.length));ne[24]=kt[8]^a,ne[25]=kt[9]^o,n&&(ne[28]=~ne[28],ne[29]=~ne[29]);let l=0,d=Vw;for(let g=0;g<12;g++)eo(0,4,8,12,t,r+2*d[l++]),to(0,4,8,12,t,r+2*d[l++]),eo(1,5,9,13,t,r+2*d[l++]),to(1,5,9,13,t,r+2*d[l++]),eo(2,6,10,14,t,r+2*d[l++]),to(2,6,10,14,t,r+2*d[l++]),eo(3,7,11,15,t,r+2*d[l++]),to(3,7,11,15,t,r+2*d[l++]),eo(0,5,10,15,t,r+2*d[l++]),to(0,5,10,15,t,r+2*d[l++]),eo(1,6,11,12,t,r+2*d[l++]),to(1,6,11,12,t,r+2*d[l++]),eo(2,7,8,13,t,r+2*d[l++]),to(2,7,8,13,t,r+2*d[l++]),eo(3,4,9,14,t,r+2*d[l++]),to(3,4,9,14,t,r+2*d[l++]);this.v0l^=ne[0]^ne[16],this.v0h^=ne[1]^ne[17],this.v1l^=ne[2]^ne[18],this.v1h^=ne[3]^ne[19],this.v2l^=ne[4]^ne[20],this.v2h^=ne[5]^ne[21],this.v3l^=ne[6]^ne[22],this.v3h^=ne[7]^ne[23],this.v4l^=ne[8]^ne[24],this.v4h^=ne[9]^ne[25],this.v5l^=ne[10]^ne[26],this.v5h^=ne[11]^ne[27],this.v6l^=ne[12]^ne[28],this.v6h^=ne[13]^ne[29],this.v7l^=ne[14]^ne[30],this.v7h^=ne[15]^ne[31],mn(ne)}destroy(){this.destroyed=!0,mn(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Zw=Dw(e=>new il(e));var Wo=Zw;var Ga=ue(oA(),1);h();p();h();p();h();p();h();p();var ro=32;function Jw(e){return XI(e)&&e_(e)===ro}i(Jw,"isValidSuiAddress");function zn(e,t=!1){let r=e.toLowerCase();return!t&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(ro*2,"0")}`}i(zn,"normalizeSuiAddress");function XI(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}i(XI,"isHex");function e_(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}i(e_,"getHexByteLength");h();p();var t_=/^vector<(.+)>$/,r_=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,Ha=class e{static{i(this,"TypeTagSerializer")}static parseFromStr(t,r=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};let n=t.match(t_);if(n)return{vector:e.parseFromStr(n[1],r)};let o=t.match(r_);if(o)return{struct:{address:r?zn(o[1]):o[1],module:o[2],name:o[3],typeParams:o[5]===void 0?[]:e.parseStructTypeArgs(o[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,r=!1){return sm(t).map(n=>e.parseFromStr(n,r))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${e.tagToString(t.vector)}>`;if("struct"in t){let r=t.struct,n=r.typeParams.map(e.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}};function n_(e){return B.u64({name:"unsafe_u64",...e}).transform({input:i(t=>t,"input"),output:i(t=>Number(t),"output")})}i(n_,"unsafe_u64");function i_(e){return B.enum("Option",{None:null,Some:e})}i(i_,"optionEnum");var pt=B.bytes(ro).transform({validate:i(e=>{let t=typeof e=="string"?e:po(e);if(!t||!Jw(zn(t)))throw new Error(`Invalid Sui address ${t}`)},"validate"),input:i(e=>typeof e=="string"?gc(zn(e)):e,"input"),output:i(e=>zn(po(e)),"output")}),Ar=B.vector(B.u8()).transform({name:"ObjectDigest",input:i(e=>sf(e),"input"),output:i(e=>om(new Uint8Array(e)),"output"),validate:i(e=>{if(sf(e).length!==32)throw new Error("ObjectDigest must be 32 bytes")},"validate")}),dr=B.struct("SuiObjectRef",{objectId:pt,version:B.u64(),digest:Ar}),np=B.struct("SharedObjectRef",{objectId:pt,initialSharedVersion:B.u64(),mutable:B.bool()}),ip=B.enum("ObjectArg",{ImmOrOwnedObject:dr,SharedObject:np,Receiving:dr}),op=B.enum("CallArg",{Pure:B.struct("Pure",{bytes:B.vector(B.u8()).transform({input:i(e=>typeof e=="string"?nr(e):e,"input"),output:i(e=>Ot(new Uint8Array(e)),"output")})}),Object:ip}),sp=B.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:B.lazy(()=>sp),struct:B.lazy(()=>dp),u16:null,u32:null,u256:null}),ol=sp.transform({input:i(e=>typeof e=="string"?Ha.parseFromStr(e,!0):e,"input"),output:i(e=>Ha.tagToString(e),"output")}),yn=B.enum("Argument",{GasCoin:null,Input:B.u16(),Result:B.u16(),NestedResult:B.tuple([B.u16(),B.u16()])}),ap=B.struct("ProgrammableMoveCall",{package:pt,module:B.string(),function:B.string(),typeArguments:B.vector(ol),arguments:B.vector(yn)}),cp=B.enum("Command",{MoveCall:ap,TransferObjects:B.struct("TransferObjects",{objects:B.vector(yn),address:yn}),SplitCoins:B.struct("SplitCoins",{coin:yn,amounts:B.vector(yn)}),MergeCoins:B.struct("MergeCoins",{destination:yn,sources:B.vector(yn)}),Publish:B.struct("Publish",{modules:B.vector(B.vector(B.u8()).transform({input:i(e=>typeof e=="string"?nr(e):e,"input"),output:i(e=>Ot(new Uint8Array(e)),"output")})),dependencies:B.vector(pt)}),MakeMoveVec:B.struct("MakeMoveVec",{type:i_(ol).transform({input:i(e=>e===null?{None:!0}:{Some:e},"input"),output:i(e=>e.Some??null,"output")}),elements:B.vector(yn)}),Upgrade:B.struct("Upgrade",{modules:B.vector(B.vector(B.u8()).transform({input:i(e=>typeof e=="string"?nr(e):e,"input"),output:i(e=>Ot(new Uint8Array(e)),"output")})),dependencies:B.vector(pt),package:pt,ticket:yn})}),up=B.struct("ProgrammableTransaction",{inputs:B.vector(op),commands:B.vector(cp)}),lp=B.enum("TransactionKind",{ProgrammableTransaction:up,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),fp=B.enum("TransactionExpiration",{None:null,Epoch:n_()}),dp=B.struct("StructTag",{address:pt,module:B.string(),name:B.string(),typeParams:B.vector(sp)}),hp=B.struct("GasData",{payment:B.vector(dr),owner:pt,price:B.u64(),budget:B.u64()}),pp=B.struct("TransactionDataV1",{kind:lp,sender:pt,gasData:hp,expiration:fp}),mp=B.enum("TransactionData",{V1:pp}),gp=B.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),yp=B.enum("IntentVersion",{V0:null}),vp=B.enum("AppId",{Sui:null}),bp=B.struct("Intent",{scope:gp,version:yp,appId:vp});function wp(e){return B.struct(`IntentMessage<${e.name}>`,{intent:bp,value:e})}i(wp,"IntentMessage");var xp=B.enum("CompressedSignature",{ED25519:B.fixedArray(64,B.u8()),Secp256k1:B.fixedArray(64,B.u8()),Secp256r1:B.fixedArray(64,B.u8()),ZkLogin:B.vector(B.u8())}),Ap=B.enum("PublicKey",{ED25519:B.fixedArray(32,B.u8()),Secp256k1:B.fixedArray(33,B.u8()),Secp256r1:B.fixedArray(33,B.u8()),ZkLogin:B.vector(B.u8())}),Sp=B.struct("MultiSigPkMap",{pubKey:Ap,weight:B.u8()}),Ep=B.struct("MultiSigPublicKey",{pk_map:B.vector(Sp),threshold:B.u16()}),Yw=B.struct("MultiSig",{sigs:B.vector(xp),bitmap:B.u16(),multisig_pk:Ep}),o_=B.vector(B.u8()).transform({input:i(e=>typeof e=="string"?nr(e):e,"input"),output:i(e=>Ot(new Uint8Array(e)),"output")}),Mp=B.struct("SenderSignedTransaction",{intentMessage:wp(mp),txSignatures:B.vector(o_)}),Qw=B.vector(Mp,{name:"SenderSignedData"});h();p();var s_=B.enum("PackageUpgradeError",{UnableToFetchPackage:B.struct("UnableToFetchPackage",{packageId:pt}),NotAPackage:B.struct("NotAPackage",{objectId:pt}),IncompatibleUpgrade:null,DigestDoesNotMatch:B.struct("DigestDoesNotMatch",{digest:B.vector(B.u8())}),UnknownUpgradePolicy:B.struct("UnknownUpgradePolicy",{policy:B.u8()}),PackageIDDoesNotMatch:B.struct("PackageIDDoesNotMatch",{packageId:pt,ticketId:pt})}),a_=B.struct("ModuleId",{address:pt,name:B.string()}),Xw=B.struct("MoveLocation",{module:a_,function:B.u16(),instruction:B.u16(),functionName:B.option(B.string())}),c_=B.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:B.struct("IndexOutOfBounds",{idx:B.u16()}),SecondaryIndexOutOfBounds:B.struct("SecondaryIndexOutOfBounds",{resultIdx:B.u16(),secondaryIdx:B.u16()}),InvalidResultArity:B.struct("InvalidResultArity",{resultIdx:B.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),u_=B.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),l_=B.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:B.struct("MoveObjectTooBig",{objectSize:B.u64(),maxObjectSize:B.u64()}),MovePackageTooBig:B.struct("MovePackageTooBig",{objectSize:B.u64(),maxObjectSize:B.u64()}),CircularObjectOwnership:B.struct("CircularObjectOwnership",{object:pt}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:B.option(Xw),MoveAbort:B.tuple([Xw,B.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:B.struct("CommandArgumentError",{argIdx:B.u16(),kind:c_}),TypeArgumentError:B.struct("TypeArgumentError",{argumentIdx:B.u16(),kind:u_}),UnusedValueWithoutDrop:B.struct("UnusedValueWithoutDrop",{resultIdx:B.u16(),secondaryIdx:B.u16()}),InvalidPublicFunctionReturnType:B.struct("InvalidPublicFunctionReturnType",{idx:B.u16()}),InvalidTransferObject:null,EffectsTooLarge:B.struct("EffectsTooLarge",{currentSize:B.u64(),maxSize:B.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:B.struct("PackageUpgradeError",{upgradeError:s_}),WrittenObjectsTooLarge:B.struct("WrittenObjectsTooLarge",{currentSize:B.u64(),maxSize:B.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:B.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:B.vector(pt)}),AddressDeniedForCoin:B.struct("AddressDeniedForCoin",{address:pt,coinType:B.string()}),CoinTypeGlobalPause:B.struct("CoinTypeGlobalPause",{coinType:B.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),ex=B.enum("ExecutionStatus",{Success:null,Failed:B.struct("ExecutionFailed",{error:l_,command:B.option(B.u64())})}),tx=B.struct("GasCostSummary",{computationCost:B.u64(),storageCost:B.u64(),storageRebate:B.u64(),nonRefundableStorageFee:B.u64()}),Hs=B.enum("Owner",{AddressOwner:pt,ObjectOwner:pt,Shared:B.struct("Shared",{initialSharedVersion:B.u64()}),Immutable:null}),f_=B.struct("TransactionEffectsV1",{status:ex,executedEpoch:B.u64(),gasUsed:tx,modifiedAtVersions:B.vector(B.tuple([pt,B.u64()])),sharedObjects:B.vector(dr),transactionDigest:Ar,created:B.vector(B.tuple([dr,Hs])),mutated:B.vector(B.tuple([dr,Hs])),unwrapped:B.vector(B.tuple([dr,Hs])),deleted:B.vector(dr),unwrappedThenDeleted:B.vector(dr),wrapped:B.vector(dr),gasObject:B.tuple([dr,Hs]),eventsDigest:B.option(Ar),dependencies:B.vector(Ar)}),Tp=B.tuple([B.u64(),Ar]),d_=B.enum("ObjectIn",{NotExist:null,Exist:B.tuple([Tp,Hs])}),h_=B.enum("ObjectOut",{NotExist:null,ObjectWrite:B.tuple([Ar,Hs]),PackageWrite:Tp}),p_=B.enum("IDOperation",{None:null,Created:null,Deleted:null}),m_=B.struct("EffectsObjectChange",{inputState:d_,outputState:h_,idOperation:p_}),g_=B.enum("UnchangedSharedKind",{ReadOnlyRoot:Tp,MutateDeleted:B.u64(),ReadDeleted:B.u64(),Cancelled:B.u64(),PerEpochConfig:null}),y_=B.struct("TransactionEffectsV2",{status:ex,executedEpoch:B.u64(),gasUsed:tx,transactionDigest:Ar,gasObjectIndex:B.option(B.u32()),eventsDigest:B.option(Ar),dependencies:B.vector(Ar),lamportVersion:B.u64(),changedObjects:B.vector(B.tuple([pt,m_])),unchangedSharedObjects:B.vector(B.tuple([pt,g_])),auxDataDigest:B.option(Ar)}),rx=B.enum("TransactionEffects",{V1:f_,V2:y_});var Ei={...B,U8:B.u8(),U16:B.u16(),U32:B.u32(),U64:B.u64(),U128:B.u128(),U256:B.u256(),ULEB128:B.uleb128(),Bool:B.bool(),String:B.string(),Address:pt,AppId:vp,Argument:yn,CallArg:op,CompressedSignature:xp,GasData:hp,Intent:bp,IntentMessage:wp,IntentScope:gp,IntentVersion:yp,MultiSig:Yw,MultiSigPkMap:Sp,MultiSigPublicKey:Ep,ObjectArg:ip,ObjectDigest:Ar,ProgrammableMoveCall:ap,ProgrammableTransaction:up,PublicKey:Ap,SenderSignedData:Qw,SenderSignedTransaction:Mp,SharedObjectRef:np,StructTag:dp,SuiObjectRef:dr,Command:cp,TransactionData:mp,TransactionDataV1:pp,TransactionExpiration:fp,TransactionKind:lp,TypeTag:ol,TransactionEffects:rx};function sl(e,t){return Ei.IntentMessage(Ei.fixedArray(t.length,Ei.u8())).serialize({intent:{scope:{[e]:!0},version:{V0:!0},appId:{Sui:!0}},value:t}).toBytes()}i(sl,"messageWithIntent");h();p();var Mi={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5},nx={ED25519:32,Secp256k1:33,Secp256r1:33},al={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin"};h();p();h();p();h();p();function Ip(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}i(Ip,"bytesEqual");var Ws=class{static{i(this,"PublicKey")}equals(t){return Ip(this.toRawBytes(),t.toRawBytes())}toBase64(){return Ot(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){let t=this.toSuiBytes();return Ot(t)}verifyWithIntent(t,r,n){let o=sl(n,t),a=Wo(o,{dkLen:32});return this.verify(a,r)}verifyPersonalMessage(t,r){return this.verifyWithIntent(Ei.vector(Ei.u8()).serialize(t).toBytes(),r,"PersonalMessage")}verifyTransaction(t,r){return this.verifyWithIntent(t,r,"TransactionData")}toSuiBytes(){let t=this.toRawBytes(),r=new Uint8Array(t.length+1);return r.set([this.flag()]),r.set(t,1),r}toSuiAddress(){return zn(tl(Wo(this.toSuiBytes(),{dkLen:32})).slice(0,ro*2))}};h();p();var ix=i(e=>{throw TypeError(e)},"__typeError"),ox=i((e,t,r)=>t.has(e)||ix("Cannot "+r),"__accessCheck"),cl=i((e,t,r)=>(ox(e,t,"read from private field"),r?r.call(e):t.get(e)),"__privateGet"),ul=i((e,t,r)=>t.has(e)?ix("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),"__privateAdd"),ll=i((e,t,r,n)=>(ox(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),"__privateSet"),fl,dl,hl,pl,_p=class extends Error{static{i(this,"SuiGraphQLRequestError")}},ml=class{static{i(this,"SuiGraphQLClient")}constructor({url:t,fetch:r=fetch,headers:n={},queries:o={}}){ul(this,fl),ul(this,dl),ul(this,hl),ul(this,pl),ll(this,fl,t),ll(this,dl,o),ll(this,hl,n),ll(this,pl,(...a)=>r(...a))}async query(t){let r=await cl(this,pl).call(this,cl(this,fl),{method:"POST",headers:{"Content-Type":"application/json",...cl(this,hl)},body:JSON.stringify({query:typeof t.query=="string"?String(t.query):am(t.query),variables:t.variables,extensions:t.extensions,operationName:t.operationName})});if(!r.ok)throw new _p(`GraphQL request failed: ${r.statusText} (${r.status})`);return await r.json()}async execute(t,r){return this.query({...r,query:cl(this,dl)[t]})}};fl=new WeakMap;dl=new WeakMap;hl=new WeakMap;pl=new WeakMap;h();p();var sx=cm();h();p();function v_(e){if(e.length!==1)throw new Error("Invalid base64Url character: "+e);let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(e);if(r===-1)throw new Error("Invalid base64Url character: "+e);let n=r.toString(2).padStart(6,"0");return Array.from(n).map(Number)}i(v_,"base64UrlCharTo6Bits");function b_(e){let t=[];for(let r=0;r<e.length;r++){let n=e.charAt(r),o=v_(n);t=t.concat(o)}return t}i(b_,"base64UrlStringToBitVector");function w_(e,t){if(e.length<2)throw new Error(`Input (s = ${e}) is not tightly packed because s.length < 2`);let r=b_(e),n=t%4;if(n!==0)if(n===1)r=r.slice(2);else if(n===2)r=r.slice(4);else throw new Error(`Input (s = ${e}) is not tightly packed because i%4 = 3 (i = ${t}))`);let o=(t+e.length-1)%4;if(o!==3)if(o===2)r=r.slice(0,r.length-2);else if(o===1)r=r.slice(0,r.length-4);else throw new Error(`Input (s = ${e}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${t}))`);if(r.length%8!==0)throw new Error("We should never reach here...");let a=new Uint8Array(Math.floor(r.length/8)),l=0;for(let d=0;d<r.length;d+=8){let g=r.slice(d,d+8),A=parseInt(g.join(""),2);a[l++]=A}return new TextDecoder().decode(a)}i(w_,"decodeBase64URL");function x_(e){if(!(e.slice(-1)==="}"||e.slice(-1)===","))throw new Error("Invalid claim");let t=JSON.parse("{"+e.slice(0,-1)+"}");if(Object.keys(t).length!==1)throw new Error("Invalid claim");let r=Object.keys(t)[0];return[r,t[r]]}i(x_,"verifyExtendedClaim");function ax(e,t){let r=w_(e.value,e.indexMod4),[n,o]=x_(r);if(n!==t)throw new Error(`Invalid field name: found ${n} expected ${t}`);return o}i(ax,"extractClaimValue");h();p();h();p();var cx=B.struct("ZkLoginSignature",{inputs:B.struct("ZkLoginSignatureInputs",{proofPoints:B.struct("ZkLoginSignatureInputsProofPoints",{a:B.vector(B.string()),b:B.vector(B.vector(B.string())),c:B.vector(B.string())}),issBase64Details:B.struct("ZkLoginSignatureInputsClaim",{value:B.string(),indexMod4:B.u8()}),headerBase64:B.string(),addressSeed:B.string()}),maxEpoch:B.u64(),userSignature:B.vector(B.u8())});function ux(e){return cx.parse(typeof e=="string"?nr(e):e)}i(ux,"parseZkLoginSignature");h();p();function A_(e){for(let t=0;t<e.length;t++)if(e[t]!==0)return t;return-1}i(A_,"findFirstNonZeroIndex");function gl(e,t){let r=e.toString(16);return Nw(r.padStart(t*2,"0").slice(-t*2))}i(gl,"toPaddedBigEndianBytes");function kp(e,t){let r=gl(e,t),n=A_(r);return n===-1?new Uint8Array([0]):r.slice(n)}i(kp,"toBigEndianBytes");var dx=i(e=>{throw TypeError(e)},"__typeError"),hx=i((e,t,r)=>t.has(e)||dx("Cannot "+r),"__accessCheck"),Ti=i((e,t,r)=>(hx(e,t,"read from private field"),r?r.call(e):t.get(e)),"__privateGet"),Pp=i((e,t,r)=>t.has(e)?dx("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),"__privateAdd"),$s=i((e,t,r,n)=>(hx(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),"__privateSet"),vn,Wa,$a,S_=class Bp extends Ws{static{i(this,"_ZkLoginPublicIdentifier")}constructor(t,{client:r}={}){super(),Pp(this,vn),Pp(this,Wa),Pp(this,$a),$s(this,Wa,r),typeof t=="string"?$s(this,vn,nr(t)):t instanceof Uint8Array?$s(this,vn,t):$s(this,vn,Uint8Array.from(t)),$s(this,$a,Ti(this,vn).length!==Ti(this,vn)[0]+1+32),Ti(this,$a)&&$s(this,vn,lx(Ti(this,vn)))}equals(t){return super.equals(t)}toSuiAddress(){if(Ti(this,$a)){let t=lx(Ti(this,vn),!0),r=new Uint8Array(t.length+1);return r[0]=this.flag(),r.set(t,1),zn(tl(Wo(r,{dkLen:32})).slice(0,ro*2))}return super.toSuiAddress()}toRawBytes(){return Ti(this,vn)}flag(){return Mi.ZkLogin}async verify(t,r){throw Error("does not support")}verifyPersonalMessage(t,r){let n=yl(r),o=new Bp(n.publicKey).toSuiAddress();return fx({address:o,bytes:Ot(t),signature:n.serializedSignature,intentScope:"PERSONAL_MESSAGE",client:Ti(this,Wa)})}verifyTransaction(t,r){let n=yl(r),o=new Bp(n.publicKey).toSuiAddress();return fx({address:o,bytes:Ot(t),signature:n.serializedSignature,intentScope:"TRANSACTION_DATA",client:Ti(this,Wa)})}};vn=new WeakMap;Wa=new WeakMap;$a=new WeakMap;var E_=S_;function M_(e,t,r){let n=r?.legacyAddress?kp(e,32):gl(e,32),o=new TextEncoder().encode(t),a=new Uint8Array(1+o.length+n.length);return a.set([o.length],0),a.set(o,1),a.set(n,1+o.length),new E_(a,r)}i(M_,"toZkLoginPublicIdentifier");var T_=sx(`
	query Zklogin(
		$bytes: Base64!
		$signature: Base64!
		$intentScope: ZkLoginIntentScope!
		$author: SuiAddress!
	) {
		verifyZkloginSignature(
			bytes: $bytes
			signature: $signature
			intentScope: $intentScope
			author: $author
		) {
			success
			errors
		}
	}
`);function lx(e,t=!1){let r=e[0]+1,n=BigInt(`0x${po(e.slice(r))}`),o=t?kp(n,32):gl(n,32),a=new Uint8Array(r+o.length);return a.set(e.slice(0,r),0),a.set(o,r),a}i(lx,"normalizeZkLoginPublicKeyBytes");async function fx({address:e,bytes:t,signature:r,intentScope:n,client:o=new ml({url:"https://sui-mainnet.mystenlabs.com/graphql"})}){let a=await o.query({query:T_,variables:{bytes:t,signature:r,intentScope:n,author:e}});return a.data?.verifyZkloginSignature.success===!0&&a.data?.verifyZkloginSignature.errors.length===0}i(fx,"graphqlVerifyZkLoginSignature");function yl(e){let t=typeof e=="string"?nr(e):e;if(t[0]!==Mi.ZkLogin)throw new Error("Invalid signature scheme");let r=t.slice(1),{inputs:n,maxEpoch:o,userSignature:a}=ux(r),{issBase64Details:l,addressSeed:d}=n,g=ax(l,"iss"),A=M_(BigInt(d),g);return{serializedSignature:Ot(t),signatureScheme:"ZkLogin",zkLogin:{inputs:n,maxEpoch:o,userSignature:a,iss:g,addressSeed:BigInt(d)},signature:t,publicKey:A.toRawBytes()}}i(yl,"parseSerializedZkLoginSignature");function px({signature:e,signatureScheme:t,publicKey:r}){if(!r)throw new Error("`publicKey` is required");let n=r.toRawBytes(),o=new Uint8Array(1+e.length+n.length);return o.set([Mi[t]]),o.set(e,1),o.set(n,1+e.length),Ot(o)}i(px,"toSerializedSignature");function mx(e){let t=nr(e),r=al[t[0]];switch(r){case"MultiSig":let n=Ei.MultiSig.parse(t.slice(1));return{serializedSignature:e,signatureScheme:r,multisig:n,bytes:t};case"ZkLogin":return yl(e);case"ED25519":case"Secp256k1":case"Secp256r1":let o=nx[r],a=t.slice(1,t.length-o),l=t.slice(1+a.length);return{serializedSignature:e,signatureScheme:r,signature:a,publicKey:l,bytes:t};default:throw new Error("Unsupported signature scheme")}}i(mx,"parseSerializedSignature");var Za=32;var gx="suiprivkey",Op=class{static{i(this,"Signer")}async signWithIntent(t,r){let n=sl(r,t),o=Wo(n,{dkLen:32});return{signature:px({signature:await this.sign(o),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:Ot(t)}}async signTransaction(t){return this.signWithIntent(t,"TransactionData")}async signPersonalMessage(t){let{signature:r}=await this.signWithIntent(B.vector(B.u8()).serialize(t).toBytes(),"PersonalMessage");return{bytes:Ot(t),signature:r}}toSuiAddress(){return this.getPublicKey().toSuiAddress()}},vl=class extends Op{static{i(this,"Keypair")}};function yx(e){let{prefix:t,words:r}=Ga.bech32.decode(e);if(t!==gx)throw new Error("invalid private key prefix");let n=new Uint8Array(Ga.bech32.fromWords(r)),o=n.slice(1);return{schema:al[n[0]],secretKey:o}}i(yx,"decodeSuiPrivateKey");function vx(e,t){if(e.length!==Za)throw new Error("Invalid bytes length");let r=Mi[t],n=new Uint8Array(e.length+1);return n.set([r]),n.set(e,1),Ga.bech32.encode(gx,Ga.bech32.toWords(n))}i(vx,"encodeSuiPrivateKey");h();p();function Kp(e){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(e)}i(Kp,"isValidHardenedPath");function I_(e){return um(e,"")}i(I_,"mnemonicToSeed");function bx(e){return po(I_(e))}i(bx,"mnemonicToSeedHex");h();p();h();p();var bl=class extends Xi{static{i(this,"HMAC")}constructor(t,r){super(),this.finished=!1,this.destroyed=!1,Ow(t);let n=gn(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,a=new Uint8Array(o);a.set(n.length>o?t.create().update(n).digest():n);for(let l=0;l<a.length;l++)a[l]^=54;this.iHash.update(a),this.oHash=t.create();for(let l=0;l<a.length;l++)a[l]^=106;this.oHash.update(a),mn(a)}update(t){return Si(this),this.iHash.update(t),this}digestInto(t){Si(this),Ai(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:o,destroyed:a,blockLen:l,outputLen:d}=this;return t=t,t.finished=o,t.destroyed=a,t.blockLen=l,t.outputLen=d,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},wl=i((e,t,r)=>new bl(e,t).update(r).digest(),"hmac");wl.create=(e,t)=>new bl(e,t);h();p();h();p();var wx=Fw(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),__=wx[0],k_=wx[1],no=new Uint32Array(80),io=new Uint32Array(80),xl=class extends rl{static{i(this,"SHA512")}constructor(t=64){super(128,t,16,!1),this.Ah=qt[0]|0,this.Al=qt[1]|0,this.Bh=qt[2]|0,this.Bl=qt[3]|0,this.Ch=qt[4]|0,this.Cl=qt[5]|0,this.Dh=qt[6]|0,this.Dl=qt[7]|0,this.Eh=qt[8]|0,this.El=qt[9]|0,this.Fh=qt[10]|0,this.Fl=qt[11]|0,this.Gh=qt[12]|0,this.Gl=qt[13]|0,this.Hh=qt[14]|0,this.Hl=qt[15]|0}get(){let{Ah:t,Al:r,Bh:n,Bl:o,Ch:a,Cl:l,Dh:d,Dl:g,Eh:A,El:T,Fh:I,Fl:k,Gh:K,Gl:C,Hh:R,Hl:V}=this;return[t,r,n,o,a,l,d,g,A,T,I,k,K,C,R,V]}set(t,r,n,o,a,l,d,g,A,T,I,k,K,C,R,V){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=o|0,this.Ch=a|0,this.Cl=l|0,this.Dh=d|0,this.Dl=g|0,this.Eh=A|0,this.El=T|0,this.Fh=I|0,this.Fl=k|0,this.Gh=K|0,this.Gl=C|0,this.Hh=R|0,this.Hl=V|0}process(t,r){for(let F=0;F<16;F++,r+=4)no[F]=t.getUint32(r),io[F]=t.getUint32(r+=4);for(let F=16;F<80;F++){let ce=no[F-15]|0,se=io[F-15]|0,ie=Fn(ce,se,1)^Fn(ce,se,8)^ep(ce,se,7),ae=jn(ce,se,1)^jn(ce,se,8)^tp(ce,se,7),W=no[F-2]|0,me=io[F-2]|0,x=Fn(W,me,19)^qo(W,me,61)^ep(W,me,6),s=jn(W,me,19)^Ho(W,me,61)^tp(W,me,6),u=qw(ae,s,io[F-7],io[F-16]),m=Hw(u,ie,x,no[F-7],no[F-16]);no[F]=m|0,io[F]=u|0}let{Ah:n,Al:o,Bh:a,Bl:l,Ch:d,Cl:g,Dh:A,Dl:T,Eh:I,El:k,Fh:K,Fl:C,Gh:R,Gl:V,Hh:q,Hl:Q}=this;for(let F=0;F<80;F++){let ce=Fn(I,k,14)^Fn(I,k,18)^qo(I,k,41),se=jn(I,k,14)^jn(I,k,18)^Ho(I,k,41),ie=I&K^~I&R,ae=k&C^~k&V,W=Ww(Q,se,ae,k_[F],io[F]),me=$w(W,q,ce,ie,__[F],no[F]),x=W|0,s=Fn(n,o,28)^qo(n,o,34)^qo(n,o,39),u=jn(n,o,28)^Ho(n,o,34)^Ho(n,o,39),m=n&a^n&d^a&d,y=o&l^o&g^l&g;q=R|0,Q=V|0,R=K|0,V=C|0,K=I|0,C=k|0,{h:I,l:k}=xr(A|0,T|0,me|0,x|0),A=d|0,T=g|0,d=a|0,g=l|0,a=n|0,l=o|0;let v=za(x,u,y);n=qa(v,me,s,m),o=v|0}({h:n,l:o}=xr(this.Ah|0,this.Al|0,n|0,o|0)),{h:a,l}=xr(this.Bh|0,this.Bl|0,a|0,l|0),{h:d,l:g}=xr(this.Ch|0,this.Cl|0,d|0,g|0),{h:A,l:T}=xr(this.Dh|0,this.Dl|0,A|0,T|0),{h:I,l:k}=xr(this.Eh|0,this.El|0,I|0,k|0),{h:K,l:C}=xr(this.Fh|0,this.Fl|0,K|0,C|0),{h:R,l:V}=xr(this.Gh|0,this.Gl|0,R|0,V|0),{h:q,l:Q}=xr(this.Hh|0,this.Hl|0,q|0,Q|0),this.set(n,o,a,l,d,g,A,T,I,k,K,C,R,V,q,Q)}roundClean(){mn(no,io)}destroy(){mn(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var xx=Uw(()=>new xl);var Cp=xx;var P_=ue(Pi(),1);var B_="ed25519 seed",O_=2147483648,K_=new RegExp("^m(\\/[0-9]+')+$"),Ax=i(e=>e.replace("'",""),"replaceDerive"),C_=i(e=>{let r=wl.create(Cp,B_).update(gc(e)).digest(),n=r.slice(0,32),o=r.slice(32);return{key:n,chainCode:o}},"getMasterKeyFromSeed"),R_=i(({key:e,chainCode:t},r)=>{let n=new ArrayBuffer(4);new DataView(n).setUint32(0,r);let a=new Uint8Array(1+e.length+n.byteLength);a.set(new Uint8Array(1).fill(0)),a.set(e,1),a.set(new Uint8Array(n,0,n.byteLength),e.length+1);let l=wl.create(Cp,t).update(a).digest(),d=l.slice(0,32),g=l.slice(32);return{key:d,chainCode:g}},"CKDPriv");var N_=i(e=>K_.test(e)?!e.split("/").slice(1).map(Ax).some(isNaN):!1,"isValidPath"),Rp=i((e,t,r=O_)=>{if(!N_(e))throw new Error("Invalid derivation path");let{key:n,chainCode:o}=C_(t);return e.split("/").slice(1).map(Ax).map(l=>parseInt(l,10)).reduce((l,d)=>R_(l,d+r),{key:n,chainCode:o})},"derivePath");h();p();var Sx=ue(Pi(),1);var Np=32,Ja=class extends Ws{static{i(this,"Ed25519PublicKey")}constructor(t){if(super(),typeof t=="string"?this.data=nr(t):t instanceof Uint8Array?this.data=t:this.data=Uint8Array.from(t),this.data.length!==Np)throw new Error(`Invalid public key input. Expected ${Np} bytes, got ${this.data.length}`)}equals(t){return super.equals(t)}toRawBytes(){return this.data}flag(){return Mi.ED25519}async verify(t,r){let n;if(typeof r=="string"){let o=mx(r);if(o.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!Ip(this.toRawBytes(),o.publicKey))throw new Error("Signature does not match public key");n=o.signature}else n=r;return Sx.default.sign.detached.verify(t,n,this.toRawBytes())}};Ja.SIZE=Np;var Up="m/44'/784'/0'/0'/0'",Ya=class e extends vl{static{i(this,"Ed25519Keypair")}constructor(t){super(),t?this.keypair=t:this.keypair=$o.default.sign.keyPair()}getKeyScheme(){return"ED25519"}static generate(){return new e($o.default.sign.keyPair())}static fromSecretKey(t,r){if(typeof t=="string"){let a=yx(t);if(a.schema!=="ED25519")throw new Error(`Expected a ED25519 keypair, got ${a.schema}`);return this.fromSecretKey(a.secretKey,r)}let n=t.length;if(n!==Za)throw new Error(`Wrong secretKey size. Expected ${Za} bytes, got ${n}.`);let o=$o.default.sign.keyPair.fromSeed(t);if(!r||!r.skipValidation){let l=new TextEncoder().encode("sui validation"),d=$o.default.sign.detached(l,o.secretKey);if(!$o.default.sign.detached.verify(l,d,o.publicKey))throw new Error("provided secretKey is invalid")}return new e(o)}getPublicKey(){return new Ja(this.keypair.publicKey)}getSecretKey(){return vx(this.keypair.secretKey.slice(0,Za),this.getKeyScheme())}async sign(t){return $o.default.sign.detached(t,this.keypair.secretKey)}static deriveKeypair(t,r){if(r==null&&(r=Up),!Kp(r))throw new Error("Invalid derivation path");let{key:n}=Rp(r,bx(t));return e.fromSecretKey(n)}static deriveKeypairFromSeed(t,r){if(r==null&&(r=Up),!Kp(r))throw new Error("Invalid derivation path");let{key:n}=Rp(r,t);return e.fromSecretKey(n)}};var Ex=i(()=>({type:wt.KeyPair,sign:i(async(e,t)=>{let r=Ya.fromSecretKey(e.privateKey);try{let n;switch(t.signingType){case"personalMessage":{n=await r.signPersonalMessage(t.message);break}case"transaction":{n=await r.signTransaction(t.transaction);break}}return Promise.resolve({status:"success",signature:n.signature})}catch(n){return console.error(n),Promise.resolve(ge(re.InvalidMessageEncoding))}},"sign")}),"createSuiKeyPairSigner");h();p();var Al=class{static{i(this,"MultiChainVaultSigner")}#e;constructor(t){this.#e=t}async signWithKeypair(t,r){if("isJWT"in r)return this.#e.keyPair.JWT.sign(t,r);if("isKMSPKIAuthenticator"in r)return this.#e.keyPair.KMSPKIAuthenticator.sign(t,r);if("isAgentWallet"in r)return this.#e.keyPair.Agent.sign(t,r);if("isCash"in r)return this.#e.keyPair.Cash.sign(t,r);let n=r.chainType;switch(n){case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return this.#e.keyPair[n].sign(t,r);case _.EVM:return this.#e.keyPair[n].sign(t,r);case _.Solana:return this.#e.keyPair[n].sign(t,r);case _.Sui:return this.#e.keyPair[n].sign(t,r)}}async signWithHardware(t,r,n){return this.#e.ledger.sign(t,r,n)}async signWithSolanaSeedVault(t,r,n){return this.#e.seedVault.sign(t,r,n)}async signWithKMS(t,r,n){return this.#e.kms.sign(t,r,n)}};h();p();var Mx=i(e=>hh.safeParse(e).success,"isVaultSignerParams");h();p();h();p();function Sl(e){return e.find(t=>t.type===P.Seedless)??e.find(t=>t.type===P.Seed)??e.find(t=>t.type===P.PrivateKey)}i(Sl,"selectKMSAuthenticatorSourceAccount");function U_(e){let t;async function r(){if(t)return t;let a=await ct(),l=Sl(a);if(!l)throw new Error("Vault requires a seed, seedless, or private key account to derive the KMS authenticator. Add a local secret before calling getKMSInstance().");return t=l,t}i(r,"getSigningAccount");async function n(){let a=await r();return Ps(e,a)}return i(n,"getKeyPair"),{getPublicKey:i(async()=>ot((await n()).publicKey),"getPublicKey"),signRpcPayload:i(async a=>{let l=await n(),d=await e.vaultSigner.signWithKeypair(l,{isKMSPKIAuthenticator:!0,payload:a});if("status"in d&&d.status==="error")throw new Error(d.message);return d.signature},"signRpcPayload")}}i(U_,"createVaultKMSPKIAuthenticator");function Qa(e){return Wh({authenticator:U_(e)})}i(Qa,"createVaultKMS");async function El(e,t,r){let n=t.chains[r]?.pathType;if(!n)return ge(re.InvalidAddressType,`Seed Account does not contain a chain address for the chain type ${r}.`);let o=await Ut(e,t.seedIdentifier);return e.keypairGenerator.generateKeypairFromSeed(o,t.derivationIndex,n)}i(El,"deriveKeyPairFromAddressType");async function Tx(e,t,r){let n=await ct(),o=n.find(a=>a.identifier===t);if(!o)return ge(re.InvalidAccountId,`Vault (${n.length} account(s) found) does not contain an account for the given identifier: ${t}`);if("isAgentWallet"in r)switch(o.type){case P.KMSVault:case P.Seedless:case P.Seed:case P.PrivateKey:{let a=await ku(e,o.identifier);return e.vaultSigner.signWithKeypair(a,r)}default:return ge(re.UnsupportedOperation,"Invalid signingAccount type provided for paramType")}if("isJWT"in r)switch(o.type){case P.Seedless:case P.Seed:case P.PrivateKey:{let a=await Ps(e,o);return e.vaultSigner.signWithKeypair(a,r)}default:return ge(re.UnsupportedOperation,"Invalid signingAccount type provided for paramType")}if("isKMSPKIAuthenticator"in r)return ge(re.UnsupportedOperation,"Signing with the KMS PKI authenticator key is not supported through the external vault interface, as this key is reserved for internal authentication purposes.");if("isCash"in r){if("isCashKMS"in r)switch(o.type){case P.Seedless:case P.Seed:case P.PrivateKey:{let l=Qa(e),d=await sv(l);return e.vaultSigner.signWithKMS(l,{organizationId:d.organizationId,walletId:d.walletId,derivationPath:d.account.derivationPath},r.data)}default:return ge(re.UnsupportedOperation,"Invalid signingAccount type provided for paramType")}let a=await Pu(e);return e.vaultSigner.signWithKeypair(a,r)}switch(o.type){case P.KMSVault:{let a=Qa(e),{organizationId:l,walletId:d}=o.kms,g=o.chains[r.chainType];if(!g)return ge(re.InvalidAddressType,`KMSVault account does not have a derivation path for chain type ${r.chainType}`);let A=si({pathType:g.pathType,index:o.derivationIndex});return e.vaultSigner.signWithKMS(a,{organizationId:l,walletId:d,derivationPath:A},r)}case P.Seedless:case P.Seed:{switch(r.chainType){case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let{enabledAddressTypes:a}=await e.fetchChainAvailability(),l={},d=Object.keys(o.chains).filter(g=>oa.safeParse(g).success).filter(g=>a.includes(g));for(let g of d){let A=await El(e,o,g);if("status"in A&&A.status==="error")return A;l[g]=A}return e.vaultSigner.signWithKeypair(l,r)}case _.EVM:{let a=await El(e,o,r.chainType);return"status"in a&&a.status==="error"?a:e.vaultSigner.signWithKeypair(a,r)}case _.Solana:{let a=await El(e,o,r.chainType);return"status"in a&&a.status==="error"?a:e.vaultSigner.signWithKeypair(a,r)}case _.Sui:{let a=await El(e,o,r.chainType);return"status"in a&&a.status==="error"?a:e.vaultSigner.signWithKeypair(a,r)}}break}case P.PrivateKey:{let a=await Li(e,o.privateKeyIdentifier);if(a.chainType!==r.chainType)return ge(re.InvalidAddressType,`Private Key account from accountID is a different chain type from params. Expected ${a.chainType}, got ${r.chainType}`);let l=e.keypairGenerator.generateKeypairFromPrivateKey(kr.from(a.privateKey),r.chainType);switch(r.chainType){case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:return e.vaultSigner.signWithKeypair({[r.chainType]:l},r);case _.EVM:return e.vaultSigner.signWithKeypair(l,r);case _.Solana:return e.vaultSigner.signWithKeypair(l,r);case _.Sui:return e.vaultSigner.signWithKeypair(l,r)}break}case P.Ledger:{let a=o.chains[r.chainType];if(!a)return ge(re.InvalidAddressType,`Ledger Account does not contain a chain address for the chain type ${r.chainType}.`);let l=tm.safeParse({pathType:a.pathType,index:o.derivationIndex});if(!l.success)return ge(re.InvalidDerivationPath,"Unsupported Derivation Path. Ledger account derivation path type is incompatible with ChainType in signing params.");let d=si(l.data);return e.vaultSigner.signWithHardware(t,d,r)}case P.SeedVault:{let{authToken:a,derivationPath:l,chainType:d}=o;return d!==r.chainType?ge(re.InvalidAddressType,`Solana Seed Vault account from accountID is a different chain type from params. Expected ${d}, got ${r.chainType}`):e.vaultSigner.signWithSolanaSeedVault(a,l,r)}case P.ReadOnly:return ge(re.UnsupportedOperation,"Read Only Accounts cannot sign transactions.");default:(a=>{throw new Error("invalid account type")})(o)}}i(Tx,"sign");h();p();function Ix(e){switch(e.type){case P.Seed:return Xa(e);case P.Seedless:return ec(e);case P.PrivateKey:return Vp(e);case P.Ledger:return Dp(e);case P.SeedVault:return Lp(e);case P.ReadOnly:return e;case P.KMSVault:return Ml(e)}}i(Ix,"toExternalVaultAccount");function Ml(e){let{chains:t,version:r,...n}=e,o={};for(let a of Object.keys(t)){let l=t[a];if(!l)continue;let d;switch(l.chainType){case _.Solana:case _.EVM:{let{publicKey:g,...A}=l;d={...A,address:g};break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let{addresses:g,...A}=l,T=Object.values(Bt).reduce((I,k)=>{let K=g?g[k]:void 0;if(!K)throw new Ri;return{...I,[k]:K}},{});d={...A,addresses:T};break}case _.Sui:{d=l;break}}o[a]=d}return{...n,chains:o}}i(Ml,"toExternalKMSVaultAccount");function Dp(e){let{chains:t,version:r,...n}=e,o={};for(let a of Object.keys(t)){let l=t[a];if(!l)continue;let d;switch(l.chainType){case _.Solana:case _.EVM:{let{publicKey:g,...A}=l;d={...A,address:g};break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let{addresses:g,...A}=l,T=Object.values(Bt).reduce((I,k)=>{let K=g?g[k]:void 0;if(!K)throw new Ri;return{...I,[k]:K}},{});d={...A,addresses:T};break}case _.Sui:{d=l;break}}o[a]=d}return{...n,chains:o}}i(Dp,"toExternalVaultLedgerAccount");function Vp(e){switch(e.chainType){case _.Solana:case _.EVM:{let{publicKey:t,version:r,...n}=e;return{...n,address:t}}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let{addresses:t,version:r,...n}=e,o=Object.values(Bt).reduce((a,l)=>{let d=t?t[l]:void 0;if(!d)throw new Ri;return{...a,[l]:d}},{});return{...n,addresses:o}}case _.Sui:return e}}i(Vp,"toExternalVaultPrivateKeyAccount");function Lp(e){let{publicKey:t,version:r,...n}=e;return{...n,address:t}}i(Lp,"toExternalSolanaSeedVaultAccount");function Xa(e){let{chains:t,version:r,...n}=e,o={};for(let a of Object.keys(t)){let l=t[a];if(!l)continue;let d;switch(l.chainType){case _.Solana:case _.EVM:{let{publicKey:g,...A}=l;d={...A,address:g};break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let{addresses:g,...A}=l,T=Object.values(Bt).reduce((I,k)=>{let K=g?g[k]:void 0;if(!K)throw new Ri;return{...I,[k]:K}},{});d={...A,addresses:T};break}case _.Sui:{d=l;break}}o[a]=d}return{...n,chains:o}}i(Xa,"toExternalVaultSeedAccount");function ec(e){let{chains:t,version:r,...n}=e,o={};for(let a of Object.keys(t)){let l=t[a];if(!l)continue;let d;switch(l.chainType){case _.Solana:case _.EVM:{let{publicKey:g,...A}=l;d={...A,address:g};break}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{let{addresses:g,...A}=l,T=Object.values(Bt).reduce((I,k)=>{let K=g?g[k]:void 0;if(!K)throw new Ri;return{...I,[k]:K}},{});d={...A,addresses:T};break}case _.Sui:d=l}o[a]=d}return{...n,chains:o}}i(ec,"toExternalVaultSeedlessAccount");var qn=Xe(function*(){return(yield ct()).map(Ix)}),Tl=au,Il=su;function D_(e){return{addSeedWithDefaultAccount:i((t,r)=>vy(e,t,r).then(Xa),"addSeedWithDefaultAccount"),addAccountForExistingSeed:i(t=>Qg(e,t).then(Xa),"addAccountForExistingSeed"),addSeedWithMultipleAccounts:i((t,r,n,o)=>fu(e,t,r,n,o).then(a=>a.map(Xa)),"addSeedWithMultipleAccounts"),addPrivateKeyAccount:i((t,r,n)=>dy(e,t,r,n).then(Vp),"addPrivateKeyAccount"),addLedgerAccounts:i((t,r)=>ly(e,t,r).then(n=>n.map(Dp)),"addLedgerAccounts"),addSolanaSeedVaultAccounts:i(t=>wy(e,t).then(r=>r.map(Lp)),"addSolanaSeedVaultAccounts"),addReadonlyAccount:i(t=>py(e,t),"addReadonlyAccount"),addKMSVaultAccount:i(async({organizationId:t,walletId:r,tag:n,derivationIndex:o,chains:a,apiEnvironment:l})=>qg(e,{organizationId:t,walletId:r,tag:n,derivationIndex:o,chains:a,apiEnvironment:l}).then(Ml),"addKMSVaultAccount"),upsertKMSVaultChains:i(async({organizationId:t,walletId:r,tag:n,derivationIndex:o,chains:a})=>Gg(e,{organizationId:t,walletId:r,tag:n,derivationIndex:o,chains:a}).then(Ml),"upsertKMSVaultChains"),deriveAddresses:i(()=>Iy(e),"deriveAddresses"),removeAccount:i(t=>iv(e,t),"removeAccount"),reorderAccount:i((t,r)=>ov(e,t,r),"reorderAccount"),exportEntropy:i(t=>In(e,t),"exportEntropy"),exportPrivateKey:i((t,r)=>du(e,t,r),"exportPrivateKey"),fetchAllAccounts:qn,fetchAllSeedMetas:Il,fetchAllSeedlessMetas:Tl,sign:i((t,r)=>Tx(e,t,r),"sign"),isExistingSeed:i(t=>As(e,t),"isExistingSeed"),checkVaultIntegrity:i(()=>Ty(e),"checkVaultIntegrity"),clearVault:i(()=>Fg(e),"clearVault"),addSeedlessWithMultipleAccounts:i((t,r,n)=>lu(e,t,r,n).then(o=>o.map(ec)),"addSeedlessWithMultipleAccounts"),addSeedlessWithDefaultAccount:i((t,r)=>yy(e,t,r).then(ec),"addSeedlessWithDefaultAccount"),addAccountForExistingSeedless:i(t=>my(e,t).then(ec),"addAccountForExistingSeedless"),getAuthenticationPublicKey:i(t=>tv(e,t),"getAuthenticationPublicKey"),getCashAddress:i(()=>nv(e),"getCashAddress"),getAgentAddress:i((t,r)=>Xy(e,t,r),"getAgentAddress"),getKMSInstance:i(()=>Qa(e),"getKMSInstance"),canDeriveKMSAuthenticator:i(async()=>{let t=await qn();return!!Sl(t)},"canDeriveKMSAuthenticator"),DO_NOT_USE_diagnoseSeedCacheDigests:i(()=>ky(e),"DO_NOT_USE_diagnoseSeedCacheDigests")}}i(D_,"createVault");var V_=Xe(function*(){return[...(yield qn()).reduce(Wt((r,n)=>{switch(n.type){case P.Seed:case P.Seedless:{r.add(n.seedIdentifier);break}case P.PrivateKey:{r.add(n.privateKeyIdentifier);break}case P.Ledger:case P.SeedVault:case P.ReadOnly:case P.KMSVault:break;default:xe(n);break}return r},0),new Set)]});h();p();var L_=i((e,t)=>e.filter(r=>{switch(r.type){case P.Seed:case P.Seedless:return r.seedIdentifier===t;case P.PrivateKey:return r.privateKeyIdentifier===t;case P.Ledger:case P.SeedVault:case P.ReadOnly:case P.KMSVault:return!1;default:xe(r);return}}),"getAccountsForSecretId");h();p();function F_(e){return Ci.get(e).networkNameOverride?.(e)??pe.getNetworkName(e,!0)}i(F_,"getBadgedNetworkName");h();p();function j_(){return{version:1,setting:{[_.Solana]:as,[_.EVM]:cs,[_.Sui]:ff}}}i(j_,"getDefaultNetworkSetting");h();p();h();p();h();p();function _x(e){switch(e){case _.Solana:return{curve:"Ed25519",addressFormat:"Solana"};case _.EVM:return{curve:"Secp256k1",addressFormat:"Ethereum"};case _.BitcoinTaproot:return{curve:"Secp256k1",addressFormat:"BitcoinTaproot"};case _.BitcoinNativeSegwit:return{curve:"Secp256k1",addressFormat:"BitcoinSegwit"};case _.BitcoinNestedSegwit:case _.BitcoinLegacy:throw new Error(`KMS accounts do not support Bitcoin address format ${e}.`);case _.Sui:return{curve:"Ed25519",addressFormat:"Sui"};default:throw new Error(`Unsupported chain type: ${e}`)}}i(_x,"getKMSCurveAndFormatForChainType");function kx(e){switch(e){case X.Bip44RootSolana:case X.Bip44Solana:case X.Bip44ChangeSolana:case X.DeprecatedSolana:return{curve:"Ed25519",addressFormat:"Solana"};case X.Bip44RootEthereum:case X.Bip44Ethereum:case X.Bip44EthereumSecondary:case X.Bip44EthereumTertiary:return{curve:"Secp256k1",addressFormat:"Ethereum"};case X.BitcoinTaproot:return{curve:"Secp256k1",addressFormat:"BitcoinTaproot"};case X.BitcoinNativeSegwit:return{curve:"Secp256k1",addressFormat:"BitcoinSegwit"};case X.BitcoinNestedSegwit:case X.BitcoinLegacy:throw new Error(`KMS accounts do not support Bitcoin derivation path ${e}.`);case X.Bip44Sui:return{curve:"Ed25519",addressFormat:"Sui"};default:throw new Error(`Unsupported derivation path type: ${e}`)}}i(kx,"getKMSCurveAndFormatForPathType");function _l(e,t=0){let r=[];for(let n of e)try{let o=kx(n),a=si({pathType:n,index:t});r.push({curve:o.curve,derivationPath:a,addressFormat:o.addressFormat})}catch{continue}return r}i(_l,"convertDerivationPathTypesToKMSInfo");async function z_(e=0){let t=sr().enabledAddressTypes,r=Jt(t);return _l(r,e)}i(z_,"getKMSDerivationPathsForIndex");var q_=new Set([_.Solana,_.EVM,_.Sui,_.BitcoinNativeSegwit,_.BitcoinTaproot]);async function H_(e=0){let r=(await sr()).enabledAddressTypes.filter(o=>q_.has(o));return Jt(r).map(o=>({chainType:sn.getAddressType(o),derivationIndex:e,pathType:o}))}i(H_,"getDefaultKMSVaultChainConfigs");async function kl(e=0){let t=await H_(e),r=t.map(a=>a.pathType),n=_l(r,e),o=t.map(({chainType:a,pathType:l})=>{let{addressFormat:d}=_x(a);return{chainType:a,pathType:l,derivationPath:si({pathType:l,index:e}),addressFormat:d}});return{derivations:n,conversionMetadata:o}}i(kl,"getDefaultKMSVaultDerivationsAndMetadata");h();p();function Px(e,t){return`${e}:${t}`}i(Px,"descriptorKey");function Pl(e,t){let r={},n=new Map;for(let o of t){let a=Px(o.addressFormat,o.derivationPath);if(n.has(a))throw new Error(`Duplicate KMS account request for ${a}`);n.set(a,{descriptor:o,used:!1})}for(let o of e){let{addressFormat:a,derivationPath:l,address:d,publicKey:g}=o,A=Px(a,l),T=n.get(A);if(!T)continue;if(T.used)throw new Error(`KMS returned duplicate account data for format=${a}, derivationPath=${l}.`);T.used=!0;let{chainType:I,pathType:k}=T.descriptor;r[I]=Wg(W_({chainType:I,pathType:k,address:d,publicKey:g}))}for(let{descriptor:o,used:a}of n.values())if(!a)throw new Error(`KMS did not return data for requested chain ${o.chainType} with path ${o.derivationPath}`);return{chains:r}}i(Pl,"convertKMSWalletToVaultAccountParams");function W_({chainType:e,pathType:t,address:r,publicKey:n}){switch(e){case _.Solana:return{chainType:e,pathType:t,address:r};case _.EVM:return{chainType:e,pathType:t,address:r};case _.Sui:{if(!n)throw new Error("KMS response missing required public key for Sui account conversion.");let o=ir(n);return{chainType:e,pathType:t,address:r,publicKey:o}}case _.BitcoinTaproot:case _.BitcoinNativeSegwit:case _.BitcoinNestedSegwit:case _.BitcoinLegacy:{if(!n)throw new Error("KMS response missing required public key for Bitcoin account conversion.");let o=ir(n),a=r?{[Bt.Mainnet]:r}:void 0;return{chainType:e,pathType:t,publicKey:o,addresses:a}}default:throw new Error(`Unsupported chain type ${e} returned from KMS conversion.`)}}i(W_,"createChainAddressInput");h();p();h();p();h();p();h();p();function Ht(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(M.NODE_ENV!=="production"){var o=e3[e],a=o?typeof o=="function"?o.apply(null,r):o:"unknown error nr: "+e;throw Error("[Immer] "+a)}throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(l){return"'"+l+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}i(Ht,"n");function Gs(e){return!!e&&!!e[Sr]}i(Gs,"r");function Zo(e){return!!e&&(function(t){if(!t||typeof t!="object")return!1;var r=Object.getPrototypeOf(t);if(r===null)return!0;var n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===t3}(e)||Array.isArray(e)||!!e[Dx]||!!e.constructor[Dx]||Jp(e)||Yp(e))}i(Zo,"t");function rc(e,t,r){r===void 0&&(r=!1),Js(e)===0?(r?Object.keys:r0)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,o){return t(o,n,e)})}i(rc,"i");function Js(e){var t=e[Sr];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Jp(e)?2:Yp(e)?3:0}i(Js,"o");function Hp(e,t){return Js(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}i(Hp,"u");function $_(e,t){return Js(e)===2?e.get(t):e[t]}i($_,"a");function Vx(e,t,r){var n=Js(e);n===2?e.set(t,r):n===3?(e.delete(t),e.add(r)):e[t]=r}i(Vx,"f");function G_(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}i(G_,"c");function Jp(e){return Q_&&e instanceof Map}i(Jp,"s");function Yp(e){return X_&&e instanceof Set}i(Yp,"v");function Go(e){return e.o||e.t}i(Go,"p");function Qp(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=r3(e);delete t[Sr];for(var r=r0(t),n=0;n<r.length;n++){var o=r[n],a=t[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}i(Qp,"l");function Xp(e,t){return t===void 0&&(t=!1),e0(e)||Gs(e)||!Zo(e)||(Js(e)>1&&(e.set=e.add=e.clear=e.delete=Z_),Object.freeze(e),t&&rc(e,function(r,n){return Xp(n,!0)},!0)),e}i(Xp,"d");function Z_(){Ht(2)}i(Z_,"h");function e0(e){return e==null||typeof e!="object"||Object.isFrozen(e)}i(e0,"y");function Hn(e){var t=n3[e];return t||Ht(18,e),t}i(Hn,"b");function Bx(){return M.NODE_ENV==="production"||Zs||Ht(0),Zs}i(Bx,"_");function Fp(e,t){t&&(Hn("Patches"),e.u=[],e.s=[],e.v=t)}i(Fp,"j");function Bl(e){Wp(e),e.p.forEach(J_),e.p=null}i(Bl,"O");function Wp(e){e===Zs&&(Zs=e.l)}i(Wp,"g");function Ox(e){return Zs={p:[],l:Zs,h:e,m:!0,_:0}}i(Ox,"w");function J_(e){var t=e[Sr];t.i===0||t.i===1?t.j():t.O=!0}i(J_,"S");function jp(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.g||Hn("ES5").S(t,e,n),n?(r[Sr].P&&(Bl(t),Ht(4)),Zo(e)&&(e=Ol(t,e),t.l||Kl(t,e)),t.u&&Hn("Patches").M(r[Sr].t,e,t.u,t.s)):e=Ol(t,r,[]),Bl(t),t.u&&t.v(t.u,t.s),e!==Lx?e:void 0}i(jp,"P");function Ol(e,t,r){if(e0(t))return t;var n=t[Sr];if(!n)return rc(t,function(a,l){return Kx(e,n,t,a,l,r)},!0),t;if(n.A!==e)return t;if(!n.P)return Kl(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var o=n.i===4||n.i===5?n.o=Qp(n.k):n.o;rc(n.i===3?new Set(o):o,function(a,l){return Kx(e,n,o,a,l,r)}),Kl(e,o,!1),r&&e.u&&Hn("Patches").R(n,r,e.u,e.s)}return n.o}i(Ol,"M");function Kx(e,t,r,n,o,a){if(M.NODE_ENV!=="production"&&o===r&&Ht(5),Gs(o)){var l=Ol(e,o,a&&t&&t.i!==3&&!Hp(t.D,n)?a.concat(n):void 0);if(Vx(r,n,l),!Gs(l))return;e.m=!1}if(Zo(o)&&!e0(o)){if(!e.h.F&&e._<1)return;Ol(e,o),t&&t.A.l||Kl(e,o)}}i(Kx,"A");function Kl(e,t,r){r===void 0&&(r=!1),e.h.F&&e.m&&Xp(t,r)}i(Kl,"x");function zp(e,t){var r=e[Sr];return(r?Go(r):e)[t]}i(zp,"z");function Cx(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}i(Cx,"I");function $p(e){e.P||(e.P=!0,e.l&&$p(e.l))}i($p,"k");function qp(e){e.o||(e.o=Qp(e.t))}i(qp,"E");function Gp(e,t,r){var n=Jp(t)?Hn("MapSet").N(t,r):Yp(t)?Hn("MapSet").T(t,r):e.g?function(o,a){var l=Array.isArray(o),d={i:l?1:0,A:a?a.A:Bx(),P:!1,I:!1,D:{},l:a,t:o,k:null,o:null,j:null,C:!1},g=d,A=Zp;l&&(g=[d],A=tc);var T=Proxy.revocable(g,A),I=T.revoke,k=T.proxy;return d.k=k,d.j=I,k}(t,r):Hn("ES5").J(t,r);return(r?r.A:Bx()).p.push(n),n}i(Gp,"R");function Y_(e){return Gs(e)||Ht(22,e),i(function t(r){if(!Zo(r))return r;var n,o=r[Sr],a=Js(r);if(o){if(!o.P&&(o.i<4||!Hn("ES5").K(o)))return o.t;o.I=!0,n=Rx(r,a),o.I=!1}else n=Rx(r,a);return rc(n,function(l,d){o&&$_(o.t,l)===d||Vx(n,l,t(d))}),a===3?new Set(n):n},"n")(e)}i(Y_,"D");function Rx(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Qp(e)}i(Rx,"F");var Nx,Zs,t0=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Q_=typeof Map<"u",X_=typeof Set<"u",Ux=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Lx=t0?Symbol.for("immer-nothing"):((Nx={})["immer-nothing"]=!0,Nx),Dx=t0?Symbol.for("immer-draftable"):"__$immer_draftable",Sr=t0?Symbol.for("immer-state"):"__$immer_state";var e3={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},t3=""+Object.prototype.constructor,r0=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,r3=Object.getOwnPropertyDescriptors||function(e){var t={};return r0(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},n3={},Zp={get:i(function(e,t){if(t===Sr)return e;var r=Go(e);if(!Hp(r,t))return function(o,a,l){var d,g=Cx(a,l);return g?"value"in g?g.value:(d=g.get)===null||d===void 0?void 0:d.call(o.k):void 0}(e,r,t);var n=r[t];return e.I||!Zo(n)?n:n===zp(e.t,t)?(qp(e),e.o[t]=Gp(e.A.h,n,e)):n},"get"),has:i(function(e,t){return t in Go(e)},"has"),ownKeys:i(function(e){return Reflect.ownKeys(Go(e))},"ownKeys"),set:i(function(e,t,r){var n=Cx(Go(e),t);if(n?.set)return n.set.call(e.k,r),!0;if(!e.P){var o=zp(Go(e),t),a=o?.[Sr];if(a&&a.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(G_(r,o)&&(r!==void 0||Hp(e.t,t)))return!0;qp(e),$p(e)}return e.o[t]===r&&typeof r!="number"&&(r!==void 0||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},"set"),deleteProperty:i(function(e,t){return zp(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,qp(e),$p(e)):delete e.D[t],e.o&&delete e.o[t],!0},"deleteProperty"),getOwnPropertyDescriptor:i(function(e,t){var r=Go(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},"getOwnPropertyDescriptor"),defineProperty:i(function(){Ht(11)},"defineProperty"),getPrototypeOf:i(function(e){return Object.getPrototypeOf(e.t)},"getPrototypeOf"),setPrototypeOf:i(function(){Ht(12)},"setPrototypeOf")},tc={};rc(Zp,function(e,t){tc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),tc.deleteProperty=function(e,t){return M.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Ht(13),tc.set.call(this,e,t,void 0)},tc.set=function(e,t,r){return M.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Ht(14),Zp.set.call(this,e[0],t,r,e[0])};var i3=function(){function e(r){var n=this;this.g=Ux,this.F=!0,this.produce=function(o,a,l){if(typeof o=="function"&&typeof a!="function"){var d=a;a=o;var g=n;return function(R){var V=this;R===void 0&&(R=d);for(var q=arguments.length,Q=Array(q>1?q-1:0),F=1;F<q;F++)Q[F-1]=arguments[F];return g.produce(R,function(ce){var se;return(se=a).call.apply(se,[V,ce].concat(Q))})}}var A;if(typeof a!="function"&&Ht(6),l!==void 0&&typeof l!="function"&&Ht(7),Zo(o)){var T=Ox(n),I=Gp(n,o,void 0),k=!0;try{A=a(I),k=!1}finally{k?Bl(T):Wp(T)}return typeof Promise<"u"&&A instanceof Promise?A.then(function(R){return Fp(T,l),jp(R,T)},function(R){throw Bl(T),R}):(Fp(T,l),jp(A,T))}if(!o||typeof o!="object"){if((A=a(o))===void 0&&(A=o),A===Lx&&(A=void 0),n.F&&Xp(A,!0),l){var K=[],C=[];Hn("Patches").M(o,A,K,C),l(K,C)}return A}Ht(21,o)},this.produceWithPatches=function(o,a){if(typeof o=="function")return function(A){for(var T=arguments.length,I=Array(T>1?T-1:0),k=1;k<T;k++)I[k-1]=arguments[k];return n.produceWithPatches(A,function(K){return o.apply(void 0,[K].concat(I))})};var l,d,g=n.produce(o,a,function(A,T){l=A,d=T});return typeof Promise<"u"&&g instanceof Promise?g.then(function(A){return[A,l,d]}):[g,l,d]},typeof r?.useProxies=="boolean"&&this.setUseProxies(r.useProxies),typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze)}i(e,"e");var t=e.prototype;return t.createDraft=function(r){Zo(r)||Ht(8),Gs(r)&&(r=Y_(r));var n=Ox(this),o=Gp(this,r,void 0);return o[Sr].C=!0,Wp(n),o},t.finishDraft=function(r,n){var o=r&&r[Sr];M.NODE_ENV!=="production"&&(o&&o.C||Ht(9),o.I&&Ht(10));var a=o.A;return Fp(a,n),jp(void 0,a)},t.setAutoFreeze=function(r){this.F=r},t.setUseProxies=function(r){r&&!Ux&&Ht(20),this.g=r},t.applyPatches=function(r,n){var o;for(o=n.length-1;o>=0;o--){var a=n[o];if(a.path.length===0&&a.op==="replace"){r=a.value;break}}o>-1&&(n=n.slice(o+1));var l=Hn("Patches").$;return Gs(r)?l(r,n):this.produce(r,function(d){return l(d,n)})},e}(),Er=new i3,n0=Er.produce,Zre=Er.produceWithPatches.bind(Er),Jre=Er.setAutoFreeze.bind(Er),Yre=Er.setUseProxies.bind(Er),Qre=Er.applyPatches.bind(Er),Xre=Er.createDraft.bind(Er),ene=Er.finishDraft.bind(Er),tne=n0;h();p();var be;(function(e){e.TermsHaveBeenAcknowledgedLastSeenVersion="termsHaveBeenAcknowledgedLastSeenVersion",e.NotificationsHaveBeenAcknowledgedLastSeenVersion="notificationsHaveBeenAcknowledgedLastSeenVersion",e.NetworkSetting="networkSetting",e.DeveloperMode="developerMode",e.SelectedAccount=".phantom-labs.account.selectedAccount",e.AccountsMetadata=".phantom-labs.account.accountMetadata",e.AccountsBalanceMetadata=".phantom-labs.account.accountMetadata.balance",e.MigratedWithInvalidChecksum=".phantom-labs.account.migratedWithInvalidChecksum",e.AccountMetas="accountMetas"})(be||(be={}));var o3=[be.AccountsMetadata,be.DeveloperMode,be.NetworkSetting,be.SelectedAccount,be.TermsHaveBeenAcknowledgedLastSeenVersion,be.NotificationsHaveBeenAcknowledgedLastSeenVersion];var fne=new Error("Failed to clear selected account index"),i0=Xe(function*(){try{let e=Vr(be.SelectedAccount);return e?.version===2?e.identifier:null}catch{throw s3}}),s3=new Error("Failed to get selected account identifier");async function Dr(e){try{let t={version:2,identifier:e};return Wn(be.SelectedAccount)(t)}catch{throw new Error("Failed to set selected account identifier")}}i(Dr,"setSelectedAccountIdentifier");var a3=f.object({version:f.literal(1),isDeveloperMode:f.boolean()}),c3=f.object({version:f.literal(1),setting:f.record(f.string())}),u3=f.union([f.object({version:f.literal(1),index:f.number()}),f.object({version:f.literal(2),identifier:f.string()})]),l3=f.object({version:f.literal(1),accounts:f.record(f.any())}),f3=f.object({version:f.literal(1),accounts:f.record(f.any())}),dne=f.object({version:f.literal(1),accounts:f.array(f.any())}),hne=f.object({version:f.literal(1),seedIdentifiers:f.array(f.string()),seedlessIdentifiers:f.array(f.string()),privateKeyIdentifiers:f.array(f.string())}),d3=i((e,t)=>{let r=e,n=t;return!r&&!n?null:{version:1,accounts:{...r?.accounts??{},...n?.accounts??{}}}},"accountsMetadataResolver"),[oo,Ys,pne]=xm("accounts",[{key:be.AccountsMetadata,type:"object",validator:l3,nullable:!0,resolver:d3,updateOn:"change"}]);var[Vr,Wn,Fx]=Sc("accounts",[{key:be.DeveloperMode,type:"object",validator:a3,nullable:!0},{key:be.NetworkSetting,type:"object",validator:c3,nullable:!0},{key:be.SelectedAccount,type:"object",validator:u3,nullable:!0},{key:be.AccountsBalanceMetadata,type:"object",validator:f3,nullable:!0},{key:be.MigratedWithInvalidChecksum,type:"boolean",nullable:!0}]);var jx=new Error("Failed to add user account metadata to storage"),o0=new Error("Could not find account metadata in storage");async function zx(e,t){let r=oo(be.AccountsMetadata);if(!r)throw o0;let n=r.accounts[e];n?n.name=t:(n={name:t},r.accounts[e]=n),Ys(be.AccountsMetadata)(r)}i(zx,"setMultiChainAccountName");async function qx(e,t){let r=oo(be.AccountsMetadata);if(!r)throw o0;let n=r.accounts[e];n?n.icon=t:(n={icon:t,name:xn.t("onboardingImportAccountsAccountName",{walletIndex:""})},r.accounts[e]=n),Ys(be.AccountsMetadata)(r)}i(qx,"setMultiChainAccountIcon");async function Hx(e,t){let r=Vr(be.AccountsBalanceMetadata);r||(r={version:1,accounts:{}});let n=r.accounts[e];n?n.balance=t:(n={balance:t},r.accounts[e]=n),Wn(be.AccountsBalanceMetadata)(r)}i(Hx,"setAccountBalance");async function so(e,t){try{let r=oo(be.AccountsMetadata);r?r.accounts[e]=t:r={version:1,accounts:{[e]:t}},Ys(be.AccountsMetadata)(r)}catch{throw jx}}i(so,"addMultiChainAccountMetadata");async function Wx(e){try{let t=oo(be.AccountsMetadata);t?t.accounts=n0(t.accounts,n=>{for(let[o,a]of Object.entries(e))n[o]||(n[o]={name:""}),n[o].name=a.name,n[o].icon=a.icon??n[o].icon,n[o].connectedDevices=a.connectedDevices??n[o].connectedDevices}):t={version:1,accounts:{...e}},Ys(be.AccountsMetadata)(t)}catch{throw jx}}i(Wx,"addAccountMetadataBatch");var $x=Xe(function*(e){let t=Vr(be.AccountsBalanceMetadata);t||(t={version:1,accounts:{}});let r=t.accounts[e];return r||(r={}),r}),Gx=Xe(function*(e){let t=oo(be.AccountsMetadata);t||(t={version:1,accounts:{}});let r=t.accounts[e],n=xn.t("onboardingImportAccountsAccountName",{walletIndex:""}),l=(yield mo(sa)?.get(be.AccountsMetadata))?.accounts?.[e]?.name;return r&&r.name===n&&l&&(r.name=l),r||(r={name:l||n}),{...r}}),Zx=Xe(function*(){let e=Vr(be.AccountsBalanceMetadata);return e?e.accounts:{}}),Jx=Xe(function*(){let e=oo(be.AccountsMetadata),t={},r=new Set([...Object.keys(e?.accounts||{})]),o=yield mo(sa)?.get(be.AccountsMetadata),a=xn.t("onboardingImportAccountsAccountName",{walletIndex:""});for(let l of r){let d=e?.accounts[l],g=o?.accounts?.[l]?.name;d&&d.name===a&&g&&(d.name=g),d||(d={name:g||a}),t[l]={...d}}return t});async function h3(e){let t=Vr(be.AccountsBalanceMetadata);t&&(delete t.accounts[e],Wn(be.AccountsBalanceMetadata)(t))}i(h3,"removeMultiChainAccountBalanceMetadata");async function Cl(e){let t=oo(be.AccountsMetadata);if(!t)throw o0;delete t.accounts[e],Ys(be.AccountsMetadata)(t),await h3(e)}i(Cl,"removeMultiChainAccountMetadata");function Rl(e,t,r,n){let o=Eo(t,r);return e.find(a=>a.type===P.KMSVault&&a.identifier===o&&(!a.apiEnvironment||a.apiEnvironment===n))}i(Rl,"findExistingKMSVaultAccount");function Nl(e,t,r){let o=tu(t).addresses;return e.some(a=>{if(a.type===P.KMSVault||"apiEnvironment"in a&&a.apiEnvironment&&a.apiEnvironment!==r)return!1;let l=Ig(a);for(let d of l.addresses)if(o.has(d))return!0;return!1})}i(Nl,"hasMatchingNonKMSAccount");function Yx(e){let t=e+1;return xn.t("onboardingImportAccountsAccountName",{walletIndex:t})}i(Yx,"generateKMSAccountName");async function Ul(e,t,r,n,o,a,l){Z.addBreadcrumb(G.Account,"Adding KMS vault account to local storage",ee.Info);let d=await e.addKMSVaultAccount({organizationId:t,walletId:r,tag:n,derivationIndex:0,chains:o,apiEnvironment:l});Z.addBreadcrumb(G.Account,"Added KMS vault account to vault storage",ee.Info);let g=Yx(a.length);return await so(d.identifier,{name:g,icon:void 0}),Z.addBreadcrumb(G.Account,`Set account metadata with name: ${g}`,ee.Info),d}i(Ul,"addKMSVaultAccountWithMetadata");async function p3(e){try{Z.addBreadcrumb(G.Account,"Starting KMS vault account sync (read-only)",ee.Info);let t=await e.fetchAllAccounts();if(t.some(T=>T.type===P.Seedless))return Z.addBreadcrumb(G.Account,"KMS vault sync skipped: user has seedless accounts (will migrate separately)",ee.Info),{success:!1,action:"skipped_seedless",message:"Sync skipped for seedless accounts"};let n=e.getKMSInstance(),{derivations:o,conversionMetadata:a}=await kl(0);Z.addBreadcrumb(G.Account,`Checking for KMS vault with tag "${Rt}"`,ee.Info);let l=await Gh(n,Rt,o);if(!l)return Z.addBreadcrumb(G.Account,"KMS vault account not found remotely",ee.Info),{success:!1,action:"not_found",message:"Vault account not found in KMS"};Z.addBreadcrumb(G.Account,`Found KMS vault: ${l.walletId}`,ee.Info);let{chains:d}=Pl(l.accounts,a),g=rr()===Pt.Production?"production":"staging";return Rl(t,l.walletId,Rt,g)?(Z.addBreadcrumb(G.Account,"Upserting missing chains for existing KMS vault account",ee.Info),await e.upsertKMSVaultChains({organizationId:l.organizationId,walletId:l.walletId,tag:Rt,derivationIndex:0,chains:d}),{success:!0,action:"already_synced",message:"Account already synced (updated chains)",walletId:l.walletId}):Nl(t,d,g)?(Z.addBreadcrumb(G.Account,"KMS vault sync skipped: matching non-KMS local account found by address",ee.Info),{success:!0,action:"already_synced",message:"Matching non-KMS local account detected by address; skipping duplicate",walletId:l.walletId}):(await Ul(e,l.organizationId,l.walletId,Rt,d,t,g),Z.addBreadcrumb(G.Account,"Successfully synced KMS vault account to local storage",ee.Info),{success:!0,action:"synced",message:"Account synced successfully",walletId:l.walletId})}catch(t){return Z.captureError(t,G.Account),{success:!1,action:"error",message:t.message}}}i(p3,"syncKMSVaultAccount");h();p();async function m3(e,t,r){try{Z.addBreadcrumb(G.Account,"Storing KMS vault account from existing data",ee.Info);let n=await t.fetchAllAccounts(),{conversionMetadata:o}=await kl(0),{chains:a}=Pl(e.accounts,o),l=rr()===Pt.Production?"production":"staging",d=Rl(n,e.walletId,Rt,l);if(d)return Z.addBreadcrumb(G.Account,"KMS vault account already exists locally",ee.Info),await t.upsertKMSVaultChains({organizationId:e.organizationId,walletId:e.walletId,tag:Rt,derivationIndex:0,chains:a}),{isNewAccount:!1,account:d,message:"Account already exists (chains updated if needed)"};if(Nl(n,a,l))return Z.addBreadcrumb(G.Account,"KMS vault account matches existing non-KMS account by address - skipping",ee.Info),{isNewAccount:!1,account:null,message:"Matching non-KMS account detected by address"};Z.addBreadcrumb(G.Account,"Adding new KMS vault account to local storage",ee.Info);let g=await Ul(t,e.organizationId,e.walletId,Rt,a,n,l);return Z.addBreadcrumb(G.Account,"Successfully stored new KMS vault account",ee.Info),{isNewAccount:!0,account:g,message:"Account created successfully"}}catch(n){return Z.captureError(n,G.Account),{isNewAccount:!1,account:null,message:n.message}}}i(m3,"storeKMSVaultAccountFromData");h();p();var g3=i(e=>({getSeed:i(t=>y3(e,t),"getSeed"),setSeed:i((t,r)=>v3(e,t,r),"setSeed"),getClientJWTSigner:i((t,r)=>b3(e,t,r),"getClientJWTSigner"),setClientJWTSigner:i((t,r,n)=>w3(e,t,r,n),"setClientJWTSigner"),removeSeeds:i(t=>Qx(e,t),"removeSeeds"),removeClientJWTKeypairs:i(t=>Xx(e,t),"removeClientJWTKeypairs"),clear:i(async()=>{await Qx(e,"all"),await Xx(e,"all")},"clear")}),"createVaultCache"),ao=`${yr}.cache.secrets`,s0=i(e=>`${yr}.cache.seed.${e}`,"seedCacheKey"),a0=i(e=>`${yr}.cache.client-jwt.${e}`,"clientJWTKeypairKey"),y3=i(async({isEnabled:e,secretsStorage:t},r)=>{if(!e())return null;let n=s0(r),o=null;try{o=await t.getSecureValue(n)}catch{}if(!o)return null;let{bytes:a,encoding:l}=o.seed;return new Uint8Array(Buffer.from(a,l))},"getSeed"),v3=i(async({isEnabled:e,generalStorage:t,secretsStorage:r},n,o)=>{if(!e())return;let a=s0(n);await r.setSecureValue(a,{version:1,identifier:n,seed:{bytes:Buffer.from(o).toString("base64"),encoding:"base64"}});let l=await t.get(ao);if(!l)l={version:1,seedIdentifiers:[n],clientJWTKeypairIdentifiers:[]};else{let d=new Set(l.seedIdentifiers);d.add(n),l.seedIdentifiers=Array.from(d)}await t.set(ao,l)},"setSeed"),Qx=i(async({generalStorage:e,secretsStorage:t},r)=>{let n=await e.get(ao);if(!n)return;let o=r==="all"?n.seedIdentifiers:r,a=new Set(o),l=n.seedIdentifiers.filter(d=>a.has(d));await t.removeSecureValue(l.map(s0)),await e.set(ao,{version:1,seedIdentifiers:n.seedIdentifiers.filter(d=>!a.has(d)),clientJWTKeypairIdentifiers:n.clientJWTKeypairIdentifiers??[]})},"removeSeeds"),b3=i(async({isEnabled:e,secretsStorage:t},r,n)=>{if(!e())return null;let o=a0(r),a=null;try{a=await t.getSecureValue(o)}catch{}if(!a||!a.keyPairs[n])return null;let l=a.keyPairs[n],d=new Uint8Array(Buffer.from(l.p256pubkey.bytes,l.p256pubkey.encoding)),g=new Uint8Array(Buffer.from(l.p256privkey.bytes,l.p256privkey.encoding));return{p256pubkey:d,p256privkey:g}},"getClientJWTSigner"),w3=i(async({isEnabled:e,generalStorage:t,secretsStorage:r},n,o,a)=>{if(!e())return;let l=a0(n),d=await r.getSecureValue(l)??{version:1,identifier:n,keyPairs:{}};d.keyPairs[o]={p256pubkey:{bytes:ot(Buffer.from(a.p256pubkey)),encoding:"base64"},p256privkey:{bytes:ot(Buffer.from(a.p256privkey)),encoding:"base64"}},await r.setSecureValue(l,d);let g=await t.get(ao);if(!g)g={version:1,seedIdentifiers:[],clientJWTKeypairIdentifiers:[n]};else{let A=new Set(g.clientJWTKeypairIdentifiers??[]);A.add(n),g.clientJWTKeypairIdentifiers=Array.from(A)}await t.set(ao,g)},"setClientJWTSigner"),Xx=i(async({generalStorage:e,secretsStorage:t},r)=>{let n=await e.get(ao);if(!n||!n.clientJWTKeypairIdentifiers||n.clientJWTKeypairIdentifiers.length===0)return;let o=r==="all"?n.clientJWTKeypairIdentifiers:r,a=new Set(o);await t.removeSecureValue(o.map(a0)),await e.set(ao,{version:1,seedIdentifiers:n.seedIdentifiers,clientJWTKeypairIdentifiers:n.clientJWTKeypairIdentifiers.filter(l=>!a.has(l))})},"removeClientJWTKeypairs");h();p();var Dl=ue(At());h();p();var nc=i(()=>({isReady:!0,value:St(sr)}),"useChainAvailability");h();p();var c0=i(()=>{let e=Ct();return Qe({mutationFn:i(async({addressTypes:r})=>{for(let n of r)await Tm(n);Bi(e)},"mutationFn")})},"useDisableAddressTypes");h();p();var x3=i(()=>{let e=Ct();return Qe({mutationFn:i(async({chainIDs:r})=>{await Sm(r),Bi(e)},"mutationFn")})},"useDisableChains");h();p();var u0=i(()=>{let e=Ct(),{deriveAddresses:t}=Ec();return Qe({mutationFn:i(async({addressTypes:n})=>{for(let o of n)await Mm(o);await t(),await Bi(e)},"mutationFn")})},"useEnableAddressTypes");h();p();var A3=i(()=>{let e=Ct(),{deriveAddresses:t}=Ec();return Qe({mutationFn:i(async({chainIDs:n})=>{await Am(n),await t(),await Bi(e)},"mutationFn")})},"useEnableChains");h();p();var S3=i(()=>{let{mutateAsync:e}=c0(),{mutateAsync:t}=u0();return Qe({mutationFn:i(async({addressTypes:n})=>{if(await Em())await t({addressTypes:n});else{let a=new Set(pe.bitcoin.addressTypes);for(let l of n)a.delete(l);if(a.size===pe.bitcoin.addressTypes.length&&a.delete(_.BitcoinNativeSegwit),a.size>0){let l=Array.from(a);await e({addressTypes:l})}}},"mutationFn")})},"useUpdateVisibleBitcoinAddressTypes");var l0=pe.getAllChainIDs().filter(e=>pe.isChainDefaultEnabled(e)),e1=l0.map(e=>pe.getMainnetNetworkID(e)),E3=e1.flatMap(e=>pe.getAddressTypes(e)),t1=i(()=>nc().value?.enabledAddressTypes??E3,"useEnabledAddressTypes"),Qs=i(()=>nc().value?.enabledChainIDs??l0,"useEnabledChains"),use=i(()=>nc().value?.supportedChainIDs??l0,"useAllChains"),lse=i(e=>{let t=nc().value;return t?e?t.enabledNetworkIDs:t.enabledMainnetOnlyNetworkIDs:e1},"useEnabledNetworkIDs"),fse=i(()=>Qs().length===1,"useIsSingleChainEnabled"),dse=i(()=>{let e=Qs();return(0,Dl.useMemo)(()=>pe.getChainIDs(_.EVM).some(t=>e.includes(t)),[e])},"useIsEvmChainEnabled"),hse=i(()=>{let e=Qs();return(0,Dl.useMemo)(()=>e.length===1&&e.includes(pr.Solana),[e])},"useIsSolanaOnlyEnabled"),pse=i(e=>{let t=Qs();return(0,Dl.useMemo)(()=>e.map(r=>t.includes(r)),[t,e])},"useIsEnabledChains");h();p();var _3=ue(At());h();p();h();p();var Xs=Xe(function*(){let e=Vr(be.NetworkSetting);if(!e)return aa();let t=M3(e);return T3(t)});function M3(e){let t={...e,setting:{...e.setting}};return t.setting[_.Sui]||(t.setting[_.Sui]=aa().setting[_.Sui]),t}i(M3,"ensureChainSetting");var T3=i(async e=>{let t=!1;I3(e)&&(t=!0);let r=e.setting[_.Solana];r&&pe.isMainnetNetworkID(r)&&(e.setting[_.Solana]=as,t=!0);let n=e.setting[_.EVM];return n&&pe.isMainnetNetworkID(n)&&(e.setting[_.EVM]=cs,t=!0),t&&await Wn(be.NetworkSetting)(e),e},"overrideMainnetNetworksIfNeeded"),I3=i(e=>{let t=!1,r=e.setting[_.EVM];return r&&(r.toString()==="eip155:5"&&(e.setting[_.EVM]=on.Ethereum.Sepolia,t=!0),r.toString()==="eip155:80001"&&(e.setting[_.EVM]=on.Polygon.Amoy,t=!0)),t},"migrateDeprecatedTestnets");var co=Xe(function*(){let e=sr(),t=yield qn();if(t.length===0)return[];let r=rr()===Pt.Production?"production":"staging",n=t.filter(Wt(K=>K.type===P.KMSVault?!K.apiEnvironment||K.apiEnvironment===r:!0,0,[r])),o=Vr(be.DeveloperMode),a=Xs(),l=Jx(),[d,g,A]=yield Ac.all([o,a,l]),I=yield mo(sa)?.get(be.AccountsMetadata),k=xn.t("onboardingImportAccountsAccountName",{walletIndex:""});return n.map(Wt(K=>{let C=A[K.identifier],R=I?.accounts?.[K.identifier]?.name;C&&C.name===k&&R&&(C.name=R),C||(C={name:R||k});let V={name:C.name,icon:C.icon,identifier:K.identifier,addresses:eu(K,e.enabledMainnetOnlyNetworkIDs,e.enabledAddressTypes,e.enabledChainIDs,g,d?.isDeveloperMode??!1)};return K.type===P.Seed?{...V,type:P.Seed,seedIdentifier:K.seedIdentifier,isReadOnly:!1}:K.type===P.Seedless?{...V,type:P.Seedless,seedIdentifier:K.seedIdentifier,isReadOnly:!1}:K.type===P.ReadOnly?{...V,type:P.ReadOnly,isReadOnly:!0}:K.type===P.PrivateKey?{...V,privateKeyIdentifier:K.privateKeyIdentifier,type:P.PrivateKey,isReadOnly:!1}:{...V,type:K.type,isReadOnly:!1}},1,[A,I,k,e,g,d]))});var f0=Xe(function*(){let e=yield co();return Z.addBreadcrumb(G.Account,`Finished fetching all accounts. Num accounts: ${e.length}`,ee.Info),e});function d0(e){let t=St(co);return Ft(t,e)}i(d0,"useAllMultiChainAccountsQuery");h();p();h();p();function h0(){return Qe({mutationFn:i(async({metadataBatch:r})=>{Z.addBreadcrumb(G.Account,`Adding Account Metadata Batch: ${Object.entries(r).length} entries`,ee.Info),await Wx(r)},"mutationFn"),onError:i(r=>{Z.captureError(r,G.Account)},"onError")})}i(h0,"useAddAccountMetadataBatch");function k3(){let{mutateAsync:e}=h0(),t=yt(),{t:r}=Oi();return Qe({mutationFn:i(async({accounts:a,pairedBLEDevice:l})=>{let d=q0(),g=await t.connectLedgerAccounts(d,a),A=g.reduce((I,k,K)=>{let{name:C,accountIndex:R}=a[K],V;!C||C.length===0?V=r("onboardingImportAccountsLedgerAccountName",{walletIndex:1+R}):V=C;let q;l&&(q=[{...l,version:1,connectionType:ss.BLE,deviceType:os.Ledger}]);let Q={name:V,icon:void 0,connectedDevices:q};return I[k.identifier]=Q,I},{});await e({metadataBatch:A});let T=g[0]?.identifier;return T||(T=(await t.fetchAllAccounts())[0].identifier),await Dr(T),g},"mutationFn"),onError:i(a=>Z.captureError(a,G.Account),"onError")})}i(k3,"useConnectLedgerAccounts");h();p();h();p();var uo=Xe(function*(e){if(e.length===0)throw new Error(_g);let t=yield i0(),r=e.find(Wt(n=>n.identifier===t,0,[t]));return r||e[0]});var r1=Xe(function*(){let e=yield co(),t=yield uo(e),r=mo(Df);if(r){let n=sr();yield r.identifyAccount(e,t,n)}return Z.addBreadcrumb(G.Account,`Finished fetching selected account: ${t.identifier}`,ee.Info),t}),P3=Xe(e=>{let t=r1();return{isPending:t.isPending,isLoading:t.isPending,isSuccess:t.isResolved,isFetching:t.isPending,isError:t.isRejected,isFetched:t.isSettled,status:t.isPending?"pending":t.isResolved?"success":"error",data:t.value?e?e(t.value):t.value:void 0,error:t.error}});function Mr({select:e}={}){return St(P3,e)}i(Mr,"useSelectedMultiChainAccount");h();p();var n1=ue(dc()),Vl=ue(At());var i1=(0,Vl.createContext)(null);function B3({children:e,userRepository:t}){return(0,n1.jsx)(i1.Provider,{value:{userRepository:t},children:e})}i(B3,"UserProvider");function O3(){let e=(0,Vl.useContext)(i1);if(!e)throw new Error("useUserContext must be used within a UserProvider");return e}i(O3,"useUserContext");function Tr(){return O3().userRepository}i(Tr,"useUserRepository");h();p();h();p();h();p();var ic=i(e=>`/user/v1/users/${e}/profile`,"userProfileByUserIdEndpoint"),Ll=i(e=>`/user/v1/profiles/${e}`,"userProfileByUsernameOrUserProfileIdEndpoint"),o1=i(()=>"/user/v1/profiles/creation-check","userEligibleToClaimEndpoint");h();p();h();p();var lo;(function(e){e.PUBLIC="public",e.PRIVATE="private",e.INVISIBLE="invisible",e.HIDDEN="hidden"})(lo||(lo={}));var K3=Object.values(lo),c1=f.string().brand("ProfileId"),oc=f.object({id:c1,username:f.string(),icon:f.string().nullish(),addresses:f.record(f.string(),f.string()),privacyState:f.nativeEnum(lo).optional().default(lo.PUBLIC),biography:f.string().nullish(),phantomJoinDate:f.string().nullish()}),p0=f.string().url().brand("ActorId"),C3=f.object({id:f.string().optional(),orderedItems:p0.array(),next:f.string().optional()}),s1=f.object({id:f.string().url(),current:C3.optional(),totalItems:f.number().optional()}),a1=f.object({type:f.string(),value:f.string().optional(),name:f.string().optional()}),R3=f.object({id:f.string().url().optional(),name:f.string().optional(),type:f.string()}),N3=f.object({id:p0,name:f.string(),preferredUsername:f.string(),manuallyApprovesFollowers:f.boolean(),followers:f.union([s1,f.string().url()]),following:f.union([s1,f.string().url()]),icon:R3.nullish(),attachment:f.union([a1,f.array(a1)]).optional(),summary:f.string().nullish(),published:f.string().nullish()}).transform(e=>{let{attachment:t,...r}=e,n={},o=!1,a=!1,l=!1,d=!1,g=!1,A=!0,T=null;if(t){let I=Array.isArray(t)?t:[t];for(let k of I)if(!(!k.name||!k.value)){if(k.name.endsWith(":address")){let K=nm.safeParse(k.name.replace(":address",""));if(K.success){let C=K.data;n[C]=k.value}}k.name==="requesting"&&(o=k.value==="true"),k.name==="requestedBy"&&(a=k.value==="true"),k.name==="blocking"&&(l=k.value==="true"),k.name==="following"&&(d=k.value==="true"),k.name==="followedBy"&&(g=k.value==="true"),k.name==="notificationsEnabled"&&(A=k.value==="true"),k.name==="tradeCount"&&(T=k.value??null)}}return{...r,addresses:n,isSentFollowRequestPending:o,hasPendingFollowRequest:a,isBlocking:l,isFollowing:d,isFollowedBy:g,areNotificationsEnabled:A,tradeCount:T}}),U3={Image:"image",Emoji:"emoji",ReadOnlyDefault:"read-only-default",Default:"default"},D3=f.object({type:f.nativeEnum(U3),imageUrl:f.string().optional(),unicode:f.string().optional()}),m0=f.object({error:f.object({message:f.string()})});var g0=i(async e=>{let r=await dt.api().get(Ll(e)),n=oc.safeParse(r.data);return n.success?n.data:null},"getUserProfileByUsernameOrUserProfileId");var V3=i(e=>({getUsernameAvailability:i(t=>L3(t),"getUsernameAvailability"),getUserProfile:i(()=>F3(e),"getUserProfile"),getUserProfileByUsername:i(t=>g0(t),"getUserProfileByUsername"),getUserProfileByUsernameOrUserProfileId:i(t=>g0(t),"getUserProfileByUsernameOrUserProfileId"),setUserProfile:i(({username:t,addresses:r,icon:n,privacyState:o})=>j3(e,{username:t,addresses:r,icon:n,privacyState:o}),"setUserProfile"),patchUserProfile:i(t=>z3(e,t),"patchUserProfile"),deleteUserProfile:i(()=>q3(e),"deleteUserProfile"),isEligibleToClaim:i(t=>H3(t),"isEligibleToClaim")}),"createUserRepository"),L3=i(async e=>{switch((await dt.api().get(Ll(e))).status){case 200:return!1;case 403:return!1;case 404:return!0;default:throw new Error("Failed to check for username availability.")}},"getUsernameAvailability"),F3=i(async({authRepository:e})=>{let t=await e.getUser({skipAutoLogin:!0});if(!t)throw new Error("User is not logged in, unable to get user profile.");let{userID:r,accessToken:n}=t,o=await dt.api().bearer(n).get(ic(r)),a=oc.safeParse(o.data);return a.success?a.data:null},"getUserProfile"),j3=i(async({authRepository:e},{username:t,addresses:r,icon:n,privacyState:o})=>{let a=await e.getUser();if(!a)throw new Error("User is not logged in, unable to claim username.");let{userID:l,accessToken:d}=a,g=await dt.api().bearer(d).post(ic(l),{username:t,icon:n,addresses:r,privacyState:o});if(g.status===201){let I=oc.safeParse(g.data);if(I.success)return I.data;throw new Error("Failed to parse created profile")}let A=m0.safeParse(g.data);throw A.success?new Error(A.data.error.message):new Error("Unknown error")},"setUserProfile"),z3=i(async({authRepository:e},{username:t,addresses:r,icon:n,privacyState:o,biography:a})=>{let l=await e.getUser();if(!l)throw new Error("User is not logged in, unable to claim username.");let{userID:d,accessToken:g}=l,A=await dt.api().bearer(g).patch(ic(d),{username:t,addresses:r,icon:n,privacyState:o,biography:a});if(A.status===200)return;Z.captureMessage(`Failed to patch user profile: ${A.status} ${JSON.stringify(A.data)}`,G.Auth);let T=m0.safeParse(A.data);throw T.success?new Error(T.data.error.message):new Error("Unknown error")},"patchUserProfile"),q3=i(async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to sync down accounts.");let{userID:r,accessToken:n}=t,o=await dt.api().bearer(n).delete(ic(r));return 200<=o.status&&o.status<300},"deleteUserProfile"),H3=i(async e=>{try{return(await dt.api().post(o1(),{addresses:e})).status===200}catch{return!1}},"isEligibleToClaim");h();p();var y0="@phantom/users",Xt={checkUsernameAvailability(e){return["user",`${y0}:check-username-availability`,{username:e}]},userProfile(){return["user",`${y0}:user-profile`]},userProfileAttributeEffect(e){return["user",`${y0}:user-profile-attribute-effect`,{username:e}]}};h();p();var W3=new Set([Xt.userProfile()[1]]),$3=i(e=>{let t=e.queryKey[1];return typeof t!="string"||!t?!1:W3.has(t)},"userShouldDehydrateQueryPredicate");h();p();h();p();h();p();function Fl(e,t){let r=new WeakMap;return()=>{let n=e();if(n===void 0)return;let o=r.get(n);return o===void 0&&(o=t(n),r.set(n,o)),o}}i(Fl,"createUseDerivedContext");var jl=Fl($t,e=>new v0(e)),v0=class{static{i(this,"ClaimUsernameAnalytics")}#e;constructor(t){this.#e=t}onClaimFlowStart(){this.#e.capture("userUsernameClaimFlowStart")}onCheckAvailability(t,r){this.#e.capture("userUsernameCheckAvailability",{data:{username:t,isAvailable:r}})}onAvatarSaved(t){this.#e.capture("userUsernameClaimFlowAvatarSaved",{data:{avatarType:t}})}onAnonymousAuthSaved(t,r){this.#e.capture("userUsernameClaimFlowAnonymousAuthSaved",{data:{numAuthFactorsSaved:t,numAuthFactorsShown:r}})}onLinkWalletsSaved(t,r){this.#e.capture("userUsernameClaimFlowLinkWalletsSaved",{data:{numWalletsSaved:t,numWalletsShown:r}})}onPublicAddressesSaved(){this.#e.capture("userUsernameClaimFlowPublicAddressesSaved")}onClaimFlowComplete(t,r){this.#e.capture("userUsernameClaimComplete",{data:{username:t,authUserID:r}})}};h();p();var b0=i(async e=>{await e.removeQueries({queryKey:Xt.userProfile()})},"removeUserProfile"),w0=i(async e=>{await e.resetQueries({queryKey:Xt.userProfile()})},"resetUserProfile"),Jo=i(async e=>{await e.invalidateQueries({queryKey:Xt.userProfile()})},"invalidateUserProfile");function G3(){let e=jl(),t=Pr(),r=Tr(),n=Ct(),o=i(async({username:a,addresses:l,icon:d})=>{Z.addBreadcrumb(G.Auth,`Claiming Username: ${a}.`,ee.Debug);let g=await t.getUser();if(!g)throw new Error("Unable to claim username. User not authenticated.");Z.addBreadcrumb(G.Auth,"Creating user profile to claim username",ee.Debug);let A=await r.setUserProfile({username:a,addresses:l,icon:d,privacyState:lo.PUBLIC});return Z.addBreadcrumb(G.Auth,"\u2705 Username Claimed!",ee.Debug),await Nf(n),await w0(n),await So(n),await Jo(n),await di(n),e.onClaimFlowComplete(a,g.userID),A},"mutationFn");return Qe({mutationFn:i(async a=>{try{return await o(a)}catch(l){Z.addBreadcrumb(G.Auth,"Could not claim username",ee.Error);let d;throw l instanceof Error?d=l:d=new Error("Unable to claim username"),Z.captureError(d,G.Auth),d}},"mutationFn")})}i(G3,"useClaimUsername");h();p();function Z3(e,t){let r=jl(),n=Tr(),o=Xt.checkUsernameAvailability(e),a=i(async()=>{if(!e)return!1;let d=await n.getUsernameAvailability(e);return r.onCheckAvailability(e,d),d},"queryFn"),l=t?.enabled??!!e.trim();return or({enabled:l,queryKey:o,queryFn:a})}i(Z3,"useCheckUsernameAvailability");h();p();h();p();var sc=class extends Error{static{i(this,"NoUserProfileError")}constructor(t="No user profile."){super(t),this.name="NoUserProfileError"}},x0=class extends Error{static{i(this,"MissingRequiredUsernameClaimParamsError")}constructor(t="Missing required username claim params."){super(t),this.name="MissingRequiredUsernameClaimParamsError"}};var J3=Ki({days:1}),Y3=Ki({minutes:1});function A0(e){let t=Tr(),r=wa(),n=e?.enabled!==void 0?e.enabled:r,o=Xt.userProfile();return or({enabled:n,queryKey:o,queryFn:i(async()=>{let l=await t.getUserProfile();if(!l)throw new sc;return l},"queryFn"),gcTime:J3,staleTime:Y3})}i(A0,"useUserProfile");h();p();var Q3=i(()=>{let e=Ct(),t=Pr(),r=Tr();return Qe({mutationFn:i(async()=>{await r.deleteUserProfile(),await t.deleteAllAuthFactors(),await t.logOut(),await b0(e),await Rf(e),await Jo(e),await So(e),await di(e)},"mutationFn")})},"useDeleteUserProfile");h();p();var S0=i(()=>{let e=Ct(),t=Tr(),r=i(async n=>{await t.patchUserProfile(n),await Jo(e)},"mutationFn");return Qe({mutationFn:i(async n=>{try{return await r(n)}catch(o){Z.addBreadcrumb(G.Auth,`Could not update user profile: ${JSON.stringify(n)}`,ee.Error);let a;throw o instanceof Error?a=o:a=new Error("Could not update user profile!"),Z.captureError(a,G.Auth),a}},"mutationFn"),onMutate:i(async n=>{let o=Xt.userProfile();await e.cancelQueries({queryKey:o});let a=e.getQueryData(o);return e.setQueryData(o,{...a,...n}),{previousData:a}},"onMutate"),onSuccess:i((n,o)=>{let a=Xt.userProfile(),l=e.getQueryData(a);if(l){let d={...l,...o};e.setQueryData(a,d)}},"onSuccess"),onError:i((n,o,a)=>{a&&e.setQueryData(Xt.userProfile(),a.previousData)},"onError")})},"usePatchUserProfile");h();p();var X3=Fl($t,e=>new zl(e)),zl=class{static{i(this,"ManageUserProfileAnalytics")}#e;constructor(t){this.#e=t}onAvatarUpdated(t){this.#e.capture("userManageProfileAvatarUpdated",{data:{avatarType:t}})}onAuthFactorsUpdated(t,r){this.#e.capture("userManageProfileAuthFactorsUpdated",{data:{numAuthFactorsSaved:t,numAuthFactorsShown:r}})}onLinkedWalletsUpdated(t,r){this.#e.capture("userManageProfileLinkedWalletsUpdated",{data:{numWalletsSaved:t,numWalletsShown:r}})}onPrivacyStateUpdated(t){this.#e.capture("userManageProfilePrivacyStateUpdated",{data:{privacyState:t}})}onBiographyUpdated(){this.#e.capture("userManageProfileBiographyUpdated")}onPublicAddressesUpdated(t){this.#e.capture("userManageProfilePublicAddressesUpdated",{data:{networkIdsSaved:t}})}};h();p();var ql=ue(At());var ek=i(e=>{let t=(0,ql.useMemo)(()=>{if(e){if(tk(e))return n=>n.address===e.address&&n.networkID===e.networkID;if(pe.isNetworkID(e))return n=>n.networkID===e;if(fm(e))return n=>n.addressType===e;throw new Error(`Unrecognized filter type: ${e}`)}else return()=>!1},[e]),r=(0,ql.useCallback)(n=>{let o=n.addresses.filter(t);if(o.length>1)throw new Error(`Multiple addresses match filter: ${e}`);return o[0]},[t]);return Mr({select:r})},"useSelectedChainAddress");function tk(e){return typeof e=="object"&&"address"in e&&(typeof e.address=="string"||e.address===void 0)&&"networkID"in e}i(tk,"isAddressNetworkIDFilter");h();p();h();p();h();p();var u1=Xe(function*(e){return(yield $x(e))?.balance}),l1=Xe(function*(){return yield Zx()});var rk=i((e="",t=!0)=>{let r=St(u1,e);return Ft(r)},"useAccountBalance"),nk=i((e=!0)=>{let t=St(l1);return Ft(t)},"useAllAccountBalances");h();p();var ik=Xe(function*(e){let t=yield f0(),r=t.find(Wt(n=>n.identifier===e,0,[e]));if(!r)throw new Error(kg(t.length,e));return r});function ok(e){let t=St(ik,e);return Ft(t)}i(ok,"useAccountWithIdentifier");h();p();function sk(){let e=yt();return Qe({mutationFn:i(async({name:o,addresses:a,icon:l})=>{let d=await e.addReadonlyAccount(a),g={name:o,icon:l};return await so(d.identifier,g),await Dr(d.identifier),d},"mutationFn"),onSettled:i(async()=>{},"onSettled"),onError:i(o=>Z.captureError(o,G.Account),"onError")})}i(sk,"useAddReadOnlyAccount");h();p();function ak(){let{t:e}=Oi(),t=$t(),{fetchAllAccounts:r,addAccountForSeed:n,addAccountForSeedless:o,fetchAllSeedlessMetas:a}=yt();return Qe({mutationFn:i(async({name:A,icon:T,seedIdentifier:I})=>{Z.addBreadcrumb(G.Account,`Adding new account for s**d: ${I}`,ee.Info);let K=(await a()).find(V=>V.identifier===I),C=K?await o(I):await n(I);await so(C.identifier,{name:A||e("onboardingImportAccountsAccountName",{walletIndex:(await r()).length}),icon:T}),await Dr(C.identifier);let R=hi(C);return t.capture("addSeedAccount",{data:{seedIdentifier:I,accountType:K?"seedless":"seed",walletAddresses:R}}),C},"mutationFn"),onSettled:i(async()=>{},"onSettled"),onError:i(A=>Z.captureError(A,G.Account),"onError")})}i(ak,"useAddSeedAccount");h();p();var ck=Xe(function*(e){try{let t;switch(e){case"all":{let r=yield Il();t=[...yield Tl(),...r];break}case"local-only":{t=[...yield Il()];break}case"recoverable-only":{t=[...yield Tl()];break}}return t}catch(t){throw t instanceof Error&&Z.captureError(t,G.Account),t}});function Hl(e){let t=St(ck,e);return Ft(t)}i(Hl,"useAllSeeds");h();p();function E0(){let e=St(Fx,be.DeveloperMode);return Ft(e)}i(E0,"useDeveloperMode");h();p();function uk(){let e=yt();return Qe({mutationFn:i(async({chainType:r,privateKey:n,name:o,icon:a})=>{Z.addBreadcrumb(G.Account,"Importing Private Key Account... \u23F3",ee.Info);let l=await e.importPrivateKeyAccount(r,n),d={name:o,icon:a};return await so(l.identifier,d),await Dr(l.identifier),Z.addBreadcrumb(G.Account,`Imported Private Key Account \u2705: ${l.identifier}`,ee.Info),l},"mutationFn")})}i(uk,"useImportPrivateKeyAccount");h();p();function lk(){let e=St(Xs);return Ft(e)}i(lk,"useMultiChainNetworkSetting");h();p();function fk(){let e=$t(),t=yt();return Qe({mutationFn:i(async({identifier:n})=>{Z.addBreadcrumb(G.Account,`Removing Account... \u23F3: ${n}`,ee.Info);let a=(await t.fetchAllAccounts()).find(g=>g.identifier===n),l=hi(a);await Promise.all([t.removeAccount(n),Cl(n)]);let d=await uo(await t.fetchAllAccounts());await Dr(d.identifier),e.capture("removeAccount",{data:{walletAddresses:l}}),Z.addBreadcrumb(G.Account,`Removed Account \u2705: ${n}`,ee.Info)},"mutationFn")})}i(fk,"useRemoveAccount");h();p();function dk(){let e=$t(),t=yt();return Qe({mutationFn:i(async({seedIdentifier:o})=>{let a=await t.fetchAllAccounts(),l=[];for(let g of a)switch(g.type){case P.PrivateKey:case P.Ledger:case P.SeedVault:case P.ReadOnly:case P.KMSVault:continue;case P.Seed:case P.Seedless:g.seedIdentifier===o&&l.push(g);break;default:xe(g)}let d=l.flatMap(g=>hi(g));for(let g of l)await Promise.all([t.removeAccount(g.identifier),Cl(g.identifier)]);e.capture("removeSeed",{data:{numOfAccounts:l.length,walletAddresses:d}})},"mutationFn"),onError:i(o=>{Z.captureError(o,G.Account)},"onError")})}i(dk,"useRemoveMultiChainSeed");h();p();function hk(){return Qe({mutationFn:i(async({identifier:r,name:n})=>{Z.addBreadcrumb(G.Account,"Renaming Multichain Account",ee.Info),await zx(r,n)},"mutationFn"),onError:i(r=>Z.captureError(r,G.Account),"onError")})}i(hk,"useRenameMultiChainAccount");h();p();function pk(){let e=yt();return Qe({mutationFn:i(async({identifier:r,toIndex:n})=>{await e.reorderAccount(r,n)},"mutationFn")})}i(pk,"useReorderMultiChainAccount");h();p();var mk=Xe(function*(){try{let e=yield qn(),r=(yield uo(e)).identifier;if(!r)throw new Error("Unable to resolve selected account identifier => no available accounts or identifier!");return r}catch(e){throw e instanceof Error&&Z.captureError(e,G.Account),e}});function gk(){let e=St(mk);return Ft(e)}i(gk,"useSelectedAccountIdentifier");h();p();function yk(){return Qe({mutationFn:i(async({identifier:t,balance:r})=>(await Hx(t,r),{identifier:t,balance:r}),"mutationFn")})}i(yk,"useSetAccountBalance");h();p();var f1=ue(At());function vk(){return{mutate:(0,f1.useCallback)(async({developerMode:t})=>{await Wn(be.DeveloperMode)(t)},[])}}i(vk,"useSetDeveloperMode");h();p();function bk(){return Qe({mutationFn:i(async({identifier:t,icon:r})=>{Z.addBreadcrumb(G.Account,"Setting Multichain Account Icon",ee.Info),await qx(t,r)},"mutationFn")})}i(bk,"useSetMultiChainAccountIcon");h();p();var d1=ue(At());function wk(){return{mutate:(0,d1.useCallback)(async({networkSetting:t})=>{await Wn(be.NetworkSetting)(t)},[])}}i(wk,"useSetMultiChainNetworkSetting");h();p();function xk(){let e=$t(),t=yt();return Qe({mutationFn:i(async({identifier:o})=>{await Dr(o);let l=(await t.fetchAllAccounts()).find(g=>g.identifier===o),d=l?hi(l):[];return e.capture("changeAccount",{data:{identifier:o,walletAddresses:d}}),o},"mutationFn"),onError:i(o=>Z.captureError(o,G.Account),"onError")})}i(xk,"useSetSelectedMultiChainAccountIdentifier");h();p();var Wl=ue(At());h();p();var h1=ue(At());var ac=i(()=>{let{data:e}=Mr();return(0,h1.useMemo)(()=>{let t=e?.addresses??[];return[...new Set(t.map(r=>r.networkID))]},[e])},"useSelectedNetworks");var Ak=i(()=>{let{data:e,isFetching:t}=d0(),{data:r,isFetching:n}=Mr(),o=yt(),a=ac(),{data:l=[],isFetching:d,error:g}=Sk(o);return(0,Wl.useEffect)(()=>{g&&(p1(g)||Z.captureError(g,G.Account))},[g]),(0,Wl.useMemo)(()=>({data:{"All Accounts":cf(e),"Selected Account":cf(r),"Selected Networks":a.map(A=>pe.getNetworkName(A)),"Seed Cache Digests (IDPLAT-295)":l},isFetching:t||n||d}),[e,t,n,d,l,r,a])},"useAccountsExport"),p1=i(e=>!(e instanceof Error)||!e.message?!1:/not supported|not implemented|vault locked/i.test(e.message),"isExpectedSeedCacheDigestError"),Sk=i(e=>or({queryKey:["seed-cache-digests","IDPLAT-295"],queryFn:i(async()=>{try{let t=await e.DO_NOT_USE_diagnoseSeedCacheDigests();return!t||t.length===0?[]:t}catch(t){if(p1(t))return[];throw t}},"queryFn"),retry:!1,staleTime:5*60*1e3}),"useSeedCacheDigestReports");h();p();var m1=ue(At());var Ek=i((e=[])=>{let t=Qs();return(0,m1.useMemo)(()=>e.filter(r=>{let n=pe.getParentChain(r.networkID);return n?t.includes(n):!1}),[e,t])},"useAdditionalNetworks");h();p();var L1=ue(fA()),tf=ue(At());h();p();var mt=ue(At(),1);var fc=i(e=>e.type==="checkbox","isCheckBoxInput"),ta=i(e=>e instanceof Date,"isDateObject"),hr=i(e=>e==null,"isNullOrUndefined"),T1=i(e=>typeof e=="object","isObjectType"),Lt=i(e=>!hr(e)&&!Array.isArray(e)&&T1(e)&&!ta(e),"isObject"),I1=i(e=>Lt(e)&&e.target?fc(e.target)?e.target.checked:e.target.value:e,"getEventValue"),Mk=i(e=>e.substring(0,e.search(/.\d/))||e,"getNodeParentName"),_1=i((e,t)=>[...e].some(r=>Mk(t)===r),"isNameInFieldArray"),Ql=i(e=>e.filter(Boolean),"compact"),Mt=i(e=>e===void 0,"isUndefined"),fe=i((e,t,r)=>{if(!t||!Lt(e))return r;let n=Ql(t.split(/[,[\].]+?/)).reduce((o,a)=>hr(o)?o:o[a],e);return Mt(n)||n===e?Mt(e[t])?r:e[t]:n},"get"),_0={BLUR:"blur",CHANGE:"change"},bn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ii={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},B0=i((e,t)=>{let r=Object.assign({},e);return delete r[t],r},"omit"),Tk=mt.default.createContext(null),O0=i(()=>mt.default.useContext(Tk),"useFormContext");var k1=i((e,t,r,n=!0)=>{function o(l){return()=>{if(l in e)return t[l]!==bn.all&&(t[l]=!n||bn.all),r&&(r[l]=!0),e[l]}}i(o,"createGetter");let a={};for(let l in e)Object.defineProperty(a,l,{get:o(l)});return a},"getProxyFormState"),Ir=i(e=>Lt(e)&&!Object.keys(e).length,"isEmptyObject"),P1=i((e,t,r)=>{let n=B0(e,"name");return Ir(n)||Object.keys(n).length>=Object.keys(t).length||Object.keys(n).find(o=>t[o]===(!r||bn.all))},"shouldRenderFormState"),$l=i(e=>Array.isArray(e)?e:[e],"convertToArrayPayload"),B1=i((e,t,r)=>r&&t?e===t:!e||!t||e===t||$l(e).some(n=>n&&(n.startsWith(t)||t.startsWith(n))),"shouldSubscribeByName");function K0(e){let t=mt.default.useRef(e);t.current=e,mt.default.useEffect(()=>{let r=i(o=>{o&&o.unsubscribe()},"tearDown"),n=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>r(n)},[e.disabled])}i(K0,"useSubscribe");function Ik(e){let t=O0(),{control:r=t.control,disabled:n,name:o,exact:a}=e||{},[l,d]=mt.default.useState(r._formState),g=mt.default.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),A=mt.default.useRef(o),T=mt.default.useRef(!0);A.current=o;let I=mt.default.useCallback(k=>T.current&&B1(A.current,k.name,a)&&P1(k,g.current)&&d(Object.assign(Object.assign({},r._formState),k)),[r,a]);return K0({disabled:n,callback:I,subject:r._subjects.state}),mt.default.useEffect(()=>()=>{T.current=!1},[]),k1(l,r._proxyFormState,g.current,!1)}i(Ik,"useFormState");var $n=i(e=>typeof e=="string","isString"),O1=i((e,t,r,n)=>{let o=Array.isArray(e);return $n(e)?(n&&t.watch.add(e),fe(r,e)):o?e.map(a=>(n&&t.watch.add(a),fe(r,a))):(n&&(t.watchAll=!0),r)},"generateWatchOutput"),Xl=i(e=>typeof e=="function","isFunction"),C0=i(e=>{for(let t in e)if(Xl(e[t]))return!0;return!1},"objectHasFunction");function _k(e){let t=O0(),{control:r=t.control,name:n,defaultValue:o,disabled:a,exact:l}=e||{},d=mt.default.useRef(n);d.current=n;let g=mt.default.useCallback(I=>{if(B1(d.current,I.name,l)){let k=O1(d.current,r._names,I.values||r._formValues);T(Mt(d.current)||Lt(k)&&!C0(k)?Object.assign({},k):Array.isArray(k)?[...k]:Mt(k)?o:k)}},[r,l,o]);K0({disabled:a,subject:r._subjects.watch,callback:g});let[A,T]=mt.default.useState(Mt(o)?r._getWatch(n):o);return mt.default.useEffect(()=>{r._removeUnmounted()}),A}i(_k,"useWatch");function kk(e){let t=O0(),{name:r,control:n=t.control,shouldUnregister:o}=e,a=_1(n._names.array,r),l=_k({control:n,name:r,defaultValue:fe(n._formValues,r,fe(n._defaultValues,r,e.defaultValue)),exact:!a}),d=Ik({control:n,name:r}),g=mt.default.useRef(n.register(r,Object.assign(Object.assign({},e.rules),{value:l})));return mt.default.useEffect(()=>{let A=i((T,I)=>{let k=fe(n._fields,T);k&&(k._f.mount=I)},"updateMounted");return A(r,!0),()=>{let T=n._options.shouldUnregister||o;a?T&&n._stateFlags.action:T?n.unregister(r):A(r,!1)}},[r,n,a,o]),{field:{name:r,value:l,onChange:mt.default.useCallback(A=>{g.current.onChange({target:{value:I1(A),name:r},type:_0.CHANGE})},[r]),onBlur:mt.default.useCallback(()=>{g.current.onBlur({target:{value:fe(n._formValues,r),name:r},type:_0.BLUR})},[r,n]),ref:mt.default.useCallback(A=>{let T=fe(n._fields,r);A&&T&&A.focus&&(T._f.ref={focus:i(()=>A.focus(),"focus"),setCustomValidity:i(I=>A.setCustomValidity(I),"setCustomValidity"),reportValidity:i(()=>A.reportValidity(),"reportValidity")})},[r,n])},formState:d,fieldState:{invalid:!!fe(d.errors,r),isDirty:!!fe(d.dirtyFields,r),isTouched:!!fe(d.touchedFields,r),error:fe(d.errors,r)}}}i(kk,"useController");var K1=i(e=>e.render(kk(e)),"Controller"),Pk=i((e,t,r,n,o)=>t?Object.assign(Object.assign({},r[e]),{types:Object.assign(Object.assign({},r[e]&&r[e].types?r[e].types:{}),{[n]:o||!0})}):{},"appendErrors"),R0=i(e=>/^\w*$/.test(e),"isKey"),C1=i(e=>Ql(e.replace(/["|']|\]/g,"").split(/\.|\[/)),"stringToPath");function Tt(e,t,r){let n=-1,o=R0(t)?[t]:C1(t),a=o.length,l=a-1;for(;++n<a;){let d=o[n],g=r;if(n!==l){let A=e[d];g=Lt(A)||Array.isArray(A)?A:isNaN(+o[n+1])?{}:[]}e[d]=g,e=e[d]}return e}i(Tt,"set");var k0=i((e,t,r)=>{for(let n of r||Object.keys(e)){let o=fe(e,n);if(o){let a=o._f,l=B0(o,"_f");if(a&&t(a.name)){if(a.ref.focus&&Mt(a.ref.focus()))break;if(a.refs){a.refs[0].focus();break}}else Lt(l)&&k0(l,t)}}},"focusFieldBy");var g1=i((e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length)))),"isWatched");function uc(e){let t,r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(r||Lt(e)){t=r?[]:{};for(let n in e){if(Xl(e[n])){t=e;break}t[n]=uc(e[n])}}else return e;return t}i(uc,"cloneObject");function M0(){let e=[];return{get observers(){return e},next:i(o=>{for(let a of e)a.next(o)},"next"),subscribe:i(o=>(e.push(o),{unsubscribe:i(()=>{e=e.filter(a=>a!==o)},"unsubscribe")}),"subscribe"),unsubscribe:i(()=>{e=[]},"unsubscribe")}}i(M0,"createSubject");var Zl=i(e=>hr(e)||!T1(e),"isPrimitive");function ra(e,t){if(Zl(e)||Zl(t))return e===t;if(ta(e)&&ta(t))return e.getTime()===t.getTime();let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let o of r){let a=e[o];if(!n.includes(o))return!1;if(o!=="ref"){let l=t[o];if(ta(a)&&ta(l)||Lt(a)&&Lt(l)||Array.isArray(a)&&Array.isArray(l)?!ra(a,l):a!==l)return!1}}return!0}i(ra,"deepEqual");var y1=i(e=>({isOnSubmit:!e||e===bn.onSubmit,isOnBlur:e===bn.onBlur,isOnChange:e===bn.onChange,isOnAll:e===bn.all,isOnTouch:e===bn.onTouched}),"getValidationModes"),lc=i(e=>typeof e=="boolean","isBoolean"),N0=i(e=>e.type==="file","isFileInput"),P0=i(e=>e instanceof HTMLElement,"isHTMLElement"),R1=i(e=>e.type==="select-multiple","isMultipleSelect"),U0=i(e=>e.type==="radio","isRadioInput"),Bk=i(e=>U0(e)||fc(e),"isRadioOrCheckbox"),v1=typeof self<"u"&&typeof self.HTMLElement<"u"&&typeof document<"u",T0=i(e=>P0(e)&&e.isConnected,"live");function Ok(e,t){let r=t.slice(0,-1).length,n=0;for(;n<r;)e=Mt(e)?n++:e[t[n++]];return e}i(Ok,"baseGet");function er(e,t){let r=R0(t)?[t]:C1(t),n=r.length==1?e:Ok(e,r),o=r[r.length-1],a;n&&delete n[o];for(let l=0;l<r.slice(0,-1).length;l++){let d=-1,g,A=r.slice(0,-(l+1)),T=A.length-1;for(l>0&&(a=e);++d<A.length;){let I=A[d];g=g?g[I]:e[I],T===d&&(Lt(g)&&Ir(g)||Array.isArray(g)&&!g.filter(k=>Lt(k)&&!Ir(k)||lc(k)).length)&&(a?delete a[I]:delete e[I]),a=g}}return e}i(er,"unset");function Jl(e,t={}){let r=Array.isArray(e);if(Lt(e)||r)for(let n in e)Array.isArray(e[n])||Lt(e[n])&&!C0(e[n])?(t[n]=Array.isArray(e[n])?[]:{},Jl(e[n],t[n])):hr(e[n])||(t[n]=!0);return t}i(Jl,"markFieldsDirty");function N1(e,t,r){let n=Array.isArray(e);if(Lt(e)||n)for(let o in e)Array.isArray(e[o])||Lt(e[o])&&!C0(e[o])?Mt(t)||Zl(r[o])?r[o]=Array.isArray(e[o])?Jl(e[o],[]):Object.assign({},Jl(e[o])):N1(e[o],hr(t)?{}:t[o],r[o]):r[o]=!ra(e[o],t[o]);return r}i(N1,"getDirtyFieldsFromDefaultValues");var b1=i((e,t)=>N1(e,t,Jl(t)),"getDirtyFields"),w1={value:!1,isValid:!1},x1={value:!0,isValid:!0},U1=i(e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Mt(e[0].attributes.value)?Mt(e[0].value)||e[0].value===""?x1:{value:e[0].value,isValid:!0}:x1:w1}return w1},"getCheckboxValue"),D1=i((e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Mt(e)?e:t?e===""?NaN:+e:r&&$n(e)?new Date(e):n?n(e):e,"getFieldValueAs"),A1={isValid:!1,value:null},V1=i(e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,A1):A1,"getRadioValue");function I0(e){let t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return N0(t)?t.files:U0(t)?V1(e.refs).value:R1(t)?[...t.selectedOptions].map(({value:r})=>r):fc(t)?U1(e.refs).value:D1(Mt(t.value)?e.ref.value:t.value,e)}i(I0,"getFieldValue");var Kk=i((e,t,r,n)=>{let o={};for(let a of e){let l=fe(t,a);l&&Tt(o,a,l._f)}return{criteriaMode:r,names:[...e],fields:o,shouldUseNativeValidation:n}},"getResolverOptions"),Yl=i(e=>e instanceof RegExp,"isRegex"),cc=i(e=>Mt(e)?void 0:Yl(e)?e.source:Lt(e)?Yl(e.value)?e.value.source:e.value:e,"getRuleValue"),Ck=i(e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),"hasValidation");function S1(e,t,r){let n=fe(e,r);if(n||R0(r))return{error:n,name:r};let o=r.split(".");for(;o.length;){let a=o.join("."),l=fe(t,a),d=fe(e,a);if(l&&!Array.isArray(l)&&r!==a)return{name:r};if(d&&d.type)return{name:a,error:d};o.pop()}return{name:r}}i(S1,"schemaErrorLookup");var Rk=i((e,t,r,n,o)=>o.isOnAll?!1:!r&&o.isOnTouch?!(t||e):(r?n.isOnBlur:o.isOnBlur)?!e:(r?n.isOnChange:o.isOnChange)?e:!0,"skipValidation"),Nk=i((e,t)=>!Ql(fe(e,t)).length&&er(e,t),"unsetEmptyArray"),Gl=i(e=>$n(e)||mt.default.isValidElement(e),"isMessage");function E1(e,t,r="validate"){if(Gl(e)||Array.isArray(e)&&e.every(Gl)||lc(e)&&!e)return{type:r,message:Gl(e)?e:"",ref:t}}i(E1,"getValidateError");var ea=i(e=>Lt(e)&&!Yl(e)?e:{value:e,message:""},"getValueAndMessage"),M1=i(async(e,t,r,n)=>{let{ref:o,refs:a,required:l,maxLength:d,minLength:g,min:A,max:T,pattern:I,validate:k,name:K,valueAsNumber:C,mount:R,disabled:V}=e._f;if(!R||V)return{};let q=a?a[0]:o,Q=i(x=>{n&&q.reportValidity&&(q.setCustomValidity(lc(x)?"":x||" "),q.reportValidity())},"setCustomValidity"),F={},ce=U0(o),se=fc(o),ie=ce||se,ae=(C||N0(o))&&!o.value||t===""||Array.isArray(t)&&!t.length,W=Pk.bind(null,K,r,F),me=i((x,s,u,m=Ii.maxLength,y=Ii.minLength)=>{let v=x?s:u;F[K]=Object.assign({type:x?m:y,message:v,ref:o},W(x?m:y,v))},"getMinMaxMessage");if(l&&(!ie&&(ae||hr(t))||lc(t)&&!t||se&&!U1(a).isValid||ce&&!V1(a).isValid)){let{value:x,message:s}=Gl(l)?{value:!!l,message:l}:ea(l);if(x&&(F[K]=Object.assign({type:Ii.required,message:s,ref:q},W(Ii.required,s)),!r))return Q(s),F}if(!ae&&(!hr(A)||!hr(T))){let x,s,u=ea(T),m=ea(A);if(isNaN(t)){let y=o.valueAsDate||new Date(t);$n(u.value)&&(x=y>new Date(u.value)),$n(m.value)&&(s=y<new Date(m.value))}else{let y=o.valueAsNumber||parseFloat(t);hr(u.value)||(x=y>u.value),hr(m.value)||(s=y<m.value)}if((x||s)&&(me(!!x,u.message,m.message,Ii.max,Ii.min),!r))return Q(F[K].message),F}if((d||g)&&!ae&&$n(t)){let x=ea(d),s=ea(g),u=!hr(x.value)&&t.length>x.value,m=!hr(s.value)&&t.length<s.value;if((u||m)&&(me(u,x.message,s.message),!r))return Q(F[K].message),F}if(I&&!ae&&$n(t)){let{value:x,message:s}=ea(I);if(Yl(x)&&!t.match(x)&&(F[K]=Object.assign({type:Ii.pattern,message:s,ref:o},W(Ii.pattern,s)),!r))return Q(s),F}if(k){if(Xl(k)){let x=await k(t),s=E1(x,q);if(s&&(F[K]=Object.assign(Object.assign({},s),W(Ii.validate,s.message)),!r))return Q(s.message),F}else if(Lt(k)){let x={};for(let s in k){if(!Ir(x)&&!r)break;let u=E1(await k[s](t),q,s);u&&(x=Object.assign(Object.assign({},u),W(s,u.message)),Q(u.message),r&&(F[K]=x))}if(!Ir(x)&&(F[K]=Object.assign({ref:q},x),!r))return F}}return Q(!0),F},"validateField"),Uk={mode:bn.onSubmit,reValidateMode:bn.onChange,shouldFocusError:!0};function Dk(e={}){let t=Object.assign(Object.assign({},Uk),e),r={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},n={},o=t.defaultValues||{},a=t.shouldUnregister?{}:uc(o),l={action:!1,mount:!1,watch:!1},d={mount:new Set,unMount:new Set,array:new Set,watch:new Set},g,A=0,T={},I={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},k={watch:M0(),array:M0(),state:M0()},K=y1(t.mode),C=y1(t.reValidateMode),R=t.criteriaMode===bn.all,V=i((O,U)=>(...N)=>{clearTimeout(A),A=self.setTimeout(()=>O(...N),U)},"debounce"),q=i(async O=>{let U=!1;return I.isValid&&(U=t.resolver?Ir((await ae()).errors):await me(n,!0),!O&&U!==r.isValid&&(r.isValid=U,k.state.next({isValid:U}))),U},"_updateValid"),Q=i((O,U,N,H=[],te=!0,j=!0)=>{if(l.action=!0,j&&Array.isArray(fe(n,O))){let J=U(fe(n,O),N.argA,N.argB);te&&Tt(n,O,J)}if(I.errors&&j&&Array.isArray(fe(r.errors,O))){let J=U(fe(r.errors,O),N.argA,N.argB);te&&Tt(r.errors,O,J),Nk(r.errors,O)}if(I.touchedFields&&Array.isArray(fe(r.touchedFields,O))){let J=U(fe(r.touchedFields,O),N.argA,N.argB);te&&Tt(r.touchedFields,O,J)}I.dirtyFields&&(r.dirtyFields=b1(o,a)),k.state.next({isDirty:s(O,H),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})},"_updateFieldArray"),F=i((O,U)=>(Tt(r.errors,O,U),k.state.next({errors:r.errors})),"updateErrors"),ce=i((O,U,N,H)=>{let te=fe(n,O);if(te){let j=fe(a,O,Mt(N)?fe(o,O):N);Mt(j)||H&&H.defaultChecked||U?Tt(a,O,U?j:I0(te._f)):y(O,j),l.mount&&q()}},"updateValidAndValue"),se=i((O,U,N,H,te)=>{let j=!1,J={name:O},et=fe(r.touchedFields,O);if(I.isDirty){let ye=r.isDirty;r.isDirty=J.isDirty=s(),j=ye!==J.isDirty}if(I.dirtyFields&&(!N||H)){let ye=fe(r.dirtyFields,O);ra(fe(o,O),U)?er(r.dirtyFields,O):Tt(r.dirtyFields,O,!0),J.dirtyFields=r.dirtyFields,j=j||ye!==fe(r.dirtyFields,O)}return N&&!et&&(Tt(r.touchedFields,O,N),J.touchedFields=r.touchedFields,j=j||I.touchedFields&&et!==N),j&&te&&k.state.next(J),j?J:{}},"updateTouchAndDirty"),ie=i(async(O,U,N,H,te)=>{let j=fe(r.errors,U),J=I.isValid&&r.isValid!==N;if(e.delayError&&H?(g=g||V(F,e.delayError),g(U,H)):(clearTimeout(A),H?Tt(r.errors,U,H):er(r.errors,U)),((H?!ra(j,H):j)||!Ir(te)||J)&&!O){let et=Object.assign(Object.assign(Object.assign({},te),J?{isValid:N}:{}),{errors:r.errors,name:U});r=Object.assign(Object.assign({},r),et),k.state.next(et)}T[U]--,I.isValidating&&!T[U]&&(k.state.next({isValidating:!1}),T={})},"shouldRenderByError"),ae=i(async O=>t.resolver?await t.resolver(Object.assign({},a),t.context,Kk(O||d.mount,n,t.criteriaMode,t.shouldUseNativeValidation)):{},"_executeSchema"),W=i(async O=>{let{errors:U}=await ae();if(O)for(let N of O){let H=fe(U,N);H?Tt(r.errors,N,H):er(r.errors,N)}else r.errors=U;return U},"executeSchemaAndUpdateState"),me=i(async(O,U,N={valid:!0})=>{for(let H in O){let te=O[H];if(te){let j=te._f,J=B0(te,"_f");if(j){let et=await M1(te,fe(a,j.name),R,t.shouldUseNativeValidation);if(et[j.name]&&(N.valid=!1,U))break;U||(et[j.name]?Tt(r.errors,j.name,et[j.name]):er(r.errors,j.name))}J&&await me(J,U,N)}}return N.valid},"executeBuildInValidation"),x=i(()=>{for(let O of d.unMount){let U=fe(n,O);U&&(U._f.refs?U._f.refs.every(N=>!T0(N)):!T0(U._f.ref))&&z(O)}d.unMount=new Set},"_removeUnmounted"),s=i((O,U)=>(O&&U&&Tt(a,O,U),!ra(c(),o)),"_getDirty"),u=i((O,U,N)=>{let H=Object.assign({},l.mount?a:Mt(U)?o:$n(O)?{[O]:U}:U);return O1(O,d,H,N)},"_getWatch"),m=i(O=>Ql(fe(l.mount?a:o,O,e.shouldUnregister?fe(o,O,[]):[])),"_getFieldArray"),y=i((O,U,N={})=>{let H=fe(n,O),te=U;if(H){let j=H._f;j&&(!j.disabled&&Tt(a,O,D1(U,j)),te=v1&&P0(j.ref)&&hr(U)?"":U,R1(j.ref)?[...j.ref.options].forEach(J=>J.selected=te.includes(J.value)):j.refs?fc(j.ref)?j.refs.length>1?j.refs.forEach(J=>J.checked=Array.isArray(te)?!!te.find(et=>et===J.value):te===J.value):j.refs[0]&&(j.refs[0].checked=!!te):j.refs.forEach(J=>J.checked=J.value===te):N0(j.ref)||(j.ref.value=te,j.ref.type||k.watch.next({name:O})))}(N.shouldDirty||N.shouldTouch)&&se(O,te,N.shouldTouch,N.shouldDirty,!0),N.shouldValidate&&b(O)},"setFieldValue"),v=i((O,U,N)=>{for(let H in U){let te=U[H],j=`${O}.${H}`,J=fe(n,j);(d.array.has(O)||!Zl(te)||J&&!J._f)&&!ta(te)?v(j,te,N):y(j,te,N)}},"setValues"),S=i((O,U,N={})=>{let H=fe(n,O),te=d.array.has(O);Tt(a,O,U),te?(k.array.next({name:O,values:a}),(I.isDirty||I.dirtyFields)&&N.shouldDirty&&(r.dirtyFields=b1(o,a),k.state.next({name:O,dirtyFields:r.dirtyFields,isDirty:s(O,U)}))):H&&!H._f&&!hr(U)?v(O,U,N):y(O,U,N),g1(O,d)&&k.state.next({}),k.watch.next({name:O})},"setValue"),E=i(async O=>{let U=O.target,N=U.name,H=fe(n,N);if(H){let te,j,J=U.type?I0(H._f):I1(O),et=O.type===_0.BLUR,ye=!Ck(H._f)&&!t.resolver&&!fe(r.errors,N)&&!H._f.deps||Rk(et,fe(r.touchedFields,N),r.isSubmitted,C,K),we=g1(N,d,et);Tt(a,N,J),et?H._f.onBlur&&H._f.onBlur(O):H._f.onChange&&H._f.onChange(O);let _r=se(N,J,et,!1),Te=!Ir(_r)||we;if(!et&&k.watch.next({name:N,type:O.type}),ye)return Te&&k.state.next(Object.assign({name:N},we?{}:_r));if(!et&&we&&k.state.next({}),T[N]=(T[N],1),I.isValidating&&k.state.next({isValidating:!0}),t.resolver){let{errors:Se}=await ae([N]),wn=S1(r.errors,n,N),Ee=S1(Se,n,wn.name||N);te=Ee.error,N=Ee.name,j=Ir(Se)}else te=(await M1(H,fe(a,N),R,t.shouldUseNativeValidation))[N],j=await q(!0);H._f.deps&&b(H._f.deps),ie(!1,N,j,te,_r)}},"onChange"),b=i(async(O,U={})=>{let N,H,te=$l(O);if(k.state.next({isValidating:!0}),t.resolver){let j=await W(Mt(O)?O:te);N=Ir(j),H=O?!te.some(J=>fe(j,J)):N}else O?(H=(await Promise.all(te.map(async j=>{let J=fe(n,j);return await me(J&&J._f?{[j]:J}:J)}))).every(Boolean),!(!H&&!r.isValid)&&q()):H=N=await me(n);return k.state.next(Object.assign(Object.assign(Object.assign({},!$n(O)||I.isValid&&N!==r.isValid?{}:{name:O}),t.resolver?{isValid:N}:{}),{errors:r.errors,isValidating:!1})),U.shouldFocus&&!H&&k0(n,j=>fe(r.errors,j),O?te:d.mount),H},"trigger"),c=i(O=>{let U=Object.assign(Object.assign({},o),l.mount?a:{});return Mt(O)?U:$n(O)?fe(U,O):O.map(N=>fe(U,N))},"getValues"),w=i(O=>{O?$l(O).forEach(U=>er(r.errors,U)):r.errors={},k.state.next({errors:r.errors})},"clearErrors"),D=i((O,U,N)=>{let H=(fe(n,O,{_f:{}})._f||{}).ref;Tt(r.errors,O,Object.assign(Object.assign({},U),{ref:H})),k.state.next({name:O,errors:r.errors,isValid:!1}),N&&N.shouldFocus&&H&&H.focus&&H.focus()},"setError"),L=i((O,U)=>Xl(O)?k.watch.subscribe({next:i(N=>O(u(void 0,U),N),"next")}):u(O,U,!0),"watch"),z=i((O,U={})=>{for(let N of O?$l(O):d.mount)d.mount.delete(N),d.array.delete(N),fe(n,N)&&(U.keepValue||(er(n,N),er(a,N)),!U.keepError&&er(r.errors,N),!U.keepDirty&&er(r.dirtyFields,N),!U.keepTouched&&er(r.touchedFields,N),!t.shouldUnregister&&!U.keepDefaultValue&&er(o,N));k.watch.next({}),k.state.next(Object.assign(Object.assign({},r),U.keepDirty?{isDirty:s()}:{})),!U.keepIsValid&&q()},"unregister"),Y=i((O,U={})=>{let N=fe(n,O),H=lc(U.disabled);return Tt(n,O,{_f:Object.assign(Object.assign(Object.assign({},N&&N._f?N._f:{ref:{name:O}}),{name:O,mount:!0}),U)}),d.mount.add(O),N?H&&Tt(a,O,U.disabled?void 0:fe(a,O,I0(N._f))):ce(O,!0,U.value),Object.assign(Object.assign(Object.assign({},H?{disabled:U.disabled}:{}),t.shouldUseNativeValidation?{required:!!U.required,min:cc(U.min),max:cc(U.max),minLength:cc(U.minLength),maxLength:cc(U.maxLength),pattern:cc(U.pattern)}:{}),{name:O,onChange:E,onBlur:E,ref:i(te=>{if(te){Y(O,U),N=fe(n,O);let j=Mt(te.value)&&te.querySelectorAll&&te.querySelectorAll("input,select,textarea")[0]||te,J=Bk(j),et=N._f.refs||[];if(J?et.find(ye=>ye===j):j===N._f.ref)return;Tt(n,O,{_f:Object.assign(Object.assign({},N._f),J?{refs:et.concat(j).filter(T0),ref:{type:j.type,name:O}}:{ref:j})}),ce(O,!1,void 0,j)}else N=fe(n,O,{}),N._f&&(N._f.mount=!1),(t.shouldUnregister||U.shouldUnregister)&&!(_1(d.array,O)&&l.action)&&d.unMount.add(O)},"ref")})},"register");return{control:{register:Y,unregister:z,_executeSchema:ae,_getWatch:u,_getDirty:s,_updateValid:q,_removeUnmounted:x,_updateFieldArray:Q,_getFieldArray:m,_subjects:k,_proxyFormState:I,get _fields(){return n},set _fields(O){n=O},get _formValues(){return a},set _formValues(O){a=O},get _stateFlags(){return l},set _stateFlags(O){l=O},get _defaultValues(){return o},set _defaultValues(O){o=O},get _names(){return d},set _names(O){d=O},get _formState(){return r},set _formState(O){r=O},get _options(){return t},set _options(O){t=Object.assign(Object.assign({},t),O)}},trigger:b,register:Y,handleSubmit:i((O,U)=>async N=>{N&&(N.preventDefault&&N.preventDefault(),N.persist&&N.persist());let H=!0,te=t.shouldUnregister?uc(a):Object.assign({},a);k.state.next({isSubmitting:!0});try{if(t.resolver){let{errors:j,values:J}=await ae();r.errors=j,te=J}else await me(n);Ir(r.errors)&&Object.keys(r.errors).every(j=>fe(te,j))?(k.state.next({errors:{},isSubmitting:!0}),await O(te,N)):(U&&await U(r.errors,N),t.shouldFocusError&&k0(n,j=>fe(r.errors,j),d.mount))}catch(j){throw H=!1,j}finally{r.isSubmitted=!0,k.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ir(r.errors)&&H,submitCount:r.submitCount+1,errors:r.errors})}},"handleSubmit"),watch:L,setValue:S,getValues:c,reset:i((O,U={})=>{let N=O||o,H=uc(N),te=O&&!Ir(O)?H:o;if(U.keepDefaultValues||(o=N),!U.keepValues){if(v1&&Mt(O))for(let j of d.mount){let J=fe(n,j);if(J&&J._f){let et=Array.isArray(J._f.refs)?J._f.refs[0]:J._f.ref;try{P0(et)&&et.closest("form").reset();break}catch{}}}a=e.shouldUnregister?U.keepDefaultValues?uc(o):{}:H,n={},k.array.next({values:te}),k.watch.next({values:te})}d={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!I.isValid||!!U.keepIsValid,l.watch=!!e.shouldUnregister,k.state.next({submitCount:U.keepSubmitCount?r.submitCount:0,isDirty:U.keepDirty?r.isDirty:U.keepDefaultValues?!ra(O,o):!1,isSubmitted:U.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:U.keepDirty?r.dirtyFields:U.keepDefaultValues&&O?Object.entries(O).reduce((j,[J,et])=>Object.assign(Object.assign({},j),{[J]:et!==fe(o,J)}),{}):{},touchedFields:U.keepTouched?r.touchedFields:{},errors:U.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},"reset"),resetField:i((O,U={})=>{fe(n,O)&&(Mt(U.defaultValue)?S(O,fe(o,O)):(S(O,U.defaultValue),Tt(o,O,U.defaultValue)),U.keepTouched||er(r.touchedFields,O),U.keepDirty||(er(r.dirtyFields,O),r.isDirty=U.defaultValue?s(O,fe(o,O)):s()),U.keepError||(er(r.errors,O),I.isValid&&q()),k.state.next(Object.assign({},r)))},"resetField"),clearErrors:w,unregister:z,setError:D,setFocus:i(O=>{let U=fe(n,O)._f;(U.ref.focus?U.ref:U.refs[0]).focus()},"setFocus")}}i(Dk,"createFormControl");function ef(e={}){let t=mt.default.useRef(),[r,n]=mt.default.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});t.current?t.current.control._options=e:t.current=Object.assign(Object.assign({},Dk(e)),{formState:r});let o=t.current.control,a=mt.default.useCallback(l=>{P1(l,o._proxyFormState,!0)&&(o._formState=Object.assign(Object.assign({},o._formState),l),n(Object.assign({},o._formState)))},[o]);return K0({subject:o._subjects.state,callback:a}),mt.default.useEffect(()=>{o._stateFlags.mount||(o._proxyFormState.isValid&&o._updateValid(),o._stateFlags.mount=!0),o._stateFlags.watch&&(o._stateFlags.watch=!1,o._subjects.state.next({})),o._removeUnmounted()}),t.current.formState=k1(r,o._proxyFormState),t.current}i(ef,"useForm");var Vk=i(({accounts:e,enabledAddressTypes:t,enableAddressTypes:r,editableAccountMetadata:n,addReadOnlyAccount:o,fetchDomainOwner:a})=>{let l=Tr(),{t:d}=Oi(),g=$t(),A=n?.networkID||on.Solana.Mainnet,{formState:{errors:T},control:I,clearErrors:k,getValues:K,setValue:C,register:R,handleSubmit:V,watch:q,trigger:Q}=ef({mode:"all"}),{networkID:F,name:ce,address:se,resolvedAddress:ie}=q(),ae={required:!0},W=(0,tf.useMemo)(()=>({required:{value:!0,message:d("addAccountImportAccountPublicKeyRequired")},validate:(0,L1.default)(async s=>{if(s==="")return!0;if(!ym(s,F||A))try{let v=(await a(s,F,l,g))?.owner;return v?(C("resolvedAddress",v),e.find(E=>E.addresses.map(b=>b.address).includes(v))?d("addAccountImportAccountDuplicateAddress"):!0):d("addAccountImportAccountIncorrectFormat")}catch{return d("sendFormErrorInvalidDomain")}return C("resolvedAddress",s),e.find(y=>y.addresses.map(v=>v.address).includes(s))?d("addAccountImportAccountDuplicateAddress"):!0},500)}),[d,F,A,C,e,a,l,g]),me=ce&&ie&&!T.name&&!T.address,x=(0,tf.useCallback)(async({networkID:s,name:u,resolvedAddress:m},y)=>{let v=rs(s,m);t.includes(v)||await r({addressTypes:[v]});let S={};S[v]=m,o({name:u,addresses:S,icon:n?.icon}),y(),g.capture("addReadOnlyAccount",{data:{networkID:s,chainType:v,walletAddress:m}})},[o,n?.icon,r,t,g]);return{Controller:K1,canSubmit:me,control:I,errors:T,nameValidations:ae,address:se,addressValidations:W,clearErrors:k,getValues:K,handleSubmit:V,onSubmit:x,register:R,setValue:C,trigger:Q}},"useAddReadOnlyAccountForm");h();p();function Lk(e){let t=t1();return e.map(r=>Ci.get(r.networkID).addressTooltipNetworkName?.(r.networkID,r.address,t)??pe.getNetworkName(r.networkID))}i(Lk,"useAddressTooltipNetworkName");h();p();var F1=ue(At());var Fk=i(()=>{let{data:e}=Mr(),t=(0,F1.useMemo)(()=>{if(!e||!e.addresses.length)return pe.getChainID(rm.Mainnet);let r=e.addresses[0];return pe.getChainID(r.networkID)},[e]);return{caip19:gm(vm(t)),tokenName:pe.getChainName(t),tokenSymbol:pe.getTokenSymbol(t)}},"useDefaultNativeTokenForSelectedAccount");h();p();var jk=i(()=>aa(),"useDefaultNetworkSettings");h();p();var zk=i(()=>{let{data:e}=Mr();return e?e.type===P.Ledger:void 0},"useIsSelectedLedgerAccount");h();p();var qk=i(()=>{let{data:e}=E0();return!!e?.isDeveloperMode},"useIsTestnetMode"),Hk=i(()=>ac().some(t=>pe.isLocalNetworkID(t)),"useIsLocalnetMode");h();p();var z1=ue(At());h();p();var Wk=Xe(function*({user:e}){let t=sr(),r=yield co();if(!t||!r||!e)return null;let{enabledNetworkIDs:n}=t,o=n?.reduce(Wt((T,I)=>{let k=r.find(Wt(K=>K.addresses.some(Wt(C=>C.networkID===I,0,[I])),0,[I]))?.addresses.find(Wt(K=>K.networkID===I,1,[I]))?.address;return k&&(T[I]=k),T},0,[r]),{})??{},a=e?.addresses,l=a?Object.keys(a).filter(pe.isNetworkID):[],d=(n??[]).filter(Wt(T=>!l.includes(T),1,[l])).reduce(Wt((T,I)=>{let k=o[I];return k&&(T[I]=k),T},2,[o]),{});return Object.keys(d).length>0?{addresses:{...d,...a},addedAddresses:d}:null}),j1=i(()=>{let{data:e}=A0(),t=St(Wk,{user:e});return Ft(t)},"usePatchProfileAddresses");var $k=i(()=>{let{data:e}=j1(),{mutate:t}=S0(),r=$t();(0,z1.useEffect)(()=>{if(e){let{addresses:n,addedAddresses:o}=e,a=Object.keys(o);r.capture("autoSyncUsernameAddresses",{data:{addedChains:a}}),t({addresses:n})}},[e,t,r])},"usePatchAddressesIfNeeded");h();p();var q1=ue(At());var Gk=i(e=>{let t=(0,q1.useCallback)(r=>r.addresses.find(n=>e===pe.getChainID(n.networkID))?.networkID,[e]);return Mr({select:t})},"useSelectedNetwork");h();p();var H1=ue(At());var Zk=i(({accountBalance:e,accountId:t,enabled:r,value:n,setAccountBalance:o})=>{(0,H1.useEffect)(()=>{if(r&&t&&n!==void 0&&n!==e){let a=Date.now();o({identifier:t,balance:{timestamp:a,value:n}})}},[e,t,r,n,o])},"useSetAccountBalanceEffect");h();p();var W1=ue(At());var Jk=i(()=>{let{data:e=[]}=Hl("local-only"),{data:t=[]}=Hl("recoverable-only");return(0,W1.useMemo)(()=>e.length+t.length>1,[e.length,t.length])},"useShowRemoveSecretPhrase");h();p();h();p();h();p();var tr=ue(At());function Yk(e){let t,r=new Set,n=i((A,T)=>{let I=typeof A=="function"?A(t):A;if(I!==t){let k=t;t=T?I:Object.assign({},t,I),r.forEach(K=>K(t,k))}},"setState"),o=i(()=>t,"getState"),a=i((A,T=o,I=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let k=T(t);function K(){let C=T(t);if(!I(k,C)){let R=k;A(k=C,R)}}return i(K,"listenerToAdd"),r.add(K),()=>r.delete(K)},"subscribeWithSelector"),g={setState:n,getState:o,subscribe:i((A,T,I)=>T||I?a(A,T,I):(r.add(A),()=>r.delete(A)),"subscribe"),destroy:i(()=>r.clear(),"destroy")};return t=e(n,o,g),g}i(Yk,"createStore");var Qk=typeof self>"u"||!self.navigator||/ServerSideRendering|^Deno\//.test(self.navigator.userAgent),$1=Qk?tr.useEffect:tr.useLayoutEffect;function rf(e){let t=typeof e=="function"?Yk(e):e,r=i((n=t.getState,o=Object.is)=>{let[,a]=(0,tr.useReducer)(V=>V+1,0),l=t.getState(),d=(0,tr.useRef)(l),g=(0,tr.useRef)(n),A=(0,tr.useRef)(o),T=(0,tr.useRef)(!1),I=(0,tr.useRef)();I.current===void 0&&(I.current=n(l));let k,K=!1;(d.current!==l||g.current!==n||A.current!==o||T.current)&&(k=n(l),K=!o(I.current,k)),$1(()=>{K&&(I.current=k),d.current=l,g.current=n,A.current=o,T.current=!1});let C=(0,tr.useRef)(l);$1(()=>{let V=i(()=>{try{let Q=t.getState(),F=g.current(Q);A.current(I.current,F)||(d.current=Q,I.current=F,a())}catch{T.current=!0,a()}},"listener"),q=t.subscribe(V);return t.getState()!==C.current&&V(),q},[]);let R=K?k:I.current;return(0,tr.useDebugValue)(R),R},"useStore");return Object.assign(r,t),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");let n=[r,t];return{next(){let o=n.length<=0;return{value:n.shift(),done:o}}}},r}i(rf,"create");var Xk={editableAccountMetadata:void 0,setEditableAccountMetadata:i(()=>{},"setEditableAccountMetadata")},nf=rf(e=>({...Xk,setEditableAccountMetadata:i(t=>{e({editableAccountMetadata:t})},"setEditableAccountMetadata")}));h();p();var G1={username:"",available:null,usernameAvailabilityError:null,icon:null,secretIdentifiers:[],accountIdentifiersToSync:[],addresses:{}},Z1=rf((e,t)=>({...G1,setUsername:i(r=>e({username:r}),"setUsername"),setUsernameAvailabilityError:i(r=>e({usernameAvailabilityError:r}),"setUsernameAvailabilityError"),setAvailable:i(r=>e({available:r}),"setAvailable"),setIcon:i(r=>e({icon:r}),"setIcon"),addSecretIdentifier:i(r=>{let n=[...t().secretIdentifiers];n.includes(r)||n.push(r),e({secretIdentifiers:n})},"addSecretIdentifier"),removeSecretIdentifier:i(r=>{e({secretIdentifiers:t().secretIdentifiers.filter(n=>n!==r)})},"removeSecretIdentifier"),addAccountIdentifierToSync:i(r=>{let n=[...t().accountIdentifiersToSync];n.includes(r)||n.push(r),e({accountIdentifiersToSync:n})},"addAccountIdentifierToSync"),removeAccountIdentifierToSync:i(r=>{e({accountIdentifiersToSync:t().accountIdentifiersToSync.filter(n=>n!==r)})},"removeAccountIdentifierToSync"),clearAccountIdentifiersToSync:i(()=>e({accountIdentifiersToSync:[]}),"clearAccountIdentifiersToSync"),setAccountIdentifiersToSync:i(r=>e({accountIdentifiersToSync:r}),"setAccountIdentifiersToSync"),addAddress:i((r,n)=>{let o={...t().addresses};o[r]=n,e({addresses:o})},"addAddress"),removeAddress:i((r,n)=>{let o={...t().addresses};o[r]===n&&delete o[r],e({addresses:o})},"removeAddress"),clearAddresses:i(()=>{e({addresses:{}})},"clearAddresses"),reset:i(()=>{e(G1)},"reset")}));h();p();var J1=ue(Yo()),Gn=ue(At());var e6=i(({importPrivateKeyCallback:e,existingAccounts:t,editableAccountMetadata:r,analytics:n})=>{let{t:o}=Oi(),{formState:{errors:a},control:l,clearErrors:d,getValues:g,setValue:A,register:T,handleSubmit:I,watch:k,trigger:K}=ef({mode:"all",defaultValues:{addressType:r?.addressType||_.Solana,networkID:r?.networkID||on.Solana.Mainnet}}),[C,R]=(0,Gn.useState)(null),V=nf(u=>u.setEditableAccountMetadata),{name:q}=k(),Q=r?.secrets,F=g("networkID"),ce=g("addressType"),se=g("privateKey"),ie=(0,Gn.useMemo)(()=>new lm,[]),ae={required:!0},W=(0,Gn.useMemo)(()=>({required:{value:!0,message:o("addAccountImportAccountPrivateKeyRequired")},onChange:i(u=>{u.target.value||R(null)},"onChange"),validate:i(u=>{try{let m=g("networkID"),y=g("addressType");if(/\s/.test(u)||!y)return o("addAccountImportAccountIncorrectFormat");let v=pe.getNetworkDefinition(m).value,S=bc({privateKey:u,addressType:y,networkIDValue:v});V({...r,secrets:S});let E=ie.generateKeypairFromPrivateKey(S,y);return t.find(c=>!c.isReadOnly&&(c.addresses.map(w=>w.address).includes(Kt({publicKey:E.publicKey,addressType:y,networkID:m}))||c.addresses.filter(w=>"publicKey"in w).map(w=>w.publicKey).find(w=>w?Buffer.from(w).equals(Buffer.from(E.publicKey)):!1)))?o("addAccountImportAccountDuplicatePrivateKey"):!0}catch{return o("addAccountImportAccountIncorrectFormat")}},"validate")}),[o,ie,t,r,V,g]);(0,Gn.useEffect)(()=>{if(a.privateKey){R(null);return}if(se||Q)try{let u=pe.getNetworkDefinition(F).value,m=Q||bc({privateKey:se,addressType:ce,networkIDValue:u}),y=ie.generateKeypairFromPrivateKey(m,ce);if(!se){let v="";switch(ce){case _.Solana:{v=J1.default.encode(y.privateKey);break}case _.EVM:{v="0x"+Buffer.from(y.privateKey).toString("hex");break}case _.Sui:{v=dm(y.privateKey);break}}A("privateKey",v)}R(Kt({publicKey:y.publicKey,addressType:ce,networkID:F}))}catch{R(null)}},[a.privateKey,ce,ie,se,Q,A,F]);let me=(0,Gn.useMemo)(()=>!!(q&&se&&!a.name&&!a.privateKey),[a.name,a.privateKey,q,se]),x=(0,Gn.useCallback)(async({networkID:u,name:m,privateKey:y,addressType:v})=>{let S=pe.getNetworkDefinition(u).value,E=bc({privateKey:y,addressType:v,networkIDValue:S});await e({chainType:v,name:m,icon:r?.icon,privateKey:E}),n.capture("addPrivateKeyAccount",{data:{networkID:u,chainType:v,walletAddress:C}})},[e,r?.icon,n,C]);return{formOnSubmitHandler:I(u=>x(u)),canSubmit:me,control:l,getValues:g,register:T,setValue:A,trigger:K,errors:a,clearErrors:d,nameValidations:ae,privateKey:se,privateKeyValidations:W,addressPreview:C}},"useImportPrivateKeyForm");h();p();h();p();var _i="@phantom/accounts",A0e=`${_i}:account-identifier`,S0e=`${_i}:selected-account`,E0e=`${_i}:all-accounts`,M0e=`${_i}:all-seeds`,T0e=`${_i}:all-secrets`,I0e=`${_i}:account-balance`,Y1={trustedApps(){return[`${_i}:trusted-apps`]},patchProfileAddresses(e){return[`${_i}:patch-profile-addresses`,e]},canUseCash(){return[`${_i}:can-use-cash`]}};var t6=i(e=>{let t=yt(),r=Y1.canUseCash(),n=i(async()=>{if(!t?.canDeriveKMSAuthenticator)return!1;try{return await t.canDeriveKMSAuthenticator()}catch{return!1}},"queryFn"),{data:o,isPending:a}=or({queryKey:r,queryFn:n,...e});return{canUseCash:o??!1,isLoading:a}},"useCanAccountUseCash");h();p();var r6=Xe(function*(){let e=sr(),{enabledAddressTypes:t,enabledChainIDs:r,enabledMainnetOnlyNetworkIDs:n}=e,[o,a]=yield Ac.all([Vr(be.DeveloperMode),Xs()]),l=yield qn(),d=yield uo(l),g=yield Gx(d.identifier),A={name:g.name,icon:g.icon,identifier:d.identifier,addresses:eu(d,n,t,r,a,o?.isDeveloperMode??!1)};return d.type===P.Seed?{...A,type:P.Seed,seedIdentifier:d.seedIdentifier,isReadOnly:!1}:d.type===P.Seedless?{...A,type:P.Seedless,seedIdentifier:d.seedIdentifier,isReadOnly:!1}:d.type===P.ReadOnly?{...A,type:P.ReadOnly,isReadOnly:!0}:d.type===P.PrivateKey?{...A,privateKeyIdentifier:d.privateKeyIdentifier,type:P.PrivateKey,isReadOnly:!1}:{...A,type:d.type,isReadOnly:!1}});export{is as a,Km as b,gA as c,yA as d,vA as e,Jt as f,wA as g,xA as h,AA as i,yt as j,Ic as k,Ci as l,EA as m,Ff as n,P as o,MA as p,u2 as q,qf as r,l2 as s,f2 as t,d2 as u,Hf as v,Gf as w,Bg as x,h2 as y,hi as z,ha as A,m2 as B,BA as C,OA as D,g2 as E,y2 as F,v2 as G,Eo as H,Jf as I,w2 as J,x2 as K,yr as L,vs as M,zg as N,Aa as O,oy as P,yd as Q,ch as R,df as S,ui as T,Or as U,ya as V,RS as W,Nf as X,So as Y,di as Z,DS as _,$S as $,GS as aa,KA as ba,Pr as ca,vo as da,ZS as ea,JS as fa,wa as ga,YS as ha,QS as ia,XS as ja,e2 as ka,hh as la,re as ma,wt as na,ge as oa,Cb as pa,mh as qa,Nb as ra,Lb as sa,zb as ta,qb as ua,rI as va,Tw as wa,Iw as xa,Pw as ya,Ex as za,Al as Aa,Mx as Ba,D_ as Ca,V_ as Da,L_ as Ea,F_ as Fa,j_ as Ga,z_ as Ha,tne as Ia,be as Ja,o3 as Ka,oo as La,Vr as Ma,Fx as Na,Yx as Oa,p3 as Pa,m3 as Qa,g3 as Ra,Uf as Sa,Df as Ta,nc as Ua,c0 as Va,x3 as Wa,u0 as Xa,A3 as Ya,S3 as Za,t1 as _a,Qs as $a,use as ab,lse as bb,fse as cb,dse as db,hse as eb,pse as fb,rk as gb,nk as hb,co as ib,f0 as jb,d0 as kb,ok as lb,h0 as mb,sk as nb,ak as ob,Hl as pb,k3 as qb,E0 as rb,uk as sb,r1 as tb,Mr as ub,lk as vb,fk as wb,dk as xb,hk as yb,pk as zb,gk as Ab,yk as Bb,vk as Cb,bk as Db,wk as Eb,xk as Fb,ac as Gb,Ak as Hb,Ek as Ib,lo as Jb,c1 as Kb,N3 as Lb,U3 as Mb,V3 as Nb,Xt as Ob,$3 as Pb,Fl as Qb,B3 as Rb,Tr as Sb,w0 as Tb,Jo as Ub,G3 as Vb,Z3 as Wb,sc as Xb,x0 as Yb,A0 as Zb,Q3 as _b,S0 as $b,X3 as ac,kk as bc,K1 as cc,ef as dc,Vk as ec,Lk as fc,Fk as gc,jk as hc,zk as ic,qk as jc,Hk as kc,$k as lc,ek as mc,Gk as nc,Zk as oc,Jk as pc,rf as qc,nf as rc,Z1 as sc,e6 as tc,t6 as uc,r6 as vc};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-KLKDJF5S.js.map
