import{a as ie,c as $e}from"./chunk-3CMC7R7H.js";import{b as ke}from"./chunk-YPZVTUKM.js";import"./chunk-Q7YS6EOF.js";import{a as We}from"./chunk-RCADRGSF.js";import"./chunk-HY5EE4BL.js";import"./chunk-M333XZRL.js";import{B as re,D as Ke,F as Xe,Ga as je}from"./chunk-UOP6XST7.js";import"./chunk-PZK75MNV.js";import"./chunk-J25C3IZ2.js";import"./chunk-DQWLAPQA.js";import{s as U}from"./chunk-2EBYQ5P2.js";import"./chunk-JXEDAEEX.js";import"./chunk-NZFNOPCO.js";import"./chunk-2V4XDYKJ.js";import"./chunk-SUKAPYGM.js";import"./chunk-736WIWZX.js";import"./chunk-PV5WDBPS.js";import"./chunk-LOTYUAC5.js";import"./chunk-3BNSF37W.js";import"./chunk-UKK3MGUG.js";import"./chunk-KOBOJI2X.js";import"./chunk-CH3CP7SO.js";import{j as $}from"./chunk-BXLRR6GM.js";import"./chunk-ST7U2VUQ.js";import{a as he}from"./chunk-LEFSCI55.js";import{a as Oe}from"./chunk-WY4HUBHZ.js";import"./chunk-RDJLORQI.js";import"./chunk-M62EOSRT.js";import"./chunk-4V5HUNZ6.js";import"./chunk-WWYPP3MY.js";import{c as _e}from"./chunk-IJJXVSGB.js";import"./chunk-XF26M2KT.js";import"./chunk-N3C6FBKY.js";import"./chunk-CTKHELYY.js";import"./chunk-XMURLUQN.js";import"./chunk-JUI4ISS4.js";import"./chunk-GVVB5LZG.js";import{a as ne,d as W}from"./chunk-S5LVVL2E.js";import{B as xe,R as Le,db as v,m as d,p as ue,q as Te}from"./chunk-4EXJCS3P.js";import{A as De,Ja as He,xc as ze}from"./chunk-TAPPRV2Q.js";import"./chunk-C3BAWXY6.js";import"./chunk-WVRYN4MY.js";import"./chunk-M3IC3XCG.js";import"./chunk-RSJ6JVZU.js";import"./chunk-2UWPPO5V.js";import{I as Ne,M as te,P as Ae,Y as Ge,da as ge,ga as Ve,ia as oe}from"./chunk-4T2FPKLQ.js";import"./chunk-GC6SFTGM.js";import"./chunk-A3JYJELV.js";import{a as Me,b as Q}from"./chunk-MVNJOY5H.js";import"./chunk-SIWEHH3L.js";import{ba as K,f as L,h as O,o as _}from"./chunk-OQCZPFI2.js";import"./chunk-YJCG6GWC.js";import{ub as z}from"./chunk-KLKDJF5S.js";import{X as Re,g as k,hc as Be,j as Ue,oe as Fe,pc as X,xb as ce}from"./chunk-BQE2SXP7.js";import{Cc as Z,Fc as ee,Lb as C,Y as fe,Yd as gt}from"./chunk-L3JU23Z5.js";import{u as pe}from"./chunk-5HNKNX3S.js";import{Aa as J,U as a,a as de,b as H,e as Y,q as G}from"./chunk-R3MCCTIW.js";import"./chunk-FNC6PQ53.js";import"./chunk-5QQLABHI.js";import"./chunk-VL3IRAUM.js";import"./chunk-FA7LVEFF.js";import{a as h,g as S,i as M,n as F}from"./chunk-WKJYWAXG.js";M();F();var b=S(de(),1);M();F();M();F();var Pe=S(de(),1);var y=S(H(),1),ut=d.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: scroll;
`,Tt=d.div`
  flex: 1;
  padding-top: 20px;
  padding-bottom: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
`,xt=d(v)`
  margin-top: 20px;
  margin-bottom: 20px;
`,ht=d(v)`
  margin-top: 16px;
`,yt=d.div`
  margin-top: 16px;
  padding-bottom: 20px;
`,qe=h(({pendingTransaction:e,onSuccess:i})=>{let{t:o}=G(),[f,n]=(0,Pe.useState)(void 0),{popDetailView:p}=$(),t=e.networkID,l=C.getAddressType(t),N=e.data.transactions[e.data.transactions.length-1],{data:s}=z(),{data:r,status:R}=ge(e,()=>p(),s),{data:P}=te(t,r),E=P?.gasEstimationPriceUSD??"",{data:I}=K(),A=[];if(I){let T=I.explorers[t]??L.get(t).defaultExplorer,m=_({networkID:t,endpoint:"transaction",explorerType:T,param:N.hash});m!==""&&A.push({label:o("richTransactionDetailViewOnExplorer",{explorer:O[T]}),value:m,type:"link"})}let{data:B,status:j}=oe(t,r?.maxFeePerGas,r?.maxPriorityFeePerGas),x=X(o,j,B),D=[{label:o("richTransactionDetailNetworkFee"),value:E.length>0?o("gasUpTo",{amount:E}):(0,y.jsx)(U,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:a.colors.legacy.borderDiminished})},{label:o("transactionEstimatedTime"),value:x!==""?x:(0,y.jsx)(U,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:a.colors.legacy.borderDiminished})},...A],{mutateAsync:w}=ke(),ae=(0,Pe.useCallback)(async()=>{if(!s||!r)return;let T=s.addresses.find(m=>m.networkID===t);if(T){e.type===k.Cancel?Q.capture("transactionPrioritizeCancelConfirmClicked",{data:{chainID:t,chainType:l}}):Q.capture("transactionCancelConfirmClicked",{data:{chainID:t,chainType:l}});try{n("inflight");let m=Fe({ethereumNetworkID:t,sender:T.address,destination:T.address,value:new Y("0",10),nonce:e.data.nonce});await w({multichainTransaction:{networkID:t,unsignedTransaction:m},pendingTransactionInput:{networkID:t,pendingTransactionId:e.id,hash:"",unsignedTransaction:pe.parse({from:e.ownerAddress})},senderAddress:T,gasEstimation:r}),p(),i(),n(void 0)}catch(m){ee.captureError(m,Z.Transaction),n("error")}}},[s,t,l,e,r,w,p,i]);return(0,y.jsxs)(ut,{children:[(0,y.jsxs)(Tt,{children:[(0,y.jsx)(Ke,{image:{type:"icon",preset:"x-bold"},size:64}),(0,y.jsx)(xt,{size:28,weight:600,children:e.type===k.Cancel?o("transactionPrioritizeCancel"):o("transactionCancel")}),(0,y.jsx)(ie,{rows:D}),f!=="error"&&(0,y.jsx)(ht,{lineHeight:16,color:a.colors.legacy.textDiminished,size:14,children:o("transactionCancelHelperText")}),f==="error"&&(0,y.jsx)(yt,{children:(0,y.jsx)(re,{color:a.colors.legacy.spotNegative,title:(0,y.jsx)(v,{color:a.colors.legacy.spotNegative,lineHeight:16,size:14,weight:400,children:o("transactionReplaceError")})})})]}),(0,y.jsx)(W,{onSecondaryClicked:()=>p(),onPrimaryClicked:ae,primaryTheme:"warning",primaryText:f==="inflight"?(0,y.jsx)(ne,{trackColor:a.colors.legacy.spotNegative,color:"white",diameter:20}):o("commandConfirm"),primaryDisabled:!r?.maxFeePerGas||R==="error",secondaryText:o("commandClose")})]})},"CancelEvmTransaction");M();F();var Je=S(gt(),1),Ce=S(de(),1);var g=S(H(),1),Pt=d.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: scroll;
`,Ct=d.div`
  flex: 1;
  padding-top: 20px;
  padding-bottom: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
`,wt=d(v)`
  margin-top: 20px;
  margin-bottom: 20px;
`,St=d(v)`
  margin-top: 16px;
`,Et=d.div`
  margin-top: 16px;
  padding-bottom: 20px;
`,Dt=h(({size:e})=>(0,g.jsx)(Te,{size:e,children:(0,g.jsx)(ue,{shape:"circle",color:he(a.colors.legacy.spotPositive,.1),children:(0,g.jsx)(xe,{width:32})})}),"Icon"),Qe=h(({pendingTransaction:e,onSuccess:i})=>{let{t:o}=G(),[f,n]=(0,Ce.useState)(void 0),{popDetailView:p}=$(),t=e.networkID,{data:l}=z(),{data:N,status:s}=Ne({networkID:t}),r=N?.fast,R=ce.get(t).transactionSpeedSeconds(Ue.fast),{data:P}=K(),E=[];if(P){let x=P.explorers[t]??L.get(t).defaultExplorer,D=_({networkID:t,endpoint:"transaction",explorerType:x,param:e.data.txID});D!==""&&E.push({label:o("richTransactionDetailViewOnExplorer",{explorer:O[x]}),value:D,type:"link"})}let I=X(o,s,R?{timeToMineSeconds:R}:void 0),A=[{label:o("richTransactionDetailNetworkFee"),value:r?`${Re(r.btcPerKilobyte)} sats/vB`:(0,g.jsx)(U,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:a.colors.legacy.borderDiminished})},{label:o("transactionEstimatedTime"),value:I!==""?I:(0,g.jsx)(U,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:a.colors.legacy.borderDiminished})},...E],B=Ge(),j=(0,Ce.useCallback)(async()=>{if(!l||!r?.btcPerKilobyte)return;let x=l.addresses.filter(w=>w.networkID===t),D=x[0];x.length>1&&(D=x.find(w=>w.addressType===fe.BitcoinNativeSegwit)),Q.capture("transactionSpeedUpConfirmClicked",{data:{chainID:t}});try{n("inflight"),await Be(ze(),{addressType:D.addressType,accountIdentifier:l.identifier,pendingTransaction:e,pendingTransactionInput:{...(0,Je.default)(e)},desiredFeeRateInBtcPerKilobyte:r.btcPerKilobyte,safeToSendUtxos:await B.getSafeToSendUtxos(D.address),utxoManager:B},new Me),p(),i(),n(void 0)}catch(w){ee.captureError(w,Z.Transaction),n("error")}},[l,t,e,r?.btcPerKilobyte,p,i,B]);return(0,g.jsxs)(Pt,{children:[(0,g.jsxs)(Ct,{children:[(0,g.jsx)(Dt,{size:64}),(0,g.jsx)(wt,{size:28,weight:600,children:o("transactionSpeedUp")}),(0,g.jsx)(ie,{rows:A}),f!=="error"&&(0,g.jsx)(St,{lineHeight:16,color:a.colors.legacy.textDiminished,size:14,children:o("transactionSpeedUplHelperText")}),f==="error"&&(0,g.jsx)(Et,{children:(0,g.jsx)(re,{color:a.colors.legacy.spotNegative,title:(0,g.jsx)(v,{color:a.colors.legacy.spotNegative,lineHeight:16,size:14,weight:400,children:o("transactionReplaceError")})})})]}),(0,g.jsx)(W,{onSecondaryClicked:()=>p(),onPrimaryClicked:j,primaryText:f==="inflight"?(0,g.jsx)(ne,{color:"white",diameter:20}):o("commandConfirm"),primaryDisabled:s==="error"&&!r?.btcPerKilobyte,secondaryText:o("commandClose")})]})},"SpeedUpBitcoinTransaction");M();F();var we=S(de(),1);var u=S(H(),1),kt=d.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: scroll;
`,vt=d.div`
  flex: 1;
  padding-top: 20px;
  padding-bottom: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
`,bt=d(v)`
  margin-top: 20px;
  margin-bottom: 20px;
`,It=d(v)`
  margin-top: 16px;
`,Ut=d.div`
  margin-top: 16px;
  padding-bottom: 20px;
`,Rt=h(({size:e})=>(0,u.jsx)(Te,{size:e,children:(0,u.jsx)(ue,{shape:"circle",color:he(a.colors.legacy.spotPositive,.1),children:(0,u.jsx)(xe,{width:32})})}),"Icon"),Ye=h(({pendingTransaction:e,onSuccess:i})=>{let{t:o}=G(),[f,n]=(0,we.useState)(void 0),{popDetailView:p}=$(),t=e.networkID,l=C.getAddressType(t),N=e.data.transactions[e.data.transactions.length-1],{data:s}=z(),{data:r,status:R}=ge(e,()=>p(),s),{data:P}=te(t,r),E=P?.gasEstimationPriceUSD??"",{data:I}=K(),A=[];if(I){let T=I.explorers[t]??L.get(t).defaultExplorer,m=_({networkID:t,endpoint:"transaction",explorerType:T,param:N.hash});m!==""&&A.push({label:o("richTransactionDetailViewOnExplorer",{explorer:O[T]}),value:m,type:"link"})}let{data:B,status:j}=oe(t,r?.maxFeePerGas,r?.maxPriorityFeePerGas),x=X(o,j,B),D=[{label:o("richTransactionDetailNetworkFee"),value:E.length>0?o("gasUpTo",{amount:E}):(0,u.jsx)(U,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:a.colors.legacy.borderDiminished})},{label:o("transactionEstimatedTime"),value:x!==""?x:(0,u.jsx)(U,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:a.colors.legacy.borderDiminished})},...A],{mutateAsync:w}=Ve(),ae=(0,we.useCallback)(async()=>{if(!(!s||!r||!s.addresses.find(m=>m.networkID===t))){Q.capture("transactionSpeedUpConfirmClicked",{data:{chainID:t,chainType:l}});try{n("inflight"),await w({chainType:fe.EVM,accountIdentifier:s.identifier,pendingTransaction:e,pendingTransactionInput:{networkID:t,pendingTransactionId:e.id,hash:"",unsignedTransaction:pe.parse({from:e.ownerAddress})},gasEstimation:r,nonce:e.data.nonce}),p(),i(),n(void 0)}catch(m){ee.captureError(m,Z.Transaction),n("error")}}},[s,t,l,e,r,w,i,p]);return(0,u.jsxs)(kt,{children:[(0,u.jsxs)(vt,{children:[(0,u.jsx)(Rt,{size:64}),(0,u.jsx)(bt,{size:28,weight:600,children:o("transactionSpeedUp")}),(0,u.jsx)(ie,{rows:D}),f!=="error"&&(0,u.jsx)(It,{lineHeight:16,color:a.colors.legacy.textDiminished,size:14,children:o("transactionSpeedUplHelperText")}),f==="error"&&(0,u.jsx)(Ut,{children:(0,u.jsx)(re,{color:a.colors.legacy.spotNegative,title:(0,u.jsx)(v,{color:a.colors.legacy.spotNegative,lineHeight:16,size:14,weight:400,children:o("transactionReplaceError")})})})]}),(0,u.jsx)(W,{onSecondaryClicked:()=>p(),onPrimaryClicked:ae,primaryText:f==="inflight"?(0,u.jsx)(ne,{color:"white",diameter:20}):o("commandConfirm"),primaryDisabled:!r?.maxFeePerGas||R==="error",secondaryText:o("commandClose")})]})},"SpeedUpEvmTransaction");var c=S(H(),1),Bt=h(e=>{let{networkID:i}=e,[o,f]=(0,b.useState)(Date.now());(0,b.useEffect)(()=>{let q=setInterval(()=>f(Date.now()),5e3);return()=>clearInterval(q)},[f]);let{t:n}=G(),{pushDetailView:p}=$(),{handleHideModalVisibility:t}=je(),l=(0,b.useCallback)(()=>t("pendingTransaction"),[t]),{data:N}=z(),{data:s}=Ae(N?.addresses||[]),r=s?.pendingTransaction.filter(q=>e.networkID===q.networkID),R=r?r[r.length-1]?.id:void 0,P=ce.get(e.networkID).isPendingTransactionConfirmed(e),E=!1,I=e.type??k.DappInteraction,A=We(e.timestamp??0,n("richTransactionDetailAt")),{header:B,assetSymbol:j,tokenUSDPrice:x,uiRecipient:D,logoUri:w}=(0,b.useMemo)(()=>({header:e.display.detail?.header??"",assetSymbol:e.display.detail?.assetSymbol??"",tokenUSDPrice:e.display.detail?.tokenUSDPrice??"",uiRecipient:e.display.detail?.uiRecipient??"",logoUri:e.display.detail?.logoUri??""}),[e]),ae=C.getNetworkName(i),T="",m=a.colors.legacy.textDiminished;P?E?(T=n("transactionsFailed"),m=a.colors.legacy.spotNegative):(T=n("transactionsSuccess"),m=a.colors.legacy.spotPositive):e.type===k.Cancel?(T=n("pendingTransactionCancelling"),m=a.colors.legacy.spotNegative):T=n("pendingTransactionPending");let se;if("transactions"in e.data&&C.isEVMNetworkID(i)){let V=e.data.transactions[e.data.transactions.length-1].unsignedTransaction,me=new Y(V.maxFeePerGas??"0"),ft=new Y(V.maxPriorityFeePerGas??"0");se={networkID:i,gasLimit:new Y(V.gas??"0"),maxFeePerGas:me,maxPriorityFeePerGas:ft},E=!!e.data?.transactions?.[e.data?.transactions?.length-1]?.error}let{data:Ze}=te(i,se),et=n("gasUpTo",{amount:Ze?.gasEstimationPriceUSD}),{data:tt,status:ot}=oe(i,se?.maxFeePerGas,se?.maxPriorityFeePerGas),ve=X(n,ot,tt),{data:be}=K(),Ie=[];if(be){let q=be.explorers[i]??L.get(i).defaultExplorer,V="";C.isEVMNetworkID(e.networkID)&&"transactions"in e.data&&(V=e.data.transactions[e.data.transactions.length-1].hash),C.isBitcoinNetworkID(e.networkID)&&(V=e.data.txID),C.isSolanaNetworkID(e.networkID)&&(V=e.data.signature);let me=_({networkID:i,endpoint:"transaction",explorerType:q,param:V});me!==""&&Ie.push({label:n("richTransactionDetailViewOnExplorer",{explorer:O[q]}),value:me,type:"link"})}let nt=C.getNetworkName(i),rt={label:n("pendingTransactionDate"),value:A},it={label:n("pendingTransactionStatus"),value:T,color:m},at={label:n("transactionsTo"),value:D??""},st={label:n("historyNetwork"),value:ae},ct={label:n("pendingTransactionNetworkFee"),value:et,tooltipContent:n("networkFeesTooltipDescription",{chainName:nt})},lt={label:n("pendingTransactionEstimatedTime"),value:ve!==""?ve:(0,c.jsx)(U,{width:"75px",height:"8px",borderRadius:"8px",backgroundColor:a.colors.legacy.borderDiminished}),tooltipContent:n("sendFungibleSummaryEstimatedTimeDescription")},Se=(0,c.jsx)(Xe,{pendingTransactionType:I,isError:E,isConfirmed:P,logoUri:w,size:"medium"}),le,mt=!P&&De.get(i).showFeeRowInPendingTransactionDetail,dt=De.get(i).showTimeToMineRowInPendingTransactionDetail&&!P,pt=e.display.detail?.secondaryHeader,Ee=[rt,it,at,st,...mt?[ct]:[],...dt?[lt]:[],...Ie];switch(I){case k.Send:{le={sections:[{rows:Ee}],title:P?n("richTransactionDetailSent"):n("pendingTransactionsSendingTitle",{assetSymbol:j}),primaryText:{value:B},secondaryText:{value:x},image:Se};break}case k.Cancel:{le={sections:[{rows:Ee}],title:n(P?"transactionCancelled":"pendingTransactionCancelling"),primaryText:{value:B},secondaryText:{value:x},image:Se};break}case k.DappInteraction:default:{le={sections:[{rows:Ee}],title:n(P?"richTransactionDetailAppInteraction":"pendingTransactionPendingInteraction"),primaryText:{value:""},secondaryText:{value:pt??n("pendingTransactionUnknownApp")},image:Se};break}}return{detailsProps:le,pendingTransaction:e,isOldestPendingTx:R===e.id,leftButton:(0,c.jsx)(Mt,{onClick:l,children:(0,c.jsx)(Le,{})}),showCancelEvmTransactionModal:h(()=>{p((0,c.jsx)(qe,{onSuccess:l,pendingTransaction:e}))},"showCancelEvmTransactionModal"),showSpeedUpEvmTransactionModal:h(()=>{p((0,c.jsx)(Ye,{onSuccess:l,pendingTransaction:e}))},"showSpeedUpEvmTransactionModal"),showSpeedUpBitcoinTransactionModal:h(()=>{p((0,c.jsx)(Qe,{onSuccess:l,pendingTransaction:e}))},"showSpeedUpBitcoinTransactionModal"),hidePendingTransactionModal:l,now:o}},"usePendingTransactionDetailProps"),Mt=d(_e)`
  position: absolute;
  left: 5px;
`,Ft=h(({pendingTransaction:e})=>{let i=Bt(e);return(0,c.jsx)(At,{...i})},"InnerPendingTransactionDetail"),Nt=h(({pendingTransactionId:e})=>{let{data:i}=He(e),[o,f]=(0,b.useState)();return(0,b.useEffect)(()=>{i&&f(i)},[i]),o?(0,c.jsx)(Ft,{pendingTransaction:o}):null},"PendingTransactionDetail"),$n=Nt,At=b.default.memo(({detailsProps:e,showCancelEvmTransactionModal:i,showSpeedUpEvmTransactionModal:o,showSpeedUpBitcoinTransactionModal:f,hidePendingTransactionModal:n,leftButton:p,pendingTransaction:t,isOldestPendingTx:l,now:N})=>{let{t:s}=G(),r=(0,c.jsx)(J,{onClick:n,children:s("commandClose")});if(t&&(l||t.type!==k.Cancel)&&!ce.get(t.networkID).isPendingTransactionMined(t)){if(C.isPolygonNetworkID(t.networkID)){t=t;let R=t.data.transactions[t.data.transactions.length-1];N-R.timestamp>6e4&&(t.type===k.Cancel?r=(0,c.jsx)(J,{theme:"warning",onClick:i,children:s("transactionPrioritizeCancel")}):r=(0,c.jsx)(J,{theme:"warning",onClick:i,children:s("pendingTransactionCancel")}))}C.isEthereumNetworkID(t.networkID)&&(t.type===k.Cancel?r=(0,c.jsx)(J,{theme:"warning",onClick:i,children:s("transactionPrioritizeCancel")}):l?r=(0,c.jsx)(W,{primaryText:s("pendingTransactionSpeedUp"),secondaryText:s("pendingTransactionCancel"),onPrimaryClicked:o,onSecondaryClicked:i,primaryTheme:"default",secondaryTheme:"warning"}):r=(0,c.jsx)(J,{theme:"warning",onClick:i,children:s("pendingTransactionCancel")})),C.isBitcoinNetworkID(t.networkID)&&(r=(0,c.jsx)(J,{onClick:f,children:s("pendingTransactionSpeedUp")}))}return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)($e,{...e,leftButton:p}),(0,c.jsx)(Oe,{children:r})]})});export{Nt as PendingTransactionDetail,$n as default};
//# sourceMappingURL=PendingTransactionDetail-IJONFGXB.js.map
