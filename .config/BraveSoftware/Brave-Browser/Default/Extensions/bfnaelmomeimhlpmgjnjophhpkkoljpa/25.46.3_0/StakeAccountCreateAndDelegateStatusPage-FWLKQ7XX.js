import{a as f}from"./chunk-SUKAPYGM.js";import{e as V}from"./chunk-736WIWZX.js";import{e as F,f as O,g as Q}from"./chunk-PV5WDBPS.js";import"./chunk-LOTYUAC5.js";import"./chunk-BXLRR6GM.js";import"./chunk-ST7U2VUQ.js";import"./chunk-LEFSCI55.js";import"./chunk-M62EOSRT.js";import"./chunk-WWYPP3MY.js";import"./chunk-IJJXVSGB.js";import"./chunk-N3C6FBKY.js";import{b as S}from"./chunk-JUI4ISS4.js";import"./chunk-S5LVVL2E.js";import{db as m}from"./chunk-4EXJCS3P.js";import{W as R,ha as M,u as H}from"./chunk-2UWPPO5V.js";import"./chunk-4T2FPKLQ.js";import"./chunk-A3JYJELV.js";import"./chunk-OQCZPFI2.js";import"./chunk-YJCG6GWC.js";import{o as P,ub as z}from"./chunk-KLKDJF5S.js";import{Bb as B,Cb as K}from"./chunk-BQE2SXP7.js";import{$ as E,Lb as w,Y as v,w as g}from"./chunk-L3JU23Z5.js";import"./chunk-5HNKNX3S.js";import{U as A,a as $,b as L,q as N}from"./chunk-R3MCCTIW.js";import"./chunk-FNC6PQ53.js";import"./chunk-5QQLABHI.js";import"./chunk-VL3IRAUM.js";import"./chunk-FA7LVEFF.js";import{a as h,g as y,i as I,n as b}from"./chunk-WKJYWAXG.js";I();b();var r=y($(),1);var e=y(L(),1),j=h(a=>{let s={lamports:a.lamports,votePubkey:a.votePubkey,usdPerSol:a.usdPerSol,onClose:a.onClose,validatorName:a.validatorName},{t}=N(),{createStakeAccountAndDelegateStake:l,needsLedgerApproval:u,txHash:n,confirmationStatus:d,isError:k,error:i,onDeny:c}=ee(s);if(u)return(0,e.jsx)(O,{ledgerAction:l,cancel:c});if(k){let o=i?.message;return F(i)?(0,e.jsx)(Q,{ledgerActionError:i,onRetryClick:l,onCancelClick:c}):(0,e.jsxs)(S,{icon:"error",title:t("stakeAccountCreateAndDelegateStakingFailed"),onClose:c,showButton:!!n,iconSize:"large",children:[(0,e.jsx)(m,{wordBreak:"break-word",color:A.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:o??t("stakeAccountCreateAndDelegateErrorStaking")}),(0,e.jsx)(f,{txHash:n,children:t("stakeAccountCreateAndDelegateViewTransaction")})]})}return d==="finalized"?(0,e.jsxs)(S,{icon:"success",title:t("stakeAccountCreateAndDelegateSolStaked"),onClose:a.onClose,iconSize:"large",children:[(0,e.jsx)(m,{wordBreak:"break-word",color:A.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:(0,e.jsxs)(H,{i18nKey:"stakeAccountCreateAndDelegateSolStakedDisclaimerInterpolated",children:["Your SOL will begin earning rewards",(0,e.jsx)("br",{})," in the next couple of days once the stake account becomes active."]})}),(0,e.jsx)(f,{txHash:n,children:t("stakeAccountCreateAndDelegateViewTransaction")})]}):(0,e.jsxs)(S,{icon:"loading",title:t("stakeAccountCreateAndDelegateStakingSol"),onClose:a.onClose,iconSize:"large",children:[(0,e.jsx)(m,{wordBreak:"break-word",color:A.colors.legacy.textDiminished,size:16,lineHeight:20.8,children:t("stakeAccountCreateAndDelegateStakingSolDisclaimerInterpolated",{validatorName:a.validatorName})}),(0,e.jsx)(f,{txHash:n,children:t("stakeAccountCreateAndDelegateViewTransaction")})]})},"StakeAccountCreateAndDelegateStatusPage"),he=j,ee=h(({onClose:a,...s})=>{let{data:t,isSuccess:l}=z(),{accountIdentifier:u,isLedgerAccount:n,solanaChainAddress:d,solanaPublicKey:k,connection:i,networkID:c}=(0,r.useMemo)(()=>{let U=t?.identifier??"",C=(t?.addresses??[]).find(_=>w.isSolanaNetworkID(_.networkID)),W=new g.PublicKey(C?.address??""),X=t?.type===P.Ledger,x=C?.networkID,Z=B(K(x));return{accountIdentifier:U,isLedgerAccount:X,solanaChainAddress:C,solanaPublicKey:W,connection:Z,networkID:x}},[t]),o=V(i),D=(0,r.useCallback)(()=>{o.mutate({...s,accountIdentifier:u,senderAddress:d,authorizedPubkey:k,votePubkey:new g.PublicKey(s.votePubkey)})},[u,s,o,d,k]),p=R(),Y=(0,r.useCallback)(()=>{p.denied({chainType:v.Solana,chainName:E.Solana,networkId:w.getSolanaNetworkIDValue(c),type:"delegate"}),a()},[c,a,p]);(0,r.useEffect)(()=>{if(l){if(!t||!d)throw new Error("Selected account undefined when trying to perform stake transaction.");n||D()}},[l]);let T=o.data?.id,q=M(i,2e3,T),G=n&&(o.isIdle||o.isPending),J=q.data?.value?.confirmationStatus;return{createStakeAccountAndDelegateStake:D,onDeny:Y,needsLedgerApproval:G,txHash:T,confirmationStatus:J,isError:o.isError,error:o.error}},"useCreateAndDelegateOnMount");export{j as StakeAccountCreateAndDelegateStatusPage,he as default};
//# sourceMappingURL=StakeAccountCreateAndDelegateStatusPage-FWLKQ7XX.js.map
