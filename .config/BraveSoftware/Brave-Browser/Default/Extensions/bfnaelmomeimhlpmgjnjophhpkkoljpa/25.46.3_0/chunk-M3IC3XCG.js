import{a as fn}from"./chunk-RSJ6JVZU.js";import{C as Rs,F as js,I as _s,J as Ns,M as Ls,V as Vs,Y as Fs,Z as $s,_ as zs,ba as Gs,wa as Hs}from"./chunk-4T2FPKLQ.js";import{Ja as ss,f as ns,h as os,o as is}from"./chunk-OQCZPFI2.js";import{Ab as rs,j as Qt,mc as en,o as Jr,qc as Xt,ub as Zr}from"./chunk-KLKDJF5S.js";import{$b as un,$c as vs,A as lo,Ab as It,Ad as ks,Bb as ps,Cb as fs,Cd as Ms,D as wr,H as as,J as cs,K as ls,M as nn,Mb as hs,Mc as mn,Nc as Ss,Oc as Cs,Pc as ws,Q as us,Rc as xs,T as on,U as uo,Ub as po,Uc as Ts,Wd as Ot,X as ds,Xd as vr,_c as Es,a as ts,ab as Jt,ac as dn,ad as Me,bb as Q,bd as $,cb as an,db as xr,dd as Ge,eb as I,fb as mo,fd as Is,g as rn,gb as Zt,ge as Ds,ha as ms,hb as er,he as Bs,ia as sn,ib as A,id as fo,j as Yt,jb as j,jd as Os,kb as mt,kd as Er,lb as W,mb as x,nb as ae,nd as ho,ob as tr,oc as gs,od as pn,pb as M,pd as As,qb as cn,rb as ie,sb as Je,tb as z,ub as F,ue as Us,vc as gu,wc as bs,xb as ln,xc as ys,ye as Ps,zb as Tr}from"./chunk-BQE2SXP7.js";import{$ as Pe,$b as Ki,Bc as Ji,Cb as Gi,Cc as Ee,Eb as Qr,Fc as Se,Lb as V,M as $i,Mb as Hi,Qc as Zi,Sc as es,Uc as Wt,Vb as qi,Y as Kr,Yd as hu,_d as re,ca as zi,dd as de,ec as Xr,fc as Wi,fd as Yr,he as fe,i as co,id as ke,jc as Qi,kc as Xi,oa as Wr,qa as Kt,s as Li,v as qt,w as L,x as Fi,xc as Yi}from"./chunk-L3JU23Z5.js";import{t as Gt,u as Ht}from"./chunk-5HNKNX3S.js";import{R as tn,a as k,d as vt,e as ue,l as ve,q as Z}from"./chunk-R3MCCTIW.js";import{h as Ae,k as Vi,l as dt}from"./chunk-VL3IRAUM.js";import{g as h,j as qr}from"./chunk-FA7LVEFF.js";import{a as o,g as v,i as a,l as fu,m as Buffer,n as c}from"./chunk-WKJYWAXG.js";a();c();a();c();var Ce=o(t=>{if(t!=null&&!(t.constructor===Object&&Object.keys(t).length===0))return t},"toUndefined");var bu=o(t=>t??[],"toEmptyArray"),He=class extends Error{static{o(this,"CollectiblesError")}constructor(e){super(e),this.name="CollectiblesError"}},_=h.string().nullish().transform(Ce),At=h.number().nullish().transform(Ce),go=h.union([_,At]).transform(t=>typeof t=="number"?t.toString():t),yu=h.object({name:_,symbol:_,decimals:At,address:_}),rr;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.EditionV1=1]="EditionV1",t[t.MasterEditionV1=2]="MasterEditionV1",t[t.ReservationListV1=3]="ReservationListV1",t[t.MetadataV1=4]="MetadataV1",t[t.ReservationListV2=5]="ReservationListV2",t[t.MasterEditionV2=6]="MasterEditionV2",t[t.EditionMarker=7]="EditionMarker",t[t.UseAuthorityRecord=8]="UseAuthorityRecord",t[t.CollectionAuthorityRecord=9]="CollectionAuthorityRecord",t[t.TokenOwnedEscrow=10]="TokenOwnedEscrow",t[t.TokenRecord=11]="TokenRecord",t[t.MetadataDelegate=12]="MetadataDelegate"})(rr||(rr={}));var hn=h.nativeEnum(rr),Ws=h.object({price:h.number(),token:yu.nullish().transform(Ce)}),Su=Ws.nullish().transform(Ce),Cu=h.object({name:_,url:_,isVerified:h.coerce.boolean()}),Qs=h.object({id:h.string(),isValidCollectionId:h.coerce.boolean(),name:_,description:_,externalUrl:_,imageUrl:_,isSpam:h.coerce.boolean(),spamStatus:h.nativeEnum(Me).optional().default(Me.NotVerified),floorPrice:Ws.nullish().transform(Ce),ownerCount:At,totalCount:At,tokenCount:At,marketplaces:h.array(Cu)}),wu=h.object({small:_,medium:_,large:_,blurhash:_}),xu=wu.nullish().transform(Ce),Tu=h.enum(["image","video","audio","model","other"]),Eu=h.object({url:_}),Ir=Eu.nullish().transform(Ce),vu=h.object({type:Tu,image:Ir,video:Ir,audio:Ir,model:Ir,other:Ir,previews:xu}),Iu=vu.nullish().transform(Ce),Ou=h.object({trait_type:_,value:_.or(At),display_type:_}),Au=h.object({id:h.string(),contract:h.string(),standard:h.nativeEnum(vr)}),Xs=h.object({compressed:h.boolean(),merkleTree:h.string(),leafIndex:h.number()}),ku=h.object({mint:h.string(),tokenAccount:h.string(),standard:h.nativeEnum(Ot),compression:Xs.nullish().transform(Ce),programId:h.string(),mintExtensions:ks(Ms).optional()}),Mu=h.object({id:h.string(),url:h.string(),displayName:h.string(),description:h.string(),count:h.number()}),Du=h.object({hash:h.string(),index:h.number(),distinctRareSats:h.number(),satributes:h.array(Mu),blockNumber:h.number(),value:h.number(),backgroundImageUrl:h.string()}),Bu=h.object({firstCreatedTransactionHash:h.string(),firstCreatedInscriptionId:h.string(),inscriptionId:_,inscriptionNumber:go,outputValue:go,satNumber:go,satName:_,satRarity:_,protocolName:_,utxoHash:_,utxoIndex:At,createdAt:h.string().nullish().transform(Ce),utxoDetails:Du.nullish().transform(Ce)}),Uu=h.object({objectId:h.string().optional(),kioskId:h.string().optional()}),Pu=h.object({listingPrice:h.string(),listingPriceUiAmount:h.string(),isNative:h.boolean(),url:h.string()}),Ru=h.union([ku,Au,Bu,Uu]),bo=h.object({id:Hi,chain:Ki,name:_,symbol:_,description:_,externalUrl:_,collection:Qs,media:Iu,uri:_,attributes:h.array(Ou).nullish().transform(bu),lastSalePrice:Su,balance:_,decimals:_,owner:_,chainData:Ru.optional(),listings:h.record(Pu).nullish().transform(Ce)}),ju=Qs.extend({items:h.array(bo)}),eh=h.object({items:h.array(ju),isTrimmed:h.boolean()}),qs;(function(t){t.HiddenTitle="hidden-title",t.HiddenButton="hidden-button",t.Collection="collection",t.Empty="empty",t.CollectiblesTrimmed="collectibles-trimmed",t.AddCollection="add-collection"})(qs||(qs={}));var Ks;(function(t){t.userHid="userHid",t.userUnhid="userUnhid",t.userBurned="userBurned",t.markAsSpam="markAsSpam",t.markAsNotSpam="markAsNotSpam"})(Ks||(Ks={}));var th=h.object({compression:Xs.nullish().transform(Ce).refine(t=>t?.compressed),mint:h.string()}),rh=h.object({root:h.string(),proof:h.array(h.string()),merkleTree:h.string(),dataHash:h.string(),creatorHash:h.string(),leafIndex:h.number(),owner:h.string(),delegate:h.string().optional()}),we;(function(t){t.CONFIRMATION="CONFIRMATION",t.SUBMISSION="SUBMISSION"})(we||(we={}));a();c();a();c();var yo=v(fu(),1);function gn(t){let e=[rr.MasterEditionV1,rr.MasterEditionV2],r=hn.safeParse(t);return r.success&&e.includes(r.data)}o(gn,"isMasterEdition");var So=yo.Buffer.from("metadata"),_u=yo.Buffer.from("edition"),Co=wr.toBuffer();function dh(t){let[e]=L.PublicKey.findProgramAddressSync([So,Co,t],wr);return e}o(dh,"getMetadataPDA");function Ys(t){let[e]=L.PublicKey.findProgramAddressSync([So,Co,t,_u],wr);return e}o(Ys,"getMasterEditionPDA");function mh(t){let[e]=L.PublicKey.findProgramAddressSync([So,Co,t],wr);return e}o(mh,"getCollectionMetadataPDA");var Nu="CollectibleEdition";function Lu(t,e){return ke({queryKey:[Nu,{mintAddress:t}],async queryFn(){if(!e)return{};let r=Buffer.from(new L.PublicKey(t).toBytes()),n=Ys(r),{Edition:i}=await cs();try{let s=await i.fromAccountAddress(e,n),l=hn.safeParse(s.key);if(!l.success)throw new Error(`Invalid MetaplexTokenEdition: ${s.key}`);return{key:l.data,isMasterEdition:gn(s.key)}}catch{return{key:void 0,isMasterEdition:void 0}}}})}o(Lu,"useCollectibleEdition");a();c();function ce(t){return t?.tokenAccount!==void 0}o(ce,"isSolanaCollectibleChainData");function qe(t){return t?.contract!==void 0}o(qe,"isEvmCollectibleChainData");function Ke(t){return t!==void 0&&"firstCreatedTransactionHash"in t}o(Ke,"isBitcoinCollectibleChainData");function Js(t){return t!==void 0&&"objectId"in t}o(Js,"isSuiCollectibleChainData");function Zs(t){return t!==void 0&&"outputValue"in t&&"utxoHash"in t&&"utxoIndex"in t}o(Zs,"isBitcoinOrdinalCollectibleChainData");function nr(t){return t!==void 0&&"utxoDetails"in t}o(nr,"isBitcoinRareSatsCollectibleChainData");a();c();var Re=v(k(),1);a();c();a();c();var De="collectibles",wo=[De,"collectibleBids"],H={collections:o(t=>[De,"collections",{addresses:t.map(po)}],"collections"),hiddenCollections:o(t=>[De,"hiddenCollections",t],"hiddenCollections"),unhiddenCollections:o(t=>[De,"unhiddenCollections",t],"unhiddenCollections"),visibilityOverrides:o(t=>[De,"visibilityOverrides",t],"visibilityOverrides"),pinnedCollections:o(t=>[De,"pinnedCollections",t],"pinnedCollections"),topCollections:o(t=>[De,"topCollections",{addresses:t.map(po)}],"topCollections"),optimisticUpdates:o(()=>[De,"optimisticUpdates"],"optimisticUpdates"),collectibleBids:o(t=>[...wo,t],"collectibleBids"),collectibleMintGasEstimation:o(t=>[De,"mintNFTGasEstimation",t],"collectibleMintGasEstimation"),collectibleSellSteps:o(t=>[De,"collectibleSellSteps",t],"collectibleSellSteps"),createMintTransaction:o(t=>[De,"createMintTransaction",t],"createMintTransaction"),transferTransaction:o(t=>[De,"transferTransaction",t],"transferTransaction")};var bn=o((t,e)=>{t.invalidateQueries({queryKey:wo}),t.invalidateQueries({predicate:o(({queryKey:r})=>r.includes("collectibleSellSteps")&&r[2].details.orderId===e?.orderId,"predicate")})},"invalidateBidsAndSellSteps");a();c();var Vu=20;function or(t,e){let r=H.optimisticUpdates(),n=t.getQueryData(r)??[];t.setQueryData(r,[...n,e])}o(or,"pushOptimisticUpdate");async function ea(t,e){let r=H.optimisticUpdates(),n=await t.getQueryState(r);if(n){let i=e??Date.now(),s=n.dataUpdatedAt,l=re({seconds:Vu});return i-s>l?(t.removeQueries({queryKey:r}),[]):n?.data??[]}else return[]}o(ea,"getOptimisticUpdates");function ta(t,e){let r=e.reduce((n,i)=>{let{id:s,amount:l}=i,u=new ue(l);return n[s]=(n[s]??new ue(0)).plus(u),n},{});for(let n of t)n.items=n.items.reduce((i,s)=>{let l=s.id,u=r[l];if(u){let m=new ue(s.balance??0);return m.minus(u).isGreaterThan(0)?i.concat({...s,balance:m.minus(u).toString()}):i}else return i.concat(s)},[]);return t=t.filter(n=>n.items.length>0),t}o(ta,"applyOptimisticUpdates");var Fu=o(()=>{let{data:t}=Zr();return(0,Re.useMemo)(()=>{let e=t?.identifier??"",r=t?.type===Jr.Ledger,n=t?.addresses??[],i=n.find(qi),s=i?.networkID,l=i?.address??"",u=fs(s),m=ps(u);return{accountIdentifier:e,chainAddresses:n,chainId:s,solanaPublicKey:l,isLedger:r,cluster:u,connection:m}},[t])},"useAccountMetadata"),$u=o((t,e)=>{let[r,n]=(0,Re.useState)(void 0);return(0,Re.useEffect)(()=>{o(async()=>{if(!t)return;let l=t.find(f=>f.type==="transaction")?.data?.transaction;if(!l)return;let u=co(l,"base64"),m=await ws(e,[u.message]),p=Li(m.value);n(p)},"processEncodedTx")()},[t,e]),r},"useSolanaGasEstimation"),zu=o(async(t,e,r,n,i,s)=>{if(!s)throw new Error("Bid summary is required");let{collectionName:l,marketplace:u,receiveAmount:m,currencySymbol:p}=s,f={topRight:{text:`+${m} ${p}`},topLeft:{text:t("collectiblesSoldCollectible")},bottomRight:{text:`-${l}`},bottomLeft:{text:tn(u)}},{data:b,chainId:y,type:C}=e,{transaction:S}=b,w=co(S,"base64"),E={ownerAddress:r.solanaPublicKey,networkID:y,data:{signature:""},type:rn.Sell,display:{summary:f}},{accountIdentifier:D,solanaPublicKey:N,connection:O}=r,K=new L.PublicKey(N),J=await Ts({accountIdentifier:D,feePayer:K,transaction:w,pendingTransactionInput:E,connection:O,accountSigner:n,storage:i,opts:{skipPreflight:!0}});return{type:C,data:J}},"executeTransactionStep"),Gu="Steps are required",Hu="These steps are not from the same bid",yn=class extends Error{static{o(this,"StepsRequiredError")}message=Gu},Sn=class extends Error{static{o(this,"StepsFromDifferentBidError")}message=Hu},qu=o((t,e,r,n)=>{let i=Wt(),s=fe(),l=de(),u=Qt(),[m,p]=(0,Re.useState)("idle"),[f,b]=(0,Re.useState)(null),[y,C]=(0,Re.useState)(null),{t:S}=Z(),w=Fu(),{chainId:E,connection:D,chainAddresses:N,isLedger:O}=w,K=E&&V.isSolanaNetworkID(E)?E:Kt.Solana.Mainnet,J=$u(e,K);(0,Re.useEffect)(o(function(){m==="loading"&&bn(l,r)},"invalidateQueriesOnLoading"),[m,l,r]),(0,Re.useEffect)(o(function(){m==="success"&&r&&or(l,{id:r.collectibleId,amount:1})},"optimisticallyUpdateCollectibleOnSuccess"),[m,l,N,r]);let at=o(()=>{p("idle"),b(null),C(null)},"reset"),te=n&&r?.receiveAmount?r.receiveAmount*n:void 0;return{executeSellSolanaSteps:o(async()=>{try{if(t&&t!==r?.orderId)throw new Sn;if(!Array.isArray(e)||e.length===0)throw new yn;p("loading");for await(let ne of e){let ct=await zu(S,ne,w,u,i,r);C(ct.data),await xs({connection:D,signature:ct.data})}p("success"),s.capture("collectibleSellSuccess",{data:{bidSummary:r,usdSaleValue:te}})}catch(ne){let ct=ne?.message??"";(!(ne instanceof yn)||!(ne instanceof Sn))&&(Se.captureError(ne,Ee.Collectibles),s.capture("collectibleSellFailure",{data:{bidSummary:r,usdSaleValue:te,errorMessage:ct}})),p("error"),b(ne)}},"executeSellSolanaSteps"),reset:at,gas:J,error:f,result:y,status:m,isLedger:O}},"useInstantSellExecuteSolanaSteps");a();c();var dg=o(t=>`${t/100}%`,"bpsToPercent"),ra=o((t,e)=>t*e/100/100,"bpsToValue");a();c();var ca=v(lo(),1),ar=v(k(),1);a();c();a();c();var pt=o((t,e,r,n)=>{(!e||e>=400&&e<500)&&(Se.addBreadcrumb(r,t.message,Ji.Info,n),Se.captureError(t,Ee.Collectibles))},"captureClientError");a();c();var Cn;(function(t){t[t.Always=1/0]="Always",t[t.Short=re({days:1})]="Short",t[t.Medium=re({days:3})]="Medium",t[t.Long=re({days:7})]="Long"})(Cn||(Cn={}));var ft;(function(t){t[t.Immediate=0]="Immediate",t[t.Short=re({minutes:1})]="Short",t[t.Medium=re({minutes:2.5})]="Medium",t[t.Long=re({minutes:5})]="Long",t[t.Never=1/0]="Never"})(ft||(ft={}));var ir;(function(t){t[t.Shortest=re({seconds:10})]="Shortest",t[t.Shorter=re({seconds:30})]="Shorter",t[t.Short=re({minutes:1})]="Short",t[t.Medium=re({minutes:2.5})]="Medium",t[t.Long=re({minutes:5})]="Long",t[t.Longer=re({minutes:7.5})]="Longer",t[t.Longest=re({minutes:10})]="Longest"})(ir||(ir={}));var Ku=h.object({caip19:h.string(),name:h.string(),symbol:h.string()}),Wu=h.object({bps:h.number(),kind:h.union([h.literal("marketplace"),h.literal("royalty")]),recipient:h.string().optional()}),Qu=h.object({amount:h.number(),feeBreakdown:h.array(Wu),netAmount:h.number(),token:Ku,totalFeeBps:h.number()}),Xu=h.object({name:h.string(),logo:h.string(),url:h.string().optional()}),Yu=h.object({id:h.string(),expiration:h.string().optional(),price:Qu,source:Xu}),Ju=h.object({bids:h.array(Yu)}),na=new He("Failed to fetch collectible bids."),Zu="collectible-instant-sell-bids",ed=o(async t=>{if(!t.address)throw na;try{let e=await Ae.api().validateStatus(!0).post("/collectibles/v1/bids",{asset:t}),{bids:r}=Ju.parse(e.data);return r}catch(e){if(dt(e)){let r=e.response?.status;pt(e,r,Zu)}throw na}},"getCollectibleBids"),oa=o(({bidAsset:t,isEnabled:e})=>{let r=e&&t.address!==null&&t.chainId!==null;return ke({enabled:r,staleTime:ft.Short,refetchInterval:ir.Shortest,queryKey:H.collectibleBids(t),async queryFn(){return ed(t)}})},"useCollectibleBids"),ia=o(t=>{let e=t?.chainData,r=t?.chain.id??null,n=qe(e),i=ce(e),s=n?{tokenId:e.id}:{},l=i?{contractType:e.standard}:{},u=n?e.contract.toLowerCase():i?e.mint:null;return{chainId:r,address:u,resourceType:"address",...s,...l}},"createBidAsset");a();c();var td=v(k(),1);var oe=h.enum(["auth","nft-approval","sale","order-signature","refetch","blur-swap","update-proof"]),rd=h.enum(["/execute/auth-signature/v1","/order/v3"]),We=h.enum(["transaction","signature","post","refetch"]),nd=h.enum(["eip712","eip191"]),od=h.object({domain:h.any(),types:h.any(),value:h.any()}),id=h.object({message:h.string()}),sd=h.object({from:h.string(),to:h.string(),data:h.string()}),ad=h.object({endpoint:rd,body:h.object({id:h.string(),kind:h.string()})}),cd=h.object({action:oe,chainId:Wr,type:h.literal(We.enum.signature),data:h.object({signatureKind:nd,signatureData:h.union([id,od]),postData:ad})}),ld=h.object({chainId:Wr,action:oe,data:sd,type:h.literal(We.enum.transaction)}),ud=h.object({chainId:Wr,action:oe,type:h.literal(We.enum.refetch),data:h.object({resource:h.string()})}),dd=h.union([cd,ld,ud]),md=h.object({action:oe,chainId:zi,type:h.literal(We.enum.transaction),data:h.object({transaction:h.string()})}),pd=h.union([dd,md]),fd=h.object({steps:h.array(pd),orderId:h.string().optional()}),hd=new He("Failed to fetch collectible sell steps."),gd="collectible-instant-sell-steps",bd=o(async t=>{try{let e=await Ae.api().validateStatus(!0).post("/collectibles/v1/sell",t);return fd.parse(e.data)}catch(e){if(dt(e)){let r=e.response?.status;if(pt(e,r,gd),e.response?.data?.code){let{code:n}=e.response.data;throw{code:n}}if(r)throw e}throw hd}},"getCollectibleSellSteps"),sa=o(({sellAsset:t})=>{let e=t.details.orderId!==void 0;return ke({enabled:e,queryKey:H.collectibleSellSteps(t),staleTime:ft.Never,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,retry:o((r,n)=>n.code?!1:r<3,"retry"),async queryFn(){return bd(t)}})},"useCollectibleSellSteps");var aa=o((t,e,r)=>{let n=r?.chainData,i=qe(n),s=ce(n),l=r?.owner,u=i?l?.toLowerCase():l,m=e?.id,p=e?.source?.name,f=s?{minPrice:e?.price?.netAmount,tokenAccount:n.tokenAccount}:{};return{details:{asset:t,owner:u,orderId:m,marketplace:p,...f}}},"createSellAsset");a();c();vt.config({EXPONENTIAL_AT:1e3,DECIMAL_PLACES:78});var sr=o((t,e)=>new vt(t).div(on(e)).toNumber(),"amountToBalance");var yd={steps:[],orderId:""},Sd=o(({collectible:t})=>{let{t:e}=Z(),r=(0,ar.useMemo)(()=>ia(t),[t]),{data:n=[],isPending:i,isError:s}=oa({bidAsset:r,isEnabled:!0}),l=(0,ar.useMemo)(()=>n.length>0?n[0]:void 0,[n]),u=(0,ar.useMemo)(()=>aa(r,l,t),[r,l,t]),{data:m=yd,isPending:p,isError:f,refetch:b,error:y}=sa({sellAsset:u}),C=(0,ar.useMemo)(()=>l&&t?la({t:e,bid:l,collectible:t}):void 0,[e,l,t]),S=(0,ar.useMemo)(()=>f?Number.isInteger(y.code):!1,[f,y]);return{bid:l,bidSummary:C,isLoadingBids:i,isErrorBids:s,sellSteps:m,isLoadingSellSteps:p,isErrorSellSteps:f,refetchSellSteps:b,sellStepsError:y,isSellErrorCode:S}},"useInstantSell"),Cd=o(({lastSale:t,receiveAmount:e})=>t!==void 0?e-t:e,"calculatePNL"),wd=o(({offerAmount:t,collectionFloor:e})=>t-e,"calculateFloorDifference"),xd=o(t=>{let e=Math.abs(t)<.001?"0.0000%":"0.00%",r=(0,ca.default)(t).format(e);return`${t>0?"+":""}${r}`},"getFloorDifferencePercentage"),Td=o(t=>{if(t){let{price:e,token:r}=t,n=r?.decimals;if(n)return sr(e,n)}},"parseCollectionFloor"),Ed=o(t=>{if(t){let{price:e,token:r}=t,n=r?.decimals;if(n)return sr(e,n)}},"parseLastSale"),vd=o(t=>{if(!t||!t.previews)return;let{previews:e}=t;if(e.small)return e.small;if(e.medium)return e.medium;if(e.large)return e.large},"getCollectibleImagePreview"),cr;(function(t){t.BLUR="Blur"})(cr||(cr={}));var la=o(({bid:t,collectible:e,t:r})=>{let{lastSalePrice:n,media:i,name:s,collection:l}=e,{name:u,logo:m}=t.source,{amount:p,netAmount:f,feeBreakdown:b,token:y,totalFeeBps:C}=t.price,{symbol:S,caip19:w}=y,E=0,D=f,N=l.id,O=e.id,K=Ed(n),J=S.slice(0,6),at=e.chain.symbol,te=Td(l.floorPrice),ye=te?wd({offerAmount:p,collectionFloor:te}):void 0,ne=ye?xd(ye):void 0;return{bidTokenSymbol:J,caip19:w,collectionId:N,collectibleId:O,orderId:t.id,collectibleChainId:e.chain.id,collectibleChainSymbol:at,collectionFloor:te,collectibleImage:vd(i),collectibleName:s??r("collectiblesUnknownCollectible"),collectionName:l.name??r("collectiblesUnknownCollection"),currencySymbol:t.source.name===cr.BLUR?at:J,fees:b,floorDifference:ye,floorDifferencePercent:ne,lastSale:K,marketplace:u,marketplaceLogoURL:m,offerAmount:p,offerAmountFormatted:fn(p),phantomFeePercentage:E,pnl:Cd({lastSale:K,receiveAmount:D}),receiveAmount:D,receiveAmountFormatted:fn(D),totalFeeBps:C}},"parseBidSummary"),Id=o(({gasFee:t,totalFeeBps:e,offerAmount:r})=>{let n=ra(e,r)+t.toNumber();return{raw:n,formatted:fn(n)}},"formatEstimatedFees");a();c();var ua=new Map([[oe.enum["nft-approval"],8e4],[oe.enum["blur-swap"],42e3],[oe.enum.sale,39e4],["default",42e4]]),Od=o((t,e,r,n)=>{let i=t===cr.BLUR,s=r.filter(w=>w.type==="transaction").map(({action:w})=>({action:w}));if(s.some(({action:w})=>w===oe.enum["nft-approval"])||(s=[...s,{action:oe.enum["nft-approval"]}]),i){let w=s.some(({action:D})=>D===oe.enum.sale),E=s.some(({action:D})=>D===oe.enum["blur-swap"]);w||(s=[...s,{action:oe.enum.sale}]),E||(s=[...s,{action:oe.enum["blur-swap"]}])}let u=s?.reduce((w,{action:E})=>{let D=ua.get(E)??ua.get("default");return w+(D??0)},0),m=new ue(u),{status:p,data:f}=Ns({gasLimit:m,networkID:e,transactionSpeed:Yt.standard}),{data:b}=Ls(e,f),y=ms(f),C=Number(y?.replace(/[^\d.]/g,"")??0),S=n?n.isGreaterThan(C):!1;return{gasEvm:C,gasEstimation:f,gasEstimationStatus:p,ethFeeUI:y,gasEstimationPrice:b,hasEnoughGas:S}},"useInstantSellEvmGasEstimation");a();c();var Ze=v(k(),1);var Ad=o(()=>{let{data:t}=Zr();return(0,Ze.useMemo)(()=>{let e=t?.type,r=t?.name??"",n=t?.addresses??[],i=t?.identifier??"";return{isLedger:t?.type===Jr.Ledger,accountName:r,accountType:e,chainAddresses:n,accountIdentifier:i}},[t])},"useAccountMetadata"),kd=o(({networkID:t,unsignedTransaction:e,pendingActivityRows:r,accountIdentifier:n,accountSigner:i,storage:s,includeCallPayload:l})=>({accountSigner:i,accountIdentifier:n,networkID:t,unsignedTransaction:e,...l&&{callPayload:{from:e.from,to:e.to,data:e.data,value:e.value}},pendingTransactionInput:{ownerAddress:e.from,networkID:t,data:{nonce:"",unsignedTransaction:e,hash:""},type:rn.Sell,display:{summary:r}},storage:s}),"buildArgs"),Md=o(async(t,e,r,n,i,s,l)=>{try{if(!r)throw new Error("Gas estimation is required");if(!l)throw new Error("Bid summary is required");let{data:u,chainId:m,action:p}=e,{collectionName:f,marketplace:b,receiveAmount:y,currencySymbol:C,collectibleChainSymbol:S,bidTokenSymbol:w}=l,E=tn(b),D={};p==="nft-approval"&&(D={topRight:{text:""},bottomRight:{text:""},topLeft:{text:t("collectiblesApproveCollection",{collectionName:f})},bottomLeft:{text:E}}),p==="sale"&&(D={topRight:{text:`+${y} ${C}`},topLeft:{text:t("collectiblesSoldCollectible")},bottomRight:{text:`-${f}`},bottomLeft:{text:E}}),p==="blur-swap"&&(D={topRight:{text:`+${y} ${S}`},topLeft:{text:t("transactionsSwapped")},bottomRight:{text:`-${y} ${w}`},bottomLeft:{text:E}});let N=Ht.parse({type:Gt.eip1559,to:u.to,from:u.from,data:u.data,chainId:V.getEVMNetworkIDValue(m),gas:`0x${r.gasLimit.toString(16)}`,maxFeePerGas:`0x${r.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${r.maxPriorityFeePerGas.toString(16)}`}),O=kd({storage:n,accountSigner:i,pendingActivityRows:D,includeCallPayload:!1,networkID:m,unsignedTransaction:N,accountIdentifier:s.accountIdentifier}),K=await gs(O);return{type:e.type,data:K}}catch(u){return{type:e.type,error:u}}},"executeTransactionStep"),Dd=o(async(t,e,r)=>{try{let{chainId:n,data:i}=t,{signatureData:s,signatureKind:l,postData:u}=i;if(l==="eip191"&&"message"in s){let m=await e.sign(r.accountIdentifier,{signingType:"message",chainType:Kr.EVM,message:s.message});if(m.status==="success")return await Ae.api().post("/collectibles/v1/submit-signature",{chainId:n,signature:m.signature,postData:u}),{type:t.type,data:"success"};throw new Error("Execute Sell: Couldn't sign message")}throw new Error("Execute Sell: EIP721 is not yet supported")}catch(n){return{type:t.type,error:n}}},"executeSignatureStep"),Bd=o(async(t,e)=>{try{let{resource:r}=t.data;if(r==="/sell"){let{data:n}=await e();return{type:t.type,data:n?.steps}}throw new Error("Execute Sell: Resource is not supported")}catch(r){return{type:t.type,error:r}}},"executeRefetchSteps"),Ud=[oe.enum.auth,oe.enum["nft-approval"],oe.enum.sale],Pd="Steps are required",Rd="These steps are not from the same bid",wn=class extends Error{static{o(this,"StepsRequiredError")}message=Pd},xn=class extends Error{static{o(this,"StepsFromDifferentBidError")}message=Rd},jd=o((t,e,r,n,i,s,l)=>{let u=Wt(),m=fe(),p=de(),f=Qt(),[b,y]=(0,Ze.useState)("idle"),[C,S]=(0,Ze.useState)(null),[w,E]=(0,Ze.useState)(null),{t:D}=Z(),N=Ad(),{chainAddresses:O,isLedger:K}=N;(0,Ze.useEffect)(o(function(){b==="loading"&&bn(p,i)},"invalidateQueriesOnLoading"),[b,p,i]),(0,Ze.useEffect)(o(function(){b==="success"&&i&&or(p,{id:i.collectibleId,amount:1})},"optimisticallyUpdateCollectibleOnSuccess"),[b,p,O,i]);let J=o(()=>{y("idle"),S(null),E(null)},"reset"),at=l&&i?.receiveAmount?i.receiveAmount*l:void 0,te=o(async(ye,ne=new Map)=>{let ct=ye??e;try{if(t&&t!==""&&t!==i?.orderId)throw new xn;if(!Array.isArray(ct)||ct.length===0)throw new wn;y("loading");for await(let lt of ct){let{action:ut}=lt,uu=ne.get(ut)==="success",du=ut===oe.enum.sale,ji=ut===oe.enum.refetch,mu=Ud.some(zt=>zt===ut);if(uu)continue;ji||ne.set(ut,"loading");let pu=o(async zt=>{switch(zt.type){case We.enum.transaction:return await Md(D,zt,r,u,f,N,i);case We.enum.signature:return await Dd(zt,f,N);case We.enum.refetch:return await Bd(zt,n)}},"handleStep"),{type:_i,data:ao,error:Ni}=await pu(lt);if(mu&&Ni)throw Ni;if(ao&&(ji||ne.set(ut,"success"),_i===We.enum.transaction&&du&&E(ao),_i===We.enum.refetch))return await ts(500),await te(ao,ne)}y("success"),m.capture("collectibleSellSuccess",{data:{bidSummary:i,usdSaleValue:at}})}catch(lt){let ut=lt?.message??"";(!(lt instanceof wn)||!(lt instanceof xn))&&(Se.captureError(lt,Ee.Collectibles),m.capture("collectibleSellFailure",{data:{bidSummary:i,usdSaleValue:at,errorMessage:ut}})),y("error"),S(lt)}},"executeSellEvmSteps");return{executeSellEvmSteps:te,reset:J,error:C,result:w,status:b,isLedger:K}},"useInstantSellExecuteEvmSteps");a();c();var _d=.01,Nd=o(t=>{let{fungible:e}=Hs({key:Ps(t.collectibleChainId,void 0)}),r=e?.data.balance;return{hasEnoughGas:r?r.isGreaterThan(_d):!1}},"useInstantSellSolanaGasEstimation");a();c();var gt=v(k(),1);a();c();var xo=v(k(),1);a();c();a();c();var da=o(t=>{let e=!1;return{collectibles:t.reduce((n,i)=>{let s=bo.safeParse(i);return s.success?n.push(s.data):e=!0,n},[]),containsParseFailure:e}},"parseCollectiblesResponse");var Ld="collectibles",Vd=new Error("Failed to fetch collectibles for addresses");async function ma(t){let e="/collectibles/v1";try{let n=(await Ae.api().post(e,{addresses:t})).data,i=!!n.isTrimmed;if(!n.collectibles)throw Vd;let{collectibles:s,containsParseFailure:l}=da(n.collectibles);return l&&Se.captureError(new Error("collectibles failed to parse some items"),Ee.Collectibles),{allCollectibles:s,isTrimmed:i}}catch(r){if(dt(r)){let n=r.response?.status;pt(r,n,Ld)}throw r}}o(ma,"getCollectibles");a();c();a();c();var fa=o(t=>{let e=[];for(let[r,n]of t){n.sort((s,l)=>{let u=s.name??"",m=l.name??"",p=u.localeCompare(m);if(u.localeCompare(m))return p;let f=pa(s),b=pa(l);return f.localeCompare(b)});let[i]=n;i&&e.push({..."externalUrl"in i?{externalUrl:i.externalUrl}:void 0,...i.collection,items:n})}return e.sort((r,n)=>{if(r.items.length>n.items.length)return-1;if(n.items.length>r.items.length)return 1;let i=r.name??r.id??"",s=n.name??n.id??"";return i.localeCompare(s)})},"sortCollections");function pa(t){let e=t.chainData;return ce(e)?e.tokenAccount:qe(e)?e.id:(Ke(e),t.id)}o(pa,"extractChainDataSortKey");function ha(t){let e=new Map;for(let r of t){let n=r.collection.id,i=e.get(n)??[];i.push(r),e.set(n,i)}return fa(e)}o(ha,"mapCollectiblesToCollections");var ga=o(({addresses:t,queryOptions:e={staleTime:ft.Short,refetchInterval:ir.Long,enabled:!0},select:r})=>{let n=de(),i=H.collections(t),s=t.length!==0&&t.every(l=>!V.isLocalNetworkID(l.networkID));return ke({enabled:s&&e.enabled,queryKey:i,gcTime:Cn.Medium,staleTime:e.staleTime,refetchInterval:e.refetchInterval,async queryFn({queryKey:[,,{addresses:l}]}){let[u]=await Promise.allSettled([ma(l)]);if(u.status==="rejected")throw new Error("failed to load unlisted collections");let{allCollectibles:m,isTrimmed:p}=u.status==="fulfilled"?u.value:{allCollectibles:[],isTrimmed:!1},f=ha(m),b=await ea(n),y=ta(f,b);return{items:y,nrOfItems:y.reduce((C,S)=>C+S.items.length,0),isTrimmed:p}},select:r})},"useCollectionsQuery"),kt=o(t=>ga({...t,select:(0,xo.useCallback)(e=>e.items,[])}),"useCollections"),Fd=o(t=>ga({...t,select:(0,xo.useCallback)(r=>r.isTrimmed,[])}).data??!1,"useCollectionsAreTrimmed");a();c();var pe=v(k(),1);a();c();var Dt=v(k(),1);a();c();var Ca=v(k(),1);a();c();var Sa=v(k(),1);a();c();var Y;(function(t){t.AccountIdToVisibilitySettings="accountIdToCollectibleVisibilitySettings",t.HiddenCollections="hiddenCollections",t.PinnedCollections="pinnedCollections",t.UnhiddenCollections="unhiddenCollections"})(Y||(Y={}));var ba=2,$d=h.object({version:h.literal(ba),value:h.record(h.array(h.object({id:h.string(),status:h.nativeEnum($)})))}),zd=o((t,e)=>{let r=e,n=t;return r||n||null},"visibilityOverridesResolver"),Gd=h.record(h.array(h.string())),ya=o((t,e)=>{let r=e,n=t;return r||n||null},"pinnedCollectionsResolver"),Hd=o(t=>{let e=t[Y.HiddenCollections],r=t[Y.UnhiddenCollections];if(!e&&!r)return null;let n={};return e&&Object.entries(e).forEach(([i,s])=>{n[i]||(n[i]=[]),s.forEach(l=>{n[i].push({id:l,status:$.Hidden})})}),r&&Object.entries(r).forEach(([i,s])=>{n[i]||(n[i]=[]);let l=new Set(n[i].map(u=>u.id));s.forEach(u=>{l.has(u)||n[i].push({id:u,status:$.Visible})})}),{version:ba,value:n}},"migrateVisibilityOverrides"),qd=o(t=>t[Y.PinnedCollections]??null,"migratePinnedCollections"),[Kd,Tn,En]=Zi("collectibles",[{key:Y.AccountIdToVisibilitySettings,type:"object",validator:$d,nullable:!0,resolver:zd,updateOn:"idle"},{key:Y.PinnedCollections,type:"object",validator:Gd,nullable:!0,resolver:ya,updateOn:"idle"}]),Py=[{legacyKeys:[Y.HiddenCollections,Y.UnhiddenCollections],targetSchema:"collectibles",targetKey:Y.AccountIdToVisibilitySettings,migrate:Hd},{legacyKeys:[Y.PinnedCollections],targetSchema:"collectibles",targetKey:Y.PinnedCollections,migrate:qd}],vn=o((...t)=>Yi(Kd,...t),"useCollectiblesStorage");var Ry={...es(Y.PinnedCollections,["collectibles","pinnedCollections"],ya)};var Wd=2e3,lr=class extends He{static{o(this,"UseSetCollectionVisibilityError")}constructor(e){super(e),this.name="UseSetCollectionVisibilityError"}};function Qd(t,e,r){let n=Object.values(t.value).reduce((s,l)=>s+l.length,0),i=r.filter(({id:s,visibility:l})=>l!==null&&!t.value[e]?.some(u=>u.id===s));if(i.length>0&&n+i.length>Wd){let s=i.some(l=>l.visibility===$.Hidden||l.visibility===$.HiddenSpam);throw new lr(s?"Too many ids hidden":"Too many ids unhidden")}}o(Qd,"checkVisibilityOverrideLimit");function Xd(t,e){let r=new Map(t.map(n=>[n.id,n]));for(let{id:n,visibility:i}of e)i===null?r.delete(n):r.set(n,{id:n,status:i});return Array.from(r.values())}o(Xd,"applyMutationsToMap");function Yd(t,e){for(let{id:r,visibility:n}of t)n!==null&&e.capture(n.includes("hidden")?"collectionHidden":"collectionUnhidden",{data:{id:r}})}o(Yd,"captureVisibilityAnalytics");function In(t){let e=fe(),r=de();return(0,Sa.useCallback)(async(n,i)=>{let s=i?.checkLimit??!1;if(!t)return;let l=await En(Y.AccountIdToVisibilitySettings)??{version:2,value:{}};s&&Qd(l,t,n);let u=l.value[t]??[],m=Xd(u,n),p={...l.value,[t]:m};await Tn(Y.AccountIdToVisibilitySettings)({version:2,value:p}),Yd(n,e),await Promise.allSettled([r.invalidateQueries({queryKey:H.visibilityOverrides(t)}),r.invalidateQueries({queryKey:H.hiddenCollections(t)}),r.invalidateQueries({queryKey:H.unhiddenCollections(t)})])},[t,e,r])}o(In,"useSetCollectionVisibility");function Mt(t){let e=In(t);return(0,Ca.useCallback)(async r=>{let n=r.map(({id:i,visibility:s})=>({id:i,visibility:s}));await e(n,{checkLimit:!1})},[e])}o(Mt,"useSetVisibilityOverrides");a();c();var wa=v(k(),1);function me(t){let e=vn(Y.AccountIdToVisibilitySettings);return{data:(0,wa.useMemo)(()=>{if(!t)return new Map;let i=e?.value?.[t]??[];return new Map(i.map(s=>[s.id,s]))},[t,e]),isPending:!!t&&e===void 0}}o(me,"useVisibilityOverrides");async function On({collectible:t,visibilityOverrides:e,setVisibilityOverrides:r,accountId:n,desiredVisibility:i,onSuccess:s,onError:l}){if(!n)return;let u=t.collection.id||t.id,m=e.get(u)?.status;try{let p=Ta(i,t.collection);await r([{id:u,visibility:p}]),await s({collectible:t,desiredVisibility:i,previousVisibility:m,updatedVisibility:p})}catch(p){await l(p,{collectible:t,desiredVisibility:i})}}o(On,"handleChangeVisibilityForCollectible");async function xa({collection:t,visibilityOverrides:e,setVisibilityOverrides:r,accountId:n,desiredVisibility:i,onSuccess:s,onError:l}){if(!n)return;let u=t.id,m=e.get(u)?.status;try{let p=Ta(i,t);await r([{id:u,visibility:p}]),s&&await s({collection:t,desiredVisibility:i,previousVisibility:m,updatedVisibility:p})}catch(p){l&&await l(p,{collection:t,desiredVisibility:i})}}o(xa,"handleChangeVisibilityForCollection");function Ta(t,e){let{spamStatus:r}=e,n=Is({minimum:Ge.NotVerified,spamStatus:r});switch(t){case $.HiddenSpam:if(n)return $.HiddenSpam;if(r===Ge.PossibleSpam||r===Ge.Spam)return null;throw new Error(`Unexpected spam status: ${r} found while marking spam.`);case $.VisibleNotSpam:if(n)return null;if(r===Ge.PossibleSpam||r===Ge.Spam)return $.VisibleNotSpam;throw new Error(`Unexpected spam status: ${r} found while marking not spam.`);case $.Hidden:if(n)return $.Hidden;if(r===Ge.PossibleSpam||r===Ge.Spam)return null;throw new Error(`Unexpected spam status: ${r} found while marking hidden.`);case $.Visible:if(n)return null;if(r===Ge.PossibleSpam||r===Ge.Spam)return $.Visible;throw new Error(`Unexpected spam status: ${r} found while marking visible.`)}throw new Error(`Unexpected desired visibility: ${t} found while calculating new visibility.`)}o(Ta,"calculateNewVisibility");function ht(t){return{networkId:t.chain.id,chainId:V.getChainID(t.chain.id),collectionId:t.collection.id,collectibleId:t.id,collectibleName:t.name,collectibleDescription:t.description,collectionName:t.collection.name,collectionDescription:t.collection.description,collectionUrl:t.collection.externalUrl}}o(ht,"computeCollectibleAnalyticsPayload");function Ea({accountId:t,onError:e,onSuccess:r}){let{data:n}=me(t),i=Mt(t);return(0,Dt.useCallback)(async s=>{await On({collectible:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:$.HiddenSpam,onSuccess:r,onError:e})},[n,i,t,e,r])}o(Ea,"useMarkAsSpam");function va({accountId:t,onError:e,onSuccess:r}){let{data:n}=me(t),i=Mt(t);return(0,Dt.useCallback)(async s=>{await On({collectible:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:$.VisibleNotSpam,onSuccess:r,onError:e})},[n,i,t,e,r])}o(va,"useMarkAsNotSpam");function Ia({accountId:t,onError:e,onSuccess:r}){let{data:n}=me(t),i=Mt(t);return(0,Dt.useCallback)(async s=>{await On({collectible:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:$.Hidden,onSuccess:r,onError:e})},[n,i,t,e,r])}o(Ia,"useMarkAsHidden");function Oa({accountId:t,onError:e,onSuccess:r}){let{data:n}=me(t),i=Mt(t);return(0,Dt.useCallback)(async s=>{await On({collectible:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:$.Visible,onSuccess:r,onError:e})},[n,i,t,e,r])}o(Oa,"useMarkAsVisible");function Aa({accountId:t,onError:e,onSuccess:r}){let{data:n}=me(t),i=Mt(t);return(0,Dt.useCallback)(async s=>{await xa({collection:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:$.Hidden,onSuccess:r,onError:e})},[n,i,t,e,r])}o(Aa,"useMarkCollectionAsHidden");function ka({accountId:t,onError:e,onSuccess:r}){let{data:n}=me(t),i=Mt(t);return(0,Dt.useCallback)(async s=>{await xa({collection:s,visibilityOverrides:n,setVisibilityOverrides:i,accountId:t,desiredVisibility:$.Visible,onSuccess:r,onError:e})},[n,i,t,e,r])}o(ka,"useMarkCollectionAsVisible");a();c();var To=v(k(),1);var Ma=o(({toast:t,accountId:e})=>{let{t:r}=Z(),n=fe(),i=(0,To.useCallback)(({collectible:l,updatedVisibility:u})=>{u!==null&&n.capture("collectionHidden",{data:ht(l)}),t&&t.success(r("collectionHideSuccess"))},[r,t,n]),s=(0,To.useCallback)((l,u)=>{t&&t.error(r("collectionHideFail"))},[r,t]);return Ia({accountId:e,onSuccess:i,onError:s})},"useHideCollectible");a();c();var Eo=v(k(),1);var Da=o(({toast:t,accountId:e})=>{let{t:r}=Z(),n=fe(),i=(0,Eo.useCallback)(({collectible:l,updatedVisibility:u})=>{u!==null&&n.capture("collectionUnhidden",{data:ht(l)}),t&&t.success(r("collectionUnhideSuccess"))},[r,t,n]),s=(0,Eo.useCallback)((l,u)=>{t&&t.error(r("collectionUnhideFail"))},[r,t]);return Oa({accountId:e,onSuccess:i,onError:s})},"useUnhideCollectible");function Jd({accountId:t,collectible:e,toast:r}){let n=Ma({accountId:t,toast:r}),i=(0,pe.useCallback)(()=>{if(e)return n(e)},[n,e]),s=Da({accountId:t,toast:r}),l=(0,pe.useCallback)(()=>{if(e)return s(e)},[s,e]),{data:u}=me(t),m=(0,pe.useMemo)(()=>u.get(e?.collection.id??e?.id??""),[u,e]),p=(0,pe.useMemo)(()=>e?pn(m,{spamStatus:e.collection.spamStatus}):!1,[e,m]),f=(0,pe.useCallback)(()=>p?l():i(),[p,i,l]);return(0,pe.useMemo)(()=>({isHidden:p,onHideCollectible:i,onUnhideCollectible:l,onToggleHide:f}),[i,f,l,p])}o(Jd,"useCollectiblesHideUnhide");function Zd(t){let{data:e,isPending:r}=me(t),n=(0,pe.useCallback)(l=>{if(!l)return!1;let u=l.collection.id||l.id;return ho(e,{spamStatus:l.collection.spamStatus,key:u})},[e]),i=(0,pe.useCallback)(l=>{if(!l)return Me.NotVerified;let u=l.collection.id||l.id;return fo(e,{spamStatus:l.collection.spamStatus,key:u})},[e]),s=(0,pe.useCallback)(l=>Er(i(l)),[i]);return(0,pe.useMemo)(()=>({getIsHidden:n,getSpamStatus:i,getIsSpam:s,isLoading:r}),[n,i,s,r])}o(Zd,"useGetCollectibleVisibilityStatus");function Ba(t){let{data:e,isPending:r}=me(t),n=(0,pe.useCallback)(l=>{if(!l)return!1;let u=l.id;return ho(e,{spamStatus:l.spamStatus,key:u})},[e]),i=(0,pe.useCallback)(l=>{if(!l)return Me.NotVerified;let u=l.id;return fo(e,{spamStatus:l.spamStatus,key:u})},[e]),s=(0,pe.useCallback)(l=>Er(i(l)),[i]);return(0,pe.useMemo)(()=>({getIsHidden:n,getSpamStatus:i,getIsSpam:s,isLoading:r}),[n,i,s,r])}o(Ba,"useGetCollectionVisibilityStatus");function Ua(t){let e=Ba(t),r=Aa({accountId:t}),n=ka({accountId:t});return(0,pe.useMemo)(()=>({...e,hideCollection:r,unhideCollection:n}),[e,r,n])}o(Ua,"useCollectionVisibilityOverrides");a();c();var Pa=v(k(),1);var em=o(t=>t.reduce((e,r)=>({...e,[r]:1}),{}),"convertIdArrayToObj");function vo({allCollections:t=[],pinnedCollectionIds:e=[],getIsHidden:r,getIsSpam:n}){let i=[],s=[],l=[],u=[],m=em(e),p={};for(let b of t)n(b)&&r(b)?u.push(b):r(b)?s.push(b):m[b.id]?p[b.id]=b:n(b)?l.push(b):i.push(b);let f=[];for(let b of e)p[b]&&f.push(p[b]);return{collections:[...f,...i,...l],hiddenCollections:s,spamCollections:u}}o(vo,"orderedCollections");var tm=o(({allCollections:t=[],pinnedCollectionIds:e=[],getIsHidden:r,getIsSpam:n})=>(0,Pa.useMemo)(()=>vo({allCollections:t,pinnedCollectionIds:e,getIsHidden:r,getIsSpam:n}),[t,r,n,e]),"useOrderedCollections");a();c();var An=v(k(),1);var Io={location:0,distance:50,threshold:.3},$S={...Io,keys:["name"]},zS={...Io,keys:["name"]},GS={...Io,keys:["name"]},Or=o((t,e)=>{if(e===void 0)return!1;let r=t.toLowerCase();return e.toLowerCase().split(" ").map(n=>n.startsWith(r)||r.startsWith(n)&&e.toLowerCase().includes(r)).includes(!0)},"filterByWordPrefix");var Ra=o((t,e)=>(0,An.useMemo)(()=>({collections:t.filter(n=>Or(e,n.name||n.items[0].name))}),[e,t]),"useSearchCollections"),rm=o((t,e,r,n)=>{let i=(0,An.useMemo)(()=>t.flatMap(s=>s.items),[t]);return(0,An.useMemo)(()=>{let s=t.filter(p=>Or(n,p.name)),l=i.filter(p=>Or(n,p.name)),u=e.filter(p=>Or(n,p.name)),m=r.filter(p=>Or(n,p.name));return{collections:s,collectibles:l,hiddenCollections:u,spamCollections:m}},[n,i,t,e,r])},"useSearchCollectiblesStrict");var nm=re({seconds:10}),om=re({seconds:5});function im({account:t}){let e=t?.identifier??"",r=t?.addresses??[],{data:n=[],isLoading:i}=kt({addresses:r,queryOptions:{staleTime:om,refetchInterval:nm}}),[s,l]=(0,gt.useState)(""),u=ss(s)??"",m=(0,gt.useCallback)(O=>l(typeof O=="string"?O:O.currentTarget.value),[l]),{getIsHidden:p,getIsSpam:f,getSpamStatus:b,hideCollection:y,unhideCollection:C,isLoading:S}=Ua(e),w=(0,gt.useMemo)(()=>{let{collections:O,hiddenCollections:K,spamCollections:J}=vo({allCollections:n,getIsHidden:p,getIsSpam:f});return[...O,...K,...J]},[n]),E=Ra(w,u),D=(0,gt.useCallback)(({item:O,status:K})=>K==="show"?C(O):y(O),[C,y]);return{viewState:(0,gt.useMemo)(()=>({accountId:e,listItems:u?E.collections:w,searchQuery:s,debouncedSearchQuery:u,handleSearch:m,getIsHidden:p,getIsSpam:f,getSpamStatus:b,onToggleHidden:D}),[e,E.collections,s,m,w,D,p,f,b,u]),viewStateLoading:S||i}}o(im,"useManageCollectionsVisibilityViewState");a();c();var Oo=v(hu());a();c();var kn={recipient:"",recipientHandle:"",addressBookRecipient:void 0,amountAsset:new vt(0),amountUsd:0,transactionSpeed:"standard",solana:{references:[]},multichainTransaction:void 0},ja=class extends Error{static{o(this,"SendFungibleFlowError")}constructor(e){super(e),this.name="SendFungibleFlowError"}};var _a={sendSessionId:"",encodedCaip19:void 0,fungibleKey:void 0,splTokenAccount:void 0,analyticsRecipient:void 0,sendFormValues:kn,shouldShowFiatValues:!1,retryArgs:void 0,confirmedFungibleAndSender:null,gasEstimation:void 0},sm=Xt((t,e)=>({...(0,Oo.default)(_a),resetSendSlice:o(()=>{let r=(0,Oo.default)(_a);r.sendSessionId=Fi(),t(r)},"resetSendSlice"),setAnalyticsRecipient:o(r=>{t({analyticsRecipient:r})},"setAnalyticsRecipient"),setSendFungibleKey:o((r,n,i)=>{t({fungibleKey:r,splTokenAccount:n,encodedCaip19:i})},"setSendFungibleKey"),setSendFormValues:o(r=>{t({sendFormValues:r})},"setSendFormValues"),setInputAmount:o(r=>{let n=e();t({sendFormValues:{...n.sendFormValues,inputAmount:r}})},"setInputAmount"),setShouldShowFiatValues:o(r=>{t({shouldShowFiatValues:r})},"setShouldShowFiatValues"),setRetryArgs:o(r=>{t({retryArgs:r})},"setRetryArgs"),setGasEstimation:o(r=>{t({gasEstimation:r})},"setGasEstimation")}));a();c();var Na={collectible:void 0,sendFormValues:kn,shouldRequireAmount:!1},Ao=Xt(t=>({...Na,resetSendSlice:o(()=>{t({...Na})},"resetSendSlice"),setSendCollectible:o(e=>{t({collectible:e})},"setSendCollectible"),setSendFormValues:o(e=>{t({sendFormValues:e})},"setSendFormValues"),setShouldRequireAmount:o(e=>{t({shouldRequireAmount:e})},"setShouldRequireAmount")}));a();c();a();c();var le=v(gu(),1);var am="token-account-min-balances",La=le.struct([le.blob(32,"mint"),le.blob(32,"owner"),le.nu64("amount"),le.blob(93)]),DC=le.struct([le.blob(44),le.u8("decimals"),le.blob(37)]),cm=le.struct([le.blob(679)]),lm=le.struct([le.u8("edition"),le.blob(281)]),um=o(async t=>t.getMinimumBalanceForRentExemption(La.span).then(ue),"getTokenAccountCostAsync"),dm=o(async t=>ue(await t.getMinimumBalanceForRentExemption(cm.span)+await t.getMinimumBalanceForRentExemption(lm.span)+await t.getMinimumBalanceForRentExemption(La.span)),"getMplTokenAccountCostAsync");function mm({tokenEdition:t,connection:e}){return ke({queryKey:[am,{tokenEdition:t}],queryFn:o(async()=>e?t===null||!gn(t)?um(e):dm(e):ue(0),"queryFn")})}o(mm,"useTokenAccountMinBalance");a();c();var Va=v(k(),1);var pm=o((t,e,r=!1,n)=>(0,Va.useMemo)(()=>{if(t)return Mn({collectibleMedia:t,isImageAnimationEnabled:r,previewSize:n??"medium",mediaTypeOverride:e})},[t,e,r,n]),"useCollectibleMediaURI"),Mn=o(({collectibleMedia:t,isImageAnimationEnabled:e,previewSize:r,mediaTypeOverride:n})=>{let i=n??t.type;if((i==="image"||i==="other")&&t.previews?.[r]){let l=e?"":`${r==="medium"?"=":"-"}k`;return`${t.previews[r]}${l}`}return t[i]?.url},"parseCollectibleMediaURI");a();c();a();c();var Fa={burnCollectibleTx:void 0,burnCollectibleTxFee:void 0},$a=o(t=>({...Fa,resetBurnCollectible:o(()=>t({...Fa}),"resetBurnCollectible"),setBurnCollectibleTx:o(e=>t({burnCollectibleTx:e}),"setBurnCollectibleTx"),setBurnCollectibleTxFee:o(e=>t({burnCollectibleTxFee:e}),"setBurnCollectibleTxFee")}),"createBurnCollectibleSlice");a();c();var za={multichainSellCollectible:void 0},Ga=o(t=>({...za,resetMultichainSellCollectible:o(()=>t({...za}),"resetMultichainSellCollectible"),setMultichainSellCollectible:o(e=>t({multichainSellCollectible:e}),"setMultichainSellCollectible")}),"createMultichainSellCollectibleSlice");a();c();var Ha={listCollectible:null,listCollectiblePrice:null,editListCollectiblePrice:null,unlistCollectible:null,transactionURL:null},qa=o(t=>({...Ha,reset:o(()=>t({...Ha}),"reset"),setListCollectible:o(e=>t({listCollectible:e}),"setListCollectible"),setListPrice:o(e=>t({listCollectiblePrice:e}),"setListPrice"),setEditListPrice:o(e=>t({editListCollectiblePrice:e}),"setEditListPrice"),setUnlistCollectible:o(e=>t({unlistCollectible:e}),"setUnlistCollectible"),setTransactionURL:o(e=>t({transactionURL:e}),"setTransactionURL")}),"createListCollectibleSlice");a();c();var Ka={multichainListCollectible:null,multichainListCollectiblePrice:null,editMultichainListCollectiblePrice:null,unlistMultichainCollectible:null,multichainTransactionURL:null},Wa=o(t=>({...Ka,reset:o(()=>t({...Ka}),"reset"),setMultichainListCollectible:o(e=>t({multichainListCollectible:e}),"setMultichainListCollectible"),setMultichainListPrice:o(e=>t({multichainListCollectiblePrice:e}),"setMultichainListPrice"),setEditMultichainListPrice:o(e=>t({editMultichainListCollectiblePrice:e}),"setEditMultichainListPrice"),setUnlistMultichainCollectible:o(e=>t({unlistMultichainCollectible:e}),"setUnlistMultichainCollectible"),setMultichainTransactionURL:o(e=>t({multichainTransactionURL:e}),"setMultichainTransactionURL")}),"createMultichainListCollectibleSlice");var fm=Xt((t,e)=>({...qa(t,e),...$a(t,e),...Wa(t,e),...Ga(t,e)}));a();c();a();c();var hm=500,Qa=H.collections([])[1],gm=[Qa,H.hiddenCollections("")[1],H.unhiddenCollections("")[1],H.pinnedCollections("")[1]],bm=o(t=>{let e=String(t.queryKey[1]);return e===Qa?t.state.data?.nrOfItems<=hm:gm.includes(e)},"collectiblesShouldDehydrateQueryPredicate");a();c();var oc=v(k(),1);a();c();a();c();a();c();a();c();var Xa=o((t,e={})=>js(t,{...e,infix:"$",format:e.compact?"0.[00]a":e.format??"0,0.00",decimalFormatSmallNumbers:e.decimalFormatSmallNumbers??"0.00"}),"formatDollarAmount");var ym=5e4,Sm="https://help.magiceden.io/en/articles/8450002-mastering-utxo-management-extracting-splitting-sats-on-magic-eden-bitcoin",Ya={sendSuccessCondition:we.SUBMISSION,collectibleDetailPrecision:7,collectibleDetailCtaBanner:o((t,e)=>{let r=t.chainData;if(nr(r)&&e){let n=new ue(r.utxoDetails.value??0);if(n.lte(ym))return;let i=Object.values(r.utxoDetails.satributes).reduce((m,{count:p})=>m+p,0),s=uo(i,V.bitcoin.tokenDecimals),l=uo(n,V.bitcoin.tokenDecimals),u=Xa(l.minus(s).times(e));return{title:ve.t("collectibleDetailUtxoSplitterCtaTitle"),subtitle:ve.t("collectibleDetailUtxoSplitterCtaSubtitle",{value:u}),iconColor:"spotPositive",modal:{title:ve.t("collectibleDetailUtxoSplitterModalCtaTitle"),subtitle:ve.t("collectibleDetailUtxoSplitterModalCtaSubtitle",{value:u}),buttonText:ve.t("collectibleDetailUtxoSplitterModalCtaButton"),uri:Sm,iconColor:"spotPositive"}}}},"collectibleDetailCtaBanner")};a();c();var bt={sendSuccessCondition:we.CONFIRMATION,collectibleDetailPrecision:5,collectibleDetailCtaBanner:void 0};a();c();var Ja={sendSuccessCondition:we.CONFIRMATION,collectibleDetailPrecision:5,collectibleDetailCtaBanner:void 0};a();c();var Za={sendSuccessCondition:we.CONFIRMATION,collectibleDetailPrecision:9,collectibleDetailCtaBanner:void 0};var Cm=new Xi({[Pe.Solana]:Ja,[Pe.Ethereum]:bt,[Pe.Polygon]:bt,[Pe.Base]:bt,[Pe.Monad]:bt,[Pe.Arbitrum]:bt,[Pe.Bitcoin]:Ya,[Pe.Sui]:Za,[Pe.Hypercore]:bt,[Pe.Hyperevm]:bt}),Bt=Qi(Cm);a();c();var rc=v(k(),1);a();c();var ec=v(lo(),1);var tc=o(({value:t,type:e})=>{if(!t)return"";try{switch(e){case"number":return(0,ec.default)(t).format("0,0.[00]").toString();case"date":return new Date(Number(t)).toLocaleDateString();default:return`${t}`}}catch{return`${t}`}},"formatTrait");var nc=o(t=>(0,rc.useMemo)(()=>{if(!t)return[];let e=t.chainData;return Ke(e)&&e.utxoDetails?e.utxoDetails.satributes.map(({count:r,displayName:n,description:i,url:s})=>({type:n.toUpperCase(),value:ve.t(wm(r,"collectibleDetailSatsCount_one","collectibleDetailSatsCount_other"),{count:r})??"",modal:{name:n,description:i,iconUrl:s}})):t.attributes.map(({trait_type:r,value:n,display_type:i})=>({type:r,value:tc({value:n,type:i})}))},[t]),"useCollectibleTraits"),wm=o((t,e,r)=>t===1?e:r,"getI18nKey");function xm(t){let{chain:e,owner:r}=t||{},n=e?.id,{data:i}=en({address:r,networkID:n});zs(i);let s=nc(t),l=n?V.getChainID(n):void 0,u=l?Wi(l):void 0,{data:m}=Rs({query:u?{data:u}:void 0});return{ctaBanner:(0,oc.useMemo)(()=>{if(!(!t||!m||!l))return Bt.get(l).collectibleDetailCtaBanner?.(t,m.price)},[l,t,m]),traits:s}}o(xm,"useCollectibleDetailViewState");a();c();a();c();a();c();a();c();var ic=v(Qr(),1),sc=v(Qr(),1),ac=v(Gi(),1);var cc=o(({value:t,senderAddress:e,recipient:r,utxoState:{safeToSendUtxos:n},feerate:i,utxoHash:s,utxoIndex:l})=>{let u={transactionHash:s,index:l,value:t,isSafeToSend:!1,owner:e},m=[u],p=[{address:r,value:parseFloat(u.value),script:(0,ac.toOutputScript)(r)}],f=un(Xr(Kt.Bitcoin.Mainnet,e),n,p,i,m),b=new sc.Psbt({network:ic.networks.bitcoin});if(f.type==="success"){let{inputs:y,outputs:C}=f;b.addInputs(y.map(S=>dn(S,e,!0))),b.addOutputs(C)}return[b,b.data.inputs.map((y,C)=>({address:e,signingIndexes:[C]})),f.vb]},"createOrdinalsTransaction");a();c();var lc=v(Qr(),1),uc=v(Qr(),1),dc=v(Gi(),1);var mc=o(({hash:t,index:e,value:r,senderAddress:n,recipient:i,utxoState:{safeToSendUtxos:s},feerate:l})=>{let u={index:e,transactionHash:t,value:r,isSafeToSend:!1,owner:n},m=[u],p=[{address:i,value:parseFloat(u.value),script:(0,dc.toOutputScript)(i)}],f=un(Xr(Kt.Bitcoin.Mainnet,n),s,p,l,m),b=new uc.Psbt({network:lc.networks.bitcoin});if(f.type==="success"){let{inputs:C,outputs:S}=f;b.addInputs(C.map(w=>dn(w,n,!0))),b.addOutputs(S)}let y=b.data.inputs.map((C,S)=>({address:n,signingIndexes:[S]}));return[b,y,f.vb]},"createRareSatsTransaction");function pc({chain:t,owner:e,chainData:r},{recipient:n,transactionSpeed:i=Yt.standard},{utxoState:s,transactionSpeedsToUnitCost:l}){let u,m,p;if(!e)throw new Error("Owner is required");let f=t.id,b=l[i],y=r,C=b,S=Math.round(C?ds(C.btcPerKilobyte).toNumber():us);if(Zs(y)){let{outputValue:w,utxoHash:E,utxoIndex:D}=y;[u,m,p]=cc({value:w,senderAddress:e,recipient:n,utxoState:s,feerate:S,utxoHash:E,utxoIndex:D})}else if(nr(y)){let{utxoDetails:w}=y;[u,m,p]=mc({feerate:S,senderAddress:e,recipient:n,utxoState:s,hash:w.hash,index:w.index,value:w.value.toString()})}else throw new Error("Unsupported bitcoin transfer transaction");return{networkID:f,psbt:u,vb:p,psbtChain:void 0,inputsToSign:m}}o(pc,"createBitcoinTransferTransaction");a();c();a();c();var Tm=["function safeTransferFrom(address from, address to, uint256 tokenId)","function transferFrom(address from, address to, uint256 tokenId)"],fc=new Error("Error populating ERC721 transaction data."),hc=o(async t=>{let{sender:e,networkID:r,destination:n,contractAddress:i,tokenID:s}=t,l=sn(r,i,Tm,e),u;try{let p=await l.populateTransaction.safeTransferFrom(e,n,new ue(s).toString(10));if(p.data)u=p.data;else throw fc}catch{throw fc}return Ht.parse({type:Gt.eip1559,from:e,to:i,chainId:V.getEVMNetworkIDValue(r),data:u})},"createErc721TransferTransaction");a();c();var Em=["function safeTransferFrom(address from, address to, uint256 id, uint256 amount, bytes data)","function transferFrom(address from, address to, uint256 id, uint256 amount, bytes data)"],gc=new Error("Error populating ERC1155 transaction data."),bc=o(async t=>{let{sender:e,networkID:r,destination:n,contractAddress:i,tokenID:s,value:l}=t,u=sn(r,i,Em,e),m;try{let f=await u.populateTransaction.safeTransferFrom(e,n,new ue(s).toString(10),l.toString(10),[]);if(f.data)m=f.data;else throw gc}catch{throw gc}return Ht.parse({type:Gt.eip1559,from:e,to:i,chainId:V.getEVMNetworkIDValue(r),data:m})},"createErc1155TransferTransaction");async function yc({chain:t,chainData:e,owner:r},{recipient:n,amountAsset:i}){let s=e,l=t.id,u;if(vm(s)){let{contract:m,id:p}=s;u=await hc({networkID:l,sender:r??"",destination:n,contractAddress:m,tokenID:p})}else if(Im(s)){let{contract:m,id:p}=s;u=await bc({networkID:l,sender:r??"",destination:n,contractAddress:m,tokenID:p,value:i??"1"})}else throw new Error(`Unsupported EVM collectible type: ${s.standard}`);return{networkID:l,unsignedTransaction:u}}o(yc,"createEvmTransferTransaction");function vm(t){return t.standard===vr.ERC721}o(vm,"isErc721Collectible");function Im(t){return t.standard===vr.ERC1155}o(Im,"isErc1155Collectible");a();c();a();c();a();c();var Dn=class extends Error{static{o(this,"CompressionProofError")}constructor(e){super(e),this.name="ProofError"}};async function Sc({networkID:t,mintAddress:e}){let r="/collectibles/v1/proof",n;try{n=await Ae.api().post(r,{chainId:t,address:e})}catch{let i=new Dn(`Failed to fetch proof for ${e} on network ${t}.`);throw Se.captureError(i,Ee.Collectibles),i}if(n.status!==200){let i=new Dn(`Failed to fetch proof for ${e} on network ${t}.`);throw Se.captureError(i,Ee.Collectibles),i}return await n.data}o(Sc,"getCompressionProof");async function Cc({networkID:t,mint:e,recipient:r}){let n=new qt.Transaction,i=await Sc({networkID:t,mintAddress:e});return n.add(await as({...i,destination:r})),n}o(Cc,"createCompressedTokenTransferTransaction");a();c();async function wc({networkID:t,destination:e,mint:r,senderAddress:n}){let{createComputeBudgetIx:i,createOCTferIX:s,getOCPMintState:l}=await nn(),u=It(t),m=new L.PublicKey(r),p=await l(m,u);if(!p)throw new Error("Mint state not found for OCP transfer");qr()&&console.log("This is a Magic Eden Open Creator Protocol Token");let f=new qt.Transaction;f.add(i());let{destinationAddress:b}=await mn({solanaConnection:u,destination:new L.PublicKey(e),mint:m,programId:Tr}),y=new L.PublicKey(n.address),{initAccountIX:C,transferIX:S}=await s({senderAddress:y,destinationAddress:b,mintAddress:m,mintState:p,connection:u});return C&&f.add(C),f.add(S),f}o(wc,"createOcpTokenTransferTransaction");a();c();async function xc({networkID:t,senderAddress:e,senderAccount:r,destination:n,mint:i}){let s=It(t),l=new L.PublicKey(i),{destinationAddress:u,destinationAccount:m}=await mn({solanaConnection:s,destination:new L.PublicKey(n),mint:l,programId:Tr}),{createPNFTTransferIX:p}=await nn(),f=new qt.Transaction,b=new L.PublicKey(e.address),y=new L.PublicKey(r),C=m;if(!C){let[S,w]=await ys(b,u,l,Tr);f.add(bs({account:u,owner:L.SystemProgram.programId})),f.add(S),C=w}return f.add(await p({senderAddress:b,tokenAccount:y,destinationAddress:u,destinationAccount:C,mintAddress:l,connection:s})),f}o(xc,"createProgrammableNftTransferTransaction");async function Tc(t,e){let{chain:r,owner:n,decimals:i="0"}=t,s=parseFloat(i),{solana:l}=e,{memo:u,references:m}=l,p=r.id,f=It(p),b={networkID:t.chain.id,addressType:Kr.Solana,address:t.owner??""};if(!ce(t.chainData))throw new Error("Chain data is not a SolanaCollectibleChainData");let y;if(Om(t))y=await Cc({networkID:p,mint:t.chainData.mint,recipient:e.recipient});else if(Am(t))y=await xc({networkID:p,senderAddress:b,senderAccount:t.chainData.tokenAccount,destination:e.recipient,mint:t.chainData.mint});else if(await km(t))y=await wc({networkID:p,destination:e.recipient,mint:t.chainData.mint,senderAddress:b});else if(Mm(t)){let C=Bs(t),S=e.amountAsset.isZero()?"1":e.amountAsset.toFixed();y=await Cs({networkID:p,destination:e.recipient,mint:t.chainData.mint,senderAddress:b,senderAccount:t.chainData.tokenAccount,decimals:s,programId:t.chainData.programId,amount:S,references:m?.map(w=>w.toString())??[],memo:u??"",transferHookProgramId:C,connection:f})}else throw new Error("Unsupported transferSPLSolana args");return u&&y.add(Ss({memoText:u})),y.feePayer=new L.PublicKey(n??""),y=await hs(y,{connection:f}),y.recentBlockhash=(await f.getLatestBlockhash("confirmed")).blockhash,{networkID:p,transaction:[y]}}o(Tc,"createSolanaTransferTransaction");function Om(t){return ce(t.chainData)?"compression"in t.chainData&&!!t.chainData.compression?.compressed:!1}o(Om,"isCompressedTokenCollectible");function Am(t){return ce(t.chainData)?"standard"in t.chainData&&(t.chainData.standard===Ot.ProgrammableNonFungible||t.chainData.standard===Ot.ProgrammableNonFungibleEdition):!1}o(Am,"isProgrammableNftCollectible");async function km(t){let{chainData:e}=t;if(!ce(e))return!1;let{mint:r}=e,n=It(t.chain.id);return await ls(new L.PublicKey(r),n)!==null}o(km,"isOcpTokenCollectible");function Mm(t){return ce(t.chainData)}o(Mm,"isDefaultSplTokenCollectible");a();c();a();c();a();c();a();c();var Ec="1.21.2",vc="1.43.0";a();c();var Dm={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"},Bn=class extends Error{static{o(this,"SuiHTTPTransportError")}},ur=class extends Bn{static{o(this,"JsonRpcError")}constructor(e,r){super(e),this.code=r,this.type=Dm[r]??"ServerError"}},Un=class extends Bn{static{o(this,"SuiHTTPStatusError")}constructor(e,r,n){super(e),this.status=r,this.statusText=n}};a();c();var Ic=o(t=>{throw TypeError(t)},"__typeError"),Mo=o((t,e,r)=>e.has(t)||Ic("Cannot "+r),"__accessCheck"),ee=o((t,e,r)=>(Mo(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),Ut=o((t,e,r)=>e.has(t)?Ic("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),dr=o((t,e,r,n)=>(Mo(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),"__privateSet"),Oc=o((t,e,r)=>(Mo(t,e,"access private method"),r),"__privateMethod"),Bm=o((t,e,r,n)=>({set _(i){dr(t,e,i,r)},get _(){return ee(t,e,n)}}),"__privateWrapper"),Pt,Ar,et,Rt,kr,mr,Pn,Ac,kc;function Um(t){let e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}o(Um,"getWebsocketUrl");var Pm={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5},Rn=class{static{o(this,"WebsocketClient")}constructor(e,r={}){if(Ut(this,Pn),Ut(this,Pt,0),Ut(this,Ar,0),Ut(this,et,null),Ut(this,Rt,null),Ut(this,kr,new Set),Ut(this,mr,new Map),this.endpoint=e,this.options={...Pm,...r},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=Um(this.endpoint))}async makeRequest(e,r){let n=await Oc(this,Pn,Ac).call(this);return new Promise((i,s)=>{dr(this,Pt,ee(this,Pt)+1),ee(this,mr).set(ee(this,Pt),{resolve:i,reject:s,timeout:setTimeout(()=>{ee(this,mr).delete(ee(this,Pt)),s(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),n.send(JSON.stringify({jsonrpc:"2.0",id:ee(this,Pt),method:e,params:r}))}).then(({error:i,result:s})=>{if(i)throw new ur(i.message,i.code);return s})}async subscribe(e){let r=new ko(e);return ee(this,kr).add(r),await r.subscribe(this),()=>r.unsubscribe(this)}};Pt=new WeakMap;Ar=new WeakMap;et=new WeakMap;Rt=new WeakMap;kr=new WeakMap;mr=new WeakMap;Pn=new WeakSet;Ac=o(function(){return ee(this,Rt)?ee(this,Rt):(dr(this,Rt,new Promise(t=>{ee(this,et)?.close(),dr(this,et,new this.options.WebSocketConstructor(this.endpoint)),ee(this,et).addEventListener("open",()=>{dr(this,Ar,0),t(ee(this,et))}),ee(this,et).addEventListener("close",()=>{Bm(this,Ar)._++,ee(this,Ar)<=this.options.maxReconnects&&setTimeout(()=>{Oc(this,Pn,kc).call(this)},this.options.reconnectTimeout)}),ee(this,et).addEventListener("message",({data:e})=>{let r;try{r=JSON.parse(e)}catch(n){console.error(new Error(`Failed to parse RPC message: ${e}`,{cause:n}));return}if("id"in r&&r.id!=null&&ee(this,mr).has(r.id)){let{resolve:n,timeout:i}=ee(this,mr).get(r.id);clearTimeout(i),n(r)}else if("params"in r){let{params:n}=r;ee(this,kr).forEach(i=>{i.subscriptionId===n.subscription&&n.subscription===i.subscriptionId&&i.onMessage(n.result)})}})})),ee(this,Rt))},"setupWebSocket_fn");kc=o(async function(){return ee(this,et)?.close(),dr(this,Rt,null),Promise.allSettled([...ee(this,kr)].map(t=>t.subscribe(this)))},"reconnect_fn");var ko=class{static{o(this,"RpcSubscription")}constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){let{subscriptionId:r}=this;return this.subscribed=!1,r==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[r]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;let r=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=r)}};var Mc=o(t=>{throw TypeError(t)},"__typeError"),Uo=o((t,e,r)=>e.has(t)||Mc("Cannot "+r),"__accessCheck"),Be=o((t,e,r)=>(Uo(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),jn=o((t,e,r)=>e.has(t)?Mc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),Do=o((t,e,r,n)=>(Uo(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),"__privateSet"),Rm=o((t,e,r)=>(Uo(t,e,"access private method"),r),"__privateMethod"),Mr,je,Dr,Bo,Dc,_n=class{static{o(this,"SuiHTTPTransport")}constructor(e){jn(this,Bo),jn(this,Mr,0),jn(this,je),jn(this,Dr),Do(this,je,e)}fetch(e,r){let n=Be(this,je).fetch??fetch;if(!n)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return n(e,r)}async request(e){Do(this,Mr,Be(this,Mr)+1);let r=await this.fetch(Be(this,je).rpc?.url??Be(this,je).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":Ec,"Client-Target-Api-Version":vc,"Client-Request-Method":e.method,...Be(this,je).rpc?.headers},body:JSON.stringify({jsonrpc:"2.0",id:Be(this,Mr),method:e.method,params:e.params})});if(!r.ok)throw new Un(`Unexpected status code: ${r.status}`,r.status,r.statusText);let n=await r.json();if("error"in n&&n.error!=null)throw new ur(n.error.message,n.error.code);return n.result}async subscribe(e){let r=await Rm(this,Bo,Dc).call(this).subscribe(e);return async()=>!!await r()}};Mr=new WeakMap;je=new WeakMap;Dr=new WeakMap;Bo=new WeakSet;Dc=o(function(){if(!Be(this,Dr)){let t=Be(this,je).WebSocketConstructor??WebSocket;if(!t)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");Do(this,Dr,new Rn(Be(this,je).websocket?.url??Be(this,je).url,{WebSocketConstructor:t,...Be(this,je).websocket}))}return Be(this,Dr)},"getWebsocketClient_fn");a();c();a();c();a();c();a();c();a();c();function jm(t){if(t.length>=255)throw new TypeError("Alphabet too long");let e=new Uint8Array(256);for(let p=0;p<e.length;p++)e[p]=255;for(let p=0;p<t.length;p++){let f=t.charAt(p),b=f.charCodeAt(0);if(e[b]!==255)throw new TypeError(f+" is ambiguous");e[b]=p}let r=t.length,n=t.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function l(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";let f=0,b=0,y=0,C=p.length;for(;y!==C&&p[y]===0;)y++,f++;let S=(C-y)*s+1>>>0,w=new Uint8Array(S);for(;y!==C;){let N=p[y],O=0;for(let K=S-1;(N!==0||O<b)&&K!==-1;K--,O++)N+=256*w[K]>>>0,w[K]=N%r>>>0,N=N/r>>>0;if(N!==0)throw new Error("Non-zero carry");b=O,y++}let E=S-b;for(;E!==S&&w[E]===0;)E++;let D=n.repeat(f);for(;E<S;++E)D+=t.charAt(w[E]);return D}o(l,"encode");function u(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;let f=0,b=0,y=0;for(;p[f]===n;)b++,f++;let C=(p.length-f)*i+1>>>0,S=new Uint8Array(C);for(;p[f];){let N=e[p.charCodeAt(f)];if(N===255)return;let O=0;for(let K=C-1;(N!==0||O<y)&&K!==-1;K--,O++)N+=r*S[K]>>>0,S[K]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");y=O,f++}let w=C-y;for(;w!==C&&S[w]===0;)w++;let E=new Uint8Array(b+(C-w)),D=b;for(;w!==C;)E[D++]=S[w++];return E}o(u,"decodeUnsafe");function m(p){let f=u(p);if(f)return f;throw new Error("Non-base"+r+" character")}return o(m,"decode"),{encode:l,decodeUnsafe:u,decode:m}}o(jm,"base");var Bc=jm;var _m="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Po=Bc(_m);var tt=o(t=>Po.encode(t),"toBase58"),_e=o(t=>Po.decode(t),"fromBase58");a();c();function he(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}o(he,"fromBase64");var Ro=8192;function X(t){if(t.length<Ro)return btoa(String.fromCharCode(...t));let e="";for(var r=0;r<t.length;r+=Ro){let n=t.slice(r,r+Ro);e+=String.fromCharCode(...n)}return btoa(e)}o(X,"toBase64");a();c();a();c();function pr(t){let e=t.startsWith("0x")?t.slice(2):t,r=e.length%2===0?e:`0${e}`,n=r.match(/[0-9a-fA-F]{2}/g)?.map(i=>parseInt(i,16))??[];if(n.length!==r.length/2)throw new Error(`Invalid hex string ${t}`);return Uint8Array.from(n)}o(pr,"fromHex");function Qe(t){return t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"")}o(Qe,"toHex");a();c();a();c();function jt(t){let e=[],r=0;if(t===0)return[0];for(;t>0;)e[r]=t&127,(t>>=7)&&(e[r]|=128),r+=1;return e}o(jt,"ulebEncode");function Uc(t){let e=0,r=0,n=0;for(;;){let i=t[n];if(n+=1,e|=(i&127)<<r,!(i&128))break;r+=7}return{value:e,length:n}}o(Uc,"ulebDecode");var Nn=class{static{o(this,"BcsReader")}constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),n=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read128(){let e=BigInt(this.read64()),n=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+n).toString(10)}read256(){let e=BigInt(this.read128()),n=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+n).toString(10)}readBytes(e){let r=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,r,e);return this.shift(e),n}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,e),{value:n,length:i}=Uc(r);return this.shift(i),n}readVec(e){let r=this.readULEB(),n=[];for(let i=0;i<r;i++)n.push(e(this,i,r));return n}};a();c();a();c();function jo(t,e){switch(e){case"base58":return tt(t);case"base64":return X(t);case"hex":return Qe(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}o(jo,"encodeStr");function Ln(t,e=["<",">"]){let[r,n]=e,i=[],s="",l=0;for(let u=0;u<t.length;u++){let m=t[u];if(m===r&&l++,m===n&&l--,l===0&&m===","){i.push(s.trim()),s="";continue}s+=m}return i.push(s.trim()),i}o(Ln,"splitGenericParameters");var Vn=class{static{o(this,"BcsWriter")}constructor({initialSize:e=1024,maxSize:r=1/0,allocateSize:n=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=r,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){let r=this.bytePosition+e;if(r>this.size){let n=Math.min(this.maxSize,this.size+this.allocateSize);if(r>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${r}`);this.size=n;let i=new ArrayBuffer(this.size);new Uint8Array(i).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(i)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return _o(BigInt(e),8).forEach(r=>this.write8(r)),this}write128(e){return _o(BigInt(e),16).forEach(r=>this.write8(r)),this}write256(e){return _o(BigInt(e),32).forEach(r=>this.write8(r)),this}writeULEB(e){return jt(e).forEach(r=>this.write8(r)),this}writeVec(e,r){return this.writeULEB(e.length),Array.from(e).forEach((n,i)=>r(this,n,i,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return jo(this.toBytes(),e)}};function _o(t,e){let r=new Uint8Array(e),n=0;for(;t>0;)r[n]=Number(t%BigInt(256)),t=t/BigInt(256),n+=1;return r}o(_o,"toLittleEndian");var Pc=o(t=>{throw TypeError(t)},"__typeError"),Rc=o((t,e,r)=>e.has(t)||Pc("Cannot "+r),"__accessCheck"),Ne=o((t,e,r)=>(Rc(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),$n=o((t,e,r)=>e.has(t)?Pc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),zn=o((t,e,r,n)=>(Rc(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),"__privateSet"),fr,Br,Fn,yt,Nm=class jc{static{o(this,"_BcsType")}constructor(e){$n(this,fr),$n(this,Br),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),zn(this,fr,e.write),zn(this,Br,e.serialize??((r,n)=>{let i=new Vn({initialSize:this.serializedSize(r)??void 0,...n});return Ne(this,fr).call(this,r,i),i.toBytes()})),this.validate=e.validate??(()=>{})}write(e,r){this.validate(e),Ne(this,fr).call(this,e,r)}serialize(e,r){return this.validate(e),new Gn(this,Ne(this,Br).call(this,e,r))}parse(e){let r=new Nn(e);return this.read(r)}fromHex(e){return this.parse(pr(e))}fromBase58(e){return this.parse(_e(e))}fromBase64(e){return this.parse(he(e))}transform({name:e,input:r,output:n,validate:i}){return new jc({name:e??this.name,read:o(s=>n?n(this.read(s)):this.read(s),"read"),write:o((s,l)=>Ne(this,fr).call(this,r?r(s):s,l),"write"),serializedSize:o(s=>this.serializedSize(r?r(s):s),"serializedSize"),serialize:o((s,l)=>Ne(this,Br).call(this,r?r(s):s,l),"serialize"),validate:o(s=>{i?.(s),this.validate(r?r(s):s)},"validate")})}};fr=new WeakMap;Br=new WeakMap;var Ue=Nm,_c=Symbol.for("@mysten/serialized-bcs");function hr(t){return!!t&&typeof t=="object"&&t[_c]===!0}o(hr,"isSerializedBcs");var Gn=class{static{o(this,"SerializedBcs")}constructor(e,r){$n(this,Fn),$n(this,yt),zn(this,Fn,e),zn(this,yt,r)}get[_c](){return!0}toBytes(){return Ne(this,yt)}toHex(){return Qe(Ne(this,yt))}toBase64(){return X(Ne(this,yt))}toBase58(){return tt(Ne(this,yt))}parse(){return Ne(this,Fn).parse(Ne(this,yt))}};Fn=new WeakMap;yt=new WeakMap;function Ur({size:t,...e}){return new Ue({...e,serializedSize:o(()=>t,"serializedSize")})}o(Ur,"fixedSizeBcsType");function Hn({readMethod:t,writeMethod:e,...r}){return Ur({...r,read:o(n=>n[t](),"read"),write:o((n,i)=>i[e](n),"write"),validate:o(n=>{if(n<0||n>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${n}. Expected value in range 0-${r.maxValue}`);r.validate?.(n)},"validate")})}o(Hn,"uIntBcsType");function qn({readMethod:t,writeMethod:e,...r}){return Ur({...r,read:o(n=>n[t](),"read"),write:o((n,i)=>i[e](BigInt(n)),"write"),validate:o(n=>{let i=BigInt(n);if(i<0||i>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${i}. Expected value in range 0-${r.maxValue}`);r.validate?.(i)},"validate")})}o(qn,"bigUIntBcsType");function Nc({serialize:t,...e}){let r=new Ue({...e,serialize:t,write:o((n,i)=>{for(let s of r.serialize(n).toBytes())i.write8(s)},"write")});return r}o(Nc,"dynamicSizeBcsType");function Lc({toBytes:t,fromBytes:e,...r}){return new Ue({...r,read:o(n=>{let i=n.readULEB(),s=n.readBytes(i);return e(s)},"read"),write:o((n,i)=>{let s=t(n);i.writeULEB(s.length);for(let l=0;l<s.length;l++)i.write8(s[l])},"write"),serialize:o(n=>{let i=t(n),s=jt(i.length),l=new Uint8Array(s.length+i.length);return l.set(s,0),l.set(i,s.length),l},"serialize"),validate:o(n=>{if(typeof n!="string")throw new TypeError(`Invalid ${r.name} value: ${n}. Expected string`);r.validate?.(n)},"validate")})}o(Lc,"stringLikeBcsType");function Vc(t){let e=null;function r(){return e||(e=t()),e}return o(r,"getType"),new Ue({name:"lazy",read:o(n=>r().read(n),"read"),serializedSize:o(n=>r().serializedSize(n),"serializedSize"),write:o((n,i)=>r().write(n,i),"write"),serialize:o((n,i)=>r().serialize(n,i).toBytes(),"serialize")})}o(Vc,"lazyBcsType");a();c();var d={u8(t){return Hn({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t})},u16(t){return Hn({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t})},u32(t){return Hn({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t})},u64(t){return qn({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t})},u128(t){return qn({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t})},u256(t){return qn({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t})},bool(t){return Ur({name:"bool",size:1,read:o(e=>e.read8()===1,"read"),write:o((e,r)=>r.write8(e?1:0),"write"),...t,validate:o(e=>{if(t?.validate?.(e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)},"validate")})},uleb128(t){return Nc({name:"uleb128",read:o(e=>e.readULEB(),"read"),serialize:o(e=>Uint8Array.from(jt(e)),"serialize"),...t})},bytes(t,e){return Ur({name:`bytes[${t}]`,size:t,read:o(r=>r.readBytes(t),"read"),write:o((r,n)=>{let i=new Uint8Array(r);for(let s=0;s<t;s++)n.write8(i[s]??0)},"write"),...e,validate:o(r=>{if(e?.validate?.(r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw new TypeError(`Expected array of length ${t}, found ${r.length}`)},"validate")})},byteVector(t){return new Ue({name:"bytesVector",read:o(e=>{let r=e.readULEB();return e.readBytes(r)},"read"),write:o((e,r)=>{let n=new Uint8Array(e);r.writeULEB(n.length);for(let i=0;i<n.length;i++)r.write8(n[i]??0)},"write"),...t,serializedSize:o(e=>{let r="length"in e?e.length:null;return r==null?null:jt(r).length+r},"serializedSize"),validate:o(e=>{if(t?.validate?.(e),!e||typeof e!="object"||!("length"in e))throw new TypeError(`Expected array, found ${typeof e}`)},"validate")})},string(t){return Lc({name:"string",toBytes:o(e=>new TextEncoder().encode(e),"toBytes"),fromBytes:o(e=>new TextDecoder().decode(e),"fromBytes"),...t})},fixedArray(t,e,r){return new Ue({name:`${e.name}[${t}]`,read:o(n=>{let i=new Array(t);for(let s=0;s<t;s++)i[s]=e.read(n);return i},"read"),write:o((n,i)=>{for(let s of n)e.write(s,i)},"write"),...r,validate:o(n=>{if(r?.validate?.(n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t)throw new TypeError(`Expected array of length ${t}, found ${n.length}`)},"validate")})},option(t){return d.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:o(e=>e==null?{None:!0}:{Some:e},"input"),output:o(e=>e.$kind==="Some"?e.Some:null,"output")})},vector(t,e){return new Ue({name:`vector<${t.name}>`,read:o(r=>{let n=r.readULEB(),i=new Array(n);for(let s=0;s<n;s++)i[s]=t.read(r);return i},"read"),write:o((r,n)=>{n.writeULEB(r.length);for(let i of r)t.write(i,n)},"write"),...e,validate:o(r=>{if(e?.validate?.(r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`)},"validate")})},tuple(t,e){return new Ue({name:`(${t.map(r=>r.name).join(", ")})`,serializedSize:o(r=>{let n=0;for(let i=0;i<t.length;i++){let s=t[i].serializedSize(r[i]);if(s==null)return null;n+=s}return n},"serializedSize"),read:o(r=>{let n=[];for(let i of t)n.push(i.read(r));return n},"read"),write:o((r,n)=>{for(let i=0;i<t.length;i++)t[i].write(r[i],n)},"write"),...e,validate:o(r=>{if(e?.validate?.(r),!Array.isArray(r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${r.length}`)},"validate")})},struct(t,e,r){let n=Object.entries(e);return new Ue({name:t,serializedSize:o(i=>{let s=0;for(let[l,u]of n){let m=u.serializedSize(i[l]);if(m==null)return null;s+=m}return s},"serializedSize"),read:o(i=>{let s={};for(let[l,u]of n)s[l]=u.read(i);return s},"read"),write:o((i,s)=>{for(let[l,u]of n)u.write(i[l],s)},"write"),...r,validate:o(i=>{if(r?.validate?.(i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`)},"validate")})},enum(t,e,r){let n=Object.entries(e);return new Ue({name:t,read:o(i=>{let s=i.readULEB(),l=n[s];if(!l)throw new TypeError(`Unknown value ${s} for enum ${t}`);let[u,m]=l;return{[u]:m?.read(i)??!0,$kind:u}},"read"),write:o((i,s)=>{let[l,u]=Object.entries(i).filter(([m])=>Object.hasOwn(e,m))[0];for(let m=0;m<n.length;m++){let[p,f]=n[m];if(p===l){s.writeULEB(m),f?.write(u,s);return}}},"write"),...r,validate:o(i=>{if(r?.validate?.(i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`);let s=Object.keys(i).filter(u=>i[u]!==void 0&&Object.hasOwn(e,u));if(s.length!==1)throw new TypeError(`Expected object with one key, but found ${s.length} for type ${t}}`);let[l]=s;if(!Object.hasOwn(e,l))throw new TypeError(`Invalid enum variant ${l}`)},"validate")})},map(t,e){return d.vector(d.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:o(r=>[...r.entries()],"input"),output:o(r=>{let n=new Map;for(let[i,s]of r)n.set(i,s);return n},"output")})},lazy(t){return Vc(t)}};a();c();a();c();a();c();a();c();a();c();var Lm=32;function Kn(t){try{return _e(t).length===Lm}catch{return!1}}o(Kn,"isValidTransactionDigest");var Pr=32;function Ie(t){return Vm(t)&&Fm(t)===Pr}o(Ie,"isValidSuiAddress");function gr(t){return Ie(t)}o(gr,"isValidSuiObjectId");function B(t,e=!1){let r=t.toLowerCase();return!e&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(Pr*2,"0")}`}o(B,"normalizeSuiAddress");function xe(t,e=!1){return B(t,e)}o(xe,"normalizeSuiObjectId");function Vm(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}o(Vm,"isHex");function Fm(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}o(Fm,"getHexByteLength");a();c();var $m=/^vector<(.+)>$/,zm=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,rt=class t{static{o(this,"TypeTagSerializer")}static parseFromStr(e,r=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};let n=e.match($m);if(n)return{vector:t.parseFromStr(n[1],r)};let i=e.match(zm);if(i)return{struct:{address:r?B(i[1]):i[1],module:i[2],name:i[3],typeParams:i[5]===void 0?[]:t.parseStructTypeArgs(i[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,r=!1){return Ln(e).map(n=>t.parseFromStr(n,r))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${t.tagToString(e.vector)}>`;if("struct"in e){let r=e.struct,n=r.typeParams.map(t.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}};function Gm(t){return d.u64({name:"unsafe_u64",...t}).transform({input:o(e=>e,"input"),output:o(e=>Number(e),"output")})}o(Gm,"unsafe_u64");function Hm(t){return d.enum("Option",{None:null,Some:t})}o(Hm,"optionEnum");var G=d.bytes(Pr).transform({validate:o(t=>{let e=typeof t=="string"?t:Qe(t);if(!e||!Ie(B(e)))throw new Error(`Invalid Sui address ${e}`)},"validate"),input:o(t=>typeof t=="string"?pr(B(t)):t,"input"),output:o(t=>B(Qe(t)),"output")}),Oe=d.vector(d.u8()).transform({name:"ObjectDigest",input:o(t=>_e(t),"input"),output:o(t=>tt(new Uint8Array(t)),"output"),validate:o(t=>{if(_e(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")},"validate")}),Te=d.struct("SuiObjectRef",{objectId:G,version:d.u64(),digest:Oe}),No=d.struct("SharedObjectRef",{objectId:G,initialSharedVersion:d.u64(),mutable:d.bool()}),Lo=d.enum("ObjectArg",{ImmOrOwnedObject:Te,SharedObject:No,Receiving:Te}),Vo=d.enum("CallArg",{Pure:d.struct("Pure",{bytes:d.vector(d.u8()).transform({input:o(t=>typeof t=="string"?he(t):t,"input"),output:o(t=>X(new Uint8Array(t)),"output")})}),Object:Lo}),Fo=d.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:d.lazy(()=>Fo),struct:d.lazy(()=>Ko),u16:null,u32:null,u256:null}),Wn=Fo.transform({input:o(t=>typeof t=="string"?rt.parseFromStr(t,!0):t,"input"),output:o(t=>rt.tagToString(t),"output")}),Le=d.enum("Argument",{GasCoin:null,Input:d.u16(),Result:d.u16(),NestedResult:d.tuple([d.u16(),d.u16()])}),$o=d.struct("ProgrammableMoveCall",{package:G,module:d.string(),function:d.string(),typeArguments:d.vector(Wn),arguments:d.vector(Le)}),zo=d.enum("Command",{MoveCall:$o,TransferObjects:d.struct("TransferObjects",{objects:d.vector(Le),address:Le}),SplitCoins:d.struct("SplitCoins",{coin:Le,amounts:d.vector(Le)}),MergeCoins:d.struct("MergeCoins",{destination:Le,sources:d.vector(Le)}),Publish:d.struct("Publish",{modules:d.vector(d.vector(d.u8()).transform({input:o(t=>typeof t=="string"?he(t):t,"input"),output:o(t=>X(new Uint8Array(t)),"output")})),dependencies:d.vector(G)}),MakeMoveVec:d.struct("MakeMoveVec",{type:Hm(Wn).transform({input:o(t=>t===null?{None:!0}:{Some:t},"input"),output:o(t=>t.Some??null,"output")}),elements:d.vector(Le)}),Upgrade:d.struct("Upgrade",{modules:d.vector(d.vector(d.u8()).transform({input:o(t=>typeof t=="string"?he(t):t,"input"),output:o(t=>X(new Uint8Array(t)),"output")})),dependencies:d.vector(G),package:G,ticket:Le})}),Go=d.struct("ProgrammableTransaction",{inputs:d.vector(Vo),commands:d.vector(zo)}),Ho=d.enum("TransactionKind",{ProgrammableTransaction:Go,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),qo=d.enum("TransactionExpiration",{None:null,Epoch:Gm()}),Ko=d.struct("StructTag",{address:G,module:d.string(),name:d.string(),typeParams:d.vector(Fo)}),Wo=d.struct("GasData",{payment:d.vector(Te),owner:G,price:d.u64(),budget:d.u64()}),Qo=d.struct("TransactionDataV1",{kind:Ho,sender:G,gasData:Wo,expiration:qo}),Xo=d.enum("TransactionData",{V1:Qo}),Yo=d.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Jo=d.enum("IntentVersion",{V0:null}),Zo=d.enum("AppId",{Sui:null}),ei=d.struct("Intent",{scope:Yo,version:Jo,appId:Zo});function ti(t){return d.struct(`IntentMessage<${t.name}>`,{intent:ei,value:t})}o(ti,"IntentMessage");var ri=d.enum("CompressedSignature",{ED25519:d.fixedArray(64,d.u8()),Secp256k1:d.fixedArray(64,d.u8()),Secp256r1:d.fixedArray(64,d.u8()),ZkLogin:d.vector(d.u8())}),ni=d.enum("PublicKey",{ED25519:d.fixedArray(32,d.u8()),Secp256k1:d.fixedArray(33,d.u8()),Secp256r1:d.fixedArray(33,d.u8()),ZkLogin:d.vector(d.u8())}),oi=d.struct("MultiSigPkMap",{pubKey:ni,weight:d.u8()}),ii=d.struct("MultiSigPublicKey",{pk_map:d.vector(oi),threshold:d.u16()}),Fc=d.struct("MultiSig",{sigs:d.vector(ri),bitmap:d.u16(),multisig_pk:ii}),qm=d.vector(d.u8()).transform({input:o(t=>typeof t=="string"?he(t):t,"input"),output:o(t=>X(new Uint8Array(t)),"output")}),si=d.struct("SenderSignedTransaction",{intentMessage:ti(Xo),txSignatures:d.vector(qm)}),$c=d.vector(si,{name:"SenderSignedData"}),zc=d.struct("PasskeyAuthenticator",{authenticatorData:d.vector(d.u8()),clientDataJson:d.string(),userSignature:d.vector(d.u8())});a();c();var Km=d.enum("PackageUpgradeError",{UnableToFetchPackage:d.struct("UnableToFetchPackage",{packageId:G}),NotAPackage:d.struct("NotAPackage",{objectId:G}),IncompatibleUpgrade:null,DigestDoesNotMatch:d.struct("DigestDoesNotMatch",{digest:d.vector(d.u8())}),UnknownUpgradePolicy:d.struct("UnknownUpgradePolicy",{policy:d.u8()}),PackageIDDoesNotMatch:d.struct("PackageIDDoesNotMatch",{packageId:G,ticketId:G})}),Wm=d.struct("ModuleId",{address:G,name:d.string()}),Gc=d.struct("MoveLocation",{module:Wm,function:d.u16(),instruction:d.u16(),functionName:d.option(d.string())}),Qm=d.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:d.struct("IndexOutOfBounds",{idx:d.u16()}),SecondaryIndexOutOfBounds:d.struct("SecondaryIndexOutOfBounds",{resultIdx:d.u16(),secondaryIdx:d.u16()}),InvalidResultArity:d.struct("InvalidResultArity",{resultIdx:d.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),Xm=d.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),Ym=d.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:d.struct("MoveObjectTooBig",{objectSize:d.u64(),maxObjectSize:d.u64()}),MovePackageTooBig:d.struct("MovePackageTooBig",{objectSize:d.u64(),maxObjectSize:d.u64()}),CircularObjectOwnership:d.struct("CircularObjectOwnership",{object:G}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:d.option(Gc),MoveAbort:d.tuple([Gc,d.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:d.struct("CommandArgumentError",{argIdx:d.u16(),kind:Qm}),TypeArgumentError:d.struct("TypeArgumentError",{argumentIdx:d.u16(),kind:Xm}),UnusedValueWithoutDrop:d.struct("UnusedValueWithoutDrop",{resultIdx:d.u16(),secondaryIdx:d.u16()}),InvalidPublicFunctionReturnType:d.struct("InvalidPublicFunctionReturnType",{idx:d.u16()}),InvalidTransferObject:null,EffectsTooLarge:d.struct("EffectsTooLarge",{currentSize:d.u64(),maxSize:d.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:d.struct("PackageUpgradeError",{upgradeError:Km}),WrittenObjectsTooLarge:d.struct("WrittenObjectsTooLarge",{currentSize:d.u64(),maxSize:d.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:d.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:d.vector(G)}),AddressDeniedForCoin:d.struct("AddressDeniedForCoin",{address:G,coinType:d.string()}),CoinTypeGlobalPause:d.struct("CoinTypeGlobalPause",{coinType:d.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),Hc=d.enum("ExecutionStatus",{Success:null,Failed:d.struct("ExecutionFailed",{error:Ym,command:d.option(d.u64())})}),qc=d.struct("GasCostSummary",{computationCost:d.u64(),storageCost:d.u64(),storageRebate:d.u64(),nonRefundableStorageFee:d.u64()}),br=d.enum("Owner",{AddressOwner:G,ObjectOwner:G,Shared:d.struct("Shared",{initialSharedVersion:d.u64()}),Immutable:null}),Jm=d.struct("TransactionEffectsV1",{status:Hc,executedEpoch:d.u64(),gasUsed:qc,modifiedAtVersions:d.vector(d.tuple([G,d.u64()])),sharedObjects:d.vector(Te),transactionDigest:Oe,created:d.vector(d.tuple([Te,br])),mutated:d.vector(d.tuple([Te,br])),unwrapped:d.vector(d.tuple([Te,br])),deleted:d.vector(Te),unwrappedThenDeleted:d.vector(Te),wrapped:d.vector(Te),gasObject:d.tuple([Te,br]),eventsDigest:d.option(Oe),dependencies:d.vector(Oe)}),ai=d.tuple([d.u64(),Oe]),Zm=d.enum("ObjectIn",{NotExist:null,Exist:d.tuple([ai,br])}),ep=d.enum("ObjectOut",{NotExist:null,ObjectWrite:d.tuple([Oe,br]),PackageWrite:ai}),tp=d.enum("IDOperation",{None:null,Created:null,Deleted:null}),rp=d.struct("EffectsObjectChange",{inputState:Zm,outputState:ep,idOperation:tp}),np=d.enum("UnchangedSharedKind",{ReadOnlyRoot:ai,MutateDeleted:d.u64(),ReadDeleted:d.u64(),Cancelled:d.u64(),PerEpochConfig:null}),op=d.struct("TransactionEffectsV2",{status:Hc,executedEpoch:d.u64(),gasUsed:qc,transactionDigest:Oe,gasObjectIndex:d.option(d.u32()),eventsDigest:d.option(Oe),dependencies:d.vector(Oe),lamportVersion:d.u64(),changedObjects:d.vector(d.tuple([G,rp])),unchangedSharedObjects:d.vector(d.tuple([G,np])),auxDataDigest:d.option(Oe)}),Kc=d.enum("TransactionEffects",{V1:Jm,V2:op});a();c();function yr(t){switch(t){case"u8":return d.u8();case"u16":return d.u16();case"u32":return d.u32();case"u64":return d.u64();case"u128":return d.u128();case"u256":return d.u256();case"bool":return d.bool();case"string":return d.string();case"id":case"address":return G}let e=t.match(/^(vector|option)<(.+)>$/);if(e){let[r,n]=e.slice(1);return r==="vector"?d.vector(yr(n)):d.option(yr(n))}throw new Error(`Invalid Pure type name: ${t}`)}o(yr,"pureBcsSchemaFromTypeName");var U={...d,U8:d.u8(),U16:d.u16(),U32:d.u32(),U64:d.u64(),U128:d.u128(),U256:d.u256(),ULEB128:d.uleb128(),Bool:d.bool(),String:d.string(),Address:G,AppId:Zo,Argument:Le,CallArg:Vo,CompressedSignature:ri,GasData:Wo,Intent:ei,IntentMessage:ti,IntentScope:Yo,IntentVersion:Jo,MultiSig:Fc,MultiSigPkMap:oi,MultiSigPublicKey:ii,ObjectArg:Lo,ObjectDigest:Oe,ProgrammableMoveCall:$o,ProgrammableTransaction:Go,PublicKey:ni,SenderSignedData:$c,SenderSignedTransaction:si,SharedObjectRef:No,StructTag:Ko,SuiObjectRef:Te,Command:zo,TransactionData:Xo,TransactionDataV1:Qo,TransactionExpiration:qo,TransactionKind:Ho,TypeTag:Wn,TransactionEffects:Kc,PasskeyAuthenticator:zc};a();c();a();c();var ip=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,sp=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i;function Wc(t,e="at"){let r=t.toLowerCase(),n;if(r.includes("@")){if(!ip.test(r))throw new Error(`Invalid SuiNS name ${t}`);let[i,s]=r.split("@");n=[...i?i.split("."):[],s]}else{if(!sp.test(r))throw new Error(`Invalid SuiNS name ${t}`);n=r.split(".").slice(0,-1)}return e==="dot"?`${n.join(".")}.sui`:`${n.slice(0,-1).join(".")}@${n[n.length-1]}`}o(Wc,"normalizeSuiNSName");a();c();var ap=BigInt(1e9),ci="0x1",Qn="0x2";var cp=xe("0x6");var li=`${Qn}::sui::SUI`,lp=xe("0x5");a();c();a();c();a();c();a();c();function up(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}o(up,"isBytes");function Yn(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}o(Yn,"anumber");function Jn(t,...e){if(!up(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}o(Jn,"abytes");function ui(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}o(ui,"aexists");function Qc(t,e){Jn(t);let r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}o(Qc,"aoutput");function Rr(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}o(Rr,"u32");function Zn(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}o(Zn,"clean");var Xc=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Yc(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}o(Yc,"byteSwap");var Xe=Xc?t=>t:t=>Yc(t);function dp(t){for(let e=0;e<t.length;e++)t[e]=Yc(t[e]);return t}o(dp,"byteSwap32");var _t=Xc?t=>t:dp;function mp(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}o(mp,"utf8ToBytes");function Sr(t){return typeof t=="string"&&(t=mp(t)),Jn(t),t}o(Sr,"toBytes");var Xn=class{static{o(this,"Hash")}};function Jc(t){let e=o((n,i)=>t(i).update(Sr(n)).digest(),"hashC"),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}o(Jc,"createOptHasher");var Zc=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]);a();c();var eo=BigInt(4294967295),el=BigInt(32);function tl(t,e=!1){return e?{h:Number(t&eo),l:Number(t>>el&eo)}:{h:Number(t>>el&eo)|0,l:Number(t&eo)|0}}o(tl,"fromBig");var di=o((t,e,r)=>t>>>r|e<<32-r,"rotrSH"),mi=o((t,e,r)=>t<<32-r|e>>>r,"rotrSL"),rl=o((t,e,r)=>t<<64-r|e>>>r-32,"rotrBH"),nl=o((t,e,r)=>t>>>r-32|e<<64-r,"rotrBL"),ol=o((t,e)=>e,"rotr32H"),il=o((t,e)=>t,"rotr32L");function pi(t,e,r,n){let i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}o(pi,"add");var fi=o((t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),"add3L"),hi=o((t,e,r,n)=>e+r+n+(t/2**32|0)|0,"add3H");var se=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),T=new Uint32Array(32);function St(t,e,r,n,i,s){let l=i[s],u=i[s+1],m=T[2*t],p=T[2*t+1],f=T[2*e],b=T[2*e+1],y=T[2*r],C=T[2*r+1],S=T[2*n],w=T[2*n+1],E=fi(m,f,l);p=hi(E,p,b,u),m=E|0,{Dh:w,Dl:S}={Dh:w^p,Dl:S^m},{Dh:w,Dl:S}={Dh:ol(w,S),Dl:il(w,S)},{h:C,l:y}=pi(C,y,w,S),{Bh:b,Bl:f}={Bh:b^C,Bl:f^y},{Bh:b,Bl:f}={Bh:di(b,f,24),Bl:mi(b,f,24)},T[2*t]=m,T[2*t+1]=p,T[2*e]=f,T[2*e+1]=b,T[2*r]=y,T[2*r+1]=C,T[2*n]=S,T[2*n+1]=w}o(St,"G1b");function Ct(t,e,r,n,i,s){let l=i[s],u=i[s+1],m=T[2*t],p=T[2*t+1],f=T[2*e],b=T[2*e+1],y=T[2*r],C=T[2*r+1],S=T[2*n],w=T[2*n+1],E=fi(m,f,l);p=hi(E,p,b,u),m=E|0,{Dh:w,Dl:S}={Dh:w^p,Dl:S^m},{Dh:w,Dl:S}={Dh:di(w,S,16),Dl:mi(w,S,16)},{h:C,l:y}=pi(C,y,w,S),{Bh:b,Bl:f}={Bh:b^C,Bl:f^y},{Bh:b,Bl:f}={Bh:rl(b,f,63),Bl:nl(b,f,63)},T[2*t]=m,T[2*t+1]=p,T[2*e]=f,T[2*e+1]=b,T[2*r]=y,T[2*r+1]=C,T[2*n]=S,T[2*n+1]=w}o(Ct,"G2b");function fp(t,e={},r,n,i){if(Yn(r),t<0||t>r)throw new Error("outputLen bigger than keyLen");let{key:s,salt:l,personalization:u}=e;if(s!==void 0&&(s.length<1||s.length>r))throw new Error("key length must be undefined or 1.."+r);if(l!==void 0&&l.length!==n)throw new Error("salt must be undefined or "+n);if(u!==void 0&&u.length!==i)throw new Error("personalization must be undefined or "+i)}o(fp,"checkBlake2Opts");var gi=class extends Xn{static{o(this,"BLAKE2")}constructor(e,r){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Yn(e),Yn(r),this.blockLen=e,this.outputLen=r,this.buffer=new Uint8Array(e),this.buffer32=Rr(this.buffer)}update(e){ui(this),e=Sr(e),Jn(e);let{blockLen:r,buffer:n,buffer32:i}=this,s=e.length,l=e.byteOffset,u=e.buffer;for(let m=0;m<s;){this.pos===r&&(_t(i),this.compress(i,0,!1),_t(i),this.pos=0);let p=Math.min(r-this.pos,s-m),f=l+m;if(p===r&&!(f%4)&&m+p<s){let b=new Uint32Array(u,f,Math.floor((s-m)/4));_t(b);for(let y=0;m+r<s;y+=i.length,m+=r)this.length+=r,this.compress(b,y,!1);_t(b);continue}n.set(e.subarray(m,m+p),this.pos),this.pos+=p,this.length+=p,m+=p}return this}digestInto(e){ui(this),Qc(e,this);let{pos:r,buffer32:n}=this;this.finished=!0,Zn(this.buffer.subarray(r)),_t(n),this.compress(n,0,!0),_t(n);let i=Rr(e);this.get().forEach((s,l)=>i[l]=Xe(s))}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){let{buffer:r,length:n,finished:i,destroyed:s,outputLen:l,pos:u}=this;return e||(e=new this.constructor({dkLen:l})),e.set(...this.get()),e.buffer.set(r),e.destroyed=s,e.finished=i,e.length=n,e.pos=u,e.outputLen=l,e}clone(){return this._cloneInto()}},to=class extends gi{static{o(this,"BLAKE2b")}constructor(e={}){let r=e.dkLen===void 0?64:e.dkLen;super(128,r),this.v0l=se[0]|0,this.v0h=se[1]|0,this.v1l=se[2]|0,this.v1h=se[3]|0,this.v2l=se[4]|0,this.v2h=se[5]|0,this.v3l=se[6]|0,this.v3h=se[7]|0,this.v4l=se[8]|0,this.v4h=se[9]|0,this.v5l=se[10]|0,this.v5h=se[11]|0,this.v6l=se[12]|0,this.v6h=se[13]|0,this.v7l=se[14]|0,this.v7h=se[15]|0,fp(r,e,64,16,16);let{key:n,personalization:i,salt:s}=e,l=0;if(n!==void 0&&(n=Sr(n),l=n.length),this.v0l^=this.outputLen|l<<8|65536|1<<24,s!==void 0){s=Sr(s);let u=Rr(s);this.v4l^=Xe(u[0]),this.v4h^=Xe(u[1]),this.v5l^=Xe(u[2]),this.v5h^=Xe(u[3])}if(i!==void 0){i=Sr(i);let u=Rr(i);this.v6l^=Xe(u[0]),this.v6h^=Xe(u[1]),this.v7l^=Xe(u[2]),this.v7h^=Xe(u[3])}if(n!==void 0){let u=new Uint8Array(this.blockLen);u.set(n),this.update(u)}}get(){let{v0l:e,v0h:r,v1l:n,v1h:i,v2l:s,v2h:l,v3l:u,v3h:m,v4l:p,v4h:f,v5l:b,v5h:y,v6l:C,v6h:S,v7l:w,v7h:E}=this;return[e,r,n,i,s,l,u,m,p,f,b,y,C,S,w,E]}set(e,r,n,i,s,l,u,m,p,f,b,y,C,S,w,E){this.v0l=e|0,this.v0h=r|0,this.v1l=n|0,this.v1h=i|0,this.v2l=s|0,this.v2h=l|0,this.v3l=u|0,this.v3h=m|0,this.v4l=p|0,this.v4h=f|0,this.v5l=b|0,this.v5h=y|0,this.v6l=C|0,this.v6h=S|0,this.v7l=w|0,this.v7h=E|0}compress(e,r,n){this.get().forEach((m,p)=>T[p]=m),T.set(se,16);let{h:i,l:s}=tl(BigInt(this.length));T[24]=se[8]^s,T[25]=se[9]^i,n&&(T[28]=~T[28],T[29]=~T[29]);let l=0,u=Zc;for(let m=0;m<12;m++)St(0,4,8,12,e,r+2*u[l++]),Ct(0,4,8,12,e,r+2*u[l++]),St(1,5,9,13,e,r+2*u[l++]),Ct(1,5,9,13,e,r+2*u[l++]),St(2,6,10,14,e,r+2*u[l++]),Ct(2,6,10,14,e,r+2*u[l++]),St(3,7,11,15,e,r+2*u[l++]),Ct(3,7,11,15,e,r+2*u[l++]),St(0,5,10,15,e,r+2*u[l++]),Ct(0,5,10,15,e,r+2*u[l++]),St(1,6,11,12,e,r+2*u[l++]),Ct(1,6,11,12,e,r+2*u[l++]),St(2,7,8,13,e,r+2*u[l++]),Ct(2,7,8,13,e,r+2*u[l++]),St(3,4,9,14,e,r+2*u[l++]),Ct(3,4,9,14,e,r+2*u[l++]);this.v0l^=T[0]^T[16],this.v0h^=T[1]^T[17],this.v1l^=T[2]^T[18],this.v1h^=T[3]^T[19],this.v2l^=T[4]^T[20],this.v2h^=T[5]^T[21],this.v3l^=T[6]^T[22],this.v3h^=T[7]^T[23],this.v4l^=T[8]^T[24],this.v4h^=T[9]^T[25],this.v5l^=T[10]^T[26],this.v5h^=T[11]^T[27],this.v6l^=T[12]^T[28],this.v6h^=T[13]^T[29],this.v7l^=T[14]^T[30],this.v7h^=T[15]^T[31],Zn(T)}destroy(){this.destroyed=!0,Zn(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},sl=Jc(t=>new to(t));var al=sl;var hp="object",gp="ID",bp="ascii",yp="String",Sp="string",Cp="String",wp="option",xp="Option";function cl(t){let e=typeof t.body=="object"&&"datatype"in t.body?t.body.datatype:null;return!!e&&B(e.package)===B("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}o(cl,"isTxContext");function ro(t){if(typeof t=="string")switch(t){case"address":return U.Address;case"bool":return U.Bool;case"u8":return U.U8;case"u16":return U.U16;case"u32":return U.U32;case"u64":return U.U64;case"u128":return U.U128;case"u256":return U.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if(t.vector==="u8")return U.vector(U.U8).transform({input:o(r=>typeof r=="string"?new TextEncoder().encode(r):r,"input"),output:o(r=>r,"output")});let e=ro(t.vector);return e?U.vector(e):null}if("datatype"in t){let e=B(t.datatype.package);if(e===B(ci)){if(t.datatype.module===bp&&t.datatype.type===yp)return U.String;if(t.datatype.module===Sp&&t.datatype.type===Cp)return U.String;if(t.datatype.module===wp&&t.datatype.type===xp){let r=ro(t.datatype.typeParameters[0]);return r?U.vector(r):null}}if(e===B(Qn)&&t.datatype.module===hp&&t.datatype.type===gp)return U.Address}return null}o(ro,"getPureBcsSchema");function ll(t){return typeof t=="object"&&"Reference"in t?{ref:"&",body:jr(t.Reference)}:typeof t=="object"&&"MutableReference"in t?{ref:"&mut",body:jr(t.MutableReference)}:{ref:null,body:jr(t)}}o(ll,"normalizedTypeToMoveTypeSignature");function jr(t){if(typeof t=="string")switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:jr(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(jr)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}o(jr,"normalizedTypeToMoveTypeSignatureBody");a();c();function Tp(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?X(t):t.toBase64()}}}o(Tp,"Pure");var Ve={Pure:Tp,ObjectRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:r,objectId:B(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:r}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:r,objectId:B(t)}}}},ReceivingRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:r,objectId:B(t)}}}}};a();c();a();c();function xt(t){let e=Object.entries(t).map(([r,n])=>x({[r]:n}));return F(ie(e),an(r=>({...r,$kind:Object.keys(r)[0]})))}o(xt,"safeEnum");var Nt=F(M(),an(t=>B(t)),Jt(Ie)),be=Nt,wt=M(),ge=F(ie([M(),F(W(),Q())]),Jt(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),Fe=x({objectId:Nt,version:ge,digest:M()}),q=F(ie([x({GasCoin:A(!0)}),x({Input:F(W(),Q()),type:ae(A("pure"))}),x({Input:F(W(),Q()),type:ae(A("object"))}),x({Result:F(W(),Q())}),x({NestedResult:cn([F(W(),Q()),F(W(),Q())])})]),an(t=>({...t,$kind:Object.keys(t)[0]}))),Ep=x({budget:j(ge),price:j(ge),owner:j(Nt),payment:j(I(Fe))}),CO=x({address:M(),module:M(),name:M(),typeParams:I(M())}),bi=ie([A("address"),A("bool"),A("u8"),A("u16"),A("u32"),A("u64"),A("u128"),A("u256"),x({vector:er(()=>bi)}),x({datatype:x({package:M(),module:M(),type:M(),typeParameters:I(er(()=>bi))})}),x({typeParameter:F(W(),Q())})]),vp=x({ref:j(ie([A("&"),A("&mut")])),body:bi}),Ip=x({package:be,module:M(),function:M(),typeArguments:I(M()),arguments:I(q),_argumentTypes:ae(j(I(vp)))}),Op=x({name:M(),inputs:tr(M(),ie([q,I(q)])),data:tr(M(),Je())}),Ap=xt({MoveCall:Ip,TransferObjects:x({objects:I(q),address:q}),SplitCoins:x({coin:q,amounts:I(q)}),MergeCoins:x({destination:q,sources:I(q)}),Publish:x({modules:I(wt),dependencies:I(be)}),MakeMoveVec:x({type:j(M()),elements:I(q)}),Upgrade:x({modules:I(wt),dependencies:I(be),package:be,ticket:q}),$Intent:Op}),ul=xt({ImmOrOwnedObject:Fe,SharedObject:x({objectId:be,initialSharedVersion:ge,mutable:Zt()}),Receiving:Fe}),kp=xt({Object:ul,Pure:x({bytes:wt}),UnresolvedPure:x({value:Je()}),UnresolvedObject:x({objectId:be,version:ae(j(ge)),digest:ae(j(M())),initialSharedVersion:ae(j(ge))})}),yi=xt({Object:ul,Pure:x({bytes:wt})}),Si=xt({None:A(!0),Epoch:ge}),Cr=x({version:A(2),sender:mt(Nt),expiration:mt(Si),gasData:Ep,inputs:I(kp),commands:I(Ap)});var Tt={MoveCall(t){let[e,r="",n=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:r,function:n,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(r=>z(q,r)),address:z(q,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:z(q,t),amounts:e.map(r=>z(q,r))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:z(q,t),sources:e.map(r=>z(q,r))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(r=>typeof r=="string"?r:X(new Uint8Array(r))),dependencies:e.map(r=>xe(r))}}},Upgrade({modules:t,dependencies:e,package:r,ticket:n}){return{$kind:"Upgrade",Upgrade:{modules:t.map(i=>typeof i=="string"?i:X(new Uint8Array(i))),dependencies:e.map(i=>xe(i)),package:r,ticket:z(q,n)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(r=>z(q,r))}}},Intent({name:t,inputs:e={},data:r={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([n,i])=>[n,Array.isArray(i)?i.map(s=>z(q,s)):z(q,i)])),data:r}}}};a();c();a();c();var Ci=x({digest:M(),objectId:M(),version:ie([F(W(),Q()),M(),mo()])}),Mp=xt({ImmOrOwned:Ci,Shared:x({objectId:be,initialSharedVersion:ge,mutable:Zt()}),Receiving:Ci}),dl=xt({Object:Mp,Pure:I(F(W(),Q()))}),pl=ie([x({kind:A("Input"),index:F(W(),Q()),value:Je(),type:ae(A("object"))}),x({kind:A("Input"),index:F(W(),Q()),value:Je(),type:A("pure")})]),Dp=ie([x({Epoch:F(W(),Q())}),x({None:j(A(!0))})]),ml=F(ie([W(),M(),mo()]),Jt(t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}})),wi=ie([x({bool:j(A(!0))}),x({u8:j(A(!0))}),x({u64:j(A(!0))}),x({u128:j(A(!0))}),x({address:j(A(!0))}),x({signer:j(A(!0))}),x({vector:er(()=>wi)}),x({struct:er(()=>Bp)}),x({u16:j(A(!0))}),x({u32:j(A(!0))}),x({u256:j(A(!0))})]),Bp=x({address:M(),module:M(),name:M(),typeParams:I(wi)}),Up=x({budget:ae(ml),price:ae(ml),payment:ae(I(Ci)),owner:ae(M())}),Pp=[pl,x({kind:A("GasCoin")}),x({kind:A("Result"),index:F(W(),Q())}),x({kind:A("NestedResult"),index:F(W(),Q()),resultIndex:F(W(),Q())})],it=ie([...Pp]),Rp=x({kind:A("MoveCall"),target:F(M(),Jt(t=>t.split("::").length===3)),typeArguments:I(M()),arguments:I(it)}),jp=x({kind:A("TransferObjects"),objects:I(it),address:it}),_p=x({kind:A("SplitCoins"),coin:it,amounts:I(it)}),Np=x({kind:A("MergeCoins"),destination:it,sources:I(it)}),Lp=x({kind:A("MakeMoveVec"),type:ie([x({Some:wi}),x({None:j(A(!0))})]),objects:I(it)}),Vp=x({kind:A("Publish"),modules:I(I(F(W(),Q()))),dependencies:I(M())}),Fp=x({kind:A("Upgrade"),modules:I(I(F(W(),Q()))),dependencies:I(M()),packageId:M(),ticket:it}),$p=[Rp,jp,_p,Np,Vp,Fp,Lp],zp=ie([...$p]),jO=x({version:A(1),sender:ae(M()),expiration:mt(Dp),gasConfig:Up,inputs:I(pl),transactions:I(zp)});function xi(t){let e=t.inputs.map((r,n)=>{if(r.Object)return{kind:"Input",index:n,value:{Object:r.Object.ImmOrOwnedObject?{ImmOrOwned:r.Object.ImmOrOwnedObject}:r.Object.Receiving?{Receiving:{digest:r.Object.Receiving.digest,version:r.Object.Receiving.version,objectId:r.Object.Receiving.objectId}}:{Shared:{mutable:r.Object.SharedObject.mutable,initialSharedVersion:r.Object.SharedObject.initialSharedVersion,objectId:r.Object.SharedObject.objectId}}},type:"object"};if(r.Pure)return{kind:"Input",index:n,value:{Pure:Array.from(he(r.Pure.bytes))},type:"pure"};if(r.UnresolvedPure)return{kind:"Input",type:"pure",index:n,value:r.UnresolvedPure.value};if(r.UnresolvedObject)return{kind:"Input",type:"object",index:n,value:r.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:t.sender??void 0,expiration:t.expiration?.$kind==="Epoch"?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map(r=>{if(r.MakeMoveVec)return{kind:"MakeMoveVec",type:r.MakeMoveVec.type===null?{None:!0}:{Some:rt.parseFromStr(r.MakeMoveVec.type)},objects:r.MakeMoveVec.elements.map(n=>nt(n,e))};if(r.MergeCoins)return{kind:"MergeCoins",destination:nt(r.MergeCoins.destination,e),sources:r.MergeCoins.sources.map(n=>nt(n,e))};if(r.MoveCall)return{kind:"MoveCall",target:`${r.MoveCall.package}::${r.MoveCall.module}::${r.MoveCall.function}`,typeArguments:r.MoveCall.typeArguments,arguments:r.MoveCall.arguments.map(n=>nt(n,e))};if(r.Publish)return{kind:"Publish",modules:r.Publish.modules.map(n=>Array.from(he(n))),dependencies:r.Publish.dependencies};if(r.SplitCoins)return{kind:"SplitCoins",coin:nt(r.SplitCoins.coin,e),amounts:r.SplitCoins.amounts.map(n=>nt(n,e))};if(r.TransferObjects)return{kind:"TransferObjects",objects:r.TransferObjects.objects.map(n=>nt(n,e)),address:nt(r.TransferObjects.address,e)};if(r.Upgrade)return{kind:"Upgrade",modules:r.Upgrade.modules.map(n=>Array.from(he(n))),dependencies:r.Upgrade.dependencies,packageId:r.Upgrade.package,ticket:nt(r.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(r)}`)})}}o(xi,"serializeV1TransactionData");function nt(t,e){if(t.$kind==="GasCoin")return{kind:"GasCoin"};if(t.$kind==="Result")return{kind:"Result",index:t.Result};if(t.$kind==="NestedResult")return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if(t.$kind==="Input")return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}o(nt,"convertTransactionArgument");function fl(t){return z(Cr,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:t.gasConfig.budget?.toString()??null,price:t.gasConfig.price?.toString()??null,payment:t.gasConfig.payment?.map(e=>({digest:e.digest,objectId:e.objectId,version:e.version.toString()}))??null},inputs:t.inputs.map(e=>{if(e.kind==="Input"){if(xr(dl,e.value)){let r=z(dl,e.value);if(r.Object){if(r.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:r.Object.ImmOrOwned.objectId,version:String(r.Object.ImmOrOwned.version),digest:r.Object.ImmOrOwned.digest}}};if(r.Object.Shared)return{Object:{SharedObject:{mutable:r.Object.Shared.mutable??null,initialSharedVersion:r.Object.Shared.initialSharedVersion,objectId:r.Object.Shared.objectId}}};if(r.Object.Receiving)return{Object:{Receiving:{digest:r.Object.Receiving.digest,version:String(r.Object.Receiving.version),objectId:r.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:X(new Uint8Array(r.Pure))}}}return e.type==="object"?{UnresolvedObject:{objectId:e.value}}:{UnresolvedPure:{value:e.value}}}throw new Error("Invalid input")}),commands:t.transactions.map(e=>{switch(e.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in e.type?rt.tagToString(e.type.Some):null,elements:e.objects.map(r=>ot(r))}};case"MergeCoins":return{MergeCoins:{destination:ot(e.destination),sources:e.sources.map(r=>ot(r))}};case"MoveCall":{let[r,n,i]=e.target.split("::");return{MoveCall:{package:r,module:n,function:i,typeArguments:e.typeArguments,arguments:e.arguments.map(s=>ot(s))}}}case"Publish":return{Publish:{modules:e.modules.map(r=>X(Uint8Array.from(r))),dependencies:e.dependencies}};case"SplitCoins":return{SplitCoins:{coin:ot(e.coin),amounts:e.amounts.map(r=>ot(r))}};case"TransferObjects":return{TransferObjects:{objects:e.objects.map(r=>ot(r)),address:ot(e.address)}};case"Upgrade":return{Upgrade:{modules:e.modules.map(r=>X(Uint8Array.from(r))),dependencies:e.dependencies,package:e.packageId,ticket:ot(e.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(e)}`)})})}o(fl,"transactionDataFromV1");function ot(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}o(ot,"parseV1TransactionArgument");a();c();function _r(t){return ie(Object.entries(t).map(([e,r])=>x({[e]:r})))}o(_r,"enumUnion");var $e=_r({GasCoin:A(!0),Input:F(W(),Q()),Result:F(W(),Q()),NestedResult:cn([F(W(),Q()),F(W(),Q())])}),Gp=x({budget:j(ge),price:j(ge),owner:j(Nt),payment:j(I(Fe))}),Hp=x({package:be,module:M(),function:M(),typeArguments:I(M()),arguments:I($e)}),qp=x({name:M(),inputs:tr(M(),ie([$e,I($e)])),data:tr(M(),Je())}),Kp=_r({MoveCall:Hp,TransferObjects:x({objects:I($e),address:$e}),SplitCoins:x({coin:$e,amounts:I($e)}),MergeCoins:x({destination:$e,sources:I($e)}),Publish:x({modules:I(wt),dependencies:I(be)}),MakeMoveVec:x({type:j(M()),elements:I($e)}),Upgrade:x({modules:I(wt),dependencies:I(be),package:be,ticket:$e}),$Intent:qp}),Wp=_r({ImmOrOwnedObject:Fe,SharedObject:x({objectId:be,initialSharedVersion:ge,mutable:Zt()}),Receiving:Fe}),Qp=_r({Object:Wp,Pure:x({bytes:wt}),UnresolvedPure:x({value:Je()}),UnresolvedObject:x({objectId:be,version:ae(j(ge)),digest:ae(j(M())),initialSharedVersion:ae(j(ge))})}),Xp=_r({None:A(!0),Epoch:ge}),hl=x({version:A(2),sender:mt(Nt),expiration:mt(Xp),gasData:Gp,inputs:I(Qp),commands:I(Kp)});a();c();var Yp=50,Jp=1000n,Zp=5e10;async function bl(t,e,r){return await of(t,e),await nf(t,e),e.onlyTransactionKind||(await ef(t,e),await tf(t,e),await rf(t,e)),await sf(t),await r()}o(bl,"resolveTransactionData");async function ef(t,e){t.gasConfig.price||(t.gasConfig.price=String(await Nr(e).getReferenceGasPrice()))}o(ef,"setGasPrice");async function tf(t,e){if(t.gasConfig.budget)return;let r=await Nr(e).dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String(Zp),payment:[]}}})});if(r.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${r.effects.status.error}`,{cause:r});let n=Jp*BigInt(t.gasConfig.price||1n),i=BigInt(r.effects.gasUsed.computationCost)+n,s=i+BigInt(r.effects.gasUsed.storageCost)-BigInt(r.effects.gasUsed.storageRebate);t.gasConfig.budget=String(s>i?s:i)}o(tf,"setGasBudget");async function rf(t,e){if(!t.gasConfig.payment){let n=(await Nr(e).getCoins({owner:t.gasConfig.owner||t.sender,coinType:li})).data.filter(i=>!t.inputs.find(l=>l.Object?.ImmOrOwnedObject?i.coinObjectId===l.Object.ImmOrOwnedObject.objectId:!1)).map(i=>({objectId:i.coinObjectId,digest:i.digest,version:i.version}));if(!n.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=n.map(i=>z(Fe,i))}}o(rf,"setGasPayment");async function nf(t,e){let r=t.inputs.filter(f=>f.UnresolvedObject&&!(f.UnresolvedObject.version||f.UnresolvedObject?.initialSharedVersion)),n=[...new Set(r.map(f=>xe(f.UnresolvedObject.objectId)))],i=n.length?uf(n,Yp):[],s=(await Promise.all(i.map(f=>Nr(e).multiGetObjects({ids:f,options:{showOwner:!0}})))).flat(),l=new Map(n.map((f,b)=>[f,s[b]])),u=Array.from(l).filter(([f,b])=>b.error).map(([f,b])=>JSON.stringify(b.error));if(u.length)throw new Error(`The following input objects are invalid: ${u.join(", ")}`);let m=s.map(f=>{if(f.error||!f.data)throw new Error(`Failed to fetch object: ${f.error}`);let b=f.data.owner,y=b&&typeof b=="object"&&"Shared"in b?b.Shared.initial_shared_version:null;return{objectId:f.data.objectId,digest:f.data.digest,version:f.data.version,initialSharedVersion:y}}),p=new Map(n.map((f,b)=>[f,m[b]]));for(let[f,b]of t.inputs.entries()){if(!b.UnresolvedObject)continue;let y,C=B(b.UnresolvedObject.objectId),S=p.get(C);b.UnresolvedObject.initialSharedVersion??S?.initialSharedVersion?y=Ve.SharedObjectRef({objectId:C,initialSharedVersion:b.UnresolvedObject.initialSharedVersion||S?.initialSharedVersion,mutable:af(t,f)}):cf(t,f)&&(y=Ve.ReceivingRef({objectId:C,digest:b.UnresolvedObject.digest??S?.digest,version:b.UnresolvedObject.version??S?.version})),t.inputs[t.inputs.indexOf(b)]=y??Ve.ObjectRef({objectId:C,digest:b.UnresolvedObject.digest??S?.digest,version:b.UnresolvedObject.version??S?.version})}}o(nf,"resolveObjectReferences");async function of(t,e){let{inputs:r,commands:n}=t,i=[],s=new Set;n.forEach(u=>{if(u.MoveCall){if(u.MoveCall._argumentTypes)return;if(u.MoveCall.arguments.map(f=>f.$kind==="Input"?t.inputs[f.Input]:null).some(f=>f?.UnresolvedPure||f?.UnresolvedObject)){let f=`${u.MoveCall.package}::${u.MoveCall.module}::${u.MoveCall.function}`;s.add(f),i.push(u.MoveCall)}}switch(u.$kind){case"SplitCoins":u.SplitCoins.amounts.forEach(m=>{gl(m,U.U64,t)});break;case"TransferObjects":gl(u.TransferObjects.address,U.Address,t);break}});let l=new Map;if(s.size>0){let u=Nr(e);await Promise.all([...s].map(async m=>{let[p,f,b]=m.split("::"),y=await u.getNormalizedMoveFunction({package:p,module:f,function:b});l.set(m,y.parameters.map(C=>ll(C)))}))}i.length&&await Promise.all(i.map(async u=>{let m=l.get(`${u.package}::${u.module}::${u.function}`);if(!m)return;let f=m.length>0&&cl(m.at(-1))?m.slice(0,m.length-1):m;u._argumentTypes=f})),n.forEach(u=>{if(!u.MoveCall)return;let m=u.MoveCall,p=`${m.package}::${m.module}::${m.function}`,f=m._argumentTypes;if(f){if(f.length!==u.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${p}`);f.forEach((b,y)=>{let C=m.arguments[y];if(C.$kind!=="Input")return;let S=r[C.Input];if(!S.UnresolvedPure&&!S.UnresolvedObject)return;let w=S.UnresolvedPure?.value??S.UnresolvedObject?.objectId,E=ro(b.body);if(E){C.type="pure",r[r.indexOf(S)]=Ve.Pure(E.serialize(w));return}if(typeof w!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(w,null,2)}`);C.type="object";let D=S.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:w}}:S;r[C.Input]=D})}})}o(of,"normalizeInputs");function sf(t){t.inputs.forEach((e,r)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${r} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}o(sf,"validate");function gl(t,e,r){if(t.$kind!=="Input")return;let n=r.inputs[t.Input];n.$kind==="UnresolvedPure"&&(r.inputs[t.Input]=Ve.Pure(e.serialize(n.UnresolvedPure.value)))}o(gl,"normalizeRawArgument");function af(t,e){let r=!1;return t.getInputUses(e,(n,i)=>{if(i.MoveCall&&i.MoveCall._argumentTypes){let s=i.MoveCall.arguments.indexOf(n);r=i.MoveCall._argumentTypes[s].ref!=="&"||r}(i.$kind==="MakeMoveVec"||i.$kind==="MergeCoins"||i.$kind==="SplitCoins")&&(r=!0)}),r}o(af,"isUsedAsMutable");function cf(t,e){let r=!1;return t.getInputUses(e,(n,i)=>{if(i.MoveCall&&i.MoveCall._argumentTypes){let s=i.MoveCall.arguments.indexOf(n);r=lf(i.MoveCall._argumentTypes[s])||r}}),r}o(cf,"isUsedAsReceiving");function lf(t){return typeof t.body!="object"||!("datatype"in t.body)?!1:t.body.datatype.package==="0x2"&&t.body.datatype.module==="transfer"&&t.body.datatype.type==="Receiving"}o(lf,"isReceivingType");function Nr(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}o(Nr,"getClient");function uf(t,e){return Array.from({length:Math.ceil(t.length/e)},(r,n)=>t.slice(n*e,n*e+e))}o(uf,"chunk");a();c();function yl(t){function e(r){return t(r)}return o(e,"object"),e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e.option=({type:r,value:n})=>i=>i.moveCall({typeArguments:[r],target:`0x1::option::${n===null?"none":"some"}`,arguments:n===null?[]:[i.object(n)]}),e}o(yl,"createObjectMethods");a();c();function Sl(t){function e(r,n){if(typeof r=="string")return t(yr(r).serialize(n));if(r instanceof Uint8Array||hr(r))return t(r);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return o(e,"pure"),e.u8=r=>t(U.U8.serialize(r)),e.u16=r=>t(U.U16.serialize(r)),e.u32=r=>t(U.U32.serialize(r)),e.u64=r=>t(U.U64.serialize(r)),e.u128=r=>t(U.U128.serialize(r)),e.u256=r=>t(U.U256.serialize(r)),e.bool=r=>t(U.Bool.serialize(r)),e.string=r=>t(U.String.serialize(r)),e.address=r=>t(U.Address.serialize(r)),e.id=e.address,e.vector=(r,n)=>t(U.vector(yr(r)).serialize(n)),e.option=(r,n)=>t(U.option(yr(r)).serialize(n)),e}o(Sl,"createPure");a();c();a();c();function Cl(t,e){let r=Array.from(`${t}::`).map(i=>i.charCodeAt(0)),n=new Uint8Array(r.length+e.length);return n.set(r),n.set(e,r.length),al(n,{dkLen:32})}o(Cl,"hashTypedData");function wl(t){return B(t).replace("0x","")}o(wl,"prepareSuiAddress");var Et=class t{static{o(this,"TransactionDataBuilder")}constructor(e){this.version=2,this.sender=e?.sender??null,this.expiration=e?.expiration??null,this.inputs=e?.inputs??[],this.commands=e?.commands??[],this.gasData=e?.gasData??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){let n=U.TransactionKind.parse(e).ProgrammableTransaction;if(!n)throw new Error("Unable to deserialize from bytes.");return t.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:n.inputs,commands:n.commands})}static fromBytes(e){let n=U.TransactionData.parse(e)?.V1,i=n.kind.ProgrammableTransaction;if(!n||!i)throw new Error("Unable to deserialize from bytes.");return t.restore({version:2,sender:n.sender,expiration:n.expiration,gasData:n.gasData,inputs:i.inputs,commands:i.commands})}static restore(e){return e.version===2?new t(z(Cr,e)):new t(z(Cr,fl(e)))}static getDigestFromBytes(e){let r=Cl("TransactionData",e);return tt(r)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:r,onlyTransactionKind:n}={}){let i=this.inputs,s=this.commands,l={ProgrammableTransaction:{inputs:i,commands:s}};if(n)return U.TransactionKind.serialize(l,{maxSize:e}).toBytes();let u=r?.expiration??this.expiration,m=r?.sender??this.sender,p={...this.gasData,...r?.gasConfig,...r?.gasData};if(!m)throw new Error("Missing transaction sender");if(!p.budget)throw new Error("Missing gas budget");if(!p.payment)throw new Error("Missing gas payment");if(!p.price)throw new Error("Missing gas price");let f={sender:wl(m),expiration:u||{None:!0},gasData:{payment:p.payment,owner:wl(this.gasData.owner??m),price:BigInt(p.price),budget:BigInt(p.budget)},kind:{ProgrammableTransaction:{inputs:i,commands:s}}};return U.TransactionData.serialize({V1:f},{maxSize:e}).toBytes()}addInput(e,r){let n=this.inputs.length;return this.inputs.push(r),{Input:n,type:e,$kind:"Input"}}getInputUses(e,r){this.mapArguments((n,i)=>(n.$kind==="Input"&&n.Input===e&&r(n,i),n))}mapArguments(e){for(let r of this.commands)switch(r.$kind){case"MoveCall":r.MoveCall.arguments=r.MoveCall.arguments.map(i=>e(i,r));break;case"TransferObjects":r.TransferObjects.objects=r.TransferObjects.objects.map(i=>e(i,r)),r.TransferObjects.address=e(r.TransferObjects.address,r);break;case"SplitCoins":r.SplitCoins.coin=e(r.SplitCoins.coin,r),r.SplitCoins.amounts=r.SplitCoins.amounts.map(i=>e(i,r));break;case"MergeCoins":r.MergeCoins.destination=e(r.MergeCoins.destination,r),r.MergeCoins.sources=r.MergeCoins.sources.map(i=>e(i,r));break;case"MakeMoveVec":r.MakeMoveVec.elements=r.MakeMoveVec.elements.map(i=>e(i,r));break;case"Upgrade":r.Upgrade.ticket=e(r.Upgrade.ticket,r);break;case"$Intent":let n=r.$Intent.inputs;r.$Intent.inputs={};for(let[i,s]of Object.entries(n))r.$Intent.inputs[i]=Array.isArray(s)?s.map(l=>e(l,r)):e(s,r);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${r.$kind}`)}}replaceCommand(e,r){if(!Array.isArray(r)){this.commands[e]=r;return}let n=r.length-1;this.commands.splice(e,1,...r),n!==0&&this.mapArguments(i=>{switch(i.$kind){case"Result":i.Result>e&&(i.Result+=n);break;case"NestedResult":i.NestedResult[0]>e&&(i.NestedResult[0]+=n);break}return i})}getDigest(){let e=this.build({onlyTransactionKind:!1});return t.getDigestFromBytes(e)}snapshot(){return z(Cr,this)}};a();c();function Ti(t){if(typeof t=="string")return B(t);if(t.Object)return t.Object.ImmOrOwnedObject?B(t.Object.ImmOrOwnedObject.objectId):t.Object.Receiving?B(t.Object.Receiving.objectId):B(t.Object.SharedObject.objectId);if(t.UnresolvedObject)return B(t.UnresolvedObject.objectId)}o(Ti,"getIdFromCallArg");var El=o(t=>{throw TypeError(t)},"__typeError"),Oi=o((t,e,r)=>e.has(t)||El("Cannot "+r),"__accessCheck"),P=o((t,e,r)=>(Oi(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),Lr=o((t,e,r)=>e.has(t)?El("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),Lt=o((t,e,r,n)=>(Oi(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),"__privateSet"),st=o((t,e,r)=>(Oi(t,e,"access private method"),r),"__privateMethod"),Fr,$r,Vt,R,ze,no,Ai,vi,ki;function xl(t,e=1/0){let r={$kind:"Result",Result:t},n=[],i=o(s=>n[s]??(n[s]={$kind:"NestedResult",NestedResult:[t,s]}),"nestedResultFor");return new Proxy(r,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(s,l){if(l in s)return Reflect.get(s,l);if(l===Symbol.iterator)return function*(){let m=0;for(;m<e;)yield i(m),m++};if(typeof l=="symbol")return;let u=parseInt(l,10);if(!(Number.isNaN(u)||u<0))return i(u)}})}o(xl,"createTransactionResult");var vl=Symbol.for("@mysten/transaction");function oo(t){return!!t&&typeof t=="object"&&t[vl]===!0}o(oo,"isTransaction");var Tl={buildPlugins:new Map,serializationPlugins:new Map},Ei=Symbol.for("@mysten/transaction/registry");function Vr(){try{let t=globalThis;return t[Ei]||(t[Ei]=Tl),t[Ei]}catch{return Tl}}o(Vr,"getGlobalPluginRegistry");var df=class Ii{static{o(this,"_Transaction")}constructor(){Lr(this,ze),Lr(this,Fr),Lr(this,$r),Lr(this,Vt,new Map),Lr(this,R),this.object=yl(r=>{if(typeof r=="function")return this.object(r(this));if(typeof r=="object"&&xr(q,r))return r;let n=Ti(r),i=P(this,R).inputs.find(s=>n===Ti(s));return i?.Object?.SharedObject&&typeof r=="object"&&r.Object?.SharedObject&&(i.Object.SharedObject.mutable=i.Object.SharedObject.mutable||r.Object.SharedObject.mutable),i?{$kind:"Input",Input:P(this,R).inputs.indexOf(i),type:"object"}:P(this,R).addInput("object",typeof r=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:B(r)}}:r)});let e=Vr();Lt(this,R,new Et),Lt(this,$r,[...e.buildPlugins.values()]),Lt(this,Fr,[...e.serializationPlugins.values()])}static fromKind(e){let r=new Ii;return Lt(r,R,Et.fromKindBytes(typeof e=="string"?he(e):e)),r}static from(e){let r=new Ii;return oo(e)?Lt(r,R,new Et(e.getData())):typeof e!="string"||!e.startsWith("{")?Lt(r,R,Et.fromBytes(typeof e=="string"?he(e):e)):Lt(r,R,Et.restore(JSON.parse(e))),r}static registerGlobalSerializationPlugin(e,r){Vr().serializationPlugins.set(e,r??e)}static unregisterGlobalSerializationPlugin(e){Vr().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,r){Vr().buildPlugins.set(e,r??e)}static unregisterGlobalBuildPlugin(e){Vr().buildPlugins.delete(e)}addSerializationPlugin(e){P(this,Fr).push(e)}addBuildPlugin(e){P(this,$r).push(e)}addIntentResolver(e,r){if(P(this,Vt).has(e)&&P(this,Vt).get(e)!==r)throw new Error(`Intent resolver for ${e} already exists`);P(this,Vt).set(e,r)}setSender(e){P(this,R).sender=e}setSenderIfNotSet(e){P(this,R).sender||(P(this,R).sender=e)}setExpiration(e){P(this,R).expiration=e?z(Si,e):null}setGasPrice(e){P(this,R).gasConfig.price=String(e)}setGasBudget(e){P(this,R).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){P(this,R).gasData.budget==null&&(P(this,R).gasConfig.budget=String(e))}setGasOwner(e){P(this,R).gasConfig.owner=e}setGasPayment(e){P(this,R).gasConfig.payment=e.map(r=>z(Fe,r))}get blockData(){return xi(P(this,R).snapshot())}getData(){return P(this,R).snapshot()}get[vl](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:Sl(e=>hr(e)?P(this,R).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):P(this,R).addInput("pure",xr(yi,e)?z(yi,e):e instanceof Uint8Array?Ve.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(Ve.ObjectRef(...e))}receivingRef(...e){return this.object(Ve.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(Ve.SharedObjectRef(...e))}add(e){if(typeof e=="function")return e(this);let r=P(this,R).commands.push(e);return xl(r-1)}splitCoins(e,r){let n=Tt.SplitCoins(typeof e=="string"?this.object(e):st(this,ze,Ai).call(this,e),r.map(s=>typeof s=="number"||typeof s=="bigint"||typeof s=="string"?this.pure.u64(s):st(this,ze,no).call(this,s))),i=P(this,R).commands.push(n);return xl(i-1,r.length)}mergeCoins(e,r){return this.add(Tt.MergeCoins(this.object(e),r.map(n=>this.object(n))))}publish({modules:e,dependencies:r}){return this.add(Tt.Publish({modules:e,dependencies:r}))}upgrade({modules:e,dependencies:r,package:n,ticket:i}){return this.add(Tt.Upgrade({modules:e,dependencies:r,package:n,ticket:this.object(i)}))}moveCall({arguments:e,...r}){return this.add(Tt.MoveCall({...r,arguments:e?.map(n=>st(this,ze,no).call(this,n))}))}transferObjects(e,r){return this.add(Tt.TransferObjects(e.map(n=>this.object(n)),typeof r=="string"?this.pure.address(r):st(this,ze,no).call(this,r)))}makeMoveVec({type:e,elements:r}){return this.add(Tt.MakeMoveVec({type:e,elements:r.map(n=>this.object(n))}))}serialize(){return JSON.stringify(xi(P(this,R).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(z(hl,P(this,R).snapshot()),(r,n)=>typeof n=="bigint"?n.toString():n,2)}async sign(e){let{signer:r,...n}=e,i=await this.build(n);return r.signTransaction(i)}async build(e={}){return await this.prepareForSerialization(e),await st(this,ze,vi).call(this,e),P(this,R).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await st(this,ze,vi).call(this,e),P(this,R).getDigest()}async prepareForSerialization(e){let r=new Set;for(let i of P(this,R).commands)i.$Intent&&r.add(i.$Intent.name);let n=[...P(this,Fr)];for(let i of r)if(!e.supportedIntents?.includes(i)){if(!P(this,Vt).has(i))throw new Error(`Missing intent resolver for ${i}`);n.push(P(this,Vt).get(i))}await st(this,ze,ki).call(this,n,e)}};Fr=new WeakMap;$r=new WeakMap;Vt=new WeakMap;R=new WeakMap;ze=new WeakSet;no=o(function(t){return hr(t)?this.pure(t):st(this,ze,Ai).call(this,t)},"normalizeTransactionArgument_fn");Ai=o(function(t){return typeof t=="function"?z(q,t(this)):z(q,t)},"resolveArgument_fn");vi=o(async function(t){if(!t.onlyTransactionKind&&!P(this,R).sender)throw new Error("Missing transaction sender");await st(this,ze,ki).call(this,[...P(this,$r),bl],t)},"prepareBuild_fn");ki=o(async function(t,e){let r=o(n=>{if(n>=t.length)return()=>{};let i=t[n];return async()=>{let s=r(n+1),l=!1,u=!1;if(await i(P(this,R),e,async()=>{if(l)throw new Error(`next() was call multiple times in TransactionPlugin ${n}`);l=!0,await s(),u=!0}),!l)throw new Error(`next() was not called in TransactionPlugin ${n}`);if(!u)throw new Error(`next() was not awaited in TransactionPlugin ${n}`)}},"createNext");await r(0)()},"runPlugins_fn");var Mi=df;var mf=Symbol.for("@mysten/SuiClient");var zr=class{static{o(this,"SuiClient")}get[mf](){return!0}constructor(e){this.transport=e.transport??new _n({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!Ie(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!Ie(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!Ie(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!Ie(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,r){return await this.transport.request({method:e,params:r})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!Ie(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!gr(xe(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach(n=>{if(!n||!gr(xe(n)))throw new Error(`Invalid Sui Object id ${n}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"]})}async getTransactionBlock(e){if(!Kn(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach(n=>{if(!Kn(n))throw new Error(`Invalid Transaction digest ${n}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock({transactionBlock:e,signature:r,options:n,requestType:i}){let s=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e=="string"?e:X(e),Array.isArray(r)?r:[r],n]});if(i==="WaitForLocalExecution")try{await this.waitForTransaction({digest:s.digest})}catch{}return s}async signAndExecuteTransaction({transaction:e,signer:r,...n}){let i;e instanceof Uint8Array?i=e:(e.setSenderIfNotSet(r.toSuiAddress()),i=await e.build({client:this}));let{signature:s,bytes:l}=await r.signTransaction(i);return this.executeTransactionBlock({transactionBlock:l,signature:s,...n})}async getTotalTransactionBlocks(){let e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){let e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!Ie(B(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach(r=>{if(!r||!gr(xe(r)))throw new Error(`Invalid Sui Stake id ${r}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){let r;if(oo(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),r=X(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")r=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)r=X(e.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,r,e.gasPrice?.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:X(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!gr(xe(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){let e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e?.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e?.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e?.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){let e=await this.getCheckpoint({id:"0"}),r=_e(e.digest);return Qe(r.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames({format:e="dot",...r}){let{nextCursor:n,hasNextPage:i,data:s}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[r.address,r.cursor,r.limit]});return{hasNextPage:i,nextCursor:n,data:s.map(l=>Wc(l,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e?.version]})}async waitForTransaction({signal:e,timeout:r=60*1e3,pollInterval:n=2*1e3,...i}){let s=AbortSignal.timeout(r),l=new Promise((u,m)=>{s.addEventListener("abort",()=>m(s.reason))});for(l.catch(()=>{});!s.aborted;){e?.throwIfAborted();try{return await this.getTransactionBlock(i)}catch{await Promise.race([new Promise(m=>setTimeout(m,n)),l])}}throw s.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}};var Il=o(async({chain:t,owner:e,chainData:r},{recipient:n})=>{let i=t.id,{objectId:s}=r,l=V.getRpcProxyUrl(i);if(!s)throw new Error("Unable to determine object id for collectible");if(!e)throw new Error("Unable to determine owner for collectible");if(!l)throw new Error("Failed to get Sui RPC url");let u=new zr({url:l}),m=new Mi;m.setSender(e),m.transferObjects([s],n);let p=await m.build({client:u});return{networkID:i,transaction:p}},"createSuiTransferTransaction");async function Ol(t,e,r){let{chain:n}=t,i=n.id;return V.isSolanaNetworkID(i)?Tc(t,e):V.isEVMNetworkID(i)?yc(t,e):V.isSuiNetworkID(i)?Il(t,e):V.isBitcoinNetworkID(i)?pc(t,e,r):$i(i)}o(Ol,"createTransferTransaction");var pf="collectible-transfer-tx",ff=re({seconds:30});function hf(t){return t&&!t.isNaN()}o(hf,"isValidAmountFn");function gf(t){let{collectible:e,sendFormValues:r}=t??{},{chain:n,owner:i}=e??{},{id:s}=n??{},{recipient:l,amountAsset:u}=r??{},m=Gs(l,s)??"",p=u?.isNaN()?void 0:u,f=hf(p),{data:b}=en({address:i,networkID:s}),{data:y}=$s(b),{data:C}=_s({networkID:s,enableFallback:!0}),S=bf(s,C,y,b),w=S?.sendContextRequired?S.sendContext:void 0;return ke({staleTime:ff,enabled:f&&!!e&&!!t&&!!S,queryKey:H.transferTransaction({collectible:e,sendFormValues:r,sendContext:w}),async queryFn(){try{if(!e||!r||!S)throw new Error("Missing required data to construct fungible transfer transaction");return await Ol(e,{...r,recipient:m},w)}catch(E){if(dt(E)){let D=E.response?.status;pt(E,D,pf)}throw E}}})}o(gf,"useCollectibleTransferTransaction");function bf(t,e,r,n){if(t)return V.isBitcoinNetworkID(t)?!e||!r||!n?void 0:{sendContextRequired:!0,sendContext:{transactionSpeedsToUnitCost:e,utxoState:r,chainAddress:n}}:{sendContextRequired:!1}}o(bf,"createSendContext");a();c();var Al=v(k(),1);function Di(t){let e=vn(Y.PinnedCollections);return{data:(0,Al.useMemo)(()=>t?e?.[t]??[]:[],[t,e]),isPending:!!t&&e===void 0}}o(Di,"usePinnedCollections");a();c();var kl=v(k(),1);function Ml(t){let{data:e,isPending:r}=me(t);return{data:(0,kl.useMemo)(()=>t?Array.from(e.values()).filter(i=>pn(i,{spamStatus:Me.NotVerified})).map(({id:i})=>i):[],[t,e]),isPending:r}}o(Ml,"useHiddenCollections");a();c();var Dl=v(k(),1);var yf=o(t=>{let e=de();return(0,Dl.useCallback)(()=>e.invalidateQueries({queryKey:H.collections(t)}),[e,t])},"useInvalidateCollectibles");a();c();var Bl=v(k(),1);var Sf=2e3,io=class extends He{static{o(this,"UsePinCollectionError")}constructor(e){super(e),this.name="UsePinCollectionError"}};function Ul(t){let e=de();return(0,Bl.useCallback)(async({collectionId:r,pinned:n})=>{if(!t)return;let i=await En(Y.PinnedCollections)??{},s=i[t]??[];if(n){if(Object.values(i).reduce((m,p)=>m+p.length,0)+1>Sf)throw new io("Pinned limit reached");i[t]=Array.from(new Set([...s,r]))}else{let u=s.indexOf(r);if(u===-1)throw new io("Collection not previously pinned");let m=[...s];m.splice(u,1),i[t]=m}await Tn(Y.PinnedCollections)(i),await e.invalidateQueries({queryKey:H.pinnedCollections(t)})},[t,e])}o(Ul,"usePinCollection");a();c();var Pl=v(k(),1);var Cf=o(t=>{let e=de();return(0,Pl.useCallback)(()=>e.refetchQueries({queryKey:H.collections(t)}),[e,t])},"useRefetchCollectibles");a();c();a();c();var wf=new Error("Failed to report event for collectible");async function Rl(t){try{let e=await Ae.api().post("/collectibles/v1/events",{events:t});if(!Vi(e))throw new Error}catch{throw wf}}o(Rl,"reportCollectibleEvent");function xf(){return Yr({async mutationFn({event:t}){try{await Rl([t])}catch{}}})}o(xf,"useReportCollectibleEvent");a();c();function Tf(){let{data:t}=rs(),e=Wt(),r=de(),n=Fs(),i=Qt();return Yr({mutationFn:o(async({multichainTransaction:l,pendingTransactionInput:u,senderAddress:m,optimisticUpdate:p,gasEstimation:f})=>{if(!t)throw new Error("No account identifier found");let{networkID:b}=l,y=await ln.get(b).onBeforeSend({multichainTransaction:l,gasEstimation:f}),C=await vs({accountIdentifier:t,accountSigner:i,multichainTransaction:y,networkID:b,pendingTransactionInput:u,senderAddress:m,storage:e,utxoManager:n});return p&&or(r,p),Es(b,C)},"mutationFn"),onError(l){l instanceof Error&&Se.captureError(l,Ee.Collectibles)}})}o(Tf,"useTransferCollectible");a();c();var jl=v(k(),1);function _l(t){let{data:e,isPending:r}=me(t);return{data:(0,jl.useMemo)(()=>t?Array.from(e.values()).filter(i=>As(i,{spamStatus:Me.NotVerified})).map(({id:i})=>i):[],[t,e]),isPending:r}}o(_l,"useUnhiddenCollections");a();c();var Nl=v(k(),1);var Bi=class extends lr{static{o(this,"UseUnhideCollectionError")}constructor(e){super(e),this.name="UseUnhideCollectionError"}};function Ll(t){let e=In(t);return(0,Nl.useCallback)(async({collectionId:r})=>{try{await e([{id:r,visibility:$.Visible}],{checkLimit:!0})}catch(n){throw n instanceof lr?new Bi(n.message):n}},[e])}o(Ll,"useUnhideCollection");a();c();var Vl=v(k(),1);var Ef=o(({id:t,addresses:e})=>{let{data:r,isSuccess:n}=kt({addresses:e});return(0,Vl.useMemo)(()=>{let i={isSuccess:n,data:void 0};for(let s of r??[])for(let l of s.items)if(l.id===t)return{...i,data:l};return i},[t,r,n])},"useCollectible");a();c();var Ft=v(k(),1);a();c();var Ui=v(k(),1);var Fl=o(({toast:t,accountId:e})=>{let{t:r}=Z(),n=fe(),i=(0,Ui.useCallback)(({collectible:l,previousVisibility:u,updatedVisibility:m})=>{m!==null&&n.capture("collectiblesReportAsNotSpam",{data:ht(l)}),t.success(u===$.Visible?r("collectiblesNotSpamSuccess"):r("collectiblesNotSpamAndUnhiddenSuccess"))},[r,t,n]),s=(0,Ui.useCallback)((l,u)=>{t.error(r("collectiblesNotSpamFail"))},[r,t]);return va({accountId:e,onSuccess:i,onError:s})},"useReportNotSpam");a();c();var Pi=v(k(),1);var $l=o(({toast:t,accountId:e})=>{let{t:r}=Z(),n=fe(),i=(0,Pi.useCallback)(({collectible:l,previousVisibility:u,updatedVisibility:m})=>{m!==null&&n.capture("collectiblesReportAsSpam",{data:ht(l)}),t.success(u===$.Hidden?r("collectiblesSpamSuccess"):r("collectiblesSpamAndHiddenSuccess"))},[r,t,n]),s=(0,Pi.useCallback)((l,u)=>{t.error(r("collectiblesSpamFail"))},[r,t]);return Ea({accountId:e,onSuccess:i,onError:s})},"useReportSpam");function vf({accountId:t,collectible:e,toast:r}){let n=$l({collectible:e,accountId:t,toast:r}),i=(0,Ft.useCallback)(()=>{if(e)return n(e)},[n,e]),s=Fl({collectible:e,accountId:t,toast:r}),l=(0,Ft.useCallback)(()=>{if(e)return s(e)},[s,e]),{data:u}=me(t),m=(0,Ft.useMemo)(()=>u.get(e?.collection.id??e?.id??""),[u,e]),p=(0,Ft.useMemo)(()=>e?Os(m,{spamStatus:e.collection.spamStatus}):Me.NotVerified,[e,m]),f=Er(p);return(0,Ft.useMemo)(()=>({isSpam:f,spamStatus:p,onReportSpam:f?void 0:i,onReportNotSpam:f?l:void 0}),[p,f,i,l])}o(vf,"useCollectiblesReportSpam");a();c();var zl=v(lo(),1),Gl=v(k(),1);a();c();var so=o((t,e)=>{let r=new vt(t);if(r.isZero())return"0";let n=on(-e);return r.abs().lt(n)?r.isPositive()?`<${n.toFixed()}`:`-<${n.toFixed()}`:parseFloat(r.toString()).toLocaleString("en-US",{maximumFractionDigits:e})},"formatValue");var If=o(t=>{let{t:e}=Z();return(0,Gl.useMemo)(()=>{let r=[];if(!t)return r;let n=t?.chain.id,i=Bt.get(n).collectibleDetailPrecision;t.collection.name&&r.push({topLeft:e("collectibleScreenCollectionLabel"),topRight:t.collection.name});let s,l;if(t.collection.floorPrice){let{price:p,token:f}=t.collection.floorPrice;if(f&&f.decimals&&f.symbol){let{decimals:b,symbol:y}=f,C=sr(p,b);r.push({topLeft:e("collectiblesFloorPrice"),topRight:`${so(C,i)} ${y}`}),s=C,l=y}}let u,m;if(t.lastSalePrice){let{price:p,token:f}=t.lastSalePrice;if(f&&f.decimals&&(f.symbol||f.name)){let{decimals:b,symbol:y,name:C}=f,S=sr(p,b);r.push({topLeft:e("collectiblesLastSalePrice"),topRight:`${so(S,i)} ${y??C}`}),u=S,m=y}}if(s&&u&&l===m){let p=s-u;r.push({topLeft:e("collectiblesTotalReturn"),topRight:{text:`${so(p,i)} ${m}`,color:p>0?"spotPositive":p===0?void 0:"spotNegative"}})}return t.collection.ownerCount&&r.push({topLeft:e("collectiblesUniqueHolders"),topRight:(0,zl.default)(t.collection.ownerCount).format("0,0")}),t.chain.name&&r.push({topLeft:e("sendFungibleSummaryNetwork"),topRight:V.getNetworkName(t.chain.id)}),qr()&&r.push({topLeft:"Standard",topRight:Of(t)}),Ds(t)&&r.push({topLeft:e("collectiblesNonTransferable"),topRight:e("collectiblesNonTransferableYes")}),r},[t,e])},"useCollectibleTableRows");function Of(t){let e=t.chainData;if(ce(e))return e.standard;if(qe(e))return e.standard;if(Ke(e))return"Ordinals"}o(Of,"getStandard");a();c();var Hl=v(k(),1);var Af=o(({id:t,addresses:e})=>{let{data:r}=kt({addresses:e});return(0,Hl.useMemo)(()=>(r??[]).find(n=>n.id===t),[t,r])},"useCollection");a();c();var ql=v(k(),1);var Kl=o((t,e,r,n)=>(0,ql.useMemo)(()=>e.includes(r)?!1:t.includes(r)?!0:!!n,[t,e,r,n]),"useIsCollectionHidden");a();c();var Wl=v(k(),1);var Ri=o((t,e)=>(0,Wl.useMemo)(()=>e?t.includes(e):!1,[e,t]),"useIsCollectionPinned");a();c();var Gr=v(k(),1);a();c();var Ql=v(k(),1);var Xl=o(({accountId:t,collectionId:e,isPinned:r,pinMessages:n,pinCollection:i,toast:s,sendAnalyticEvent:l,unhideCollection:u,isHidden:m})=>(0,Ql.useCallback)(()=>{(async()=>{if(!e||!t){s.error(r?n.unpinFail:n.pinFail);return}try{await i({collectionId:e,pinned:!r}),m&&!r&&await u({collectionId:e}),s.success(r?n.unpinSuccess:n.pinSuccess),l&&l(r?"collectionUnpinned":"collectionPinned")}catch{s.error(r?n.unpinFail:n.pinFail)}})()},[e,t,r,n,i,s,l,u,m]),"usePinCollectionToggle");var kf=o(({collectionId:t,isSpam:e,accountId:r,networkId:n,toast:i})=>{let{t:s}=Z(),l=fe(),u=Ll(r),{data:m=[]}=Ml(r),{data:p=[]}=_l(r),f=Kl(m,p,t??"",!!e),b=Ul(r),{data:y}=Di(r),C=Ri(y,t??""),S=(0,Gr.useMemo)(()=>({pinSuccess:s("collectionPinSuccess"),pinFail:s("collectionPinFail"),unpinSuccess:s("collectionUnpinSuccess"),unpinFail:s("collectionUnpinFail")}),[s]),w=(0,Gr.useCallback)(D=>{n&&l.capture(D,{data:{networkId:n,chainId:V.getChainID(n)}})},[l,n]),E=Xl({accountId:r,collectionId:t,isPinned:C,pinMessages:S,pinCollection:b,toast:i,sendAnalyticEvent:w,unhideCollection:u,isHidden:f});return(0,Gr.useMemo)(()=>({isPinned:C,onTogglePin:E}),[C,E])},"usePinCollectionProps");a();c();var Hr=v(k(),1);var Ye;(function(t){t.SUCCESS="SUCCESS",t.ERROR="ERROR",t.LOADING="LOADING"})(Ye||(Ye={}));var Mf=o(({networkID:t,isTxError:e,isTxConfirmed:r,isTxSubmitted:n})=>{let i=Bt.get(t).sendSuccessCondition,s=(0,Hr.useMemo)(()=>e?Ye.ERROR:i===we.SUBMISSION&&n||i===we.CONFIRMATION&&r?Ye.SUCCESS:Ye.LOADING,[r,e,n,i]),l=i===we.CONFIRMATION?"sendStatusConfirmedSuccessTitle":"sendStatusSubmittedSuccessTitle",u=(0,Hr.useMemo)(()=>{switch(s){case Ye.LOADING:return ve.t("sendStatusLoadingTitle");case Ye.ERROR:return ve.t("sendStatusErrorTitle");case Ye.SUCCESS:return ve.t(l)}},[s,l]),{isError:m,isSuccess:p}=(0,Hr.useMemo)(()=>({isError:s===Ye.ERROR,isSuccess:s===Ye.SUCCESS}),[s]),{transactionSpeed:f=Yt.standard}=Ao(y=>y.sendFormValues),b=(0,Hr.useMemo)(()=>{let y=ln.get(t).transactionSpeedDescription(f);return y?ve.t(y):""},[t,f]);return{title:u,isError:m,isSuccess:p,sendSuccessCondition:i,estimatedTime:b}},"useSendCollectibleStatusViewState");a();c();var Yl=v(k(),1);var Df=!1,Bf="small",Uf="image",Pf=o(t=>(0,Yl.useMemo)(()=>Jl(t),[t]),"useCollectionMediaUri"),Jl=o((t,e=Bf)=>{if(!t)return;let{media:r,collection:n}=t,i=Df,s=Uf;return r?Mn({collectibleMedia:r,isImageAnimationEnabled:i,previewSize:e,mediaTypeOverride:s}):n.imageUrl},"parseCollectionMediaUri");a();c();var Zl=v(k(),1);var eu=o(t=>{let{items:e}=t;if(e.length!==0)return e.find(({media:r})=>r?.type==="image")},"findFirstImageCollectible"),Rf=o(t=>(0,Zl.useMemo)(()=>{if(t)return eu(t)??t.items[0]},[t]),"useCollectionCollectible");a();c();var tu=v(k(),1);var jf=o(t=>(0,tu.useMemo)(()=>{if(!(!t||t.items.length===0))return ru(t)},[t]),"useCollectionItemsCount"),ru=o(t=>{let{items:e}=t,{length:r}=e;if(r===1){let[{balance:n="",chainData:i}]=e;if(ce(i)&&i.standard===Ot.SemiFungible){let s=parseInt(n,10);return isNaN(s)?1:s}}return r},"parseCollectionItemsCount");a();c();var nu=v(k(),1);var _f=o(t=>(0,nu.useMemo)(()=>t.filter(e=>e?.media?.type==="image"),[t]),"useOnlyImageCollectibles");a();c();var ou=v(k(),1);var Nf=o((t,e)=>(0,ou.useMemo)(()=>{if(!t||!e)return;let r=t.chain.id,n=e.explorers[r]??ns.get(r).defaultExplorer,i,s;if(ce(t.chainData))s="address",i=t.chainData.mint;else if(qe(t.chainData))if(t.chainData.contract)t.chainData.id?(s="nft",i=[t.chainData.contract,t.chainData.id]):(s="token",i=t.chainData.contract);else return;else if(Ke(t.chainData))if(nr(t.chainData)){let{hash:u,index:m}=t.chainData.utxoDetails;s="transaction",i=`${u}#flow=&vout=${m}`}else return{name:"Ordinals",url:`https://ordinals.com/inscription/${t.chainData.firstCreatedInscriptionId}`};else if(Js(t.chainData))s="nft",i=t.chainData.objectId??"";else throw new Error(`Unhandled collectible explorer for chain id: ${t.chain.id}`);if(!i)return;let l=is({networkID:r,endpoint:s,explorerType:n,param:i});if(l)return{name:os[n],url:l}},[t,e]),"useCollectibleExplorer");a();c();var iu=v(k(),1);var Lf=o(t=>(0,iu.useMemo)(()=>{let e=new Set;return t.filter(r=>{if(!r?.media?.image?.url)return!1;let{url:n}=r.media.image;return e.has(n)?!1:(e.add(n),!0)})},[t]),"useDedupeCollectibles");a();c();a();c();function su(t,e,r){let n="...",i=e+r+n.length;if(t.length<=i)return t;let s=t.substring(0,e),l=t.substring(t.length-r);return`${s}${n}${l}`}o(su,"ellipsize");var au=v(k(),1);var Vf=o(t=>{let{t:e}=Z();return(0,au.useMemo)(()=>{let n=[];if(!t)return;let i=t.chainData;if(Ke(i)){let{outputValue:s,satNumber:l,satName:u,inscriptionId:m,inscriptionNumber:p,protocolName:f,createdAt:b,utxoDetails:y}=i,C=e(m?"collectibleDetailOrdinalInfo":"collectibleDetailRareSatsInfo"),S;return s?S=parseFloat(s).toLocaleString("en-US"):y&&(S=y.value.toLocaleString("en-US")),S&&n.push({topLeft:e("collectibleDetailSatsInUtxo"),topRight:e("collectibleDetailSatsInUtxoValue",{satsInUtxo:S})??void 0}),l&&n.push({topLeft:e("collectibleDetailSatNumber"),topRight:l}),u&&n.push({topLeft:e("collectibleDetailSatName"),topRight:u}),m&&n.push({topLeft:e("collectibleDetailInscriptionId"),topRight:su(m,5,3)}),p&&n.push({topLeft:e("collectibleDetailInscriptionNumber"),topRight:p}),f&&n.push({topLeft:e("collectibleDetailStandard"),topRight:f?.toUpperCase()}),b&&n.push({topLeft:e("collectibleDetailCreated"),topRight:Ff(new Date(b))}),{label:C,items:n.filter(Vs)}}},[t,e])},"useCollectibleChainSpecificInfoSection");function Ff(t){let e=t.toLocaleDateString(void 0,{month:"numeric",day:"numeric",year:"numeric"}),r=t.toLocaleTimeString();return`${e} ${r}`}o(Ff,"formatDate");a();c();var lu=v(k(),1);var $t=o(()=>{},"noop"),cu=new Map([["send",1],["list",2],["pin",3],["unpin",4],["share",5],["setAsAvatar",6],["saveToLibrary",7],["hide",8],["reportAsSpam",9],["reportAsNotSpam",10],["burnToken",11],["viewOnExplorer",12]]);function $f(t){let{amountToBurn:e=0,explorerName:r,isBurnable:n,isHidden:i,isPinned:s,isSpam:l,onBurnToken:u,onReportNotSpam:m,onReportSpam:p,onSaveToLibrary:f,onSend:b,onSetAsAvatar:y,onToggleHide:C,onTogglePin:S,onViewOnExplorer:w,shortcuts:E,shouldDisplaySend:D,shouldDisplayShortcuts:N}=t,{t:O}=Z();return(0,lu.useMemo)(()=>{let J=[];if(D&&J.push({text:O("commandSend"),type:"send",onClick:b??$t}),f&&J.push({text:O("assetDetailSavePhoto"),singleWordAltText:O("commandSave"),type:"saveToLibrary",menuOnly:!0,onClick:f??$t}),y&&!l&&J.push({text:O("collectibleDetailSetAsAvatar"),singleWordAltText:O("collectibleDetailSetAsAvatarSingleWorkAlt"),type:"setAsAvatar",menuOnly:!0,onClick:y??$t}),S){let te=O(s?"assetDetailUnpinCollection":"assetDetailPinCollection"),ye=O(s?"commandUnpin":"commandPin"),ne=s?"unpin":"pin";J.push({text:te,singleWordAltText:ye,type:ne,menuOnly:!0,onClick:S??$t})}if(C){let te=O(i?"assetDetailUnhideCollection":"assetDetailHideCollection"),ye=O(i?"commandUnhide":"commandHide"),ne=i?"unhide":"hide";J.push({text:te,singleWordAltText:ye,type:ne,menuOnly:!0,onClick:C??$t})}if(m){let te=O("collectiblesReportAsNotSpam");J.push({text:te,type:"reportAsNotSpam",singleWordAltText:O("collectiblesReportNotSpam"),menuOnly:!0,isDestructive:!0,onClick:m})}if(p){let te=O("collectiblesReportAsSpam");J.push({text:te,type:"reportAsSpam",singleWordAltText:O("commandReport"),menuOnly:!0,isDestructive:!0,onClick:p})}if(n){let te=O(e===1?"collectibleBurnTitleWithCount_one":"collectibleBurnTitleWithCount_other");J.push({text:te,singleWordAltText:O("commandBurn"),type:"burnToken",menuOnly:!0,isDestructive:!0,onClick:u??$t})}return!!w&&!!r&&J.push({text:O("assetDetailViewOnExplorer",{explorer:r}),singleWordAltText:O("commandView"),type:"viewOnExplorer",menuOnly:!0,onClick:w??$t}),J.sort((te,ye)=>(cu.get(te.type)??100)-(cu.get(ye.type)??100)),{actions:Us(J,4),shortcuts:N?E:[]}},[e,r,n,i,s,l,u,m,p,f,b,y,C,S,w,E,D,N,O])}o($f,"useCollectibleCTABar");export{Ce as a,Tu as b,Ks as c,we as d,Py as e,Ry as f,gn as g,dh as h,Ys as i,mh as j,Lu as k,bm as l,Xa as m,ce as n,qe as o,Ke as p,Js as q,nr as r,xm as s,Sc as t,gf as u,kt as v,Fd as w,Hu as x,qu as y,dg as z,ra as A,Jd as B,Zd as C,Ba as D,tm as E,Di as F,yf as G,Cf as H,xf as I,Tf as J,Ef as K,vf as L,If as M,Af as N,Ri as O,Sd as P,Id as Q,Od as R,jd as S,Nd as T,rm as U,im as V,kf as W,ja as X,sm as Y,Ao as Z,Mf as _,mm as $,pm as aa,Pf as ba,Rf as ca,jf as da,_f as ea,Nf as fa,Lf as ga,Vf as ha,$f as ia,fm as ja};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-M3IC3XCG.js.map
